/*! For license information please see main.9258d546.js.LICENSE.txt */
(()=>{var e={1698(e,t,n){"use strict";n.d(t,{A:()=>Qo});var r=n(5043),i=n(449),s=n(5288),a=(n(9243),{version:"0.18.5"}),o=1200,c=1252,l=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],u={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},h=function(e){-1!=l.indexOf(e)&&(c=u[0]=e)};var d=function(e){o=e,h(e)};function f(){d(1200),h(1252)}function p(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var m,g=function(e){return String.fromCharCode(e)},v=function(e){return String.fromCharCode(e)};var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function w(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0,c=0,l=0;l<e.length;)s=(n=e.charCodeAt(l++))>>2,a=(3&n)<<4|(r=e.charCodeAt(l++))>>4,o=(15&r)<<2|(i=e.charCodeAt(l++))>>6,c=63&i,isNaN(r)?o=c=64:isNaN(i)&&(c=64),t+=y.charAt(s)+y.charAt(a)+y.charAt(o)+y.charAt(c);return t}function b(e){var t="",n=0,r=0,i=0,s=0,a=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)n=y.indexOf(e.charAt(c++))<<2|(s=y.indexOf(e.charAt(c++)))>>4,t+=String.fromCharCode(n),r=(15&s)<<4|(a=y.indexOf(e.charAt(c++)))>>2,64!==a&&(t+=String.fromCharCode(r)),i=(3&a)<<6|(o=y.indexOf(e.charAt(c++))),64!==o&&(t+=String.fromCharCode(i));return t}var _=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),T=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(t){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function E(e){return _?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function S(e){return _?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var I=function(e){return _?T(e,"binary"):e.split("").map(function(e){return 255&e.charCodeAt(0)})};function A(e){if("undefined"===typeof ArrayBuffer)return I(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r!=e.length;++r)n[r]=255&e.charCodeAt(r);return t}function C(e){if(Array.isArray(e))return e.map(function(e){return String.fromCharCode(e)}).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}var k=_?function(e){return Buffer.concat(e.map(function(e){return Buffer.isBuffer(e)?e:T(e)}))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var r=new Uint8Array(n),i=0;for(t=0,n=0;t<e.length;n+=i,++t)if(i=e[t].length,e[t]instanceof Uint8Array)r.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";r.set(new Uint8Array(e[t]),n)}return r}return[].concat.apply([],e.map(function(e){return Array.isArray(e)?e:[].slice.call(e)}))};var N=/\u0000/g,x=/[\u0001-\u0006]/g;function D(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function R(e,t){var n=""+e;return n.length>=t?n:qe("0",t-n.length)+n}function P(e,t){var n=""+e;return n.length>=t?n:qe(" ",t-n.length)+n}function O(e,t){var n=""+e;return n.length>=t?n:n+qe(" ",t-n.length)}var M=Math.pow(2,32);function L(e,t){return e>M||e<-M?function(e,t){var n=""+Math.round(e);return n.length>=t?n:qe("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:qe("0",t-n.length)+n}(Math.round(e),t)}function F(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var V=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],U=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var j={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},B={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},z={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function W(e,t,n){for(var r=e<0?-1:1,i=e*r,s=0,a=1,o=0,c=1,l=0,u=0,h=Math.floor(i);l<t&&(o=(h=Math.floor(i))*a+s,u=h*l+c,!(i-h<5e-8));)i=1/(i-h),s=a,a=o,c=l,l=u;if(u>t&&(l>t?(u=c,o=s):(u=l,o=a)),!n)return[0,r*o,u];var d=Math.floor(r*o/u);return[d,r*o-d*u,u]}function H(e,t,n){if(e>2958465||e<0)return null;var r=0|e,i=Math.floor(86400*(e-r)),s=0,a=[],o={D:r,T:i,u:86400*(e-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(r+=1462),o.u>.9999&&(o.u=0,86400==++i&&(o.T=i=0,++r,++o.D)),60===r)a=n?[1317,10,29]:[1900,2,29],s=3;else if(0===r)a=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var c=new Date(1900,0,1);c.setDate(c.getDate()+r-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),r<60&&(s=(s+6)%7),n&&(s=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(c,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var q=new Date(1899,11,31,0,0,0),G=q.getTime(),K=new Date(1900,2,1,0,0,0);function Y(e,t){var n=e.getTime();return t?n-=1262304e5:e>=K&&(n+=864e5),(n-(G+6e4*(e.getTimezoneOffset()-q.getTimezoneOffset())))/864e5}function Q(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function X(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=Q(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=Q(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Q(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function J(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):X(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return we(14,Y(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Z(e,t,n,r){var i,s="",a=0,o=0,c=n.y,l=0;switch(e){case 98:c=n.y+543;case 121:switch(t.length){case 1:case 2:i=c%100,l=2;break;default:i=c%1e4,l=4}break;case 109:switch(t.length){case 1:case 2:i=n.m,l=t.length;break;case 3:return U[n.m-1][1];case 5:return U[n.m-1][0];default:return U[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:i=n.d,l=t.length;break;case 3:return V[n.q][0];default:return V[n.q][1]}break;case 104:switch(t.length){case 1:case 2:i=1+(n.H+11)%12,l=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:i=n.H,l=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:i=n.M,l=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=r>=2?3===r?1e3:100:1===r?10:1,(a=Math.round(o*(n.S+n.u)))>=60*o&&(a=0),"s"===t?0===a?"0":""+a/o:(s=R(a,2+r),"ss"===t?s.substr(0,2):"."+s.substr(2,t.length-1))):R(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":i=24*n.D+n.H;break;case"[m]":case"[mm]":i=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":i=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}l=3===t.length?1:2;break;case 101:i=c,l=1}return l>0?R(i,l):""}function ee(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var te=/%/g;function ne(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+ne(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),-1===(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).indexOf("e")){var a=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var re=/# (\?+)( ?)\/( ?)(\d+)/;var ie=/^#*0*\.([0#]+)/,se=/\).*[0#]/,ae=/\(###\) ###\\?-####/;function oe(e){for(var t,n="",r=0;r!=e.length;++r)switch(t=e.charCodeAt(r)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function ce(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function le(e,t){var n=e-Math.floor(e),r=Math.pow(10,t);return t<(""+Math.round(n*r)).length?0:Math.round(n*r)}function ue(e,t,n){if(40===e.charCodeAt(0)&&!t.match(se)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?ue("n",r,n):"("+ue("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return fe(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(te,""),i=t.length-r.length;return fe(e,r,n*Math.pow(10,2*i))+qe("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return ne(t,n);if(36===t.charCodeAt(0))return"$"+ue(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,a,o,c=Math.abs(n),l=n<0?"-":"";if(t.match(/^00+$/))return l+L(c,t.length);if(t.match(/^[#?]+$/))return"0"===(i=L(n,0))&&(i=""),i.length>t.length?i:oe(t.substr(0,t.length-i.length))+i;if(s=t.match(re))return function(e,t,n){var r=parseInt(e[4],10),i=Math.round(t*r),s=Math.floor(i/r),a=i-s*r,o=r;return n+(0===s?"":""+s)+" "+(0===a?qe(" ",e[1].length+1+e[4].length):P(a,e[1].length)+e[2]+"/"+e[3]+R(o,e[4].length))}(s,c,l);if(t.match(/^#+0+$/))return l+L(c,t.length-t.indexOf("0"));if(s=t.match(ie))return i=ce(n,s[1].length).replace(/^([^\.]+)$/,"$1."+oe(s[1])).replace(/\.$/,"."+oe(s[1])).replace(/\.(\d*)$/,function(e,t){return"."+t+qe("0",oe(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return l+ce(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return l+ee(L(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+ue(e,t,-n):ee(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,s[1].length)))+"."+R(le(n,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return ue(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=D(ue(e,t.replace(/[\\-]/g,""),n)),a=0,D(D(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return a<i.length?i.charAt(a++):"0"===e?"0":""}));if(t.match(ae))return"("+(i=ue(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=W(c,Math.pow(10,a)-1,!1),i=""+l," "==(u=fe("n",s[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=O(o[2],a)).length<s[4].length&&(u=oe(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),l+((o=W(c,Math.pow(10,a)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?P(o[1],a)+s[2]+"/"+s[3]+O(o[2],a):qe(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=L(n,0),t.length<=i.length?i:oe(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var h=t.indexOf(".")-a,d=t.length-i.length-h;return oe(t.substr(0,h)+i+t.substr(t.length-d))}if(s=t.match(/^00,000\.([#0]*0)$/))return a=le(n,s[1].length),n<0?"-"+ue(e,t,-n):ee(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?R(0,3-e.length):"")+e})+"."+R(a,s[1].length);switch(t){case"###,##0.00":return ue(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=ee(L(c,0));return"0"!==f?l+f:"";case"###,###.00":return ue(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return ue(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function he(e,t){var n,r=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+he(e,-t);var i=e.indexOf(".");-1===i&&(i=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%i;if(s<0&&(s+=i),!(n=(t/Math.pow(10,s)).toPrecision(r+1+(i+s)%i)).match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+s):n+="E+"+(a-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(e,t,n,r){return t+n+r.substr(0,(i+s)%i)+"."+r.substr(s)+"E"})}else n=t.toExponential(r);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function de(e,t,n){if(40===e.charCodeAt(0)&&!t.match(se)){var r=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?de("n",r,n):"("+de("n",r,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var r=t.length-1;44===t.charCodeAt(r-1);)--r;return fe(e,t.substr(0,r),n/Math.pow(10,3*(t.length-r)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var r=t.replace(te,""),i=t.length-r.length;return fe(e,r,n*Math.pow(10,2*i))+qe("%",i)}(e,t,n);if(-1!==t.indexOf("E"))return he(t,n);if(36===t.charCodeAt(0))return"$"+de(e,t.substr(" "==t.charAt(1)?2:1),n);var i,s,a,o,c=Math.abs(n),l=n<0?"-":"";if(t.match(/^00+$/))return l+R(c,t.length);if(t.match(/^[#?]+$/))return i=""+n,0===n&&(i=""),i.length>t.length?i:oe(t.substr(0,t.length-i.length))+i;if(s=t.match(re))return function(e,t,n){return n+(0===t?"":""+t)+qe(" ",e[1].length+2+e[4].length)}(s,c,l);if(t.match(/^#+0+$/))return l+R(c,t.length-t.indexOf("0"));if(s=t.match(ie))return i=(i=(""+n).replace(/^([^\.]+)$/,"$1."+oe(s[1])).replace(/\.$/,"."+oe(s[1]))).replace(/\.(\d*)$/,function(e,t){return"."+t+qe("0",oe(s[1]).length-t.length)}),-1!==t.indexOf("0.")?i:i.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return l+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return l+ee(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+de(e,t,-n):ee(""+n)+"."+qe("0",s[1].length);if(s=t.match(/^#,#*,#0/))return de(e,t.replace(/^#,#*,/,""),n);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return i=D(de(e,t.replace(/[\\-]/g,""),n)),a=0,D(D(t.replace(/\\/g,"")).replace(/[0#]/g,function(e){return a<i.length?i.charAt(a++):"0"===e?"0":""}));if(t.match(ae))return"("+(i=de(e,"##########",n)).substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=W(c,Math.pow(10,a)-1,!1),i=""+l," "==(u=fe("n",s[1],o[1])).charAt(u.length-1)&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],(u=O(o[2],a)).length<s[4].length&&(u=oe(s[4].substr(s[4].length-u.length))+u),i+=u;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),l+((o=W(c,Math.pow(10,a)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?P(o[1],a)+s[2]+"/"+s[3]+O(o[2],a):qe(" ",2*a+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return i=""+n,t.length<=i.length?i:oe(t.substr(0,t.length-i.length))+i;if(s=t.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var h=t.indexOf(".")-a,d=t.length-i.length-h;return oe(t.substr(0,h)+i+t.substr(t.length-d))}if(s=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+de(e,t,-n):ee(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(e){return"00,"+(e.length<3?R(0,3-e.length):"")+e})+"."+R(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=ee(""+c);return"0"!==f?l+f:"";default:if(t.match(/\.[0#?]*$/))return de(e,t.slice(0,t.lastIndexOf(".")),n)+oe(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function fe(e,t,n){return(0|n)===n?de(e,t,n):ue(e,t,n)}var pe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function me(e){for(var t=0,n="",r="";t<e.length;)switch(n=e.charAt(t)){case"G":F(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(r=n;"]"!==e.charAt(t++)&&t<e.length;)r+=e.charAt(t);if(r.match(pe))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var ge=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function ve(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function ye(e,t){var n=function(e){for(var t=[],n=!1,r=0,i=0;r<e.length;++r)switch(e.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:t[t.length]=e.substr(i,r-i),i=r+1}if(t[t.length]=e.substr(i),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var s=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[r,s];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var a=n[0].match(ge),o=n[1].match(ge);return ve(t,a)?[r,n[0]]:ve(t,o)?[r,n[1]]:[r,n[null!=a&&null!=o?2:1]]}return[r,s]}function we(e,t,n){null==n&&(n={});var r="";switch(typeof e){case"string":r="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(r=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:j)[e])&&(r=n.table&&n.table[B[e]]||j[B[e]]),null==r&&(r=z[e]||"General")}if(F(r,0))return J(t,n);t instanceof Date&&(t=Y(t,n.date1904));var i=ye(r,t);if(F(i[1]))return J(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,r){for(var i,s,a,o=[],c="",l=0,u="",h="t",d="H";l<e.length;)switch(u=e.charAt(l)){case"G":if(!F(e,l))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"G",v:"General"},l+=7;break;case'"':for(c="";34!==(a=e.charCodeAt(++l))&&l<e.length;)c+=String.fromCharCode(a);o[o.length]={t:"t",v:c},++l;break;case"\\":var f=e.charAt(++l),p="("===f||")"===f?f:"t";o[o.length]={t:p,v:f},++l;break;case"_":o[o.length]={t:"t",v:" "},l+=2;break;case"@":o[o.length]={t:"T",v:t},++l;break;case"B":case"b":if("1"===e.charAt(l+1)||"2"===e.charAt(l+1)){if(null==i&&null==(i=H(t,n,"2"===e.charAt(l+1))))return"";o[o.length]={t:"X",v:e.substr(l,2)},h=u,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==i&&null==(i=H(t,n)))return"";for(c=u;++l<e.length&&e.charAt(l).toLowerCase()===u;)c+=u;"m"===u&&"h"===h.toLowerCase()&&(u="M"),"h"===u&&(u=d),o[o.length]={t:u,v:c},h=u;break;case"A":case"a":case"\u4e0a":var m={t:u,v:u};if(null==i&&(i=H(t,n)),"A/P"===e.substr(l,3).toUpperCase()?(null!=i&&(m.v=i.H>=12?"P":"A"),m.t="T",d="h",l+=3):"AM/PM"===e.substr(l,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"PM":"AM"),m.t="T",l+=5,d="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(l,5).toUpperCase()?(null!=i&&(m.v=i.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",l+=5,d="h"):(m.t="t",++l),null==i&&"T"===m.t)return"";o[o.length]=m,h=u;break;case"[":for(c=u;"]"!==e.charAt(l++)&&l<e.length;)c+=e.charAt(l);if("]"!==c.slice(-1))throw'unterminated "[" block: |'+c+"|";if(c.match(pe)){if(null==i&&null==(i=H(t,n)))return"";o[o.length]={t:"Z",v:c.toLowerCase()},h=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",me(e)||(o[o.length]={t:"t",v:c}));break;case".":if(null!=i){for(c=u;++l<e.length&&"0"===(u=e.charAt(l));)c+=u;o[o.length]={t:"s",v:c};break}case"0":case"#":for(c=u;++l<e.length&&"0#?.,E+-%".indexOf(u=e.charAt(l))>-1;)c+=u;o[o.length]={t:"n",v:c};break;case"?":for(c=u;e.charAt(++l)===u;)c+=u;o[o.length]={t:u,v:c},h=u;break;case"*":++l," "!=e.charAt(l)&&"*"!=e.charAt(l)||++l;break;case"(":case")":o[o.length]={t:1===r?"t":u,v:u},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=u;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)c+=e.charAt(l);o[o.length]={t:"D",v:c};break;case" ":o[o.length]={t:u,v:u},++l;break;case"$":o[o.length]={t:"t",v:"$"},++l;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(u))throw new Error("unrecognized character "+u+" in "+e);o[o.length]={t:"t",v:u},++l}var g,v=0,y=0;for(l=o.length-1,h="t";l>=0;--l)switch(o[l].t){case"h":case"H":o[l].t=d,h="h",v<1&&(v=1);break;case"s":(g=o[l].v.match(/\.0+$/))&&(y=Math.max(y,g[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":h=o[l].t;break;case"m":"s"===h&&(o[l].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&o[l].v.match(/[Hh]/)&&(v=1),v<2&&o[l].v.match(/[Mm]/)&&(v=2),v<3&&o[l].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M),i.M>=60&&(i.M=0,++i.H);break;case 2:i.u>=.5&&(i.u=0,++i.S),i.S>=60&&(i.S=0,++i.M)}var w,b="";for(l=0;l<o.length;++l)switch(o[l].t){case"t":case"T":case" ":case"D":break;case"X":o[l].v="",o[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[l].v=Z(o[l].t.charCodeAt(0),o[l].v,i,y),o[l].t="t";break;case"n":case"?":for(w=l+1;null!=o[w]&&("?"===(u=o[w].t)||"D"===u||(" "===u||"t"===u)&&null!=o[w+1]&&("?"===o[w+1].t||"t"===o[w+1].t&&"/"===o[w+1].v)||"("===o[l].t&&(" "===u||"n"===u||")"===u)||"t"===u&&("/"===o[w].v||" "===o[w].v&&null!=o[w+1]&&"?"==o[w+1].t));)o[l].v+=o[w].v,o[w]={v:"",t:";"},++w;b+=o[l].v,l=w-1;break;case"G":o[l].t="t",o[l].v=J(t,n)}var _,T,E="";if(b.length>0){40==b.charCodeAt(0)?(_=t<0&&45===b.charCodeAt(0)?-t:t,T=fe("n",b,_)):(T=fe("n",b,_=t<0&&r>1?-t:t),_<0&&o[0]&&"t"==o[0].t&&(T=T.substr(1),o[0].v="-"+o[0].v)),w=T.length-1;var S=o.length;for(l=0;l<o.length;++l)if(null!=o[l]&&"t"!=o[l].t&&o[l].v.indexOf(".")>-1){S=l;break}var I=o.length;if(S===o.length&&-1===T.indexOf("E")){for(l=o.length-1;l>=0;--l)null!=o[l]&&-1!=="n?".indexOf(o[l].t)&&(w>=o[l].v.length-1?(w-=o[l].v.length,o[l].v=T.substr(w+1,o[l].v.length)):w<0?o[l].v="":(o[l].v=T.substr(0,w+1),w=-1),o[l].t="t",I=l);w>=0&&I<o.length&&(o[I].v=T.substr(0,w+1)+o[I].v)}else if(S!==o.length&&-1===T.indexOf("E")){for(w=T.indexOf(".")-1,l=S;l>=0;--l)if(null!=o[l]&&-1!=="n?".indexOf(o[l].t)){for(s=o[l].v.indexOf(".")>-1&&l===S?o[l].v.indexOf(".")-1:o[l].v.length-1,E=o[l].v.substr(s+1);s>=0;--s)w>=0&&("0"===o[l].v.charAt(s)||"#"===o[l].v.charAt(s))&&(E=T.charAt(w--)+E);o[l].v=E,o[l].t="t",I=l}for(w>=0&&I<o.length&&(o[I].v=T.substr(0,w+1)+o[I].v),w=T.indexOf(".")+1,l=S;l<o.length;++l)if(null!=o[l]&&(-1!=="n?(".indexOf(o[l].t)||l===S)){for(s=o[l].v.indexOf(".")>-1&&l===S?o[l].v.indexOf(".")+1:0,E=o[l].v.substr(0,s);s<o[l].v.length;++s)w<T.length&&(E+=T.charAt(w++));o[l].v=E,o[l].t="t",I=l}}}for(l=0;l<o.length;++l)null!=o[l]&&"n?".indexOf(o[l].t)>-1&&(_=r>1&&t<0&&l>0&&"-"===o[l-1].v?-t:t,o[l].v=fe(o[l].t,o[l].v,_),o[l].t="t");var A="";for(l=0;l!==o.length;++l)null!=o[l]&&(A+=o[l].v);return A}(i[1],t,n,i[0])}function be(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=j[n]){if(j[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return j[t]=e,t}function _e(e){for(var t=0;392!=t;++t)void 0!==e[t]&&be(e[t],t)}function Te(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',j=e}var Ee=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var Se=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,r=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var s=[];for(r=1;16!=r;++r)s[r-1]="undefined"!==typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return s}(t),r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14];return e.table=t,e.bstr=function(e,n){for(var r=-1^n,i=0,s=e.length;i<s;)r=r>>>8^t[255&(r^e.charCodeAt(i++))];return~r},e.buf=function(e,n){for(var y=-1^n,w=e.length-15,b=0;b<w;)y=v[e[b++]^255&y]^g[e[b++]^y>>8&255]^m[e[b++]^y>>16&255]^p[e[b++]^y>>>24]^f[e[b++]]^d[e[b++]]^h[e[b++]]^u[e[b++]]^l[e[b++]]^c[e[b++]]^o[e[b++]]^a[e[b++]]^s[e[b++]]^i[e[b++]]^r[e[b++]]^t[e[b++]];for(w+=15;b<w;)y=y>>>8^t[255&(y^e[b++])];return~y},e.str=function(e,n){for(var r=-1^n,i=0,s=e.length,a=0,o=0;i<s;)(a=e.charCodeAt(i++))<128?r=r>>>8^t[255&(r^a)]:a<2048?r=(r=r>>>8^t[255&(r^(192|a>>6&31))])>>>8^t[255&(r^(128|63&a))]:a>=55296&&a<57344?(a=64+(1023&a),o=1023&e.charCodeAt(i++),r=(r=(r=(r=r>>>8^t[255&(r^(240|a>>8&7))])>>>8^t[255&(r^(128|a>>2&63))])>>>8^t[255&(r^(128|o>>6&15|(3&a)<<4))])>>>8^t[255&(r^(128|63&o))]):r=(r=(r=r>>>8^t[255&(r^(224|a>>12&15))])>>>8^t[255&(r^(128|a>>6&63))])>>>8^t[255&(r^(128|63&a))];return~r},e}(),Ie=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function r(e){if("/"==e.charAt(e.length-1))return r(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function i(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var r=t.getFullYear()-1980;r=(r=r<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,r)}function s(e){wn(e,0);for(var t={},n=0;e.l<=e.length-4;){var r=e.read_shift(2),i=e.read_shift(2),s=e.l+i,a={};if(21589===r)1&(n=e.read_shift(1))&&(a.mtime=e.read_shift(4)),i>5&&(2&n&&(a.atime=e.read_shift(4)),4&n&&(a.ctime=e.read_shift(4))),a.mtime&&(a.mt=new Date(1e3*a.mtime));e.l=s,t[r]=a}return t}function a(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return fe(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=R(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",r=(_&&Buffer.isBuffer(e)?e.toString("binary"):R(e)).split("\r\n"),i=0,s="";for(i=0;i<r.length;++i)if(s=r[i],/^Content-Location:/i.test(s)&&(s=s.slice(s.indexOf("file")),n||(n=s.slice(0,s.lastIndexOf("/")+1)),s.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),s.slice(0,n.length)!=n););var a=(r[1]||"").match(/boundary="(.*?)"/);if(!a)throw new Error("MAD cannot find boundary");var o="--"+(a[1]||""),c=[],l=[],u={FileIndex:c,FullPaths:l};d(u);var h,f=0;for(i=0;i<r.length;++i){var p=r[i];p!==o&&p!==o+"--"||(f++&&we(u,r.slice(h,i),n),h=i)}return u}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,r,i,s,a,o,f=512,p=[],m=e.slice(0,512);wn(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(y,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=g[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==g[1])return fe(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==f&&wn(m=e.slice(0,f),28);var w=e.slice(0,f);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var b=m.read_shift(4,"i");if(3===n&&0!==b)throw new Error("# Directory Sectors: Expected 0 saw "+b);m.l+=4,s=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),a=m.read_shift(4,"i"),r=m.read_shift(4,"i"),o=m.read_shift(4,"i"),i=m.read_shift(4,"i");for(var T=-1,E=0;E<109&&!((T=m.read_shift(4,"i"))<0);++E)p[E]=T;var S=function(e,t){for(var n=Math.ceil(e.length/t)-1,r=[],i=1;i<n;++i)r[i-1]=e.slice(i*t,(i+1)*t);return r[n-1]=e.slice(n*t),r}(e,f);l(o,i,S,f,p);var I=function(e,t,n,r){var i=e.length,s=[],a=[],o=[],c=[],l=r-1,u=0,h=0,d=0,f=0;for(u=0;u<i;++u)if(o=[],(d=u+t)>=i&&(d-=i),!a[d]){c=[];var p=[];for(h=d;h>=0;){p[h]=!0,a[h]=!0,o[o.length]=h,c.push(e[h]);var m=n[Math.floor(4*h/r)];if(r<4+(f=4*h&l))throw new Error("FAT boundary crossed: "+h+" 4 "+r);if(!e[m])break;if(p[h=fn(e[m],f)])break}s[d]={nodes:o,data:Bt([c])}}return s}(S,s,p,f);I[s].name="!Directory",r>0&&a!==v&&(I[a].name="!MiniFAT"),I[p[0]].name="!FAT",I.fat_addrs=p,I.ssz=f;var A=[],C=[],k=[];!function(e,t,n,r,i,s,a,o){for(var l,d=0,f=r.length?2:0,p=t[e].data,m=0,g=0;m<p.length;m+=128){var y=p.slice(m,m+128);wn(y,64),g=y.read_shift(2),l=Wt(y,0,g-f),r.push(l);var w={name:l,type:y.read_shift(1),color:y.read_shift(1),L:y.read_shift(4,"i"),R:y.read_shift(4,"i"),C:y.read_shift(4,"i"),clsid:y.read_shift(16),state:y.read_shift(4,"i"),start:0,size:0};0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(w.ct=h(y,y.l-8)),0!==y.read_shift(2)+y.read_shift(2)+y.read_shift(2)+y.read_shift(2)&&(w.mt=h(y,y.l-8)),w.start=y.read_shift(4,"i"),w.size=y.read_shift(4,"i"),w.size<0&&w.start<0&&(w.size=w.type=0,w.start=v,w.name=""),5===w.type?(d=w.start,i>0&&d!==v&&(t[d].name="!StreamData")):w.size>=4096?(w.storage="fat",void 0===t[w.start]&&(t[w.start]=u(n,w.start,t.fat_addrs,t.ssz)),t[w.start].name=w.name,w.content=t[w.start].data.slice(0,w.size)):(w.storage="minifat",w.size<0?w.size=0:d!==v&&w.start!==v&&t[d]&&(w.content=c(w,t[d].data,(t[o]||{}).data))),w.content&&wn(w.content,0),s[l]=w,a.push(w)}}(s,I,S,A,r,{},C,a),function(e,t,n){for(var r=0,i=0,s=0,a=0,o=0,c=n.length,l=[],u=[];r<c;++r)l[r]=u[r]=r,t[r]=n[r];for(;o<u.length;++o)i=e[r=u[o]].L,s=e[r].R,a=e[r].C,l[r]===r&&(-1!==i&&l[i]!==i&&(l[r]=l[i]),-1!==s&&l[s]!==s&&(l[r]=l[s])),-1!==a&&(l[a]=r),-1!==i&&r!=l[r]&&(l[i]=l[r],u.lastIndexOf(i)<o&&u.push(i)),-1!==s&&r!=l[r]&&(l[s]=l[r],u.lastIndexOf(s)<o&&u.push(s));for(r=1;r<c;++r)l[r]===r&&(-1!==s&&l[s]!==s?l[r]=l[s]:-1!==i&&l[i]!==i&&(l[r]=l[i]));for(r=1;r<c;++r)if(0!==e[r].type){if((o=r)!=l[o])do{o=l[o],t[r]=t[o]+"/"+t[r]}while(0!==o&&-1!==l[o]&&o!=l[o]);l[r]=-1}for(t[0]+="/",r=1;r<c;++r)2!==e[r].type&&(t[r]+="/")}(C,k,A),A.shift();var N={FileIndex:C,FullPaths:k};return t&&t.raw&&(N.raw={header:w,sectors:S}),N}function c(e,t,n){for(var r=e.start,i=e.size,s=[],a=r;n&&i>0&&a>=0;)s.push(t.slice(a*g,a*g+g)),i-=g,a=fn(n,4*a);return 0===s.length?_n(0):k(s).slice(0,e.size)}function l(e,t,n,r,i){var s=v;if(e===v){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var a=n[e],o=(r>>>2)-1;if(!a)return;for(var c=0;c<o&&(s=fn(a,4*c))!==v;++c)i.push(s);l(fn(a,r-4),t-1,n,r,i)}}function u(e,t,n,r,i){var s=[],a=[];i||(i=[]);var o=r-1,c=0,l=0;for(c=t;c>=0;){i[c]=!0,s[s.length]=c,a.push(e[c]);var u=n[Math.floor(4*c/r)];if(r<4+(l=4*c&o))throw new Error("FAT boundary crossed: "+c+" 4 "+r);if(!e[u])break;c=fn(e[u],l)}return{nodes:s,data:Bt([a])}}function h(e,t){return new Date(1e3*(dn(e,t+4)/1e7*Math.pow(2,32)+dn(e,t)/1e7-11644473600))}function d(e,t){var n=t||{},r=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=r+"/",e.FileIndex[0]={name:r,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(Ie.find(e,"/"+t))return;var n=_n(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){d(e);for(var i=!1,s=!1,a=e.FullPaths.length-1;a>=0;--a){var o=e.FileIndex[a];switch(o.type){case 0:s?i=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:s=!0,isNaN(o.R*o.L*o.C)&&(i=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(i=!0);break;default:i=!0}}if(i||t){var c=new Date(1987,1,19),l=0,u=Object.create?Object.create(null):{},h=[];for(a=0;a<e.FullPaths.length;++a)u[e.FullPaths[a]]=!0,0!==e.FileIndex[a].type&&h.push([e.FullPaths[a],e.FileIndex[a]]);for(a=0;a<h.length;++a){var f=n(h[a][0]);(s=u[f])||(h.push([f,{name:r(f).replace("/",""),type:1,clsid:C,ct:c,mt:c,content:null}]),u[f]=!0)}for(h.sort(function(e,t){return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0,s=0,a=Math.min(n.length,r.length);i<a;++i){if(s=n[i].length-r[i].length)return s;if(n[i]!=r[i])return n[i]<r[i]?-1:1}return n.length-r.length}(e[0],t[0])}),e.FullPaths=[],e.FileIndex=[],a=0;a<h.length;++a)e.FullPaths[a]=h[a][0],e.FileIndex[a]=h[a][1];for(a=0;a<h.length;++a){var p=e.FileIndex[a],m=e.FullPaths[a];if(p.name=r(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||C,0===a)p.C=h.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(l=a+1;l<h.length&&n(e.FullPaths[l])!=m;++l);for(p.C=l>=h.length?-1:l,l=a+1;l<h.length&&n(e.FullPaths[l])!=n(m);++l);p.R=l>=h.length?-1:l,p.type=1}else n(e.FullPaths[a+1]||"")==n(m)&&(p.R=a+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},r=n.boundary||"SheetJS",i=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(r="------="+r).slice(2)+'"',"","",""],s=e.FullPaths[0],a=s,o=e.FileIndex[0],c=1;c<e.FullPaths.length;++c)if(a=e.FullPaths[c].slice(s.length),(o=e.FileIndex[c]).size&&o.content&&"\x01Sh33tJ5"!=a){a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"});for(var l=o.content,u=_&&Buffer.isBuffer(l)?l.toString("binary"):R(l),h=0,d=Math.min(1024,u.length),f=0,p=0;p<=d;++p)(f=u.charCodeAt(p))>=32&&f<128&&++h;var m=h>=4*d/5;i.push(r),i.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+a),i.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),i.push("Content-Type: "+ge(o,a)),i.push(""),i.push(m?ye(u):ve(u))}return i.push(r+"--\r\n"),i.join("\r\n")}(e,n);if(f(e),"zip"===n.fileType)return function(e,t){var n=t||{},r=[],s=[],a=_n(1),o=n.compression?8:0,c=0;0;var l=0,u=0,h=0,d=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],g=[],v=0;for(l=1;l<e.FullPaths.length;++l)if(p=e.FullPaths[l].slice(f.length),(m=e.FileIndex[l]).size&&m.content&&"\x01Sh33tJ5"!=p){var y=h,w=_n(p.length);for(u=0;u<p.length;++u)w.write_shift(1,127&p.charCodeAt(u));w=w.slice(0,w.l),g[d]=Se.buf(m.content,0);var b=m.content;8==o&&(b=P(b)),(a=_n(30)).write_shift(4,67324752),a.write_shift(2,20),a.write_shift(2,c),a.write_shift(2,o),m.mt?i(a,m.mt):a.write_shift(4,0),a.write_shift(-4,8&c?0:g[d]),a.write_shift(4,8&c?0:b.length),a.write_shift(4,8&c?0:m.content.length),a.write_shift(2,w.length),a.write_shift(2,0),h+=a.length,r.push(a),h+=w.length,r.push(w),h+=b.length,r.push(b),8&c&&((a=_n(12)).write_shift(-4,g[d]),a.write_shift(4,b.length),a.write_shift(4,m.content.length),h+=a.l,r.push(a)),(a=_n(46)).write_shift(4,33639248),a.write_shift(2,0),a.write_shift(2,20),a.write_shift(2,c),a.write_shift(2,o),a.write_shift(4,0),a.write_shift(-4,g[d]),a.write_shift(4,b.length),a.write_shift(4,m.content.length),a.write_shift(2,w.length),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a.write_shift(4,y),v+=a.l,s.push(a),v+=w.length,s.push(w),++d}return a=_n(22),a.write_shift(4,101010256),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,d),a.write_shift(2,d),a.write_shift(4,v),a.write_shift(4,h),a.write_shift(2,0),k([k(r),k(s),a])}(e,n);var r=function(e){for(var t=0,n=0,r=0;r<e.FileIndex.length;++r){var i=e.FileIndex[r];if(i.content){var s=i.content.length;s>0&&(s<4096?t+=s+63>>6:n+=s+511>>9)}}for(var a=e.FullPaths.length+3>>2,o=t+127>>7,c=(t+7>>3)+n+a+o,l=c+127>>7,u=l<=109?0:Math.ceil((l-109)/127);c+l+u+127>>7>l;)u=++l<=109?0:Math.ceil((l-109)/127);var h=[1,u,l,o,a,n,t,0];return e.FileIndex[0].size=t<<6,h[7]=(e.FileIndex[0].start=h[0]+h[1]+h[2]+h[3]+h[4]+h[5])+(h[6]+7>>3),h}(e),s=_n(r[7]<<9),a=0,o=0;for(a=0;a<8;++a)s.write_shift(1,A[a]);for(a=0;a<8;++a)s.write_shift(2,0);for(s.write_shift(2,62),s.write_shift(2,3),s.write_shift(2,65534),s.write_shift(2,9),s.write_shift(2,6),a=0;a<3;++a)s.write_shift(2,0);for(s.write_shift(4,0),s.write_shift(4,r[2]),s.write_shift(4,r[0]+r[1]+r[2]+r[3]-1),s.write_shift(4,0),s.write_shift(4,4096),s.write_shift(4,r[3]?r[0]+r[1]+r[2]-1:v),s.write_shift(4,r[3]),s.write_shift(-4,r[1]?r[0]-1:v),s.write_shift(4,r[1]),a=0;a<109;++a)s.write_shift(-4,a<r[2]?r[1]+a:-1);if(r[1])for(o=0;o<r[1];++o){for(;a<236+127*o;++a)s.write_shift(-4,a<r[2]?r[1]+a:-1);s.write_shift(-4,o===r[1]-1?v:o+1)}var c=function(e){for(o+=e;a<o-1;++a)s.write_shift(-4,a+1);e&&(++a,s.write_shift(-4,v))};for(o=a=0,o+=r[1];a<o;++a)s.write_shift(-4,D.DIFSECT);for(o+=r[2];a<o;++a)s.write_shift(-4,D.FATSECT);c(r[3]),c(r[4]);for(var l=0,u=0,h=e.FileIndex[0];l<e.FileIndex.length;++l)(h=e.FileIndex[l]).content&&((u=h.content.length)<4096||(h.start=o,c(u+511>>9)));for(c(r[6]+7>>3);511&s.l;)s.write_shift(-4,D.ENDOFCHAIN);for(o=a=0,l=0;l<e.FileIndex.length;++l)(h=e.FileIndex[l]).content&&(!(u=h.content.length)||u>=4096||(h.start=o,c(u+63>>6)));for(;511&s.l;)s.write_shift(-4,D.ENDOFCHAIN);for(a=0;a<r[4]<<2;++a){var d=e.FullPaths[a];if(d&&0!==d.length){h=e.FileIndex[a],0===a&&(h.start=h.size?h.start-1:v);var p=0===a&&n.root||h.name;if(u=2*(p.length+1),s.write_shift(64,p,"utf16le"),s.write_shift(2,u),s.write_shift(1,h.type),s.write_shift(1,h.color),s.write_shift(-4,h.L),s.write_shift(-4,h.R),s.write_shift(-4,h.C),h.clsid)s.write_shift(16,h.clsid,"hex");else for(l=0;l<4;++l)s.write_shift(4,0);s.write_shift(4,h.state||0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,0),s.write_shift(4,h.start),s.write_shift(4,h.size),s.write_shift(4,0)}else{for(l=0;l<17;++l)s.write_shift(4,0);for(l=0;l<3;++l)s.write_shift(4,-1);for(l=0;l<12;++l)s.write_shift(4,0)}}for(a=1;a<e.FileIndex.length;++a)if((h=e.FileIndex[a]).size>=4096)if(s.l=h.start+1<<9,_&&Buffer.isBuffer(h.content))h.content.copy(s,s.l,0,h.size),s.l+=h.size+511&-512;else{for(l=0;l<h.size;++l)s.write_shift(1,h.content[l]);for(;511&l;++l)s.write_shift(1,0)}for(a=1;a<e.FileIndex.length;++a)if((h=e.FileIndex[a]).size>0&&h.size<4096)if(_&&Buffer.isBuffer(h.content))h.content.copy(s,s.l,0,h.size),s.l+=h.size+63&-64;else{for(l=0;l<h.size;++l)s.write_shift(1,h.content[l]);for(;63&l;++l)s.write_shift(1,0)}if(_)s.l=s.length;else for(;s.l<s.length;)s.write_shift(1,0);return s}t.version="1.2.1";var m,g=64,v=-2,y="d0cf11e0a1b11ae1",A=[208,207,17,224,161,177,26,225],C="00000000000000000000000000000000",D={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:v,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:C,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function R(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function P(e){return m?m.deflateRawSync(e):ie(e)}var O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function F(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var V="undefined"!==typeof Uint8Array,U=V?new Uint8Array(256):[],j=0;j<256;++j)U[j]=F(j);function B(e,t){var n=U[255&e];return t<=8?n>>>8-t:(n=n<<8|U[e>>8&255],t<=16?n>>>16-t:(n=n<<8|U[e>>16&255])>>>24-t)}function z(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=6?0:e[r+1]<<8))>>>n&3}function W(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=5?0:e[r+1]<<8))>>>n&7}function H(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=3?0:e[r+1]<<8))>>>n&31}function q(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=1?0:e[r+1]<<8))>>>n&127}function G(e,t,n){var r=7&t,i=t>>>3,s=(1<<n)-1,a=e[i]>>>r;return n<8-r?a&s:(a|=e[i+1]<<8-r,n<16-r?a&s:(a|=e[i+2]<<16-r,n<24-r?a&s:(a|=e[i+3]<<24-r)&s))}function K(e,t,n){var r=7&t,i=t>>>3;return r<=5?e[i]|=(7&n)<<r:(e[i]|=n<<r&255,e[i+1]=(7&n)>>8-r),t+3}function Y(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function Q(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=n,t+8}function X(e,t,n){var r=t>>>3;return n<<=7&t,e[r]|=255&n,n>>>=8,e[r+1]=255&n,e[r+2]=n>>>8,t+16}function J(e,t){var n=e.length,r=2*n>t?2*n:t+5,i=0;if(n>=t)return e;if(_){var s=S(r);if(e.copy)e.copy(s);else for(;i<e.length;++i)s[i]=e[i];return s}if(V){var a=new Uint8Array(r);if(a.set)a.set(e);else for(;i<n;++i)a[i]=e[i];return a}return e.length=r,e}function $(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function Z(e,t,n){var r=1,i=0,s=0,a=0,o=0,c=e.length,l=V?new Uint16Array(32):$(32);for(s=0;s<32;++s)l[s]=0;for(s=c;s<n;++s)e[s]=0;c=e.length;var u=V?new Uint16Array(c):$(c);for(s=0;s<c;++s)l[i=e[s]]++,r<i&&(r=i),u[s]=0;for(l[0]=0,s=1;s<=r;++s)l[s+16]=o=o+l[s-1]<<1;for(s=0;s<c;++s)0!=(o=e[s])&&(u[s]=l[o+16]++);var h=0;for(s=0;s<c;++s)if(0!=(h=e[s]))for(o=B(u[s],r)>>r-h,a=(1<<r+4-h)-1;a>=0;--a)t[o|a<<h]=15&h|s<<4;return r}var ee=V?new Uint16Array(512):$(512),te=V?new Uint16Array(32):$(32);if(!V){for(var ne=0;ne<512;++ne)ee[ne]=0;for(ne=0;ne<32;++ne)te[ne]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);Z(e,te,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);Z(n,ee,288)}();var re=function(){for(var e=V?new Uint8Array(32768):[],t=0,n=0;t<L.length-1;++t)for(;n<L[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var r=V?new Uint8Array(259):[];for(t=0,n=0;t<M.length-1;++t)for(;n<M[t+1];++n)r[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var r=Math.min(65535,e.length-n),i=n+r==e.length;for(t.write_shift(1,+i),t.write_shift(2,r),t.write_shift(2,65535&~r);r-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var i=0,s=0,a=V?new Uint16Array(32768):[];s<t.length;){var o=Math.min(65535,t.length-s);if(o<10){for(7&(i=K(n,i,+!(s+o!=t.length)))&&(i+=8-(7&i)),n.l=i/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[s++];i=8*n.l}else{i=K(n,i,+!(s+o!=t.length)+2);for(var c=0;o-- >0;){var l=t[s],u=-1,h=0;if((u=a[c=32767&(c<<5^l)])&&((u|=-32768&s)>s&&(u-=32768),u<s))for(;t[u+h]==t[s+h]&&h<250;)++h;if(h>2){(l=r[h])<=22?i=Q(n,i,U[l+1]>>1)-1:(Q(n,i,3),Q(n,i+=5,U[l-23]>>5),i+=3);var d=l<8?0:l-4>>2;d>0&&(X(n,i,h-M[l]),i+=d),l=e[s-u],i=Q(n,i,U[l]>>3),i-=3;var f=l<4?0:l-2>>1;f>0&&(X(n,i,s-u-L[l]),i+=f);for(var p=0;p<h;++p)a[c]=32767&s,c=32767&(c<<5^t[s]),++s;o-=h-1}else l<=143?l+=48:i=Y(n,i,1),i=Q(n,i,U[l]),a[c]=32767&s,++s}i=Q(n,i,0)-1}}return n.l=(i+7)/8|0,n.l}(t,n)}}();function ie(e){var t=_n(50+Math.floor(1.1*e.length)),n=re(e,t);return t.slice(0,n)}var se=V?new Uint16Array(32768):$(32768),ae=V?new Uint16Array(32768):$(32768),oe=V?new Uint16Array(128):$(128),ce=1,le=1;function ue(e,t){var n=H(e,t)+257,r=H(e,t+=5)+1,i=function(e,t){var n=7&t,r=t>>>3;return(e[r]|(n<=4?0:e[r+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var s=0,a=V?new Uint8Array(19):$(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=1,l=V?new Uint8Array(8):$(8),u=V?new Uint8Array(8):$(8),h=a.length,d=0;d<i;++d)a[O[d]]=s=W(e,t),c<s&&(c=s),l[s]++,t+=3;var f=0;for(l[0]=0,d=1;d<=c;++d)u[d]=f=f+l[d-1]<<1;for(d=0;d<h;++d)0!=(f=a[d])&&(o[d]=u[f]++);var p=0;for(d=0;d<h;++d)if(0!=(p=a[d])){f=U[o[d]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)oe[f|m<<p]=7&p|d<<3}var g=[];for(c=1;g.length<n+r;)switch(t+=7&(f=oe[q(e,t)]),f>>>=3){case 16:for(s=3+z(e,t),t+=2,f=g[g.length-1];s-- >0;)g.push(f);break;case 17:for(s=3+W(e,t),t+=3;s-- >0;)g.push(0);break;case 18:for(s=11+q(e,t),t+=7;s-- >0;)g.push(0);break;default:g.push(f),c<f&&(c=f)}var v=g.slice(0,n),y=g.slice(n);for(d=n;d<286;++d)v[d]=0;for(d=r;d<30;++d)y[d]=0;return ce=Z(v,se,286),le=Z(y,ae,30),t}function he(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[E(t),2];for(var n=0,r=0,i=S(t||1<<18),s=0,a=i.length>>>0,o=0,c=0;0==(1&r);)if(r=W(e,n),n+=3,r>>>1!=0)for(r>>1==1?(o=9,c=5):(n=ue(e,n),o=ce,c=le);;){!t&&a<s+32767&&(a=(i=J(i,s+32767)).length);var l=G(e,n,o),u=r>>>1==1?ee[l]:se[l];if(n+=15&u,0===((u>>>=4)>>>8&255))i[s++]=u;else{if(256==u)break;var h=(u-=257)<8?0:u-4>>2;h>5&&(h=0);var d=s+M[u];h>0&&(d+=G(e,n,h),n+=h),l=G(e,n,c),n+=15&(u=r>>>1==1?te[l]:ae[l]);var f=(u>>>=4)<4?0:u-2>>1,p=L[u];for(f>0&&(p+=G(e,n,f),n+=f),!t&&a<d&&(a=(i=J(i,d+100)).length);s<d;)i[s]=i[s-p],++s}}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[(n>>>3)+1]<<8;if(n+=32,m>0)for(!t&&a<s+m&&(a=(i=J(i,s+m)).length);m-- >0;)i[s++]=e[n>>>3],n+=8}return t?[i,n+7>>>3]:[i.slice(0,s),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function de(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function fe(e,t){var n=e;wn(n,0);var r={FileIndex:[],FullPaths:[]};d(r,{root:t.root});for(var i=n.length-4;(80!=n[i]||75!=n[i+1]||5!=n[i+2]||6!=n[i+3])&&i>=0;)--i;n.l=i+4,n.l+=4;var a=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,i=0;i<a;++i){n.l+=20;var c=n.read_shift(4),l=n.read_shift(4),u=n.read_shift(2),h=n.read_shift(2),f=n.read_shift(2);n.l+=8;var p=n.read_shift(4),m=s(n.slice(n.l+u,n.l+u+h));n.l+=u+h+f;var g=n.l;n.l=p+4,pe(n,c,l,r,m),n.l=g}return r}function pe(e,t,n,r,i){e.l+=2;var a=e.read_shift(2),o=e.read_shift(2),c=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),r=new Date,i=31&n,s=15&(n>>>=5);n>>>=4,r.setMilliseconds(0),r.setFullYear(n+1980),r.setMonth(s-1),r.setDate(i);var a=31&t,o=63&(t>>>=5);return t>>>=6,r.setHours(t),r.setMinutes(o),r.setSeconds(a<<1),r}(e);if(8257&a)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var l=e.read_shift(4),u=e.read_shift(4),h=e.read_shift(2),d=e.read_shift(2),f="",p=0;p<h;++p)f+=String.fromCharCode(e[e.l++]);if(d){var g=s(e.slice(e.l,e.l+d));(g[21589]||{}).mt&&(c=g[21589].mt),((i||{})[21589]||{}).mt&&(c=i[21589].mt)}e.l+=d;var v=e.slice(e.l,e.l+l);switch(o){case 8:v=function(e,t){if(!m)return he(e,t);var n=new(0,m.InflateRaw),r=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,r}(e,u);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var y=!1;8&a&&(134695760==e.read_shift(4)&&(e.read_shift(4),y=!0),l=e.read_shift(4),u=e.read_shift(4)),l!=t&&de(y,"Bad compressed size: "+t+" != "+l),u!=n&&de(y,"Bad uncompressed size: "+n+" != "+u),be(r,f,v,{unsafe:!0,mt:c})}var me={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ge(e,t){if(e.ctype)return e.ctype;var n=e.name||"",r=n.match(/\.([^\.]+)$/);return r&&me[r[1]]||t&&(r=(n=t).match(/[\.\\]([^\.\\])+$/))&&me[r[1]]?me[r[1]]:"application/octet-stream"}function ve(e){for(var t=w(e),n=[],r=0;r<t.length;r+=76)n.push(t.slice(r,r+76));return n.join("\r\n")+"\r\n"}function ye(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)});"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],r=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),i=0;i<r.length;++i){var s=r[i];if(0!=s.length)for(var a=0;a<s.length;){var o=76,c=s.slice(a,a+o);"="==c.charAt(o-1)?o--:"="==c.charAt(o-2)?o-=2:"="==c.charAt(o-3)&&(o-=3),c=s.slice(a,a+o),(a+=o)<s.length&&(c+="="),n.push(c)}else n.push("")}return n.join("\r\n")}function we(e,t,n){for(var r,i="",s="",a="",o=0;o<10;++o){var c=t[o];if(!c||c.match(/^\s*$/))break;var l=c.match(/^(.*?):\s*([^\s].*)$/);if(l)switch(l[1].toLowerCase()){case"content-location":i=l[2].trim();break;case"content-type":a=l[2].trim();break;case"content-transfer-encoding":s=l[2].trim()}}switch(++o,s.toLowerCase()){case"base64":r=I(b(t.slice(o).join("")));break;case"quoted-printable":r=function(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n];n<=e.length&&"="==r.charAt(r.length-1);)r=r.slice(0,r.length-1)+e[++n];t.push(r)}for(var i=0;i<t.length;++i)t[i]=t[i].replace(/[=][0-9A-Fa-f]{2}/g,function(e){return String.fromCharCode(parseInt(e.slice(1),16))});return I(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+s)}var u=be(e,i.slice(n.length),r,{unsafe:!0});a&&(u.ctype=a)}function be(e,t,n,i){var s=i&&i.unsafe;s||d(e);var a=!s&&Ie.find(e,t);if(!a){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),a={name:r(t),type:2},e.FileIndex.push(a),e.FullPaths.push(o),s||Ie.utils.cfb_gc(e)}return a.content=n,a.size=n?n.length:0,i&&(i.CLSID&&(a.clsid=i.CLSID),i.mt&&(a.mt=i.mt),i.ct&&(a.ct=i.ct)),a}return t.find=function(e,t){var n=e.FullPaths.map(function(e){return e.toUpperCase()}),r=n.map(function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]}),i=!1;47===t.charCodeAt(0)?(i=!0,t=n[0].slice(0,-1)+t):i=-1!==t.indexOf("/");var s=t.toUpperCase(),a=!0===i?n.indexOf(s):r.indexOf(s);if(-1!==a)return e.FileIndex[a];var o=!s.match(x);for(s=s.replace(N,""),o&&(s=s.replace(x,"!")),a=0;a<n.length;++a){if((o?n[a].replace(x,"!"):n[a]).replace(N,"")==s)return e.FileIndex[a];if((o?r[a].replace(x,"!"):r[a]).replace(N,"")==s)return e.FileIndex[a]}return null},t.read=function(t,n){var r=n&&n.type;switch(r||_&&Buffer.isBuffer(t)&&(r="buffer"),r||"base64"){case"file":return function(t,n){return a(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(I(b(t)),n);case"binary":return o(I(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var r=p(t,n);switch(n&&n.type||"buffer"){case"file":return a(),e.writeFileSync(n.filename,r),r;case"binary":return"string"==typeof r?r:R(r);case"base64":return w("string"==typeof r?r:R(r));case"buffer":if(_)return Buffer.isBuffer(r)?r:T(r);case"array":return"string"==typeof r?I(r):r}return r},t.writeFile=function(t,n,r){a();var i=p(t,r);e.writeFileSync(n,i)},t.utils={cfb_new:function(e){var t={};return d(t,e),t},cfb_add:be,cfb_del:function(e,t){d(e);var n=Ie.find(e,t);if(n)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==n)return e.FileIndex.splice(r,1),e.FullPaths.splice(r,1),!0;return!1},cfb_mov:function(e,t,n){d(e);var i=Ie.find(e,t);if(i)for(var s=0;s<e.FileIndex.length;++s)if(e.FileIndex[s]==i)return e.FileIndex[s].name=r(n),e.FullPaths[s]=n,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:mn,CheckField:yn,prep_blob:wn,bconcat:k,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(n){console.error("cannot use native zlib: "+(n.message||n))}},_deflateRaw:ie,_inflateRaw:he,consts:D},t}();let Ae;function Ce(e){return"string"===typeof e?A(e):Array.isArray(e)?function(e){if("undefined"===typeof Uint8Array)throw new Error("Unsupported");return new Uint8Array(e)}(e):e}function ke(e,t,n){if("undefined"!==typeof Ae&&Ae.writeFileSync)return n?Ae.writeFileSync(e,t,n):Ae.writeFileSync(e,t);if("undefined"!==typeof Deno){if(n&&"string"==typeof t)switch(n){case"utf8":t=new TextEncoder(n).encode(t);break;case"binary":t=A(t);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(e,t)}var r="utf8"==n?dt(t):t;if("undefined"!==typeof IE_SaveFile)return IE_SaveFile(r,e);if("undefined"!==typeof Blob){var i=new Blob([Ce(r)],{type:"application/octet-stream"});if("undefined"!==typeof navigator&&navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if("undefined"!==typeof saveAs)return saveAs(i,e);if("undefined"!==typeof URL&&"undefined"!==typeof document&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if("object"===typeof chrome&&"function"==typeof(chrome.downloads||{}).download)return URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var a=document.createElement("a");if(null!=a.download)return a.download=e,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&"undefined"!==typeof setTimeout&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=C(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Ne(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;++r)Object.prototype.hasOwnProperty.call(e,t[r])&&n.push(t[r]);return n}function xe(e,t){for(var n=[],r=Ne(e),i=0;i!==r.length;++i)null==n[e[r[i]][t]]&&(n[e[r[i]][t]]=r[i]);return n}function De(e){for(var t=[],n=Ne(e),r=0;r!==n.length;++r)t[e[n[r]]]=n[r];return t}function Re(e){for(var t=[],n=Ne(e),r=0;r!==n.length;++r)t[e[n[r]]]=parseInt(n[r],10);return t}var Pe=new Date(1899,11,30,0,0,0);function Oe(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(Pe.getTime()+6e4*(e.getTimezoneOffset()-Pe.getTimezoneOffset())))/864e5}var Me=new Date,Le=Pe.getTime()+6e4*(Me.getTimezoneOffset()-Pe.getTimezoneOffset()),Fe=Me.getTimezoneOffset();function Ve(e){var t=new Date;return t.setTime(24*e*60*60*1e3+Le),t.getTimezoneOffset()!==Fe&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-Fe)),t}var Ue=new Date("2017-02-19T19:06:09.000Z"),je=isNaN(Ue.getFullYear())?new Date("2/19/17"):Ue,Be=2017==je.getFullYear();function ze(e,t){var n=new Date(e);if(Be)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==je.getFullYear()&&!isNaN(n.getFullYear())){var r=n.getFullYear();return e.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-60*s.getTimezoneOffset()*1e3)),s}function We(e,t){if(_&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return dt(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return dt(p(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return dt(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return dt(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,function(e){return n[e]||e})}catch(s){}for(var r=[],i=0;i!=e.length;++i)r.push(String.fromCharCode(e[i]));return r.join("")}function He(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=He(e[n]));return t}function qe(e,t){for(var n="";n.length<t;)n+=e;return n}function Ge(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,r=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return isNaN(t=Number(r))?(r=r.replace(/[(](.*)[)]/,function(e,t){return n=-n,t}),isNaN(t=Number(r))?t:t/n):t/n}var Ke=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ye(e){var t=new Date(e),n=new Date(NaN),r=t.getYear(),i=t.getMonth(),s=t.getDate();if(isNaN(s))return n;var a=e.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Ke.indexOf(a))return n}else if(a.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&101!=r?t:e.match(/[^-0-9:,\/\\]/)?n:t}function Qe(e,t,n){if(e.FullPaths){var r;if("string"==typeof n)return r=_?T(n):function(e){for(var t=[],n=0,r=e.length+250,i=E(e.length+255),s=0;s<e.length;++s){var a=e.charCodeAt(s);if(a<128)i[n++]=a;else if(a<2048)i[n++]=192|a>>6&31,i[n++]=128|63&a;else if(a>=55296&&a<57344){a=64+(1023&a);var o=1023&e.charCodeAt(++s);i[n++]=240|a>>8&7,i[n++]=128|a>>2&63,i[n++]=128|o>>6&15|(3&a)<<4,i[n++]=128|63&o}else i[n++]=224|a>>12&15,i[n++]=128|a>>6&63,i[n++]=128|63&a;n>r&&(t.push(i.slice(0,n)),n=0,i=E(65535),r=65530)}return t.push(i.slice(0,n)),k(t)}(n),Ie.utils.cfb_add(e,t,r);Ie.utils.cfb_add(e,t,n)}else e.file(t,n)}function Xe(){return Ie.utils.cfb_new()}var Je='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';var $e={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Ze=De($e),et=/[&<>'"]/g,tt=/[\u0000-\u0008\u000b-\u001f]/g;function nt(e){return(e+"").replace(et,function(e){return Ze[e]}).replace(tt,function(e){return"_x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+"_"})}function rt(e){return nt(e).replace(/ /g,"_x0020_")}var it=/[\u0000-\u001f]/g;function st(e){return(e+"").replace(et,function(e){return Ze[e]}).replace(/\n/g,"<br/>").replace(it,function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"})}function at(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function ot(e){for(var t="",n=0,r=0,i=0,s=0,a=0,o=0;n<e.length;)(r=e.charCodeAt(n++))<128?t+=String.fromCharCode(r):(i=e.charCodeAt(n++),r>191&&r<224?(a=(31&r)<<6,a|=63&i,t+=String.fromCharCode(a)):(s=e.charCodeAt(n++),r<240?t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s):(o=((7&r)<<18|(63&i)<<12|(63&s)<<6|63&(a=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function ct(e){var t,n,r,i=E(2*e.length),s=1,a=0,o=0;for(n=0;n<e.length;n+=s)s=1,(r=e.charCodeAt(n))<128?t=r:r<224?(t=64*(31&r)+(63&e.charCodeAt(n+1)),s=2):r<240?(t=4096*(15&r)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),s=3):(s=4,t=262144*(7&r)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(i[a++]=255&o,i[a++]=o>>>8,o=0),i[a++]=t%256,i[a++]=t>>>8;return i.slice(0,a).toString("ucs2")}function lt(e){return T(e,"binary").toString("utf8")}var ut="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",ht=_&&(lt(ut)==ot(ut)&&lt||ct(ut)==ot(ut)&&ct)||ot,dt=_?function(e){return T(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,r=0,i=0;n<e.length;)switch(r=e.charCodeAt(n++),!0){case r<128:t.push(String.fromCharCode(r));break;case r<2048:t.push(String.fromCharCode(192+(r>>6))),t.push(String.fromCharCode(128+(63&r)));break;case r>=55296&&r<57344:r-=55296,i=e.charCodeAt(n++)-56320+(r<<10),t.push(String.fromCharCode(240+(i>>18&7))),t.push(String.fromCharCode(144+(i>>12&63))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)));break;default:t.push(String.fromCharCode(224+(r>>12))),t.push(String.fromCharCode(128+(r>>6&63))),t.push(String.fromCharCode(128+(63&r)))}return t.join("")},ft=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),r=0;r<e.length;++r)n=n.replace(e[r][0],e[r][1]);return n}}();var pt=/(^\s|\s$|\n)/;function mt(e,t){return"<"+e+(t.match(pt)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function gt(e){return Ne(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function vt(e,t,n){return"<"+e+(null!=n?gt(n):"")+(null!=t?(t.match(pt)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function yt(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(n){if(t)throw n}return""}var wt="http://schemas.openxmlformats.org/package/2006/metadata/core-properties",bt="http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",_t="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",Tt="http://schemas.openxmlformats.org/package/2006/content-types",Et="http://schemas.openxmlformats.org/package/2006/relationships",St="http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",It="http://purl.org/dc/elements/1.1/",At="http://purl.org/dc/terms/",Ct="http://purl.org/dc/dcmitype/",kt="http://schemas.openxmlformats.org/officeDocument/2006/relationships",Nt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xt="http://www.w3.org/2001/XMLSchema-instance",Dt="http://www.w3.org/2001/XMLSchema",Rt=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Pt="urn:schemas-microsoft-com:office:office",Ot="urn:schemas-microsoft-com:office:excel",Mt="urn:schemas-microsoft-com:office:spreadsheet",Lt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",Ft="http://macVmlSchemaUri",Vt="urn:schemas-microsoft-com:vml",Ut="http://www.w3.org/TR/REC-html40";var jt=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var r=0,i=e[0][n].length;r<i;r+=10240)t.push.apply(t,e[0][n].slice(r,r+10240));return t},Bt=_?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(e){return Buffer.isBuffer(e)?e:T(e)})):jt(e)}:jt,zt=function(e,t,n){for(var r=[],i=t;i<n;i+=2)r.push(String.fromCharCode(un(e,i)));return r.join("").replace(N,"")},Wt=_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(N,""):zt(e,t,n)}:zt,Ht=function(e,t,n){for(var r=[],i=t;i<t+n;++i)r.push(("0"+e[i].toString(16)).slice(-2));return r.join("")},qt=_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):Ht(e,t,n)}:Ht,Gt=function(e,t,n){for(var r=[],i=t;i<n;i++)r.push(String.fromCharCode(ln(e,i)));return r.join("")},Kt=_?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):Gt(e,t,n)}:Gt,Yt=function(e,t){var n=dn(e,t);return n>0?Kt(e,t+4,t+4+n-1):""},Qt=Yt,Xt=function(e,t){var n=dn(e,t);return n>0?Kt(e,t+4,t+4+n-1):""},Jt=Xt,$t=function(e,t){var n=2*dn(e,t);return n>0?Kt(e,t+4,t+4+n-1):""},Zt=$t,en=function(e,t){var n=dn(e,t);return n>0?Wt(e,t+4,t+4+n):""},tn=en,nn=function(e,t){var n=dn(e,t);return n>0?Kt(e,t+4,t+4+n):""},rn=nn,sn=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),r=((127&e[t+7])<<4)+(e[t+6]>>>4&15),i=15&e[t+6],s=5;s>=0;--s)i=256*i+e[t+s];return 2047==r?0==i?n*(1/0):NaN:(0==r?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}(e,t)},an=sn,on=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function cn(){Wt=function(e,t,n){return m.utils.decode(1200,e.slice(t,n)).replace(N,"")},Kt=function(e,t,n){return m.utils.decode(65001,e.slice(t,n))},Qt=function(e,t){var n=dn(e,t);return n>0?m.utils.decode(c,e.slice(t+4,t+4+n-1)):""},Jt=function(e,t){var n=dn(e,t);return n>0?m.utils.decode(o,e.slice(t+4,t+4+n-1)):""},Zt=function(e,t){var n=2*dn(e,t);return n>0?m.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},tn=function(e,t){var n=dn(e,t);return n>0?m.utils.decode(1200,e.slice(t+4,t+4+n)):""},rn=function(e,t){var n=dn(e,t);return n>0?m.utils.decode(65001,e.slice(t+4,t+4+n)):""}}_&&(Qt=function(e,t){if(!Buffer.isBuffer(e))return Yt(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Jt=function(e,t){if(!Buffer.isBuffer(e))return Xt(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Zt=function(e,t){if(!Buffer.isBuffer(e))return $t(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},tn=function(e,t){if(!Buffer.isBuffer(e))return en(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},rn=function(e,t){if(!Buffer.isBuffer(e))return nn(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},an=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):sn(e,t)},on=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof m&&cn();var ln=function(e,t){return e[t]},un=function(e,t){return 256*e[t+1]+e[t]},hn=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},dn=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},fn=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},pn=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function mn(e,t){var n,r,i,s,a,c,l="",u=[];switch(t){case"dbcs":if(c=this.l,_&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(a=0;a<e;++a)l+=String.fromCharCode(un(this,c)),c+=2;e*=2;break;case"utf8":l=Kt(this,this.l,this.l+e);break;case"utf16le":e*=2,l=Wt(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof m)return mn.call(this,e,"dbcs");l=m.utils.decode(o,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=Qt(this,this.l),e=4+dn(this,this.l);break;case"lpstr-cp":l=Jt(this,this.l),e=4+dn(this,this.l);break;case"lpwstr":l=Zt(this,this.l),e=4+2*dn(this,this.l);break;case"lpp4":e=4+dn(this,this.l),l=tn(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+dn(this,this.l),l=rn(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(i=ln(this,this.l+e++));)u.push(g(i));l=u.join("");break;case"_wstr":for(e=0,l="";0!==(i=un(this,this.l+e));)u.push(g(i)),e+=2;e+=2,l=u.join("");break;case"dbcs-cont":for(l="",c=this.l,a=0;a<e;++a){if(this.lens&&-1!==this.lens.indexOf(c))return i=ln(this,c),this.l=c+1,s=mn.call(this,e-a,i?"dbcs-cont":"sbcs-cont"),u.join("")+s;u.push(g(un(this,c))),c+=2}l=u.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof m){l=m.utils.decode(o,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",c=this.l,a=0;a!=e;++a){if(this.lens&&-1!==this.lens.indexOf(c))return i=ln(this,c),this.l=c+1,s=mn.call(this,e-a,i?"dbcs-cont":"sbcs-cont"),u.join("")+s;u.push(g(ln(this,c))),c+=1}l=u.join("");break;default:switch(e){case 1:return n=ln(this,this.l),this.l++,n;case 2:return n=("i"===t?hn:un)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?fn:pn)(this,this.l),this.l+=4,n):(r=dn(this,this.l),this.l+=4,r);case 8:case-8:if("f"===t)return r=8==e?an(this,this.l):an([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,r;e=8;case 16:l=qt(this,this.l,e)}}return this.l+=e,l}var gn=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function vn(e,t,n){var r=0,i=0;if("dbcs"===n){for(i=0;i!=t.length;++i)gn(this,t.charCodeAt(i),this.l+2*i);r=2*t.length}else if("sbcs"===n){if("undefined"!==typeof m&&874==c)for(i=0;i!=t.length;++i){var s=m.utils.encode(c,t.charAt(i));this[this.l+i]=s[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=t.length;++i)this[this.l+i]=255&t.charCodeAt(i);r=t.length}else{if("hex"===n){for(;i<e;++i)this[this.l++]=parseInt(t.slice(2*i,2*i+2),16)||0;return this}if("utf16le"===n){var a=Math.min(this.l+e,this.length);for(i=0;i<Math.min(t.length,e);++i){var o=t.charCodeAt(i);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(e){case 1:r=1,this[this.l]=255&t;break;case 2:r=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:r=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:r=4,function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255}(this,t,this.l);break;case 8:if(r=8,"f"===n){!function(e,t,n){var r=(t<0||1/t==-1/0?1:0)<<7,i=0,s=0,a=r?-t:t;isFinite(a)?0==a?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[n+o]=255&s;e[n+6]=(15&i)<<4|15&s,e[n+7]=i>>4|r}(this,t,this.l);break}case 16:break;case-4:r=4,function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255}(this,t,this.l)}}return this.l+=r,this}function yn(e,t){var n=qt(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function wn(e,t){e.l=t,e.read_shift=mn,e.chk=yn,e.write_shift=vn}function bn(e,t){e.l+=t}function _n(e){var t=E(e);return wn(t,0),t}function Tn(){var e=[],t=_?256:2048,n=function(e){var t=_n(e);return wn(t,0),t},r=n(t),i=function(){r&&(r.length>r.l&&((r=r.slice(0,r.l)).l=r.length),r.length>0&&e.push(r),r=null)},s=function(e){return r&&e<r.length-r.l?r:(i(),r=n(Math.max(e+1,t)))};return{next:s,push:function(e){i(),null==(r=e).l&&(r.l=r.length),s(t)},end:function(){return i(),k(e)},_bufs:e}}function En(e,t,n,r){var i,s=+t;if(!isNaN(s)){r||(r=Fa[s].p||(n||[]).length||0),i=1+(s>=128?1:0)+1,r>=128&&++i,r>=16384&&++i,r>=2097152&&++i;var a=e.next(i);s<=127?a.write_shift(1,s):(a.write_shift(1,128+(127&s)),a.write_shift(1,s>>7));for(var o=0;4!=o;++o){if(!(r>=128)){a.write_shift(1,r);break}a.write_shift(1,128+(127&r)),r>>=7}r>0&&on(n)&&e.push(n)}}function Sn(e,t,n){var r=He(e);if(t.s?(r.cRel&&(r.c+=t.s.c),r.rRel&&(r.r+=t.s.r)):(r.cRel&&(r.c+=t.c),r.rRel&&(r.r+=t.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function In(e,t,n){var r=He(e);return r.s=Sn(r.s,t.s,n),r.e=Sn(r.e,t.s,n),r}function An(e,t){if(e.cRel&&e.c<0)for(e=He(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=He(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=Pn(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function Cn(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?An(e.s,t.biff)+":"+An(e.e,t.biff):(e.s.rRel?"":"$")+Nn(e.s.r)+":"+(e.e.rRel?"":"$")+Nn(e.e.r):(e.s.cRel?"":"$")+Dn(e.s.c)+":"+(e.e.cRel?"":"$")+Dn(e.e.c)}function kn(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function Nn(e){return""+(e+1)}function xn(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,r=0;r!==t.length;++r)n=26*n+t.charCodeAt(r)-64;return n-1}function Dn(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Rn(e){for(var t=0,n=0,r=0;r<e.length;++r){var i=e.charCodeAt(r);i>=48&&i<=57?t=10*t+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:t-1}}function Pn(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function On(e){var t=e.indexOf(":");return-1==t?{s:Rn(e),e:Rn(e)}:{s:Rn(e.slice(0,t)),e:Rn(e.slice(t+1))}}function Mn(e,t){return"undefined"===typeof t||"number"===typeof t?Mn(e.s,e.e):("string"!==typeof e&&(e=Pn(e)),"string"!==typeof t&&(t=Pn(t)),e==t?e:e+":"+t)}function Ln(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=e.length;for(n=0;r<s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.s.c=--n,n=0;r<s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(t.s.r=--n,r===s||10!=i)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++r,n=0;r!=s&&!((i=e.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(t.e.c=--n,n=0;r!=s&&!((i=e.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return t.e.r=--n,t}function Fn(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=we(e.z,n?Oe(t):t)}catch(r){}try{return e.w=we((e.XF||{}).numFmtId||(n?14:0),n?Oe(t):t)}catch(r){return""+t}}function Vn(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?wr[e.v]||e.v:Fn(e,void 0==t?e.v:t))}function Un(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",r={};return r[n]=e,{SheetNames:[n],Sheets:r}}function jn(e,t,n){var r=n||{},i=e?Array.isArray(e):r.dense;var s=e||(i?[]:{}),a=0,o=0;if(s&&null!=r.origin){if("number"==typeof r.origin)a=r.origin;else{var c="string"==typeof r.origin?Rn(r.origin):r.origin;a=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var l={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=Ln(s["!ref"]);l.s.c=u.s.c,l.s.r=u.s.r,l.e.c=Math.max(l.e.c,u.e.c),l.e.r=Math.max(l.e.r,u.e.r),-1==a&&(l.e.r=a=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[h].length;++d)if("undefined"!==typeof t[h][d]){var f={v:t[h][d]},p=a+h,m=o+d;if(l.s.r>p&&(l.s.r=p),l.s.c>m&&(l.s.c=m),l.e.r<p&&(l.e.r=p),l.e.c<m&&(l.e.c=m),!t[h][d]||"object"!==typeof t[h][d]||Array.isArray(t[h][d])||t[h][d]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[h][d][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(r.nullError)f.t="e",f.v=0;else{if(!r.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=r.dateNF||j[14],r.cellDates?(f.t="d",f.w=we(f.z,Oe(f.v))):(f.t="n",f.v=Oe(f.v),f.w=we(f.z,f.v))):f.t="s";else f=t[h][d];if(i)s[p]||(s[p]=[]),s[p][m]&&s[p][m].z&&(f.z=s[p][m].z),s[p][m]=f;else{var g=Pn({c:m,r:p});s[g]&&s[g].z&&(f.z=s[g].z),s[g]=f}}}return l.s.c<1e7&&(s["!ref"]=Mn(l)),s}function Bn(e,t){return jn(null,e,t)}function zn(e,t){return t||(t=_n(4)),t.write_shift(4,e),t}function Wn(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function Hn(e,t){var n=!1;return null==t&&(n=!0,t=_n(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}function qn(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Gn(e,t){var n=e.l,r=e.read_shift(1),i=Wn(e),s=[],a={t:i,h:i};if(0!==(1&r)){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(qn(e));a.r=s}else a.r=[{ich:0,ifnt:0}];return e.l=n+t,a}var Kn=Gn;function Yn(e,t){var n=!1;return null==t&&(n=!0,t=_n(23+4*e.t.length)),t.write_shift(1,1),Hn(e.t,t),t.write_shift(4,1),function(e,t){t||(t=_n(4)),t.write_shift(2,e.ich||0),t.write_shift(2,e.ifnt||0)}({ich:0,ifnt:0},t),n?t.slice(0,t.l):t}function Qn(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function Xn(e,t){return null==t&&(t=_n(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Jn(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function $n(e,t){return null==t&&(t=_n(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Zn=Wn,er=Hn;function tr(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}function nr(e,t){var n=!1;return null==t&&(n=!0,t=_n(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),n?t.slice(0,t.l):t}var rr=Wn,ir=tr,sr=nr;function ar(e){var t=e.slice(e.l,e.l+4),n=1&t[0],r=2&t[0];e.l+=4;var i=0===r?an([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):fn(t,0)>>2;return n?i/100:i}function or(e,t){null==t&&(t=_n(4));var n=0,r=0,i=100*e;if(e==(0|e)&&e>=-(1<<29)&&e<1<<29?r=1:i==(0|i)&&i>=-(1<<29)&&i<1<<29&&(r=1,n=1),!r)throw new Error("unsupported RkNumber "+e);t.write_shift(-4,((n?i:e)<<2)+(n+2))}function cr(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var lr=cr,ur=function(e,t){return t||(t=_n(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t};function hr(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function dr(e,t){return(t||_n(8)).write_shift(8,e,"f")}function fr(e,t){if(t||(t=_n(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;null!=e.index?(t.write_shift(1,2),t.write_shift(1,e.index)):null!=e.theme?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var n=e.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),t.write_shift(2,n),e.rgb&&null==e.theme){var r=e.rgb||"FFFFFF";"number"==typeof r&&(r=("000000"+r.toString(16)).slice(-6)),t.write_shift(1,parseInt(r.slice(0,2),16)),t.write_shift(1,parseInt(r.slice(2,4),16)),t.write_shift(1,parseInt(r.slice(4,6),16)),t.write_shift(1,255)}else t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);return t}var pr=80,mr={1:{n:"CodePage",t:2},2:{n:"Category",t:pr},3:{n:"PresentationFormat",t:pr},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:pr},15:{n:"Company",t:pr},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:pr},27:{n:"ContentStatus",t:pr},28:{n:"Language",t:pr},29:{n:"Version",t:pr},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},gr={1:{n:"CodePage",t:2},2:{n:"Title",t:pr},3:{n:"Subject",t:pr},4:{n:"Author",t:pr},5:{n:"Keywords",t:pr},6:{n:"Comments",t:pr},7:{n:"Template",t:pr},8:{n:"LastAuthor",t:pr},9:{n:"RevNumber",t:pr},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:pr},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}};function vr(e){return e.map(function(e){return[e>>16&255,e>>8&255,255&e]})}var yr=He(vr([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),wr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},br={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},_r={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Tr(e,t){var n,r=function(e){for(var t=[],n=Ne(e),r=0;r!==n.length;++r)null==t[e[n[r]]]&&(t[e[n[r]]]=[]),t[e[n[r]]].push(n[r]);return t}(br),i=[];i[i.length]=Je,i[i.length]=vt("Types",null,{xmlns:Tt,"xmlns:xsd":Dt,"xmlns:xsi":xt}),i=i.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(e){return vt("Default",null,{Extension:e[0],ContentType:e[1]})}));var s=function(r){e[r]&&e[r].length>0&&(n=e[r][0],i[i.length]=vt("Override",null,{PartName:("/"==n[0]?"":"/")+n,ContentType:_r[r][t.bookType]||_r[r].xlsx}))},a=function(n){(e[n]||[]).forEach(function(e){i[i.length]=vt("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:_r[n][t.bookType]||_r[n].xlsx})})},o=function(t){(e[t]||[]).forEach(function(e){i[i.length]=vt("Override",null,{PartName:("/"==e[0]?"":"/")+e,ContentType:r[t][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),i.length>2&&(i[i.length]="</Types>",i[1]=i[1].replace("/>",">")),i.join("")}var Er={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Sr(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Ir(e){var t=[Je,vt("Relationships",null,{xmlns:Et})];return Ne(e["!id"]).forEach(function(n){t[t.length]=vt("Relationship",null,e["!id"][n])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ar(e,t,n,r,i,s){if(i||(i={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,i.Id="rId"+t,i.Type=r,i.Target=n,s?i.TargetMode=s:[Er.HLINK,Er.XPATH,Er.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),e["!id"][i.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][i.Id]=i,e[("/"+i.Target).replace("//","/")]=i,t}function Cr(e,t,n){return['  <rdf:Description rdf:about="'+e+'">\n','    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+t+'"/>\n',"  </rdf:Description>\n"].join("")}function kr(e,t){return['  <rdf:Description rdf:about="'+e+'">\n','    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+'"/>\n',"  </rdf:Description>\n"].join("")}function Nr(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+a.version+"</meta:generator></office:meta></office:document-meta>"}var xr=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Dr(e,t,n,r,i){null==i[e]&&null!=t&&""!==t&&(i[e]=t,t=nt(t),r[r.length]=n?vt(e,t,n):mt(e,t))}function Rr(e,t){var n=t||{},r=[Je,vt("cp:coreProperties",null,{"xmlns:cp":wt,"xmlns:dc":It,"xmlns:dcterms":At,"xmlns:dcmitype":Ct,"xmlns:xsi":xt})],i={};if(!e&&!n.Props)return r.join("");e&&(null!=e.CreatedDate&&Dr("dcterms:created","string"===typeof e.CreatedDate?e.CreatedDate:yt(e.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),null!=e.ModifiedDate&&Dr("dcterms:modified","string"===typeof e.ModifiedDate?e.ModifiedDate:yt(e.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=xr.length;++s){var a=xr[s],o=n.Props&&null!=n.Props[a[1]]?n.Props[a[1]]:e?e[a[1]]:null;!0===o?o="1":!1===o?o="0":"number"==typeof o&&(o=String(o)),null!=o&&Dr(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Pr=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Or=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Mr(e){var t=[],n=vt;return e||(e={}),e.Application="SheetJS",t[t.length]=Je,t[t.length]=vt("Properties",null,{xmlns:_t,"xmlns:vt":Nt}),Pr.forEach(function(r){if(void 0!==e[r[1]]){var i;switch(r[2]){case"string":i=nt(String(e[r[1]]));break;case"bool":i=e[r[1]]?"true":"false"}void 0!==i&&(t[t.length]=n(r[0],i))}}),t[t.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=n("TitlesOfParts",n("vt:vector",e.SheetNames.map(function(e){return"<vt:lpstr>"+nt(e)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}function Lr(e){var t=[Je,vt("Properties",null,{xmlns:bt,"xmlns:vt":Nt})];if(!e)return t.join("");var n=1;return Ne(e).forEach(function(r){++n,t[t.length]=vt("property",function(e,t){switch(typeof e){case"string":var n=vt("vt:lpwstr",nt(e));return t&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return vt((0|e)==e?"vt:i4":"vt:r8",nt(String(e)));case"boolean":return vt("vt:bool",e?"true":"false")}if(e instanceof Date)return vt("vt:filetime",yt(e));throw new Error("Unable to serialize "+e)}(e[r],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:nt(r)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Fr={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Vr(e,t){var n=_n(4),r=_n(4);switch(n.write_shift(4,80==e?31:e),e){case 3:r.write_shift(-4,t);break;case 5:(r=_n(8)).write_shift(8,t,"f");break;case 11:r.write_shift(4,t?1:0);break;case 64:r=function(e){var t=("string"==typeof e?new Date(Date.parse(e)):e).getTime()/1e3+11644473600,n=t%Math.pow(2,32),r=(t-n)/Math.pow(2,32);r*=1e7;var i=(n*=1e7)/Math.pow(2,32)|0;i>0&&(n%=Math.pow(2,32),r+=i);var s=_n(8);return s.write_shift(4,n),s.write_shift(4,r),s}(t);break;case 31:case 80:for((r=_n(4+2*(t.length+1)+(t.length%2?0:2))).write_shift(4,t.length+1),r.write_shift(0,t,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return k([n,r])}var Ur=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function jr(e){switch(typeof e){case"boolean":return 11;case"number":return(0|e)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64}return-1}function Br(e,t,n){var r=_n(8),i=[],s=[],a=8,o=0,c=_n(8),l=_n(8);if(c.write_shift(4,2),c.write_shift(4,1200),l.write_shift(4,1),s.push(c),i.push(l),a+=8+c.length,!t){(l=_n(8)).write_shift(4,0),i.unshift(l);var u=[_n(4)];for(u[0].write_shift(4,e.length),o=0;o<e.length;++o){var h=e[o][0];for((c=_n(8+2*(h.length+1)+(h.length%2?0:2))).write_shift(4,o+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=k(u),s.unshift(c),a+=8+c.length}for(o=0;o<e.length;++o)if((!t||t[e[o][0]])&&!(Ur.indexOf(e[o][0])>-1||Or.indexOf(e[o][0])>-1)&&null!=e[o][1]){var d=e[o][1],f=0;if(t){var p=n[f=+t[e[o][0]]];if("version"==p.p&&"string"==typeof d){var m=d.split(".");d=(+m[0]<<16)+(+m[1]||0)}c=Vr(p.t,d)}else{var g=jr(d);-1==g&&(g=31,d=String(d)),c=Vr(g,d)}s.push(c),(l=_n(8)).write_shift(4,t?f:2+o),i.push(l),a+=8+c.length}var v=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,v),v+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),k([r].concat(i).concat(s))}function zr(e,t,n,r,i,s){var a=_n(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Ie.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,t,"hex"),a.write_shift(4,i?68:48);var c=Br(e,n,r);if(o.push(c),i){var l=Br(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+c.length),o.push(l)}return k(o)}function Wr(e,t){return 1===e.read_shift(t)}function Hr(e,t){return t||(t=_n(2)),t.write_shift(2,+!!e),t}function qr(e){return e.read_shift(2,"u")}function Gr(e,t){return t||(t=_n(2)),t.write_shift(2,e),t}function Kr(e,t,n){return n||(n=_n(2)),n.write_shift(1,"e"==t?+e:+!!e),n.write_shift(1,"e"==t?1:0),n}function Yr(e,t,n){var r=e.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont",s=o;(n&&n.biff>=8&&(o=1200),n&&8!=n.biff)?12==n.biff&&(i="wstr"):e.read_shift(1)&&(i="dbcs-cont");n.biff>=2&&n.biff<=5&&(i="cpstr");var a=r?e.read_shift(r,i):"";return o=s,a}function Qr(e){var t=e.t||"",n=_n(3);n.write_shift(2,t.length),n.write_shift(1,1);var r=_n(2*t.length);return r.write_shift(2*t.length,t,"utf16le"),k([n,r])}function Xr(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function Jr(e,t,n){var r=e.read_shift(n&&2==n.biff?1:2);return 0===r?(e.l++,""):Xr(e,r,n)}function $r(e,t,n){if(n.biff>5)return Jr(e,0,n);var r=e.read_shift(1);return 0===r?(e.l++,""):e.read_shift(r,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Zr(e,t,n){return n||(n=_n(3+2*e.length)),n.write_shift(2,e.length),n.write_shift(1,1),n.write_shift(31,e,"utf16le"),n}function ei(e,t){t||(t=_n(6+2*e.length)),t.write_shift(4,1+e.length);for(var n=0;n<e.length;++n)t.write_shift(2,e.charCodeAt(n));return t.write_shift(2,0),t}function ti(e){var t=_n(512),n=0,r=e.Target;"file://"==r.slice(0,7)&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3}t.write_shift(4,2),t.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(n=0;n<a.length;++n)t.write_shift(4,a[n]);if(28==s)ei(r=r.slice(1),t);else if(2&s){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<a.length;++n)t.write_shift(1,parseInt(a[n],16));var o=i>-1?r.slice(0,i):r;for(t.write_shift(4,2*(o.length+1)),n=0;n<o.length;++n)t.write_shift(2,o.charCodeAt(n));t.write_shift(2,0),8&s&&ei(i>-1?r.slice(i+1):"",t)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<a.length;++n)t.write_shift(1,parseInt(a[n],16));for(var c=0;"../"==r.slice(3*c,3*c+3)||"..\\"==r.slice(3*c,3*c+3);)++c;for(t.write_shift(2,c),t.write_shift(4,r.length-3*c+1),n=0;n<r.length-3*c;++n)t.write_shift(1,255&r.charCodeAt(n+3*c));for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),n=0;n<6;++n)t.write_shift(4,0)}return t.slice(0,t.l)}function ni(e,t,n,r){return r||(r=_n(6)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,n||0),r}function ri(e,t,n){var r=n.biff>8?4:2;return[e.read_shift(r),e.read_shift(r,"i"),e.read_shift(r,"i")]}function ii(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function si(e,t){return t||(t=_n(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function ai(e,t,n){var r=1536,i=16;switch(n.bookType){case"biff8":case"xla":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;default:throw new Error("unsupported BIFF version")}var s=_n(i);return s.write_shift(2,r),s.write_shift(2,t),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function oi(e,t){var n=!t||t.biff>=8?2:1,r=_n(8+n*e.name.length);r.write_shift(4,e.pos),r.write_shift(1,e.hs||0),r.write_shift(1,e.dt),r.write_shift(1,e.name.length),t.biff>=8&&r.write_shift(1,1),r.write_shift(n*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function ci(e,t,n,r){var i=n&&5==n.biff;r||(r=_n(i?3+t.length:5+2*t.length)),r.write_shift(2,e),r.write_shift(i?1:2,t.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*t.length,t,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return null==s.l&&(s.l=s.length),s}function li(e,t,n,r){var i=n&&5==n.biff;r||(r=_n(i?16:20)),r.write_shift(2,0),e.style?(r.write_shift(2,e.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,e.numFmtId||0),r.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function ui(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var r=Yr(e,0,n);return 3==r.charCodeAt(0)?r.slice(1):r}(e,0,n);for(var r=[],i=e.l+t,s=e.read_shift(n.biff>8?4:2);0!==s--;)r.push(ri(e,n.biff,n));if(e.l!=i)throw new Error("Bad ExternSheet: "+e.l+" != "+i);return r}function hi(e){var t=_n(24),n=Rn(e[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)t.write_shift(1,parseInt(r[i],16));return k([t,ti(e[1])])}function di(e){var t=e[1].Tooltip,n=_n(10+2*(t.length+1));n.write_shift(2,2048);var r=Rn(e[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<t.length;++i)n.write_shift(2,t.charCodeAt(i));return n.write_shift(2,0),n}function fi(e,t,n){if(!n.cellStyles)return bn(e,t);var r=n&&n.biff>=12?4:2,i=e.read_shift(r),s=e.read_shift(r),a=e.read_shift(r),o=e.read_shift(r),c=e.read_shift(2);2==r&&(e.l+=2);var l={s:i,e:s,w:a,ixfe:o,flags:c};return(n.biff>=5||!n.biff)&&(l.level=c>>8&7),l}var pi=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=De({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var r=n||{};r.dateNF||(r.dateNF="yyyymmdd");var i=Bn(function(t,n){var r=[],i=E(1);switch(n.type){case"base64":i=I(b(t));break;case"binary":i=I(t);break;case"buffer":case"array":i=t}wn(i,0);var s=i.read_shift(1),a=!!(136&s),o=!1,c=!1;switch(s){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,a=!0;break;case 140:c=!0;break;default:throw new Error("DBF Unsupported Version: "+s.toString(16))}var l=0,u=521;2==s&&(l=i.read_shift(2)),i.l+=3,2!=s&&(l=i.read_shift(4)),l>1048576&&(l=1e6),2!=s&&(u=i.read_shift(2));var h=i.read_shift(2),d=n.codepage||1252;2!=s&&(i.l+=16,i.read_shift(1),0!==i[i.l]&&(d=e[i[i.l]]),i.l+=1,i.l+=2),c&&(i.l+=36);for(var f=[],p={},g=Math.min(i.length,2==s?521:u-10-(o?264:0)),v=c?32:11;i.l<g&&13!=i[i.l];)switch((p={}).name=m.utils.decode(d,i.slice(i.l,i.l+v)).replace(/[\u0000\r\n].*$/g,""),i.l+=v,p.type=String.fromCharCode(i.read_shift(1)),2==s||c||(p.offset=i.read_shift(4)),p.len=i.read_shift(1),2==s&&(p.offset=i.read_shift(2)),p.dec=i.read_shift(1),p.name.length&&f.push(p),2!=s&&(i.l+=c?13:14),p.type){case"B":o&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==i[i.l]&&(i.l=u-1),13!==i.read_shift(1))throw new Error("DBF Terminator not found "+i.l+" "+i[i.l]);i.l=u;var y=0,w=0;for(r[0]=[],w=0;w!=f.length;++w)r[0][w]=f[w].name;for(;l-- >0;)if(42!==i[i.l])for(++i.l,r[++y]=[],w=0,w=0;w!=f.length;++w){var _=i.slice(i.l,i.l+f[w].len);i.l+=f[w].len,wn(_,0);var T=m.utils.decode(d,_);switch(f[w].type){case"C":T.trim().length&&(r[y][w]=T.replace(/\s+$/,""));break;case"D":8===T.length?r[y][w]=new Date(+T.slice(0,4),+T.slice(4,6)-1,+T.slice(6,8)):r[y][w]=T;break;case"F":r[y][w]=parseFloat(T.trim());break;case"+":case"I":r[y][w]=c?2147483648^_.read_shift(-4,"i"):_.read_shift(4,"i");break;case"L":switch(T.trim().toUpperCase()){case"Y":case"T":r[y][w]=!0;break;case"N":case"F":r[y][w]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+T+"|")}break;case"M":if(!a)throw new Error("DBF Unexpected MEMO for type "+s.toString(16));r[y][w]="##MEMO##"+(c?parseInt(T.trim(),10):_.read_shift(4));break;case"N":(T=T.replace(/\u0000/g,"").trim())&&"."!=T&&(r[y][w]=+T||0);break;case"@":r[y][w]=new Date(_.read_shift(-8,"f")-621356832e5);break;case"T":r[y][w]=new Date(864e5*(_.read_shift(4)-2440588)+_.read_shift(4));break;case"Y":r[y][w]=_.read_shift(4,"i")/1e4+_.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":r[y][w]=-_.read_shift(-8,"f");break;case"B":if(o&&8==f[w].len){r[y][w]=_.read_shift(8,"f");break}case"G":case"P":_.l+=f[w].len;break;case"0":if("_NullFlags"===f[w].name)break;default:throw new Error("DBF Unsupported data type "+f[w].type)}}else i.l+=h;if(2!=s&&i.l<i.length&&26!=i[i.l++])throw new Error("DBF EOF Marker missing "+(i.l-1)+" of "+i.length+" "+i[i.l-1].toString(16));return n&&n.sheetRows&&(r=r.slice(0,n.sheetRows)),n.DBF=f,r}(t,r),r);return i["!cols"]=r.DBF.map(function(e){return{wch:e.len,DBF:e}}),delete r.DBF,i}var r={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return Un(n(e,t),t)}catch(r){if(t&&t.WTF)throw r}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var i=n||{};if(+i.codepage>=0&&d(+i.codepage),"string"==i.type)throw new Error("Cannot write DBF to JS string");var s=Tn(),a=Lo(e,{header:1,raw:!0,cellDates:!0}),o=a[0],l=a.slice(1),u=e["!cols"]||[],h=0,f=0,p=0,m=1;for(h=0;h<o.length;++h)if(((u[h]||{}).DBF||{}).name)o[h]=u[h].DBF.name,++p;else if(null!=o[h]){if(++p,"number"===typeof o[h]&&(o[h]=o[h].toString(10)),"string"!==typeof o[h])throw new Error("DBF Invalid column name "+o[h]+" |"+typeof o[h]+"|");if(o.indexOf(o[h])!==h)for(f=0;f<1024;++f)if(-1==o.indexOf(o[h]+"_"+f)){o[h]+="_"+f;break}}var g=Ln(e["!ref"]),v=[],y=[],w=[];for(h=0;h<=g.e.c-g.s.c;++h){var b="",_="",T=0,E=[];for(f=0;f<l.length;++f)null!=l[f][h]&&E.push(l[f][h]);if(0!=E.length&&null!=o[h]){for(f=0;f<E.length;++f){switch(typeof E[f]){case"number":_="B";break;case"string":default:_="C";break;case"boolean":_="L";break;case"object":_=E[f]instanceof Date?"D":"C"}T=Math.max(T,String(E[f]).length),b=b&&b!=_?"C":_}T>250&&(T=250),"C"==(_=((u[h]||{}).DBF||{}).type)&&u[h].DBF.len>T&&(T=u[h].DBF.len),"B"==b&&"N"==_&&(b="N",w[h]=u[h].DBF.dec,T=u[h].DBF.len),y[h]="C"==b||"N"==_?T:r[b]||0,m+=y[h],v[h]=b}else v[h]="?"}var S=s.next(32);for(S.write_shift(4,318902576),S.write_shift(4,l.length),S.write_shift(2,296+32*p),S.write_shift(2,m),h=0;h<4;++h)S.write_shift(4,0);for(S.write_shift(4,(+t[c]||3)<<8),h=0,f=0;h<o.length;++h)if(null!=o[h]){var I=s.next(32),A=(o[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,A,"sbcs"),I.write_shift(1,"?"==v[h]?"C":v[h],"sbcs"),I.write_shift(4,f),I.write_shift(1,y[h]||r[v[h]]||0),I.write_shift(1,w[h]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),f+=y[h]||r[v[h]]||0}var C=s.next(264);for(C.write_shift(4,13),h=0;h<65;++h)C.write_shift(4,0);for(h=0;h<l.length;++h){var k=s.next(m);for(k.write_shift(1,0),f=0;f<o.length;++f)if(null!=o[f])switch(v[f]){case"L":k.write_shift(1,null==l[h][f]?63:l[h][f]?84:70);break;case"B":k.write_shift(8,l[h][f]||0,"f");break;case"N":var N="0";for("number"==typeof l[h][f]&&(N=l[h][f].toFixed(w[f]||0)),p=0;p<y[f]-N.length;++p)k.write_shift(1,32);k.write_shift(1,N,"sbcs");break;case"D":l[h][f]?(k.write_shift(4,("0000"+l[h][f].getFullYear()).slice(-4),"sbcs"),k.write_shift(2,("00"+(l[h][f].getMonth()+1)).slice(-2),"sbcs"),k.write_shift(2,("00"+l[h][f].getDate()).slice(-2),"sbcs")):k.write_shift(8,"00000000","sbcs");break;case"C":var x=String(null!=l[h][f]?l[h][f]:"").slice(0,y[f]);for(k.write_shift(1,x,"sbcs"),p=0;p<y[f]-x.length;++p)k.write_shift(1,32)}}return s.next(1).write_shift(1,26),s.end()}}}(),mi=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+Ne(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var r=e[n];return"number"==typeof r?v(r):r},r=function(e,t,n){var r=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==r?e:v(r)};function i(e,i){var s,a=e.split(/[\n\r]+/),o=-1,c=-1,l=0,u=0,h=[],f=[],p=null,g={},v=[],y=[],w=[],b=0;for(+i.codepage>=0&&d(+i.codepage);l!==a.length;++l){b=0;var _,T=a[l].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(t,n),E=T.replace(/;;/g,"\0").split(";").map(function(e){return e.replace(/\u0000/g,";")}),S=E[0];if(T.length>0)switch(S){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==E[1].charAt(0)&&f.push(T.slice(3).replace(/;;/g,";"));break;case"C":var I=!1,A=!1,C=!1,k=!1,N=-1,x=-1;for(u=1;u<E.length;++u)switch(E[u].charAt(0)){case"A":case"G":break;case"X":c=parseInt(E[u].slice(1))-1,A=!0;break;case"Y":for(o=parseInt(E[u].slice(1))-1,A||(c=0),s=h.length;s<=o;++s)h[s]=[];break;case"K":'"'===(_=E[u].slice(1)).charAt(0)?_=_.slice(1,_.length-1):"TRUE"===_?_=!0:"FALSE"===_?_=!1:isNaN(Ge(_))?isNaN(Ye(_).getDate())||(_=ze(_)):(_=Ge(_),null!==p&&me(p)&&(_=Ve(_))),"undefined"!==typeof m&&"string"==typeof _&&"string"!=(i||{}).type&&(i||{}).codepage&&(_=m.utils.decode(i.codepage,_)),I=!0;break;case"E":k=!0;var D=ss(E[u].slice(1),{r:o,c:c});h[o][c]=[h[o][c],D];break;case"S":C=!0,h[o][c]=[h[o][c],"S5S"];break;case"R":N=parseInt(E[u].slice(1))-1;break;case"C":x=parseInt(E[u].slice(1))-1;break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+T)}if(I&&(h[o][c]&&2==h[o][c].length?h[o][c][0]=_:h[o][c]=_,p=null),C){if(k)throw new Error("SYLK shared formula cannot have own formula");var R=N>-1&&h[N][x];if(!R||!R[1])throw new Error("SYLK shared formula cannot find base");h[o][c][1]=cs(R[1],{r:o-N,c:c-x})}break;case"F":var P=0;for(u=1;u<E.length;++u)switch(E[u].charAt(0)){case"X":c=parseInt(E[u].slice(1))-1,++P;break;case"Y":for(o=parseInt(E[u].slice(1))-1,s=h.length;s<=o;++s)h[s]=[];break;case"M":b=parseInt(E[u].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":p=f[parseInt(E[u].slice(1))];break;case"W":for(w=E[u].slice(1).split(" "),s=parseInt(w[0],10);s<=parseInt(w[1],10);++s)b=parseInt(w[2],10),y[s-1]=0===b?{hidden:!0}:{wch:b},Ri(y[s-1]);break;case"C":y[c=parseInt(E[u].slice(1))-1]||(y[c]={});break;case"R":v[o=parseInt(E[u].slice(1))-1]||(v[o]={}),b>0?(v[o].hpt=b,v[o].hpx=Oi(b)):0===b&&(v[o].hidden=!0);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+T)}P<1&&(p=null);break;default:if(i&&i.WTF)throw new Error("SYLK bad record "+T)}}return v.length>0&&(g["!rows"]=v),y.length>0&&(g["!cols"]=y),i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),[h,g]}function s(e,t){var n=function(e,t){switch(t.type){case"base64":return i(b(e),t);case"binary":return i(e,t);case"buffer":return i(_&&Buffer.isBuffer(e)?e.toString("binary"):C(e),t);case"array":return i(We(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),r=n[0],s=n[1],a=Bn(r,t);return Ne(s).forEach(function(e){a[e]=s[e]}),a}function a(e,t,n,r){var i="C;Y"+(n+1)+";X"+(r+1)+";K";switch(e.t){case"n":i+=e.v||0,e.f&&!e.F&&(i+=";E"+os(e.f,{r:n,c:r}));break;case"b":i+=e.v?"TRUE":"FALSE";break;case"e":i+=e.w||e.v;break;case"d":i+='"'+(e.w||e.v)+'"';break;case"s":i+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return i}return e["|"]=254,{to_workbook:function(e,t){return Un(s(e,t),t)},to_sheet:s,from_sheet:function(e,t){var n,r,i=["ID;PWXL;N;E"],s=[],o=Ln(e["!ref"]),c=Array.isArray(e),l="\r\n";i.push("P;PGeneral"),i.push("F;P0;DG0G8;M255"),e["!cols"]&&(r=i,e["!cols"].forEach(function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=Ni(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=xi(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&r.push(n)})),e["!rows"]&&function(e,t){t.forEach(function(t,n){var r="F;";t.hidden?r+="M0;":t.hpt?r+="M"+20*t.hpt+";":t.hpx&&(r+="M"+20*Pi(t.hpx)+";"),r.length>2&&e.push(r+"R"+(n+1))})}(i,e["!rows"]),i.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var u=o.s.r;u<=o.e.r;++u)for(var h=o.s.c;h<=o.e.c;++h){var d=Pn({r:u,c:h});(n=c?(e[u]||[])[h]:e[d])&&(null!=n.v||n.f&&!n.F)&&s.push(a(n,0,u,h))}return i.join(l)+l+s.join(l)+l+"E"+l}}}(),gi=function(){function e(e,t){for(var n=e.split("\n"),r=-1,i=-1,s=0,a=[];s!==n.length;++s)if("BOT"!==n[s].trim()){if(!(r<0)){for(var o=n[s].trim().split(","),c=o[0],l=o[1],u=n[++s]||"";1&(u.match(/["]/g)||[]).length&&s<n.length-1;)u+="\n"+n[++s];switch(u=u.trim(),+c){case-1:if("BOT"===u){a[++r]=[],i=0;continue}if("EOD"!==u)throw new Error("Unrecognized DIF special command "+u);break;case 0:"TRUE"===u?a[r][i]=!0:"FALSE"===u?a[r][i]=!1:isNaN(Ge(l))?isNaN(Ye(l).getDate())?a[r][i]=l:a[r][i]=ze(l):a[r][i]=Ge(l),++i;break;case 1:(u=(u=u.slice(1,u.length-1)).replace(/""/g,'"'))&&u.match(/^=".*"$/)&&(u=u.slice(2,-1)),a[r][i++]=""!==u?u:null}if("EOD"===u)break}}else a[++r]=[],i=0;return t&&t.sheetRows&&(a=a.slice(0,t.sheetRows)),a}function t(t,n){return Bn(function(t,n){switch(n.type){case"base64":return e(b(t),n);case"binary":return e(t,n);case"buffer":return e(_&&Buffer.isBuffer(t)?t.toString("binary"):C(t),n);case"array":return e(We(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}return{to_workbook:function(e,n){return Un(t(e,n),n)},to_sheet:t,from_sheet:function(){var e=function(e,t,n,r,i){e.push(t),e.push(n+","+r),e.push('"'+i.replace(/"/g,'""')+'"')},t=function(e,t,n,r){e.push(t+","+n),e.push(1==t?'"'+r.replace(/"/g,'""')+'"':r)};return function(n){var r,i=[],s=Ln(n["!ref"]),a=Array.isArray(n);e(i,"TABLE",0,1,"sheetjs"),e(i,"VECTORS",0,s.e.r-s.s.r+1,""),e(i,"TUPLES",0,s.e.c-s.s.c+1,""),e(i,"DATA",0,0,"");for(var o=s.s.r;o<=s.e.r;++o){t(i,-1,0,"BOT");for(var c=s.s.c;c<=s.e.c;++c){var l=Pn({r:o,c:c});if(r=a?(n[o]||[])[c]:n[l])switch(r.t){case"n":var u=r.w;u||null==r.v||(u=r.v),null==u?r.f&&!r.F?t(i,1,0,"="+r.f):t(i,1,0,""):t(i,0,u,"V");break;case"b":t(i,0,r.v?1:0,r.v?"TRUE":"FALSE");break;case"s":t(i,1,0,isNaN(r.v)?r.v:'="'+r.v+'"');break;case"d":r.w||(r.w=we(r.z||j[14],Oe(ze(r.v)))),t(i,0,r.w,"V");break;default:t(i,1,0,"")}else t(i,1,0,"")}}t(i,-1,0,"EOD");return i.join("\r\n")}}()}}(),vi=function(){function e(e){return e.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n")}function t(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(t,n){return Bn(function(t,n){for(var r=t.split("\n"),i=-1,s=-1,a=0,o=[];a!==r.length;++a){var c=r[a].trim().split(":");if("cell"===c[0]){var l=Rn(c[1]);if(o.length<=l.r)for(i=o.length;i<=l.r;++i)o[i]||(o[i]=[]);switch(i=l.r,s=l.c,c[2]){case"t":o[i][s]=e(c[3]);break;case"v":o[i][s]=+c[3];break;case"vtf":var u=c[c.length-1];case"vtc":"nl"===c[3]?o[i][s]=!!+c[4]:o[i][s]=+c[4],"vtf"==c[2]&&(o[i][s]=[o[i][s],u])}}}return n&&n.sheetRows&&(o=o.slice(0,n.sheetRows)),o}(t,n),n)}var r=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),a="--SocialCalcSpreadsheetControlSave--";function o(e){if(!e||!e["!ref"])return"";for(var n,r=[],i=[],s="",a=On(e["!ref"]),o=Array.isArray(e),c=a.s.r;c<=a.e.r;++c)for(var l=a.s.c;l<=a.e.c;++l)if(s=Pn({r:c,c:l}),(n=o?(e[c]||[])[l]:e[s])&&null!=n.v&&"z"!==n.t){switch(i=["cell",s,"t"],n.t){case"s":case"str":i.push(t(n.v));break;case"n":n.f?(i[2]="vtf",i[3]="n",i[4]=n.v,i[5]=t(n.f)):(i[2]="v",i[3]=n.v);break;case"b":i[2]="vt"+(n.f?"f":"c"),i[3]="nl",i[4]=n.v?"1":"0",i[5]=t(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var u=Oe(ze(n.v));i[2]="vtc",i[3]="nd",i[4]=""+u,i[5]=n.w||we(n.z||j[14],u);break;case"e":continue}r.push(i.join(":"))}return r.push("sheet:c:"+(a.e.c-a.s.c+1)+":r:"+(a.e.r-a.s.r+1)+":tvf:1"),r.push("valueformat:1:text-wiki"),r.join("\n")}return{to_workbook:function(e,t){return Un(n(e,t),t)},to_sheet:n,from_sheet:function(e){return[r,i,s,i,o(e),a].join("\n")}}}(),yi=function(){function e(e,t,n,r,i){i.raw?t[n][r]=e:""===e||("TRUE"===e?t[n][r]=!0:"FALSE"===e?t[n][r]=!1:isNaN(Ge(e))?isNaN(Ye(e).getDate())?t[n][r]=e:t[n][r]=ze(e):t[n][r]=Ge(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function r(e){for(var r={},i=!1,s=0,a=0;s<e.length;++s)34==(a=e.charCodeAt(s))?i=!i:!i&&a in t&&(r[a]=(r[a]||0)+1);for(s in a=[],r)Object.prototype.hasOwnProperty.call(r,s)&&a.push([r[s],s]);if(!a.length)for(s in r=n)Object.prototype.hasOwnProperty.call(r,s)&&a.push([r[s],s]);return a.sort(function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]}),t[a.pop()[1]]||44}function i(e,t){var n=t||{},i="";var s=n.dense?[]:{},a={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(i=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(i=e.charAt(4),e=e.slice(6)):i=r(e.slice(0,1024)):i=n&&n.FS?n.FS:r(e.slice(0,1024));var o=0,c=0,l=0,u=0,h=0,d=i.charCodeAt(0),f=!1,p=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=n.dateNF?function(e){var t="number"==typeof e?j[e]:e;return t=t.replace(Ee,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function v(){var t=e.slice(u,h),r={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)r.t="z";else if(n.raw)r.t="s",r.v=t;else if(0===t.trim().length)r.t="s",r.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(r.t="s",r.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(r.t="n",r.f=t.slice(1)):(r.t="s",r.v=t);else if("TRUE"==t)r.t="b",r.v=!0;else if("FALSE"==t)r.t="b",r.v=!1;else if(isNaN(l=Ge(t)))if(!isNaN(Ye(t).getDate())||g&&t.match(g)){r.z=n.dateNF||j[14];var i=0;g&&t.match(g)&&(t=function(e,t,n){var r=-1,i=-1,s=-1,a=-1,o=-1,c=-1;(t.match(Ee)||[]).forEach(function(e,t){var l=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":r=l;break;case"d":s=l;break;case"h":a=l;break;case"s":c=l;break;case"m":a>=0?o=l:i=l}}),c>=0&&-1==o&&i>=0&&(o=i,i=-1);var l=(""+(r>=0?r:(new Date).getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);7==l.length&&(l="0"+l),8==l.length&&(l="20"+l);var u=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return-1==a&&-1==o&&-1==c?l:-1==r&&-1==i&&-1==s?u:l+"T"+u}(0,n.dateNF,t.match(g)||[]),i=1),n.cellDates?(r.t="d",r.v=ze(t,i)):(r.t="n",r.v=Oe(ze(t,i))),!1!==n.cellText&&(r.w=we(r.z,r.v instanceof Date?Oe(r.v):r.v)),n.cellNF||delete r.z}else r.t="s",r.v=t;else r.t="n",!1!==n.cellText&&(r.w=t),r.v=l;if("z"==r.t||(n.dense?(s[o]||(s[o]=[]),s[o][c]=r):s[Pn({c:c,r:o})]=r),u=h+1,m=e.charCodeAt(u),a.e.c<c&&(a.e.c=c),a.e.r<o&&(a.e.r=o),p==d)++c;else if(c=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;h<e.length;++h)switch(p=e.charCodeAt(h)){case 34:34===m&&(f=!f);break;case d:case 10:case 13:if(!f&&v())break e}return h-u>0&&v(),s["!ref"]=Mn(a),s}function s(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?i(t,n):Bn(function(t,n){var r=n||{},i=[];if(!t||0===t.length)return i;for(var s=t.split(/[\r\n]/),a=s.length-1;a>=0&&0===s[a].length;)--a;for(var o=10,c=0,l=0;l<=a;++l)-1==(c=s[l].indexOf(" "))?c=s[l].length:c++,o=Math.max(o,c);for(l=0;l<=a;++l){i[l]=[];var u=0;for(e(s[l].slice(0,o).trim(),i,l,u,r),u=1;u<=(s[l].length-o)/10+1;++u)e(s[l].slice(o+10*(u-1),o+10*u).trim(),i,l,u,r)}return r.sheetRows&&(i=i.slice(0,r.sheetRows)),i}(t,n),n):i(t,n)}function a(e,t){var n="",r="string"==t.type?[0,0,0,0]:Co(e,t);switch(t.type){case"base64":n=b(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof m?m.utils.decode(t.codepage,e):_&&Buffer.isBuffer(e)?e.toString("binary"):C(e);break;case"array":n=We(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==r[0]&&187==r[1]&&191==r[2]?n=ht(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=ht(n):"binary"==t.type&&"undefined"!==typeof m&&t.codepage&&(n=m.utils.decode(t.codepage,m.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?vi.to_sheet("string"==t.type?n:ht(n),t):s(n,t)}return{to_workbook:function(e,t){return Un(a(e,t),t)},to_sheet:a,from_sheet:function(e){for(var t,n=[],r=Ln(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){for(var a=[],o=r.s.c;o<=r.e.c;++o){var c=Pn({r:s,c:o});if((t=i?(e[s]||[])[o]:e[c])&&null!=t.v){for(var l=(t.w||(Vn(t),t.w)||"").slice(0,10);l.length<10;)l+=" ";a.push(l+(0===o?" ":""))}else a.push("          ")}n.push(a.join(""))}return n.join("\n")}}}();var wi=function(){function e(e,t,n){if(e){wn(e,e.l||0);for(var r=n.Enum||y;e.l<e.length;){var i=e.read_shift(2),s=r[i]||r[65535],a=e.read_shift(2),o=e.l+a,c=s.f&&s.f(e,a,n);if(e.l=o,t(c,s,i))return}}}function t(t,n){if(!t)return t;var r=n||{};var i=r.dense?[]:{},s="Sheet1",a="",o=0,c={},l=[],u=[],h={s:{r:0,c:0},e:{r:0,c:0}},d=r.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])r.Enum=y,e(t,function(e,t,n){switch(n){case 0:r.vers=e,e>=4096&&(r.qpro=!0);break;case 6:h=e;break;case 204:e&&(a=e);break;case 222:a=e;break;case 15:case 51:r.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=r.dateNF||j[14],r.cellDates&&(e[1].t="d",e[1].v=Ve(e[1].v))),r.qpro&&e[3]>o&&(i["!ref"]=Mn(h),c[s]=i,l.push(s),i=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s=a||"Sheet"+(o+1),a="");var u=r.dense?(i[e[0].r]||[])[e[0].c]:i[Pn(e[0])];if(u){u.t=e[1].t,u.v=e[1].v,null!=e[1].z&&(u.z=e[1].z),null!=e[1].f&&(u.f=e[1].f);break}r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[Pn(e[0])]=e[1]}},r);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);r.Enum=w,14==t[2]&&(r.qpro=!0,t.l=0),e(t,function(e,t,n){switch(n){case 204:s=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(i["!ref"]=Mn(h),c[s]=i,l.push(s),i=r.dense?[]:{},h={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],s="Sheet"+(o+1)),d>0&&e[0].r>=d)break;r.dense?(i[e[0].r]||(i[e[0].r]=[]),i[e[0].r][e[0].c]=e[1]):i[Pn(e[0])]=e[1],h.e.c<e[0].c&&(h.e.c=e[0].c),h.e.r<e[0].r&&(h.e.r=e[0].r);break;case 27:e[14e3]&&(u[e[14e3][0]]=e[14e3][1]);break;case 1537:u[e[0]]=e[1],e[0]==o&&(s=e[1])}},r)}if(i["!ref"]=Mn(h),c[a||s]=i,l.push(a||s),!u.length)return{SheetNames:l,Sheets:c};for(var f={},p=[],m=0;m<u.length;++m)c[l[m]]?(p.push(u[m]||l[m]),f[u[m]]=c[u[m]]||c[l[m]]):(p.push(u[m]),f[u[m]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function n(e,t,n){var r=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(r[0].c=e.read_shift(1),r[3]=e.read_shift(1),r[0].r=e.read_shift(2),e.l+=2):(r[2]=e.read_shift(1),r[0].c=e.read_shift(2),r[0].r=e.read_shift(2)),r}function r(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].t="s",20768==r.vers){e.l++;var a=e.read_shift(1);return s[1].v=e.read_shift(a,"utf8"),s}return r.qpro&&e.l++,s[1].v=e.read_shift(i-e.l,"cstr"),s}function i(e,t,n){var r=_n(7+n.length);r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(1,39);for(var i=0;i<r.length;++i){var s=n.charCodeAt(i);r.write_shift(1,s>=128?95:s)}return r.write_shift(1,0),r}function s(e,t,n){var r=_n(7);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n,"i"),r}function a(e,t,n){var r=_n(13);return r.write_shift(1,255),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(8,n,"f"),r}function o(e,t,n){var r=32768&t;return t=(r?e:0)+((t&=-32769)>=8192?t-16384:t),(r?"":"$")+(n?Dn(t):Nn(t))}var c={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},l=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function u(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function h(e,t,n,r){var i=_n(6+r.length);i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),i.write_shift(1,39);for(var s=0;s<r.length;++s){var a=r.charCodeAt(s);i.write_shift(1,a>=128?95:a)}return i.write_shift(1,0),i}function f(e,t){var n=u(e),r=e.read_shift(4),i=e.read_shift(4),s=e.read_shift(2);if(65535==s)return 0===r&&3221225472===i?(n[1].t="e",n[1].v=15):0===r&&3489660928===i?(n[1].t="e",n[1].v=42):n[1].v=0,n;var a=32768&s;return s=(32767&s)-16446,n[1].v=(1-2*a)*(i*Math.pow(2,s+32)+r*Math.pow(2,s)),n}function p(e,t,n,r){var i=_n(14);if(i.write_shift(2,e),i.write_shift(1,n),i.write_shift(1,t),0==r)return i.write_shift(4,0),i.write_shift(4,0),i.write_shift(2,65535),i;var s,a=0,o=0,c=0;return r<0&&(a=1,r=-r),o=0|Math.log2(r),0==(2147483648&(c=(r/=Math.pow(2,o-31))>>>0))&&(++o,c=(r/=2)>>>0),r-=c,c|=2147483648,c>>>=0,s=(r*=Math.pow(2,32))>>>0,i.write_shift(4,s),i.write_shift(4,c),o+=16383+(a?32768:0),i.write_shift(2,o),i}function m(e,t){var n=u(e),r=e.read_shift(8,"f");return n[1].v=r,n}function g(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function v(e,t){var n=_n(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var r=0;r<e.length;++r){var i=e.charCodeAt(r);n[n.l++]=i>127?95:i}return n[n.l++]=0,n}var y={0:{n:"BOF",f:qr},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var r={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(r.s.c=e.read_shift(1),e.l++,r.s.r=e.read_shift(2),r.e.c=e.read_shift(1),e.l++,r.e.r=e.read_shift(2),r):(r.s.c=e.read_shift(2),r.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),r.e.c=e.read_shift(2),r.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==r.s.c&&(r.s.c=r.e.c=r.s.r=r.e.r=0),r)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(2,"i"),i}},14:{n:"NUMBER",f:function(e,t,r){var i=n(e,0,r);return i[1].v=e.read_shift(8,"f"),i}},15:{n:"LABEL",f:r},16:{n:"FORMULA",f:function(e,t,r){var i=e.l+t,s=n(e,0,r);if(s[1].v=e.read_shift(8,"f"),r.qpro)e.l=i;else{var a=e.read_shift(2);!function(e,t){wn(e,0);var n=[],r=0,i="",s="",a="",u="";for(;e.l<e.length;){var h=e[e.l++];switch(h){case 0:n.push(e.read_shift(8,"f"));break;case 1:s=o(t[0].c,e.read_shift(2),!0),i=o(t[0].r,e.read_shift(2),!1),n.push(s+i);break;case 2:var d=o(t[0].c,e.read_shift(2),!0),f=o(t[0].r,e.read_shift(2),!1);s=o(t[0].c,e.read_shift(2),!0),i=o(t[0].r,e.read_shift(2),!1),n.push(d+f+":"+s+i);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";h=e[e.l++];)p+=String.fromCharCode(h);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:u=n.pop(),a=n.pop(),n.push(["AND","OR"][h-20]+"("+a+","+u+")");break;default:if(h<32&&l[h])u=n.pop(),a=n.pop(),n.push(a+l[h]+u);else{if(!c[h])return h<=7?console.error("WK1 invalid opcode "+h.toString(16)):h<=24?console.error("WK1 unsupported op "+h.toString(16)):h<=30?console.error("WK1 invalid opcode "+h.toString(16)):h<=115?console.error("WK1 unsupported function opcode "+h.toString(16)):console.error("WK1 unrecognized opcode "+h.toString(16));if(69==(r=c[h][1])&&(r=e[e.l++]),r>n.length)return void console.error("WK1 bad formula parse 0x"+h.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-r);n.length-=r,n.push(c[h][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+a),s),e.l+=a}return s}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:r},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:g},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var r="";r.length<n;)r+=String.fromCharCode(e[e.l++]);return r}},65535:{n:""}},w={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=u(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:f},24:{n:"NUMBER18",f:function(e,t){var n=u(e);n[1].v=e.read_shift(2);var r=n[1].v>>1;if(1&n[1].v)switch(7&r){case 0:r=5e3*(r>>3);break;case 1:r=500*(r>>3);break;case 2:r=(r>>3)/20;break;case 3:r=(r>>3)/200;break;case 4:r=(r>>3)/2e3;break;case 5:r=(r>>3)/2e4;break;case 6:r=(r>>3)/16;break;case 7:r=(r>>3)/64}return n[1].v=r,n}},25:{n:"FORMULA19",f:function(e,t){var n=f(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},r=e.l+t;e.l<r;){var i=e.read_shift(2);if(14e3==i){for(n[i]=[0,""],n[i][0]=e.read_shift(2);e[e.l];)n[i][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=u(e),r=e.read_shift(4);return n[1].v=r>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:m},40:{n:"FORMULA28",f:function(e,t){var n=m(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:g},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var r=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[r,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&d(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var r=Tn(),o=Ln(e["!ref"]),c=Array.isArray(e),l=[];Va(r,0,function(e){var t=_n(2);return t.write_shift(2,e),t}(1030)),Va(r,6,function(e){var t=_n(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var u=Math.min(o.e.r,8191),h=o.s.r;h<=u;++h)for(var f=Nn(h),p=o.s.c;p<=o.e.c;++p){h===o.s.r&&(l[p]=Dn(p));var m=l[p]+f,g=c?(e[h]||[])[p]:e[m];if(g&&"z"!=g.t)if("n"==g.t)(0|g.v)==g.v&&g.v>=-32768&&g.v<=32767?Va(r,13,s(h,p,g.v)):Va(r,14,a(h,p,g.v));else Va(r,15,i(h,p,Vn(g).slice(0,239)))}return Va(r,1),r.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&d(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var r=Tn();Va(r,0,function(e){var t=_n(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,r=0,i=0,s=0;s<e.SheetNames.length;++s){var a=e.SheetNames[s],o=e.Sheets[a];if(o&&o["!ref"]){++i;var c=On(o["!ref"]);n<c.e.r&&(n=c.e.r),r<c.e.c&&(r=c.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,i),t.write_shift(1,r),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var i=0,s=0;i<e.SheetNames.length;++i)(e.Sheets[e.SheetNames[i]]||{})["!ref"]&&Va(r,27,v(e.SheetNames[i],s++));var a=0;for(i=0;i<e.SheetNames.length;++i){var o=e.Sheets[e.SheetNames[i]];if(o&&o["!ref"]){for(var c=Ln(o["!ref"]),l=Array.isArray(o),u=[],f=Math.min(c.e.r,8191),m=c.s.r;m<=f;++m)for(var g=Nn(m),y=c.s.c;y<=c.e.c;++y){m===c.s.r&&(u[y]=Dn(y));var w=u[y]+g,b=l?(o[m]||[])[y]:o[w];if(b&&"z"!=b.t)if("n"==b.t)Va(r,23,p(m,y,a,b.v));else Va(r,22,h(m,y,a,Vn(b).slice(0,239)))}++a}}return Va(r,1),r.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(I(b(e)),n);case"binary":return t(I(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var bi=/^\s|\s$|[\t\n\r]/;function _i(e,t){if(!t.bookSST)return"";var n=[Je];n[n.length]=vt("sst",null,{xmlns:Rt[0],count:e.Count,uniqueCount:e.Unique});for(var r=0;r!=e.length;++r)if(null!=e[r]){var i=e[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(bi)&&(s+=' xml:space="preserve"'),s+=">"+nt(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}var Ti=function(e,t){var n=!1;return null==t&&(n=!0,t=_n(15+4*e.t.length)),t.write_shift(1,0),Hn(e.t,t),n?t.slice(0,t.l):t};function Ei(e){var t=Tn();En(t,159,function(e,t){return t||(t=_n(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}(e));for(var n=0;n<e.length;++n)En(t,19,Ti(e[n]));return En(t,160),t.end()}function Si(e){if("undefined"!==typeof m)return m.utils.encode(c,e);for(var t=[],n=e.split(""),r=0;r<n.length;++r)t[r]=n[r].charCodeAt(0);return t}function Ii(e){var t,n,r=0,i=Si(e),s=i.length+1;for((t=E(s))[0]=i.length,n=1;n!=s;++n)t[n]=i[n-1];for(n=s-1;n>=0;--n)r=((0===(16384&r)?0:1)|r<<1&32767)^t[n];return 52811^r}var Ai=function(){function e(e,n){switch(n.type){case"base64":return t(b(e),n);case"binary":return t(e,n);case"buffer":return t(_&&Buffer.isBuffer(e)?e.toString("binary"):C(e),n);case"array":return t(We(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},r=e.match(/\\trowd.*?\\row\b/g);if(!r.length)throw new Error("RTF missing table");var i={s:{c:0,r:0},e:{c:0,r:r.length-1}};return r.forEach(function(e,t){Array.isArray(n)&&(n[t]=[]);for(var r,s=/\\\w+\b/g,a=0,o=-1;r=s.exec(e);){if("\\cell"===r[0]){var c=e.slice(a,s.lastIndex-r[0].length);if(" "==c[0]&&(c=c.slice(1)),++o,c.length){var l={v:c,t:"s"};Array.isArray(n)?n[t][o]=l:n[Pn({r:t,c:o})]=l}}a=s.lastIndex}o>i.e.c&&(i.e.c=o)}),n["!ref"]=Mn(i),n}return{to_workbook:function(t,n){return Un(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],r=Ln(e["!ref"]),i=Array.isArray(e),s=r.s.r;s<=r.e.r;++s){n.push("\\trowd\\trautofit1");for(var a=r.s.c;a<=r.e.c;++a)n.push("\\cellx"+(a+1));for(n.push("\\pard\\intbl"),a=r.s.c;a<=r.e.c;++a){var o=Pn({r:s,c:a});(t=i?(e[s]||[])[a]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(Vn(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function Ci(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}var ki=6;function Ni(e){return Math.floor((e+Math.round(128/ki)/256)*ki)}function xi(e){return Math.floor((e-5)/ki*100+.5)/100}function Di(e){return Math.round((e*ki+5)/ki*256)/256}function Ri(e){e.width?(e.wpx=Ni(e.width),e.wch=xi(e.wpx),e.MDW=ki):e.wpx?(e.wch=xi(e.wpx),e.width=Di(e.wch),e.MDW=ki):"number"==typeof e.wch&&(e.width=Di(e.wch),e.wpx=Ni(e.width),e.MDW=ki),e.customWidth&&delete e.customWidth}function Pi(e){return 96*e/96}function Oi(e){return 96*e/96}function Mi(e,t){var n,r=[Je,vt("styleSheet",null,{xmlns:Rt[0],"xmlns:vt":Nt})];return e.SSF&&null!=(n=function(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=e[r]&&(t[t.length]=vt("numFmt",null,{numFmtId:r,formatCode:nt(e[r])}))}),1===t.length?"":(t[t.length]="</numFmts>",t[0]=vt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(e.SSF))&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=function(e){var t=[];return t[t.length]=vt("cellXfs",null),e.forEach(function(e){t[t.length]=vt("xf",null,e)}),t[t.length]="</cellXfs>",2===t.length?"":(t[0]=vt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Li(e,t,n){n||(n=_n(6+4*t.length)),n.write_shift(2,e),Hn(t,n);var r=n.length>n.l?n.slice(0,n.l):n;return null==n.l&&(n.l=n.length),r}function Fi(e,t){t||(t=_n(153)),t.write_shift(2,20*e.sz),function(e,t){t||(t=_n(2));var n=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);t.write_shift(1,n),t.write_shift(1,0)}(e,t),t.write_shift(2,e.bold?700:400);var n=0;"superscript"==e.vertAlign?n=1:"subscript"==e.vertAlign&&(n=2),t.write_shift(2,n),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),fr(e.color,t);var r=0;return"major"==e.scheme&&(r=1),"minor"==e.scheme&&(r=2),t.write_shift(1,r),Hn(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Vi,Ui=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],ji=bn;function Bi(e,t){t||(t=_n(84)),Vi||(Vi=De(Ui));var n=Vi[e.patternType];null==n&&(n=40),t.write_shift(4,n);var r=0;if(40!=n)for(fr({auto:1},t),fr({auto:1},t);r<12;++r)t.write_shift(4,0);else{for(;r<4;++r)t.write_shift(4,0);for(;r<12;++r)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function zi(e,t,n){n||(n=_n(16)),n.write_shift(2,t||0),n.write_shift(2,e.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);return n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function Wi(e,t){return t||(t=_n(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Hi=bn;function qi(e){var t;En(e,613,zn(1)),En(e,46,(t||(t=_n(51)),t.write_shift(1,0),Wi(0,t),Wi(0,t),Wi(0,t),Wi(0,t),Wi(0,t),t.length>t.l?t.slice(0,t.l):t)),En(e,614)}function Gi(e){var t,n;En(e,619,zn(1)),En(e,48,(t={xfId:0,builtinId:0,name:"Normal"},n||(n=_n(52)),n.write_shift(4,t.xfId),n.write_shift(2,1),n.write_shift(1,+t.builtinId),n.write_shift(1,0),nr(t.name||"",n),n.length>n.l?n.slice(0,n.l):n)),En(e,620)}function Ki(e){En(e,508,function(e,t,n){var r=_n(2052);return r.write_shift(4,e),nr(t,r),nr(n,r),r.length>r.l?r.slice(0,r.l):r}(0,"TableStyleMedium9","PivotStyleMedium4")),En(e,509)}function Yi(e,t){var n=Tn();return En(n,278),function(e,t){if(t){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(e){for(var r=e[0];r<=e[1];++r)null!=t[r]&&++n}),0!=n&&(En(e,615,zn(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)null!=t[r]&&En(e,44,Li(r,t[r]))}),En(e,616))}}(n,e.SSF),function(e){En(e,611,zn(1)),En(e,43,Fi({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),En(e,612)}(n),function(e){En(e,603,zn(2)),En(e,45,Bi({patternType:"none"})),En(e,45,Bi({patternType:"gray125"})),En(e,604)}(n),qi(n),function(e){En(e,626,zn(1)),En(e,47,zi({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),En(e,627)}(n),function(e,t){En(e,617,zn(t.length)),t.forEach(function(t){En(e,47,zi(t,0))}),En(e,618)}(n,t.cellXfs),Gi(n),function(e){En(e,505,zn(0)),En(e,506)}(n),Ki(n),En(n,279),n.end()}function Qi(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[Je];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Xi(){var e=Tn();return En(e,332),En(e,334,zn(1)),En(e,335,function(e){var t=_n(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Hn(e.name,t),t.slice(0,t.l)}({name:"XLDAPR",version:12e4,flags:3496657072})),En(e,336),En(e,339,function(e,t){var n=_n(8+2*t.length);return n.write_shift(4,e),Hn(t,n),n.slice(0,n.l)}(1,"XLDAPR")),En(e,52),En(e,35,zn(514)),En(e,4096,zn(0)),En(e,4097,Gr(1)),En(e,36),En(e,53),En(e,340),En(e,337,function(e,t){var n=_n(8);return n.write_shift(4,e),n.write_shift(4,t?1:0),n}(1,!0)),En(e,51,function(e){var t=_n(4+8*e.length);t.write_shift(4,e.length);for(var n=0;n<e.length;++n)t.write_shift(4,e[n][0]),t.write_shift(4,e[n][1]);return t}([[1,0]])),En(e,338),En(e,333),e.end()}function Ji(){var e=[Je];return e.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>'),e.join("")}var $i=1024;function Zi(e,t){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[vt("xml",null,{"xmlns:v":Vt,"xmlns:o":Pt,"xmlns:x":Ot,"xmlns:mv":Ft}).replace(/\/>/,">"),vt("o:shapelayout",vt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),vt("v:shapetype",[vt("v:stroke",null,{joinstyle:"miter"}),vt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];$i<1e3*e;)$i+=1e3;return t.forEach(function(e){var t=Rn(e[0]),n={color2:"#BEFF82",type:"gradient"};"gradient"==n.type&&(n.angle="-180");var r="gradient"==n.type?vt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,s=vt("v:fill",r,n);++$i,i=i.concat(["<v:shape"+gt({id:"_x0000_s"+$i,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(e[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",s,vt("v:shadow",null,{on:"t",obscured:"t"}),vt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",mt("x:Anchor",[t.c+1,0,t.r+1,0,t.c+3,20,t.r+5,20].join(",")),mt("x:AutoFill","False"),mt("x:Row",String(t.r)),mt("x:Column",String(t.c)),e[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function es(e){var t=[Je,vt("comments",null,{xmlns:Rt[0]})],n=[];return t.push("<authors>"),e.forEach(function(e){e[1].forEach(function(e){var r=nt(e.a);-1==n.indexOf(r)&&(n.push(r),t.push("<author>"+r+"</author>")),e.T&&e.ID&&-1==n.indexOf("tc="+e.ID)&&(n.push("tc="+e.ID),t.push("<author>tc="+e.ID+"</author>"))})}),0==n.length&&(n.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(e){var r=0,i=[];if(e[1][0]&&e[1][0].T&&e[1][0].ID?r=n.indexOf("tc="+e[1][0].ID):e[1].forEach(function(e){e.a&&(r=n.indexOf(nt(e.a))),i.push(e.t||"")}),t.push('<comment ref="'+e[0]+'" authorId="'+r+'"><text>'),i.length<=1)t.push(mt("t",nt(i[0]||"")));else{for(var s="Comment:\n    "+i[0]+"\n",a=1;a<i.length;++a)s+="Reply:\n    "+i[a]+"\n";t.push(mt("t",nt(s)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function ts(e,t,n){var r=[Je,vt("ThreadedComments",null,{xmlns:St}).replace(/[\/]>/,">")];return e.forEach(function(e){var i="";(e[1]||[]).forEach(function(s,a){if(s.T){s.a&&-1==t.indexOf(s.a)&&t.push(s.a);var o={ref:e[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};0==a?i=o.id:o.parentId=i,s.ID=o.id,s.a&&(o.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(s.a)).slice(-12)+"}"),r.push(vt("threadedComment",mt("text",s.t||""),o))}else delete s.ID})}),r.push("</ThreadedComments>"),r.join("")}var ns=Wn;function rs(e){var t=Tn(),n=[];return En(t,628),En(t,630),e.forEach(function(e){e[1].forEach(function(e){n.indexOf(e.a)>-1||(n.push(e.a.slice(0,54)),En(t,632,function(e){return Hn(e.slice(0,54))}(e.a)))})}),En(t,631),En(t,633),e.forEach(function(e){e[1].forEach(function(r){r.iauthor=n.indexOf(r.a);var i={s:Rn(e[0]),e:Rn(e[0])};En(t,635,function(e,t){return null==t&&(t=_n(36)),t.write_shift(4,e[1].iauthor),ur(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}([i,r])),r.t&&r.t.length>0&&En(t,637,Yn(r)),En(t,636),delete r.iauthor})}),En(t,634),En(t,629),t.end()}var is=["xlsb","xlsm","xlam","biff8","xla"];var ss=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,r,i){var s=!1,a=!1;0==r.length?a=!0:"["==r.charAt(0)&&(a=!0,r=r.slice(1,-1)),0==i.length?s=!0:"["==i.charAt(0)&&(s=!0,i=i.slice(1,-1));var o=r.length>0?0|parseInt(r,10):0,c=i.length>0?0|parseInt(i,10):0;return s?c+=t.c:--c,a?o+=t.r:--o,n+(s?"":"$")+Dn(c)+(a?"":"$")+Nn(o)}return function(r,i){return t=i,r.replace(e,n)}}(),as=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,os=function(){return function(e,t){return e.replace(as,function(e,n,r,i,s,a){var o=xn(i)-(r?0:t.c),c=kn(a)-(s?0:t.r);return n+"R"+(0==c?"":s?c+1:"["+c+"]")+"C"+(0==o?"":r?o+1:"["+o+"]")})}}();function cs(e,t){return e.replace(as,function(e,n,r,i,s,a){return n+("$"==r?r+i:Dn(xn(i)+t.c))+("$"==s?s+a:Nn(kn(a)+t.r))})}function ls(e){e.l+=1}function us(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function hs(e,t,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return ds(e);12==n.biff&&(r=4)}var i=e.read_shift(r),s=e.read_shift(r),a=us(e,2),o=us(e,2);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function ds(e){var t=us(e,2),n=us(e,2),r=e.read_shift(1),i=e.read_shift(1);return{s:{r:t[0],c:r,cRel:t[1],rRel:t[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function fs(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=us(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var r=e.read_shift(n&&12==n.biff?4:2),i=us(e,2);return{r:r,c:i[0],cRel:i[1],rRel:i[2]}}function ps(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function ms(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function gs(e){return[e.read_shift(1),e.read_shift(1)]}function vs(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=Wr(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=wr[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=hr(e);break;case 2:n[1]=$r(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function ys(e,t,n){for(var r=e.read_shift(12==n.biff?4:2),i=[],s=0;s!=r;++s)i.push((12==n.biff?lr:ii)(e,8));return i}function ws(e,t,n){var r=0,i=0;12==n.biff?(r=e.read_shift(4),i=e.read_shift(4)):(i=1+e.read_shift(1),r=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,0==--i&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=vs(e,n.biff);return a}function bs(e,t,n){return e.l+=2,[ps(e)]}function _s(e){return e.l+=6,[]}function Ts(e){return e.l+=2,[qr(e),1&e.read_shift(2)]}var Es=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var Ss={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:bn},3:{n:"PtgAdd",f:ls},4:{n:"PtgSub",f:ls},5:{n:"PtgMul",f:ls},6:{n:"PtgDiv",f:ls},7:{n:"PtgPower",f:ls},8:{n:"PtgConcat",f:ls},9:{n:"PtgLt",f:ls},10:{n:"PtgLe",f:ls},11:{n:"PtgEq",f:ls},12:{n:"PtgGe",f:ls},13:{n:"PtgGt",f:ls},14:{n:"PtgNe",f:ls},15:{n:"PtgIsect",f:ls},16:{n:"PtgUnion",f:ls},17:{n:"PtgRange",f:ls},18:{n:"PtgUplus",f:ls},19:{n:"PtgUminus",f:ls},20:{n:"PtgPercent",f:ls},21:{n:"PtgParen",f:ls},22:{n:"PtgMissArg",f:ls},23:{n:"PtgStr",f:function(e,t,n){return e.l++,Yr(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,wr[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,hr(e)}},32:{n:"PtgArray",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[r]}},33:{n:"PtgFunc",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(n&&n.biff<=3?1:2);return[Ws[i],zs[i],r]}},34:{n:"PtgFuncVar",f:function(e,t,n){var r=e[e.l++],i=e.read_shift(1),s=n&&n.biff<=3?[88==r?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[i,(0===s[0]?zs:Bs)[s[1]]]}},35:{n:"PtgName",f:function(e,t,n){var r=e.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=e.read_shift(i);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[r,0,s]}},36:{n:"PtgRef",f:function(e,t,n){var r=(96&e[e.l])>>5;return e.l+=1,[r,fs(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,hs(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[r,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:bn},40:{n:"PtgMemNoMem",f:bn},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var r=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[r]}},43:{n:"PtgAreaErr",f:function(e,t,n){var r=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}},44:{n:"PtgRefN",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=function(e,t,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),r=(32768&t)>>15,i=(16384&t)>>14;return t&=16383,1==r&&t>=8192&&(t-=16384),1==i&&n>=128&&(n-=256),{r:t,c:n,cRel:i,rRel:r}}(e);var i=e.read_shift(r>=12?4:2),s=e.read_shift(2),a=(16384&s)>>14,o=(32768&s)>>15;if(s&=16383,1==o)for(;i>524287;)i-=1048576;if(1==a)for(;s>8191;)s-=16384;return{r:i,c:s,cRel:a,rRel:o}}(e,0,n);return[r,i]}},45:{n:"PtgAreaN",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=function(e,t,n){if(n.biff<8)return ds(e);var r=e.read_shift(12==n.biff?4:2),i=e.read_shift(12==n.biff?4:2),s=us(e,2),a=us(e,2);return{s:{r:r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}(e,0,n);return[r,i]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var r=e.read_shift(2);return e.l+=12,[t,n,r]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var r=(96&e[e.l])>>5;e.l+=1;var i=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[r,i,fs(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[r,i,hs(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6}return e.l+=s,[r,i]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var r=(96&e[e.l++])>>5,i=e.read_shift(2),s=8;if(n)switch(n.biff){case 5:e.l+=12,s=6;break;case 12:s=12}return e.l+=s,[r,i]}},255:{}},Is={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},As={1:{n:"PtgElfLel",f:Ts},2:{n:"PtgElfRw",f:bs},3:{n:"PtgElfCol",f:bs},6:{n:"PtgElfRwV",f:bs},7:{n:"PtgElfColV",f:bs},10:{n:"PtgElfRadical",f:bs},11:{n:"PtgElfRadicalS",f:_s},13:{n:"PtgElfColS",f:_s},15:{n:"PtgElfColSV",f:_s},16:{n:"PtgElfRadicalLel",f:Ts},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),r=e.read_shift(4),i=e.read_shift(2),s=e.read_shift(2);return{ixti:t,coltype:3&n,rt:Es[n>>2&31],idx:r,c:i,C:s}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},Cs={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[r]}},2:{n:"PtgAttrIf",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var r=e.read_shift(n&&2==n.biff?1:2),i=[],s=0;s<=r;++s)i.push(e.read_shift(n&&2==n.biff?1:2));return i}},8:{n:"PtgAttrGoto",f:function(e,t,n){var r=255&e[e.l+1]?1:0;return e.l+=2,[r,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:ms},33:{n:"PtgAttrBaxcel",f:ms},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),gs(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),gs(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function ks(e,t,n,r){if(r.biff<8)return bn(e,t);for(var i=e.l+t,s=[],a=0;a!==n.length;++a)switch(n[a][0]){case"PtgArray":n[a][1]=ws(e,0,r),s.push(n[a][1]);break;case"PtgMemArea":n[a][2]=ys(e,n[a][1],r),s.push(n[a][2]);break;case"PtgExp":r&&12==r.biff&&(n[a][1][1]=e.read_shift(4),s.push(n[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[a][0]}return 0!==(t=i-e.l)&&s.push(bn(e,t)),s}function Ns(e,t,n){for(var r,i,s=e.l+t,a=[];s!=e.l;)t=s-e.l,i=e[e.l],r=Ss[i]||Ss[Is[i]],24!==i&&25!==i||(r=(24===i?As:Cs)[e[e.l+1]]),r&&r.f?a.push([r.n,r.f(e,t,n)]):bn(e,t);return a}function xs(e){for(var t=[],n=0;n<e.length;++n){for(var r=e[n],i=[],s=0;s<r.length;++s){var a=r[s];if(a)if(2===a[0])i.push('"'+a[1].replace(/"/g,'""')+'"');else i.push(a[1]);else i.push("")}t.push(i.join(","))}return t.join(";")}var Ds={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Rs(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var r=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(e[r[0]][0]){case 357:return i=-1==r[1]?"#REF":e.SheetNames[r[1]],r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[r[0]][0];default:return"SH33TJSSRC"+e[r[0]][0]}switch(e[r[0]][0][0]){case 1025:return i=-1==r[1]?"#REF":e.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+e.SheetNames[r[2]];case 14849:return e[r[0]].slice(1).map(function(e){return e.Name}).join(";;");default:return e[r[0]][0][3]?(i=-1==r[1]?"#REF":e[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+e[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Ps(e,t,n){var r=Rs(e,t,n);return"#REF"==r?r:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(r,n)}function Os(e,t,n,r,i){var s,a,o,c,l=i&&i.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},h=[],d=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",v=0,y=e[0].length;v<y;++v){var w=e[0][v];switch(w[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(s=h.pop(),a=h.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=qe(" ",e[0][m][1][1]);break;case 1:g=qe("\r",e[0][m][1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}a+=g,m=-1}h.push(a+Ds[w[0]]+s);break;case"PtgIsect":s=h.pop(),a=h.pop(),h.push(a+" "+s);break;case"PtgUnion":s=h.pop(),a=h.pop(),h.push(a+","+s);break;case"PtgRange":s=h.pop(),a=h.pop(),h.push(a+":"+s);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=Sn(w[1][1],u,i),h.push(An(o,l));break;case"PtgRefN":o=n?Sn(w[1][1],n,i):w[1][1],h.push(An(o,l));break;case"PtgRef3d":d=w[1][1],o=Sn(w[1][2],u,i);p=Ps(r,d,i);h.push(p+"!"+An(o,l));break;case"PtgFunc":case"PtgFuncVar":var b=w[1][0],_=w[1][1];b||(b=0);var T=0==(b&=127)?[]:h.slice(-b);h.length-=b,"User"===_&&(_=T.shift()),h.push(_+"("+T.join(",")+")");break;case"PtgBool":h.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":h.push(w[1]);break;case"PtgNum":h.push(String(w[1]));break;case"PtgStr":h.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":c=In(w[1][1],n?{s:n}:u,i),h.push(Cn(c,i));break;case"PtgArea":c=In(w[1][1],u,i),h.push(Cn(c,i));break;case"PtgArea3d":d=w[1][1],c=w[1][2],p=Ps(r,d,i),h.push(p+"!"+Cn(c,i));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgName":f=w[1][2];var E=(r.names||[])[f-1]||(r[0]||[])[f],S=E?E.Name:"SH33TJSNAME"+String(f);S&&"_xlfn."==S.slice(0,6)&&!i.xlfn&&(S=S.slice(6)),h.push(S);break;case"PtgNameX":var I,A=w[1][1];if(f=w[1][2],!(i.biff<=5)){var C="";if(14849==((r[A]||[])[0]||[])[0]||(1025==((r[A]||[])[0]||[])[0]?r[A][f]&&r[A][f].itab>0&&(C=r.SheetNames[r[A][f].itab-1]+"!"):C=r.SheetNames[f-1]+"!"),r[A]&&r[A][f])C+=r[A][f].Name;else if(r[0]&&r[0][f])C+=r[0][f].Name;else{var k=(Rs(r,A,i)||"").split(";;");k[f-1]?C=k[f-1]:C+="SH33TJSERRX"}h.push(C);break}A<0&&(A=-A),r[A]&&(I=r[A][f]),I||(I={Name:"SH33TJSERRY"}),h.push(I.Name);break;case"PtgParen":var N="(",x=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:N=qe(" ",e[0][m][1][1])+N;break;case 3:N=qe("\r",e[0][m][1][1])+N;break;case 4:x=qe(" ",e[0][m][1][1])+x;break;case 5:x=qe("\r",e[0][m][1][1])+x;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}h.push(N+h.pop()+x);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":h.push("#REF!");break;case"PtgExp":o={c:w[1][1],r:w[1][0]};var D={c:n.c,r:n.r};if(r.sharedf[Pn(o)]){var R=r.sharedf[Pn(o)];h.push(Os(R,u,D,r,i))}else{var P=!1;for(s=0;s!=r.arrayf.length;++s)if(a=r.arrayf[s],!(o.c<a[0].s.c||o.c>a[0].e.c)&&!(o.r<a[0].s.r||o.r>a[0].e.r)){h.push(Os(a[1],u,D,r,i)),P=!0;break}P||h.push(w[1])}break;case"PtgArray":h.push("{"+xs(w[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=v;break;case"PtgMissArg":h.push("");break;case"PtgList":h.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(w))}if(3!=i.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][v][0])){var O=!0;switch((w=e[0][m])[1][0]){case 4:O=!1;case 0:g=qe(" ",w[1][1]);break;case 5:O=!1;case 1:g=qe("\r",w[1][1]);break;default:if(g="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}h.push((O?g:"")+h.pop()+(O?"":g)),m=-1}}if(h.length>1&&i.WTF)throw new Error("bad formula stack");return h[0]}function Ms(e,t,n,r,i){var s=ni(t,n,i),a=function(e){if(null==e){var t=_n(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}return dr("number"==typeof e?e:0)}(e.v),o=_n(6);o.write_shift(2,33),o.write_shift(4,0);for(var c=_n(e.bf.length),l=0;l<e.bf.length;++l)c[l]=e.bf[l];return k([s,a,o,c])}function Ls(e,t,n){var r=e.read_shift(4),i=Ns(e,r,n),s=e.read_shift(4);return[i,s>0?ks(e,s,i,n):null]}var Fs=Ls,Vs=Ls,Us=Ls,js=Ls,Bs={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},zs={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Ws={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Hs(e){return("of:="+e.replace(as,"$1[.$2$3$4$5]").replace(/\]:\[/g,":")).replace(/;/g,"|").replace(/,/g,";")}function qs(e){return e.replace(/\./,"!")}var Gs="undefined"!==typeof Map;function Ks(e,t,n){var r=0,i=e.length;if(n){if(Gs?n.has(t):Object.prototype.hasOwnProperty.call(n,t))for(var s=Gs?n.get(t):n[t];r<s.length;++r)if(e[s[r]].t===t)return e.Count++,s[r]}else for(;r<i;++r)if(e[r].t===t)return e.Count++,r;return e[i]={t:t},e.Count++,e.Unique++,n&&(Gs?(n.has(t)||n.set(t,[]),n.get(t).push(i)):(Object.prototype.hasOwnProperty.call(n,t)||(n[t]=[]),n[t].push(i))),i}function Ys(e,t){var n={min:e+1,max:e+1},r=-1;return t.MDW&&(ki=t.MDW),null!=t.width?n.customWidth=1:null!=t.wpx?r=xi(t.wpx):null!=t.wch&&(r=t.wch),r>-1?(n.width=Di(r),n.customWidth=1):null!=t.width&&(n.width=t.width),t.hidden&&(n.hidden=!0),null!=t.level&&(n.outlineLevel=n.level=t.level),n}function Qs(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function Xs(e,t,n){var r=n.revssf[null!=t.z?t.z:"General"],i=60,s=e.length;if(null==r&&n.ssf)for(;i<392;++i)if(null==n.ssf[i]){be(t.z,i),n.ssf[i]=t.z,n.revssf[t.z]=r=i;break}for(i=0;i!=s;++i)if(e[i].numFmtId===r)return i;return e[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Js(e,t,n){if(e&&e["!ref"]){var r=Ln(e["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+e["!ref"])}}var $s=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Zs=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function ea(e,t,n,r){if(e.c&&n["!comments"].push([t,e.c]),void 0===e.v&&"string"!==typeof e.f||"z"===e.t&&!e.f)return"";var i="",s=e.t,a=e.v;if("z"!==e.t)switch(e.t){case"b":i=e.v?"1":"0";break;case"n":i=""+e.v;break;case"e":i=wr[e.v];break;case"d":r&&r.cellDates?i=ze(e.v,-1).toISOString():((e=He(e)).t="n",i=""+(e.v=Oe(ze(e.v)))),"undefined"===typeof e.z&&(e.z=j[14]);break;default:i=e.v}var o=mt("v",nt(i)),c={r:t},l=Xs(r.cellXfs,e,r);switch(0!==l&&(c.s=l),e.t){case"n":case"z":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;default:if(null==e.v){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=mt("v",""+Ks(r.Strings,e.v,r.revStrings)),c.t="s";break}c.t="str"}if(e.t!=s&&(e.t=s,e.v=a),"string"==typeof e.f&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=vt("f",nt(e.f),u)+(null!=e.v?o:"")}return e.l&&n["!links"].push([t,e.l]),e.D&&(c.cm=1),vt("c",o,c)}function ta(e,t,n,r){var i,s=[Je,vt("worksheet",null,{xmlns:Rt[0],"xmlns:r":kt})],a=n.SheetNames[e],o="",c=n.Sheets[a];null==c&&(c={});var l=c["!ref"]||"A1",u=Ln(l);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+l+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),l=Mn(u)}r||(r={}),c["!comments"]=[];var h=[];!function(e,t,n,r,i){var s=!1,a={},o=null;if("xlsx"!==r.bookType&&t.vbaraw){var c=t.SheetNames[n];try{t.Workbook&&(c=t.Workbook.Sheets[n].CodeName||c)}catch(u){}s=!0,a.codeName=dt(nt(c))}if(e&&e["!outline"]){var l={summaryBelow:1,summaryRight:1};e["!outline"].above&&(l.summaryBelow=0),e["!outline"].left&&(l.summaryRight=0),o=(o||"")+vt("outlinePr",null,l)}(s||o)&&(i[i.length]=vt("sheetPr",o,a))}(c,n,e,t,s),s[s.length]=vt("dimension",null,{ref:l}),s[s.length]=function(e,t,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),vt("sheetViews",vt("sheetView",null,i),{})}(0,0,0,n),t.sheetFormat&&(s[s.length]=vt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),null!=c["!cols"]&&c["!cols"].length>0&&(s[s.length]=function(e,t){for(var n,r=["<cols>"],i=0;i!=t.length;++i)(n=t[i])&&(r[r.length]=vt("col",null,Ys(i,n)));return r[r.length]="</cols>",r.join("")}(0,c["!cols"])),s[i=s.length]="<sheetData/>",c["!links"]=[],null!=c["!ref"]&&(o=function(e,t){var n,r,i=[],s=[],a=Ln(e["!ref"]),o="",c="",l=[],u=0,h=0,d=e["!rows"],f=Array.isArray(e),p={r:c},m=-1;for(h=a.s.c;h<=a.e.c;++h)l[h]=Dn(h);for(u=a.s.r;u<=a.e.r;++u){for(s=[],c=Nn(u),h=a.s.c;h<=a.e.c;++h){n=l[h]+c;var g=f?(e[u]||[])[h]:e[n];void 0!==g&&null!=(o=ea(g,n,e,t))&&s.push(o)}(s.length>0||d&&d[u])&&(p={r:c},d&&d[u]&&((r=d[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=Pi(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level)),i[i.length]=vt("row",s.join(""),p))}if(d)for(;u<d.length;++u)d&&d[u]&&(p={r:u+1},(r=d[u]).hidden&&(p.hidden=1),m=-1,r.hpx?m=Pi(r.hpx):r.hpt&&(m=r.hpt),m>-1&&(p.ht=m,p.customHeight=1),r.level&&(p.outlineLevel=r.level),i[i.length]=vt("row","",p));return i.join("")}(c,t,0,0),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),c["!protect"]&&(s[s.length]=function(e){var t={sheet:1};return $s.forEach(function(n){null!=e[n]&&e[n]&&(t[n]="1")}),Zs.forEach(function(n){null==e[n]||e[n]||(t[n]="0")}),e.password&&(t.password=Ii(e.password).toString(16).toUpperCase()),vt("sheetProtection",null,t)}(c["!protect"])),null!=c["!autofilter"]&&(s[s.length]=function(e,t,n,r){var i="string"==typeof e.ref?e.ref:Mn(e.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,a=On(i);a.s.r==a.e.r&&(a.e.r=On(t["!ref"]).e.r,i=Mn(a));for(var o=0;o<s.length;++o){var c=s[o];if("_xlnm._FilterDatabase"==c.Name&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),vt("autoFilter",null,{ref:i})}(c["!autofilter"],c,n,e)),null!=c["!merges"]&&c["!merges"].length>0&&(s[s.length]=function(e){if(0===e.length)return"";for(var t='<mergeCells count="'+e.length+'">',n=0;n!=e.length;++n)t+='<mergeCell ref="'+Mn(e[n])+'"/>';return t+"</mergeCells>"}(c["!merges"]));var d,f,p=-1,m=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(e){e[1].Target&&(d={ref:e[0]},"#"!=e[1].Target.charAt(0)&&(m=Ar(r,-1,nt(e[1].Target).replace(/#.*$/,""),Er.HLINK),d["r:id"]="rId"+m),(p=e[1].Target.indexOf("#"))>-1&&(d.location=nt(e[1].Target.slice(p+1))),e[1].Tooltip&&(d.tooltip=nt(e[1].Tooltip)),s[s.length]=vt("hyperlink",null,d))}),s[s.length]="</hyperlinks>"),delete c["!links"],null!=c["!margins"]&&(s[s.length]=(Qs(f=c["!margins"]),vt("pageMargins",null,f))),t&&!t.ignoreEC&&void 0!=t.ignoreEC||(s[s.length]=mt("ignoredErrors",vt("ignoredError",null,{numberStoredAsText:1,sqref:l}))),h.length>0&&(m=Ar(r,-1,"../drawings/drawing"+(e+1)+".xml",Er.DRAW),s[s.length]=vt("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=h),c["!comments"].length>0&&(m=Ar(r,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Er.VML),s[s.length]=vt("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function na(e,t,n,r){var i=function(e,t,n){var r=_n(145),i=(n["!rows"]||[])[e]||{};r.write_shift(4,e),r.write_shift(4,0);var s=320;i.hpx?s=20*Pi(i.hpx):i.hpt&&(s=20*i.hpt),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,c=r.l;r.l+=4;for(var l={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,d=-1,f=u<<10;f<u+1<<10;++f)l.c=f,(Array.isArray(n)?(n[l.r]||[])[l.c]:n[Pn(l)])&&(h<0&&(h=f),d=f);h<0||(++o,r.write_shift(4,h),r.write_shift(4,d))}var p=r.l;return r.l=c,r.write_shift(4,o),r.l=p,r.length>r.l?r.slice(0,r.l):r}(r,n,t);(i.length>17||(t["!rows"]||[])[r])&&En(e,0,i)}var ra=lr,ia=ur;function sa(e){return[Jn(e),hr(e),"n"]}var aa=lr,oa=ur;var ca=["left","right","top","bottom","header","footer"];function la(e,t,n,r,i,s,a){if(void 0===t.v)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":(t=He(t)).z=t.z||j[14],t.v=Oe(ze(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v}var c={r:n,c:r};switch(c.s=Xs(i.cellXfs,t,i),t.l&&s["!links"].push([Pn(c),t.l]),t.c&&s["!comments"].push([Pn(c),t.c]),t.t){case"s":case"str":return i.bookSST?(o=Ks(i.Strings,t.v,i.revStrings),c.t="s",c.v=o,a?En(e,18,function(e,t,n){return null==n&&(n=_n(8)),$n(t,n),n.write_shift(4,t.v),n}(0,c)):En(e,7,function(e,t,n){return null==n&&(n=_n(12)),Xn(t,n),n.write_shift(4,t.v),n}(0,c))):(c.t="str",a?En(e,17,function(e,t,n){return null==n&&(n=_n(8+4*e.v.length)),$n(t,n),Hn(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,c)):En(e,6,function(e,t,n){return null==n&&(n=_n(12+4*e.v.length)),Xn(t,n),Hn(e.v,n),n.length>n.l?n.slice(0,n.l):n}(t,c))),!0;case"n":return t.v==(0|t.v)&&t.v>-1e3&&t.v<1e3?a?En(e,13,function(e,t,n){return null==n&&(n=_n(8)),$n(t,n),or(e.v,n),n}(t,c)):En(e,2,function(e,t,n){return null==n&&(n=_n(12)),Xn(t,n),or(e.v,n),n}(t,c)):a?En(e,16,function(e,t,n){return null==n&&(n=_n(12)),$n(t,n),dr(e.v,n),n}(t,c)):En(e,5,function(e,t,n){return null==n&&(n=_n(16)),Xn(t,n),dr(e.v,n),n}(t,c)),!0;case"b":return c.t="b",a?En(e,15,function(e,t,n){return null==n&&(n=_n(5)),$n(t,n),n.write_shift(1,e.v?1:0),n}(t,c)):En(e,4,function(e,t,n){return null==n&&(n=_n(9)),Xn(t,n),n.write_shift(1,e.v?1:0),n}(t,c)),!0;case"e":return c.t="e",a?En(e,14,function(e,t,n){return null==n&&(n=_n(8)),$n(t,n),n.write_shift(1,e.v),n.write_shift(2,0),n.write_shift(1,0),n}(t,c)):En(e,3,function(e,t,n){return null==n&&(n=_n(9)),Xn(t,n),n.write_shift(1,e.v),n}(t,c)),!0}return a?En(e,12,function(e,t,n){return null==n&&(n=_n(4)),$n(t,n)}(0,c)):En(e,1,function(e,t,n){return null==n&&(n=_n(8)),Xn(t,n)}(0,c)),!0}function ua(e,t){var n,r;t&&t["!merges"]&&(En(e,177,(n=t["!merges"].length,null==r&&(r=_n(4)),r.write_shift(4,n),r)),t["!merges"].forEach(function(t){En(e,176,oa(t))}),En(e,178))}function ha(e,t){t&&t["!cols"]&&(En(e,390),t["!cols"].forEach(function(t,n){t&&En(e,60,function(e,t,n){null==n&&(n=_n(18));var r=Ys(e,t);n.write_shift(-4,e),n.write_shift(-4,e),n.write_shift(4,256*(r.width||10)),n.write_shift(4,0);var i=0;return t.hidden&&(i|=1),"number"==typeof r.width&&(i|=2),t.level&&(i|=t.level<<8),n.write_shift(2,i),n}(n,t))}),En(e,391))}function da(e,t){t&&t["!ref"]&&(En(e,648),En(e,649,function(e){var t=_n(24);return t.write_shift(4,4),t.write_shift(4,1),ur(e,t),t}(Ln(t["!ref"]))),En(e,650))}function fa(e,t,n){t["!links"].forEach(function(t){if(t[1].Target){var r=Ar(n,-1,t[1].Target.replace(/#.*$/,""),Er.HLINK);En(e,494,function(e,t){var n=_n(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));ur({s:Rn(e[0]),e:Rn(e[0])},n),sr("rId"+t,n);var r=e[1].Target.indexOf("#");return Hn((-1==r?"":e[1].Target.slice(r+1))||"",n),Hn(e[1].Tooltip||"",n),Hn("",n),n.slice(0,n.l)}(t,r))}}),delete t["!links"]}function pa(e,t,n){En(e,133),En(e,137,function(e,t,n){null==n&&(n=_n(30));var r=924;return(((t||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}(0,n)),En(e,138),En(e,134)}function ma(e,t){var n,r;t["!protect"]&&En(e,535,(n=t["!protect"],null==r&&(r=_n(66)),r.write_shift(2,n.password?Ii(n.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(e){e[1]?r.write_shift(4,null==n[e[0]]||n[e[0]]?0:1):r.write_shift(4,null!=n[e[0]]&&n[e[0]]?0:1)}),r))}function ga(e,t,n,r){var i=Tn(),s=n.SheetNames[e],a=n.Sheets[s]||{},o=s;try{n&&n.Workbook&&(o=n.Workbook.Sheets[e].CodeName||o)}catch(h){}var c,l,u=Ln(a["!ref"]||"A1");if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],En(i,129),(n.vbaraw||a["!outline"])&&En(i,147,function(e,t,n){null==n&&(n=_n(84+4*e.length));var r=192;t&&(t.above&&(r&=-65),t.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return fr({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),er(e,n),n.slice(0,n.l)}(o,a["!outline"])),En(i,148,ia(u)),pa(i,0,n.Workbook),ha(i,a),function(e,t,n,r){var i,s=Ln(t["!ref"]||"A1"),a="",o=[];En(e,145);var c=Array.isArray(t),l=s.e.r;t["!rows"]&&(l=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=l;++u){a=Nn(u),na(e,t,s,u);var h=!1;if(u<=s.e.r)for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(o[d]=Dn(d)),i=o[d]+a;var f=c?(t[u]||[])[d]:t[i];h=!!f&&la(e,f,u,d,r,t,h)}}En(e,146)}(i,a,0,t),ma(i,a),function(e,t,n,r){if(t["!autofilter"]){var i=t["!autofilter"],s="string"===typeof i.ref?i.ref:Mn(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var a=n.Workbook.Names,o=On(s);o.s.r==o.e.r&&(o.e.r=On(t["!ref"]).e.r,s=Mn(o));for(var c=0;c<a.length;++c){var l=a[c];if("_xlnm._FilterDatabase"==l.Name&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+s;break}}c==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),En(e,161,ur(Ln(s))),En(e,162)}}(i,a,n,e),ua(i,a),fa(i,a,r),a["!margins"]&&En(i,476,(c=a["!margins"],null==l&&(l=_n(48)),Qs(c),ca.forEach(function(e){dr(c[e],l)}),l)),t&&!t.ignoreEC&&void 0!=t.ignoreEC||da(i,a),function(e,t,n,r){if(t["!comments"].length>0){var i=Ar(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Er.VML);En(e,551,sr("rId"+i)),t["!legacy"]=i}}(i,a,e,r),En(i,130),i.end()}var va=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];var ya="][*?/\\".split("");function wa(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return ya.forEach(function(r){if(-1!=e.indexOf(r)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function ba(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t,n,r,i=e.Workbook&&e.Workbook.Sheets||[];t=e.SheetNames,n=i,r=!!e.vbaraw,t.forEach(function(e,i){wa(e);for(var s=0;s<i;++s)if(e==t[s])throw new Error("Duplicate Sheet Name: "+e);if(r){var a=n&&n[i]&&n[i].CodeName||e;if(95==a.charCodeAt(0)&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}});for(var s=0;s<e.SheetNames.length;++s)Js(e.Sheets[e.SheetNames[s]],e.SheetNames[s],s)}function _a(e){var t=[Je];t[t.length]=vt("workbook",null,{xmlns:Rt[0],"xmlns:r":kt});var n=e.Workbook&&(e.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(va.forEach(function(t){null!=e.Workbook.WBProps[t[0]]&&e.Workbook.WBProps[t[0]]!=t[1]&&(r[t[0]]=e.Workbook.WBProps[t[0]])}),e.Workbook.WBProps.CodeName&&(r.codeName=e.Workbook.WBProps.CodeName,delete r.CodeName)),t[t.length]=vt("workbookPr",null,r);var i=e.Workbook&&e.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&i[s]&&i[s].Hidden;++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var a={name:nt(e.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden"}t[t.length]=vt("sheet",null,a)}return t[t.length]="</sheets>",n&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(e){var n={name:e.Name};e.Comment&&(n.comment=e.Comment),null!=e.Sheet&&(n.localSheetId=""+e.Sheet),e.Hidden&&(n.hidden="1"),e.Ref&&(t[t.length]=vt("definedName",nt(e.Ref),n))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Ta(e,t){return t||(t=_n(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),sr(e.strRelID,t),Hn(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Ea(e,t){if(t.Workbook&&t.Workbook.Sheets){for(var n,r,i=t.Workbook.Sheets,s=0,a=-1,o=-1;s<i.length;++s)!i[s]||!i[s].Hidden&&-1==a?a=s:1==i[s].Hidden&&-1==o&&(o=s);if(!(o>a))En(e,135),En(e,158,(n=a,r||(r=_n(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,n),r.write_shift(4,n),r.write_shift(1,120),r.length>r.l?r.slice(0,r.l):r)),En(e,136)}}function Sa(e,t){var n=Tn();return En(n,131),En(n,128,function(e,t){t||(t=_n(127));for(var n=0;4!=n;++n)t.write_shift(4,0);return Hn("SheetJS",t),Hn(a.version,t),Hn(a.version,t),Hn("7262",t),t.length>t.l?t.slice(0,t.l):t}()),En(n,153,function(e,t){t||(t=_n(72));var n=0;return e&&e.filterPrivacy&&(n|=8),t.write_shift(4,n),t.write_shift(4,0),er(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}(e.Workbook&&e.Workbook.WBProps||null)),Ea(n,e),function(e,t){En(e,143);for(var n=0;n!=t.SheetNames.length;++n)En(e,156,Ta({Hidden:t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[n]&&t.Workbook.Sheets[n].Hidden||0,iTabID:n+1,strRelID:"rId"+(n+1),name:t.SheetNames[n]}));En(e,144)}(n,e),En(n,132),n.end()}function Ia(e,t,n,r,i){return(".bin"===t.slice(-4)?ga:ta)(e,n,r,i)}function Aa(e,t,n){return(".bin"===t.slice(-4)?rs:es)(e,n)}function Ca(e,t){var n=[];return e.Props&&n.push(function(e,t){var n=[];return Ne(Fr).map(function(e){for(var t=0;t<xr.length;++t)if(xr[t][1]==e)return xr[t];for(t=0;t<Pr.length;++t)if(Pr[t][1]==e)return Pr[t];throw e}).forEach(function(r){if(null!=e[r[1]]){var i=t&&t.Props&&null!=t.Props[r[1]]?t.Props[r[1]]:e[r[1]];"date"===r[2]&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"Z")),"number"==typeof i?i=String(i):!0===i||!1===i?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(mt(Fr[r[1]]||r[1],i))}}),vt("DocumentProperties",n.join(""),{xmlns:Pt})}(e.Props,t)),e.Custprops&&n.push(function(e,t){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return e&&Ne(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){for(var r=0;r<xr.length;++r)if(t==xr[r][1])return;for(r=0;r<Pr.length;++r)if(t==Pr[r][1])return;for(r=0;r<n.length;++r)if(t==n[r])return;var s=e[t],a="string";"number"==typeof s?(a="float",s=String(s)):!0===s||!1===s?(a="boolean",s=s?"1":"0"):s=String(s),i.push(vt(rt(t),s,{"dt:dt":a}))}}),t&&Ne(t).forEach(function(n){if(Object.prototype.hasOwnProperty.call(t,n)&&(!e||!Object.prototype.hasOwnProperty.call(e,n))){var r=t[n],s="string";"number"==typeof r?(s="float",r=String(r)):!0===r||!1===r?(s="boolean",r=r?"1":"0"):r instanceof Date?(s="dateTime.tz",r=r.toISOString()):r=String(r),i.push(vt(rt(n),r,{"dt:dt":s}))}}),"<"+r+' xmlns="'+Pt+'">'+i.join("")+"</"+r+">"}(e.Props,e.Custprops)),n.join("")}function ka(e){return vt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+os(e.Ref,{r:0,c:0})})}function Na(e,t,n,r,i,s,a){if(!e||void 0==e.v&&void 0==e.f)return"";var o={};if(e.f&&(o["ss:Formula"]="="+nt(os(e.f,a))),e.F&&e.F.slice(0,t.length)==t){var c=Rn(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==a.r?"":"["+(c.r-a.r)+"]")+"C"+(c.c==a.c?"":"["+(c.c-a.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=nt(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=nt(e.l.Tooltip))),n["!merges"])for(var l=n["!merges"],u=0;u!=l.length;++u)l[u].s.c==a.c&&l[u].s.r==a.r&&(l[u].e.c>l[u].s.c&&(o["ss:MergeAcross"]=l[u].e.c-l[u].s.c),l[u].e.r>l[u].s.r&&(o["ss:MergeDown"]=l[u].e.r-l[u].s.r));var h="",d="";switch(e.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",d=String(e.v);break;case"b":h="Boolean",d=e.v?"1":"0";break;case"e":h="Error",d=wr[e.v];break;case"d":h="DateTime",d=new Date(e.v).toISOString(),null==e.z&&(e.z=e.z||j[14]);break;case"s":h="String",d=((e.v||"")+"").replace(et,function(e){return Ze[e]}).replace(it,function(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"})}var f=Xs(r.cellXfs,e,r);o["ss:StyleID"]="s"+(21+f),o["ss:Index"]=a.c+1;var p=null!=e.v?d:"",m="z"==e.t?"":'<Data ss:Type="'+h+'">'+p+"</Data>";return(e.c||[]).length>0&&(m+=e.c.map(function(e){var t=vt("ss:Data",(e.t||"").replace(/(\r\n|[\r\n])/g,"&#10;"),{xmlns:"http://www.w3.org/TR/REC-html40"});return vt("Comment",t,{"ss:Author":e.a})}).join("")),vt("Cell",m,o)}function xa(e,t){var n='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Oi(t.hpt)),t.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(n+=' ss:Hidden="1"')),n+">"}function Da(e,t,n){var r=[],i=n.SheetNames[e],s=n.Sheets[i],a=s?function(e,t,n,r){if(!e)return"";if(!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==n&&(o.Name.match(/^_xlfn\./)||s.push(ka(o)))}return s.join("")}(s,0,e,n):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?function(e,t){if(!e["!ref"])return"";var n=Ln(e["!ref"]),r=e["!merges"]||[],i=0,s=[];e["!cols"]&&e["!cols"].forEach(function(e,t){Ri(e);var n=!!e.width,r=Ys(t,e),i={"ss:Index":t+1};n&&(i["ss:Width"]=Ni(r.width)),e.hidden&&(i["ss:Hidden"]="1"),s.push(vt("Column",null,i))});for(var a=Array.isArray(e),o=n.s.r;o<=n.e.r;++o){for(var c=[xa(o,(e["!rows"]||[])[o])],l=n.s.c;l<=n.e.c;++l){var u=!1;for(i=0;i!=r.length;++i)if(!(r[i].s.c>l)&&!(r[i].s.r>o)&&!(r[i].e.c<l)&&!(r[i].e.r<o)){r[i].s.c==l&&r[i].s.r==o||(u=!0);break}if(!u){var h={r:o,c:l},d=Pn(h),f=a?(e[o]||[])[l]:e[d];c.push(Na(f,d,e,t,0,0,h))}}c.push("</Row>"),c.length>2&&s.push(c.join(""))}return s.join("")}(s,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(function(e,t,n,r){if(!e)return"";var i=[];if(e["!margins"]&&(i.push("<PageSetup>"),e["!margins"].header&&i.push(vt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&i.push(vt("Footer",null,{"x:Margin":e["!margins"].footer})),i.push(vt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(vt("Visible",1==r.Workbook.Sheets[n].Hidden?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&(!r.Workbook.Sheets[s]||r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),e["!protect"]&&(i.push(mt("ProtectContents","True")),e["!protect"].objects&&i.push(mt("ProtectObjects","True")),e["!protect"].scenarios&&i.push(mt("ProtectScenarios","True")),null==e["!protect"].selectLockedCells||e["!protect"].selectLockedCells?null==e["!protect"].selectUnlockedCells||e["!protect"].selectUnlockedCells||i.push(mt("EnableSelection","UnlockedCells")):i.push(mt("EnableSelection","NoSelection")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(t){e["!protect"][t[0]]&&i.push("<"+t[1]+"/>")})),0==i.length?"":vt("WorksheetOptions",i.join(""),{xmlns:Ot})}(s,0,e,n)),r.join("")}function Ra(e,t){t||(t={}),e.SSF||(e.SSF=He(j)),e.SSF&&(Te(),_e(e.SSF),t.revssf=Re(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Xs(t.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(Ca(e,t)),n.push(""),n.push(""),n.push("");for(var r=0;r<e.SheetNames.length;++r)n.push(vt("Worksheet",Da(r,t,e),{"ss:Name":nt(e.SheetNames[r])}));return n[2]=function(e,t){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(e,t){var r=[];r.push(vt("NumberFormat",null,{"ss:Format":nt(j[e.numFmtId])}));var i={"ss:ID":"s"+(21+t)};n.push(vt("Style",r.join(""),i))}),vt("Styles",n.join(""))}(0,t),n[3]=function(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,n=[],r=0;r<t.length;++r){var i=t[r];null==i.Sheet&&(i.Name.match(/^_xlfn\./)||n.push(ka(i)))}return vt("Names",n.join(""))}(e),Je+vt("Workbook",n.join(""),{xmlns:Mt,"xmlns:o":Pt,"xmlns:x":Ot,"xmlns:ss":Mt,"xmlns:dt":Lt,"xmlns:html":Ut})}var Pa="e0859ff2f94f6810ab9108002b27b3d9",Oa="02d5cdd59c2e1b10939708002b2cf9ae",Ma="05d5cdd59c2e1b10939708002b2cf9ae";function La(e,t){var n=t||{},r=Ie.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Ie.utils.cfb_add(r,i,Ka(e,n)),8==n.biff&&(e.Props||e.Custprops)&&function(e,t){var n,r=[],i=[],s=[],a=0,o=xe(mr,"n"),c=xe(gr,"n");if(e.Props)for(n=Ne(e.Props),a=0;a<n.length;++a)(Object.prototype.hasOwnProperty.call(o,n[a])?r:Object.prototype.hasOwnProperty.call(c,n[a])?i:s).push([n[a],e.Props[n[a]]]);if(e.Custprops)for(n=Ne(e.Custprops),a=0;a<n.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},n[a])||(Object.prototype.hasOwnProperty.call(o,n[a])?r:Object.prototype.hasOwnProperty.call(c,n[a])?i:s).push([n[a],e.Custprops[n[a]]]);var l=[];for(a=0;a<s.length;++a)Ur.indexOf(s[a][0])>-1||Or.indexOf(s[a][0])>-1||null!=s[a][1]&&l.push(s[a]);i.length&&Ie.utils.cfb_add(t,"/\x05SummaryInformation",zr(i,Pa,c,gr)),(r.length||l.length)&&Ie.utils.cfb_add(t,"/\x05DocumentSummaryInformation",zr(r,Oa,o,mr,l.length?l:null,Ma))}(e,r),8==n.biff&&e.vbaraw&&function(e,t){t.FullPaths.forEach(function(n,r){if(0!=r){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");"/"!==i.slice(-1)&&Ie.utils.cfb_add(e,i,t.FileIndex[r].content)}})}(r,Ie.read(e.vbaraw,{type:"string"==typeof e.vbaraw?"binary":"buffer"})),r}var Fa={0:{f:function(e,t){var n={},r=e.l+t;n.r=e.read_shift(4),e.l+=4;var i=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=r,7&s&&(n.level=7&s),16&s&&(n.hidden=!0),32&s&&(n.hpt=i/20),n}},1:{f:function(e){return[Qn(e)]}},2:{f:function(e){return[Qn(e),ar(e),"n"]}},3:{f:function(e){return[Qn(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Qn(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Qn(e),hr(e),"n"]}},6:{f:function(e){return[Qn(e),Wn(e),"str"]}},7:{f:function(e){return[Qn(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var r=e.l+t,i=Qn(e);i.r=n["!row"];var s=[i,Wn(e),"str"];if(n.cellFormula){e.l+=2;var a=Vs(e,r-e.l,n);s[3]=Os(a,0,i,n.supbooks,n)}else e.l=r;return s}},9:{f:function(e,t,n){var r=e.l+t,i=Qn(e);i.r=n["!row"];var s=[i,hr(e),"n"];if(n.cellFormula){e.l+=2;var a=Vs(e,r-e.l,n);s[3]=Os(a,0,i,n.supbooks,n)}else e.l=r;return s}},10:{f:function(e,t,n){var r=e.l+t,i=Qn(e);i.r=n["!row"];var s=[i,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var a=Vs(e,r-e.l,n);s[3]=Os(a,0,i,n.supbooks,n)}else e.l=r;return s}},11:{f:function(e,t,n){var r=e.l+t,i=Qn(e);i.r=n["!row"];var s=[i,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var a=Vs(e,r-e.l,n);s[3]=Os(a,0,i,n.supbooks,n)}else e.l=r;return s}},12:{f:function(e){return[Jn(e)]}},13:{f:function(e){return[Jn(e),ar(e),"n"]}},14:{f:function(e){return[Jn(e),e.read_shift(1),"e"]}},15:{f:function(e){return[Jn(e),e.read_shift(1),"b"]}},16:{f:sa},17:{f:function(e){return[Jn(e),Wn(e),"str"]}},18:{f:function(e){return[Jn(e),e.read_shift(4),"s"]}},19:{f:Gn},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var r=e.l+t;e.l+=4,e.l+=1;var i=e.read_shift(4),s=rr(e),a=Us(e,0,n),o=tr(e);e.l=r;var c={Name:s,Ptg:a};return i<268435455&&(c.Sheet=i),o&&(c.Comment=o),c}},40:{},42:{},43:{f:function(e,t,n){var r={};r.sz=e.read_shift(2)/20;var i=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1),700===e.read_shift(2)&&(r.bold=1),e.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript"}var s=e.read_shift(1);0!=s&&(r.underline=s);var a=e.read_shift(1);a>0&&(r.family=a);var o=e.read_shift(1);switch(o>0&&(r.charset=o),e.l++,r.color=function(e){var t={},n=e.read_shift(1)>>>1,r=e.read_shift(1),i=e.read_shift(2,"i"),s=e.read_shift(1),a=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=r;var c=yr[r];c&&(t.rgb=Ci(c));break;case 2:t.rgb=Ci([s,a,o]);break;case 3:t.theme=r}return 0!=i&&(t.tint=i>0?i/32767:i/32768),t}(e),e.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor"}return r.name=Wn(e),r}},44:{f:function(e,t){return[e.read_shift(2),Wn(e)]}},45:{f:ji},46:{f:Hi},47:{f:function(e,t){var n=e.l+t,r=e.read_shift(2),i=e.read_shift(2);return e.l=n,{ixfe:r,numFmtId:i}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:fi},62:{f:function(e){return[Qn(e),Gn(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=Pn(n);var r=e.read_shift(1);return 2&r&&(t.l="1"),8&r&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:bn,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},r=e[e.l];return++e.l,n.above=!(64&r),n.left=!(128&r),e.l+=18,n.name=Zn(e,t-19),n}},148:{f:ra,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},r=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var i=t>8?Wn(e):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(65536&r),n.backupFile=!!(64&r),n.checkCompatibility=!!(4096&r),n.date1904=!!(1&r),n.filterPrivacy=!!(8&r),n.hidePivotFieldList=!!(1024&r),n.promptedSolutions=!!(16&r),n.publishItems=!!(2048&r),n.refreshAllConnections=!!(262144&r),n.saveExternalLinkValues=!!(128&r),n.showBorderUnselectedTables=!!(4&r),n.showInkAnnotation=!!(32&r),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(32768&r),n.updateLinks=["userSet","never","always"][r>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=ir(e,t-8),n.name=Wn(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:lr},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:aa},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Wn(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:ir},357:{},358:{},359:{},360:{T:1},361:{},362:{f:ui},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var r=e.l+t,i=cr(e),s=e.read_shift(1),a=[i];if(a[2]=s,n.cellFormula){var o=Fs(e,r-e.l,n);a[1]=o}else e.l=r;return a}},427:{f:function(e,t,n){var r=e.l+t,i=[lr(e,16)];if(n.cellFormula){var s=js(e,r-e.l,n);i[1]=s,e.l=r}else e.l=r;return i}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return ca.forEach(function(n){t[n]=hr(e)}),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,r=lr(e,16),i=tr(e),s=Wn(e),a=Wn(e),o=Wn(e);e.l=n;var c={rfx:r,relId:i,loc:s,display:o};return a&&(c.Tooltip=a),c}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:ir},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ns},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=lr(e,16);return t.rfx=n.s,t.ref=Pn(n.s),e.l+=16,t}},636:{T:-1},637:{f:Kn},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:Wn(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Va(e,t,n,r){var i=t;if(!isNaN(i)){var s=r||(n||[]).length||0,a=e.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&on(n)&&e.push(n)}}function Ua(e,t,n){return e||(e=_n(7)),e.write_shift(2,t),e.write_shift(2,n),e.write_shift(2,0),e.write_shift(1,0),e}function ja(e,t,n,r){if(null!=t.v)switch(t.t){case"d":case"n":var i="d"==t.t?Oe(ze(t.v)):t.v;return void(i==(0|i)&&i>=0&&i<65536?Va(e,2,function(e,t,n){var r=_n(9);return Ua(r,e,t),r.write_shift(2,n),r}(n,r,i)):Va(e,3,function(e,t,n){var r=_n(15);return Ua(r,e,t),r.write_shift(8,n,"f"),r}(n,r,i)));case"b":case"e":return void Va(e,5,function(e,t,n,r){var i=_n(9);return Ua(i,e,t),Kr(n,r||"b",i),i}(n,r,t.v,t.t));case"s":case"str":return void Va(e,4,function(e,t,n){var r=_n(8+2*n.length);return Ua(r,e,t),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}(n,r,(t.v||"").slice(0,255)))}Va(e,1,Ua(null,n,r))}function Ba(e,t){var n=t||{};for(var r=Tn(),i=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==n.sheet&&(i=s);if(0==i&&n.sheet&&e.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return Va(r,4==n.biff?1033:3==n.biff?521:9,ai(0,16,n)),function(e,t,n,r){var i,s=Array.isArray(t),a=Ln(t["!ref"]||"A1"),o="",c=[];if(a.e.c>255||a.e.r>16383){if(r.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Mn(a)}for(var l=a.s.r;l<=a.e.r;++l){o=Nn(l);for(var u=a.s.c;u<=a.e.c;++u){l===a.s.r&&(c[u]=Dn(u)),i=c[u]+o;var h=s?(t[l]||[])[u]:t[i];h&&ja(e,h,l,u)}}}(r,e.Sheets[e.SheetNames[i]],0,n),Va(r,10),r.end()}function za(e,t,n){Va(e,49,function(e,t){var n=e.name||"Arial",r=t&&5==t.biff,i=_n(r?15+n.length:16+2*n.length);return i.write_shift(2,20*(e.sz||12)),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,n.length),r||i.write_shift(1,1),i.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),i}({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function Wa(e,t){if(t){var n=0;t.forEach(function(t,r){++n<=256&&t&&Va(e,125,function(e,t){var n=_n(12);n.write_shift(2,t),n.write_shift(2,t),n.write_shift(2,256*e.width),n.write_shift(2,0);var r=0;return e.hidden&&(r|=1),n.write_shift(1,r),r=e.level||0,n.write_shift(1,r),n.write_shift(2,0),n}(Ys(r,t),r))})}}function Ha(e,t,n,r,i){var s=16+Xs(i.cellXfs,t,i);if(null!=t.v||t.bf)if(t.bf)Va(e,6,Ms(t,n,r,0,s));else switch(t.t){case"d":case"n":Va(e,515,function(e,t,n,r){var i=_n(14);return ni(e,t,r,i),dr(n,i),i}(n,r,"d"==t.t?Oe(ze(t.v)):t.v,s));break;case"b":case"e":Va(e,517,function(e,t,n,r,i,s){var a=_n(8);return ni(e,t,r,a),Kr(n,s,a),a}(n,r,t.v,s,0,t.t));break;case"s":case"str":if(i.bookSST)Va(e,253,function(e,t,n,r){var i=_n(10);return ni(e,t,r,i),i.write_shift(4,n),i}(n,r,Ks(i.Strings,t.v,i.revStrings),s));else Va(e,516,function(e,t,n,r,i){var s=!i||8==i.biff,a=_n(+s+8+(1+s)*n.length);return ni(e,t,r,a),a.write_shift(2,n.length),s&&a.write_shift(1,1),a.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),a}(n,r,(t.v||"").slice(0,255),s,i));break;default:Va(e,513,ni(n,r,s))}else Va(e,513,ni(n,r,s))}function qa(e,t,n){var r,i=Tn(),s=n.SheetNames[e],a=n.Sheets[s]||{},o=(n||{}).Workbook||{},c=(o.Sheets||[])[e]||{},l=Array.isArray(a),u=8==t.biff,h="",d=[],f=Ln(a["!ref"]||"A1"),p=u?65536:16384;if(f.e.c>255||f.e.r>=p){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");f.e.c=Math.min(f.e.c,255),f.e.r=Math.min(f.e.c,p-1)}Va(i,2057,ai(0,16,t)),Va(i,13,Gr(1)),Va(i,12,Gr(100)),Va(i,15,Hr(!0)),Va(i,17,Hr(!1)),Va(i,16,dr(.001)),Va(i,95,Hr(!0)),Va(i,42,Hr(!1)),Va(i,43,Hr(!1)),Va(i,130,Gr(1)),Va(i,128,function(e){var t=_n(8);return t.write_shift(4,0),t.write_shift(2,e[0]?e[0]+1:0),t.write_shift(2,e[1]?e[1]+1:0),t}([0,0])),Va(i,131,Hr(!1)),Va(i,132,Hr(!1)),u&&Wa(i,a["!cols"]),Va(i,512,function(e,t){var n=8!=t.biff&&t.biff?2:4,r=_n(2*n+6);return r.write_shift(n,e.s.r),r.write_shift(n,e.e.r+1),r.write_shift(2,e.s.c),r.write_shift(2,e.e.c+1),r.write_shift(2,0),r}(f,t)),u&&(a["!links"]=[]);for(var m=f.s.r;m<=f.e.r;++m){h=Nn(m);for(var g=f.s.c;g<=f.e.c;++g){m===f.s.r&&(d[g]=Dn(g)),r=d[g]+h;var v=l?(a[m]||[])[g]:a[r];v&&(Ha(i,v,m,g,t),u&&v.l&&a["!links"].push([r,v.l]))}}var y=c.CodeName||c.name||s;return u&&Va(i,574,function(e){var t=_n(18),n=1718;return e&&e.RTL&&(n|=64),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}((o.Views||[])[0])),u&&(a["!merges"]||[]).length&&Va(i,229,function(e){var t=_n(2+8*e.length);t.write_shift(2,e.length);for(var n=0;n<e.length;++n)si(e[n],t);return t}(a["!merges"])),u&&function(e,t){for(var n=0;n<t["!links"].length;++n){var r=t["!links"][n];Va(e,440,hi(r)),r[1].Tooltip&&Va(e,2048,di(r))}delete t["!links"]}(i,a),Va(i,442,Zr(y)),u&&function(e,t){var n=_n(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),Va(e,2151,n),(n=_n(39)).write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),si(Ln(t["!ref"]||"A1"),n),n.write_shift(4,4),Va(e,2152,n)}(i,a),Va(i,10),i.end()}function Ga(e,t,n){var r=Tn(),i=(e||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=8==n.biff,c=5==n.biff;(Va(r,2057,ai(0,5,n)),"xla"==n.bookType&&Va(r,135),Va(r,225,o?Gr(1200):null),Va(r,193,function(e,t){t||(t=_n(e));for(var n=0;n<e;++n)t.write_shift(1,0);return t}(2)),c&&Va(r,191),c&&Va(r,192),Va(r,226),Va(r,92,function(e,t){var n=!t||8==t.biff,r=_n(n?112:54);for(r.write_shift(8==t.biff?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}(0,n)),Va(r,66,Gr(o?1200:1252)),o&&Va(r,353,Gr(0)),o&&Va(r,448),Va(r,317,function(e){for(var t=_n(2*e),n=0;n<e;++n)t.write_shift(2,n+1);return t}(e.SheetNames.length)),o&&e.vbaraw&&Va(r,211),o&&e.vbaraw)&&Va(r,442,Zr(a.CodeName||"ThisWorkbook"));Va(r,156,Gr(17)),Va(r,25,Hr(!1)),Va(r,18,Hr(!1)),Va(r,19,Gr(0)),o&&Va(r,431,Hr(!1)),o&&Va(r,444,Gr(0)),Va(r,61,function(){var e=_n(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}()),Va(r,64,Hr(!1)),Va(r,141,Gr(0)),Va(r,34,Hr("true"==function(e){return e.Workbook&&e.Workbook.WBProps&&at(e.Workbook.WBProps.date1904)?"true":"false"}(e))),Va(r,14,Hr(!0)),o&&Va(r,439,Hr(!1)),Va(r,218,Gr(0)),za(r,0,n),function(e,t,n){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)null!=t[i]&&Va(e,1054,ci(i,t[i],n))})}(r,e.SSF,n),function(e,t){for(var n=0;n<16;++n)Va(e,224,li({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Va(e,224,li(n,0,t))})}(r,n),o&&Va(r,352,Hr(!1));var l,u=r.end(),h=Tn();o&&Va(h,140,(l||(l=_n(4)),l.write_shift(2,1),l.write_shift(2,1),l)),o&&n.Strings&&function(e,t,n,r){var i=r||(n||[]).length||0;if(i<=8224)return Va(e,t,n,i);var s=t;if(!isNaN(s)){for(var a=n.parts||[],o=0,c=0,l=0;l+(a[o]||8224)<=8224;)l+=a[o]||8224,o++;var u=e.next(4);for(u.write_shift(2,s),u.write_shift(2,l),e.push(n.slice(c,c+l)),c+=l;c<i;){for((u=e.next(4)).write_shift(2,60),l=0;l+(a[o]||8224)<=8224;)l+=a[o]||8224,o++;u.write_shift(2,l),e.push(n.slice(c,c+l)),c+=l}}}(h,252,function(e){var t=_n(8);t.write_shift(4,e.Count),t.write_shift(4,e.Unique);for(var n=[],r=0;r<e.length;++r)n[r]=Qr(e[r]);var i=k([t].concat(n));return i.parts=[t.length].concat(n.map(function(e){return e.length})),i}(n.Strings)),Va(h,10);var d=h.end(),f=Tn(),p=0,m=0;for(m=0;m<e.SheetNames.length;++m)p+=(o?12:11)+(o?2:1)*e.SheetNames[m].length;var g=u.length+p+d.length;for(m=0;m<e.SheetNames.length;++m){Va(f,133,oi({pos:g,hs:(s[m]||{}).Hidden||0,dt:0,name:e.SheetNames[m]},n)),g+=t[m].length}var v=f.end();if(p!=v.length)throw new Error("BS8 "+p+" != "+v.length);var y=[];return u.length&&y.push(u),v.length&&y.push(v),d.length&&y.push(d),k(y)}function Ka(e,t){for(var n=0;n<=e.SheetNames.length;++n){var r=e.Sheets[e.SheetNames[n]];if(r&&r["!ref"])On(r["!ref"]).e.c>255&&"undefined"!=typeof console&&console.error&&console.error("Worksheet '"+e.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}var i=t||{};switch(i.biff||2){case 8:case 5:return function(e,t){var n=t||{},r=[];e&&!e.SSF&&(e.SSF=He(j)),e&&e.SSF&&(Te(),_e(e.SSF),n.revssf=Re(e.SSF),n.revssf[e.SSF[65535]]=0,n.ssf=e.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,So(n),n.cellXfs=[],Xs(n.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var i=0;i<e.SheetNames.length;++i)r[r.length]=qa(i,n,e);return r.unshift(Ga(e,r,n)),k(r)}(e,t);case 4:case 3:case 2:return Ba(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function Ya(e,t,n,r){for(var i=e["!merges"]||[],s=[],a=t.s.c;a<=t.e.c;++a){for(var o=0,c=0,l=0;l<i.length;++l)if(!(i[l].s.r>n||i[l].s.c>a)&&!(i[l].e.r<n||i[l].e.c<a)){if(i[l].s.r<n||i[l].s.c<a){o=-1;break}o=i[l].e.r-i[l].s.r+1,c=i[l].e.c-i[l].s.c+1;break}if(!(o<0)){var u=Pn({r:n,c:a}),h=r.dense?(e[n]||[])[a]:e[u],d=h&&null!=h.v&&(h.h||st(h.w||(Vn(h),h.w)||""))||"",f={};o>1&&(f.rowspan=o),c>1&&(f.colspan=c),r.editable?d='<span contenteditable="true">'+d+"</span>":h&&(f["data-t"]=h&&h.t||"z",null!=h.v&&(f["data-v"]=h.v),null!=h.z&&(f["data-z"]=h.z),h.l&&"#"!=(h.l.Target||"#").charAt(0)&&(d='<a href="'+h.l.Target+'">'+d+"</a>")),f.id=(r.id||"sjs")+"-"+u,s.push(vt("td",d,f))}}return"<tr>"+s.join("")+"</tr>"}var Qa='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Xa="</body></html>";function Ja(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function $a(e,t){var n=t||{},r=null!=n.header?n.header:Qa,i=null!=n.footer?n.footer:Xa,s=[r],a=On(e["!ref"]);n.dense=Array.isArray(e),s.push(Ja(0,0,n));for(var o=a.s.r;o<=a.e.r;++o)s.push(Ya(e,a,o,n));return s.push("</table>"+i),s.join("")}function Za(e,t,n){var r=n||{};var i=0,s=0;if(null!=r.origin)if("number"==typeof r.origin)i=r.origin;else{var a="string"==typeof r.origin?Rn(r.origin):r.origin;i=a.r,s=a.c}var o=t.getElementsByTagName("tr"),c=Math.min(r.sheetRows||1e7,o.length),l={s:{r:0,c:0},e:{r:i,c:s}};if(e["!ref"]){var u=On(e["!ref"]);l.s.r=Math.min(l.s.r,u.s.r),l.s.c=Math.min(l.s.c,u.s.c),l.e.r=Math.max(l.e.r,u.e.r),l.e.c=Math.max(l.e.c,u.e.c),-1==i&&(l.e.r=i=u.e.r+1)}var h=[],d=0,f=e["!rows"]||(e["!rows"]=[]),p=0,m=0,g=0,v=0,y=0,w=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&m<c;++p){var b=o[p];if(to(b)){if(r.display)continue;f[m]={hidden:!0}}var _=b.children;for(g=v=0;g<_.length;++g){var T=_[g];if(!r.display||!to(T)){var E=T.hasAttribute("data-v")?T.getAttribute("data-v"):T.hasAttribute("v")?T.getAttribute("v"):ft(T.innerHTML),S=T.getAttribute("data-z")||T.getAttribute("z");for(d=0;d<h.length;++d){var I=h[d];I.s.c==v+s&&I.s.r<m+i&&m+i<=I.e.r&&(v=I.e.c+1-s,d=-1)}w=+T.getAttribute("colspan")||1,((y=+T.getAttribute("rowspan")||1)>1||w>1)&&h.push({s:{r:m+i,c:v+s},e:{r:m+i+(y||1)-1,c:v+s+(w||1)-1}});var A={t:"s",v:E},C=T.getAttribute("data-t")||T.getAttribute("t")||"";null!=E&&(0==E.length?A.t=C||"z":r.raw||0==E.trim().length||"s"==C||("TRUE"===E?A={t:"b",v:!0}:"FALSE"===E?A={t:"b",v:!1}:isNaN(Ge(E))?isNaN(Ye(E).getDate())||(A={t:"d",v:ze(E)},r.cellDates||(A={t:"n",v:Oe(A.v)}),A.z=r.dateNF||j[14]):A={t:"n",v:Ge(E)})),void 0===A.z&&null!=S&&(A.z=S);var k="",N=T.getElementsByTagName("A");if(N&&N.length)for(var x=0;x<N.length&&(!N[x].hasAttribute("href")||"#"==(k=N[x].getAttribute("href")).charAt(0));++x);k&&"#"!=k.charAt(0)&&(A.l={Target:k}),r.dense?(e[m+i]||(e[m+i]=[]),e[m+i][v+s]=A):e[Pn({c:v+s,r:m+i})]=A,l.e.c<v+s&&(l.e.c=v+s),v+=w}}++m}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),l.e.r=Math.max(l.e.r,m-1+i),e["!ref"]=Mn(l),m>=c&&(e["!fullref"]=Mn((l.e.r=o.length-p+m-1+i,l))),e}function eo(e,t){return Za((t||{}).dense?[]:{},e,t)}function to(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}var no=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+gt({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Je+t}}(),ro=function(){var e=function(e){return nt(e).replace(/  +/g,function(e){return'<text:s text:c="'+e.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t="          <table:table-cell />\n",n=function(n,r,i){var s=[];s.push('      <table:table table:name="'+nt(r.SheetNames[i])+'" table:style-name="ta1">\n');var a=0,o=0,c=On(n["!ref"]||"A1"),l=n["!merges"]||[],u=0,h=Array.isArray(n);if(n["!cols"])for(o=0;o<=c.e.c;++o)s.push("        <table:table-column"+(n["!cols"][o]?' table:style-name="co'+n["!cols"][o].ods+'"':"")+"></table:table-column>\n");var d="",f=n["!rows"]||[];for(a=0;a<c.s.r;++a)d=f[a]?' table:style-name="ro'+f[a].ods+'"':"",s.push("        <table:table-row"+d+"></table:table-row>\n");for(;a<=c.e.r;++a){for(d=f[a]?' table:style-name="ro'+f[a].ods+'"':"",s.push("        <table:table-row"+d+">\n"),o=0;o<c.s.c;++o)s.push(t);for(;o<=c.e.c;++o){var p=!1,m={},g="";for(u=0;u!=l.length;++u)if(!(l[u].s.c>o)&&!(l[u].s.r>a)&&!(l[u].e.c<o)&&!(l[u].e.r<a)){l[u].s.c==o&&l[u].s.r==a||(p=!0),m["table:number-columns-spanned"]=l[u].e.c-l[u].s.c+1,m["table:number-rows-spanned"]=l[u].e.r-l[u].s.r+1;break}if(p)s.push("          <table:covered-table-cell/>\n");else{var v=Pn({r:a,c:o}),y=h?(n[a]||[])[o]:n[v];if(y&&y.f&&(m["table:formula"]=nt(Hs(y.f)),y.F&&y.F.slice(0,v.length)==v)){var w=On(y.F);m["table:number-matrix-columns-spanned"]=w.e.c-w.s.c+1,m["table:number-matrix-rows-spanned"]=w.e.r-w.s.r+1}if(y){switch(y.t){case"b":g=y.v?"TRUE":"FALSE",m["office:value-type"]="boolean",m["office:boolean-value"]=y.v?"true":"false";break;case"n":g=y.w||String(y.v||0),m["office:value-type"]="float",m["office:value"]=y.v||0;break;case"s":case"str":g=null==y.v?"":y.v,m["office:value-type"]="string";break;case"d":g=y.w||ze(y.v).toISOString(),m["office:value-type"]="date",m["office:date-value"]=ze(y.v).toISOString(),m["table:style-name"]="ce1";break;default:s.push(t);continue}var b=e(g);if(y.l&&y.l.Target){var _=y.l.Target;"#"==(_="#"==_.charAt(0)?"#"+qs(_.slice(1)):_).charAt(0)||_.match(/^\w+:/)||(_="../"+_),b=vt("text:a",b,{"xlink:href":_.replace(/&/g,"&amp;")})}s.push("          "+vt("table:table-cell",vt("text:p",b,{}),m)+"\n")}else s.push(t)}}s.push("        </table:table-row>\n")}return s.push("      </table:table>\n"),s.join("")};return function(e,t){var r=[Je],i=gt({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),s=gt({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});"fods"==t.bookType?(r.push("<office:document"+i+s+">\n"),r.push(Nr().replace(/office:document-meta/g,"office:meta"))):r.push("<office:document-content"+i+">\n"),function(e,t){e.push(" <office:automatic-styles>\n"),e.push('  <number:date-style style:name="N37" number:automatic-order="true">\n'),e.push('   <number:month number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push('   <number:day number:style="long"/>\n'),e.push("   <number:text>/</number:text>\n"),e.push("   <number:year/>\n"),e.push("  </number:date-style>\n");var n=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!cols"])for(var r=0;r<t["!cols"].length;++r)if(t["!cols"][r]){var i=t["!cols"][r];if(null==i.width&&null==i.wpx&&null==i.wch)continue;Ri(i),i.ods=n;var s=t["!cols"][r].wpx+"px";e.push('  <style:style style:name="co'+n+'" style:family="table-column">\n'),e.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+s+'"/>\n'),e.push("  </style:style>\n"),++n}});var r=0;t.SheetNames.map(function(e){return t.Sheets[e]}).forEach(function(t){if(t&&t["!rows"])for(var n=0;n<t["!rows"].length;++n)if(t["!rows"][n]){t["!rows"][n].ods=r;var i=t["!rows"][n].hpx+"px";e.push('  <style:style style:name="ro'+r+'" style:family="table-row">\n'),e.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+i+'"/>\n'),e.push("  </style:style>\n"),++r}}),e.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n'),e.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n'),e.push("  </style:style>\n"),e.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n'),e.push(" </office:automatic-styles>\n")}(r,e),r.push("  <office:body>\n"),r.push("    <office:spreadsheet>\n");for(var a=0;a!=e.SheetNames.length;++a)r.push(n(e.Sheets[e.SheetNames[a]],e,a));return r.push("    </office:spreadsheet>\n"),r.push("  </office:body>\n"),"fods"==t.bookType?r.push("</office:document>"):r.push("</office:document-content>"),r.join("")}}();function io(e,t){if("fods"==t.bookType)return ro(e,t);var n=Xe(),r="",i=[],s=[];return Qe(n,r="mimetype","application/vnd.oasis.opendocument.spreadsheet"),Qe(n,r="content.xml",ro(e,t)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),Qe(n,r="styles.xml",no(e,t)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),Qe(n,r="meta.xml",Je+Nr()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),Qe(n,r="manifest.rdf",function(e){var t=[Je];t.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');for(var n=0;n!=e.length;++n)t.push(Cr(e[n][0],e[n][1])),t.push(kr("",e[n][0]));return t.push(Cr("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}(s)),i.push([r,"application/rdf+xml"]),Qe(n,r="META-INF/manifest.xml",function(e){var t=[Je];t.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n'),t.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');for(var n=0;n<e.length;++n)t.push('  <manifest:file-entry manifest:full-path="'+e[n][0]+'" manifest:media-type="'+e[n][1]+'"/>\n');return t.push("</manifest:manifest>"),t.join("")}(i)),n}function so(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ao(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):I(dt(e))}function oo(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(e,r),r+=e.length}),n}function co(e,t){var n=t?t[0]:0,r=127&e[n];e:if(e[n++]>=128){if(r|=(127&e[n])<<7,e[n++]<128)break e;if(r|=(127&e[n])<<14,e[n++]<128)break e;if(r|=(127&e[n])<<21,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(r+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),r}function lo(e){var t=new Uint8Array(7);t[0]=127&e;var n=1;e:if(e>127){if(t[n-1]|=128,t[n]=e>>7&127,++n,e<=16383)break e;if(t[n-1]|=128,t[n]=e>>14&127,++n,e<=2097151)break e;if(t[n-1]|=128,t[n]=e>>21&127,++n,e<=268435455)break e;if(t[n-1]|=128,t[n]=e/256>>>21&127,++n,e<=34359738367)break e;if(t[n-1]|=128,t[n]=e/65536>>>21&127,++n,e<=4398046511103)break e;t[n-1]|=128,t[n]=e/16777216>>>21&127,++n}return t.slice(0,n)}function uo(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function ho(e){for(var t=[],n=[0];n[0]<e.length;){var r,i=n[0],s=co(e,n),a=7&s,o=0;if(0==(s=Math.floor(s/8)))break;switch(a){case 0:for(var c=n[0];e[n[0]++]>=128;);r=e.slice(c,n[0]);break;case 5:o=4,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,r=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=co(e,n),r=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(i))}var l={data:r,type:a};null==t[s]?t[s]=[l]:t[s].push(l)}return t}function fo(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e){e.data&&(t.push(lo(8*n+e.type)),2==e.type&&t.push(lo(e.data.length)),t.push(e.data))})}),oo(t)}function po(e){for(var t,n=[],r=[0];r[0]<e.length;){var i=co(e,r),s=ho(e.slice(r[0],r[0]+i));r[0]+=i;var a={id:uo(s[1][0].data),messages:[]};s[2].forEach(function(t){var n=ho(t.data),i=uo(n[3][0].data);a.messages.push({meta:n,data:e.slice(r[0],r[0]+i)}),r[0]+=i}),(null==(t=s[3])?void 0:t[0])&&(a.merge=uo(s[3][0].data)>>>0>0),n.push(a)}return n}function mo(e){var t=[];return e.forEach(function(e){var n=[];n[1]=[{data:lo(e.id),type:0}],n[2]=[],null!=e.merge&&(n[3]=[{data:lo(+!!e.merge),type:0}]);var r=[];e.messages.forEach(function(e){r.push(e.data),e.meta[3]=[{type:0,data:lo(e.data.length)}],n[2].push({data:fo(e.meta),type:2})});var i=fo(n);t.push(lo(i.length)),t.push(i),r.forEach(function(e){return t.push(e)})}),oo(t)}function go(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],r=co(t,n),i=[];n[0]<t.length;){var s=3&t[n[0]];if(0!=s){var a=0,o=0;if(1==s?(o=4+(t[n[0]]>>2&7),a=(224&t[n[0]++])<<3,a|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==s?(a=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(a=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),i=[oo(i)],0==a)throw new Error("Invalid offset 0");if(a>i[0].length)throw new Error("Invalid offset beyond length");if(o>=a)for(i.push(i[0].slice(-a)),o-=a;o>=i[i.length-1].length;)i.push(i[i.length-1]),o-=i[i.length-1].length;i.push(i[0].slice(-a,-a+o))}else{var c=t[n[0]++]>>2;if(c<60)++c;else{var l=c-59;c=t[n[0]],l>1&&(c|=t[n[0]+1]<<8),l>2&&(c|=t[n[0]+2]<<16),l>3&&(c|=t[n[0]+3]<<24),c>>>=0,c++,n[0]+=l}i.push(t.slice(n[0],n[0]+c)),n[0]+=c}}var u=oo(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function vo(e){for(var t=[],n=0;n<e.length;){var r=e[n++],i=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(go(r,e.slice(n,n+i))),n+=i}if(n!==e.length)throw new Error("data is not a valid framed stream!");return oo(t)}function yo(e){for(var t=[],n=0;n<e.length;){var r=Math.min(e.length-n,268435455),i=new Uint8Array(4);t.push(i);var s=lo(r),a=s.length;t.push(s),r<=60?(a++,t.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,t.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,t.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,t.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,t.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),t.push(e.slice(n,n+r)),a+=r,i[0]=0,i[1]=255&a,i[2]=a>>8&255,i[3]=a>>16&255,n+=r}return oo(t)}function wo(e,t){var n=new Uint8Array(32),r=so(n),i=12,s=0;switch(n[0]=5,e.t){case"n":n[1]=2,function(e,t,n){var r=Math.floor(0==n?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);e[t+15]|=r>>7,e[t+14]|=(127&r)<<1;for(var s=0;i>=1;++s,i/=256)e[t+s]=255&i;e[t+15]|=n>=0?0:128}(n,i,e.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,e.v?1:0,!0),s|=2,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[1]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(8,s,!0),n.slice(0,i)}function bo(e,t){var n=new Uint8Array(32),r=so(n),i=12,s=0;switch(n[0]=3,e.t){case"n":n[2]=2,r.setFloat64(i,e.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,e.v?1:0,!0),s|=32,i+=8;break;case"s":if(-1==t.indexOf(e.v))throw new Error("Value ".concat(e.v," missing from SST!"));n[2]=3,r.setUint32(i,t.indexOf(e.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+e.t}return r.setUint32(4,s,!0),n.slice(0,i)}function _o(e){return co(ho(e)[1][0].data)}function To(e,t,n){var r,i,s,a;if(!(null==(r=e[6])?void 0:r[0])||!(null==(i=e[7])?void 0:i[0]))throw"Mutation only works on post-BNC storages!";if((null==(a=null==(s=e[8])?void 0:s[0])?void 0:a.data)&&uo(e[8][0].data)>0||!1)throw"Math only works with normal offsets";for(var o=0,c=so(e[7][0].data),l=0,u=[],h=so(e[4][0].data),d=0,f=[],p=0;p<t.length;++p)if(null!=t[p]){var m,g;switch(c.setUint16(2*p,l,!0),h.setUint16(2*p,d,!0),typeof t[p]){case"string":m=wo({t:"s",v:t[p]},n),g=bo({t:"s",v:t[p]},n);break;case"number":m=wo({t:"n",v:t[p]},n),g=bo({t:"n",v:t[p]},n);break;case"boolean":m=wo({t:"b",v:t[p]},n),g=bo({t:"b",v:t[p]},n);break;default:throw new Error("Unsupported value "+t[p])}u.push(m),l+=m.length,f.push(g),d+=g.length,++o}else c.setUint16(2*p,65535,!0),h.setUint16(2*p,65535);for(e[2][0].data=lo(o);p<e[7][0].data.length/2;++p)c.setUint16(2*p,65535,!0),h.setUint16(2*p,65535,!0);return e[6][0].data=oo(u),e[3][0].data=oo(f),o}function Eo(e){return function(t){for(var n=0;n!=e.length;++n){var r=e[n];void 0===t[r[0]]&&(t[r[0]]=r[1]),"n"===r[2]&&(t[r[0]]=Number(t[r[0]]))}}}function So(e){Eo([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Io(e,t){return"ods"==t.bookType?io(e,t):"numbers"==t.bookType?function(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=On(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Mn(r)));var s=Lo(n,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(e){return e.forEach(function(e){"string"==typeof e&&a.push(e)})});var o={},c=[],l=Ie.read(t.numbers,{type:"base64"});l.FileIndex.map(function(e,t){return[e,l.FullPaths[t]]}).forEach(function(e){var t=e[0],n=e[1];2==t.type&&t.name.match(/\.iwa/)&&po(vo(t.content)).forEach(function(e){c.push(e.id),o[e.id]={deps:[],location:n,type:uo(e.messages[0].meta[1][0].data)}})}),c.sort(function(e,t){return e-t});var u=c.filter(function(e){return e>1}).map(function(e){return[e,lo(e)]});l.FileIndex.map(function(e,t){return[e,l.FullPaths[t]]}).forEach(function(e){var t=e[0];e[1],t.name.match(/\.iwa/)&&po(vo(t.content)).forEach(function(e){e.messages.forEach(function(t){u.forEach(function(t){e.messages.some(function(e){return 11006!=uo(e.meta[1][0].data)&&function(e,t){e:for(var n=0;n<=e.length-t.length;++n){for(var r=0;r<t.length;++r)if(e[n+r]!=t[r])continue e;return!0}return!1}(e.data,t[1])})&&o[t[0]].deps.push(e.id)})})})});for(var h,d=Ie.find(l,o[1].location),f=po(vo(d.content)),p=0;p<f.length;++p){var m=f[p];1==m.id&&(h=m)}var g=_o(ho(h.messages[0].data)[1][0].data);for(f=po(vo((d=Ie.find(l,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);for(g=_o(ho(h.messages[0].data)[2][0].data),f=po(vo((d=Ie.find(l,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);for(g=_o(ho(h.messages[0].data)[2][0].data),f=po(vo((d=Ie.find(l,o[g].location)).content)),p=0;p<f.length;++p)(m=f[p]).id==g&&(h=m);var v=ho(h.messages[0].data);v[6][0].data=lo(r.e.r+1),v[7][0].data=lo(r.e.c+1);for(var y=_o(v[46][0].data),w=Ie.find(l,o[y].location),b=po(vo(w.content)),_=0;_<b.length&&b[_].id!=y;++_);if(b[_].id!=y)throw"Bad ColumnRowUIDMapArchive";var T=ho(b[_].messages[0].data);T[1]=[],T[2]=[],T[3]=[];for(var E=0;E<=r.e.c;++E){var S=[];S[1]=S[2]=[{type:0,data:lo(E+420690)}],T[1].push({type:2,data:fo(S)}),T[2].push({type:0,data:lo(E)}),T[3].push({type:0,data:lo(E)})}T[4]=[],T[5]=[],T[6]=[];for(var I=0;I<=r.e.r;++I)(S=[])[1]=S[2]=[{type:0,data:lo(I+726270)}],T[4].push({type:2,data:fo(S)}),T[5].push({type:0,data:lo(I)}),T[6].push({type:0,data:lo(I)});b[_].messages[0].data=fo(T),w.content=yo(mo(b)),w.size=w.content.length,delete v[46];var A=ho(v[4][0].data);A[7][0].data=lo(r.e.r+1);var C=_o(ho(A[1][0].data)[2][0].data);if((b=po(vo((w=Ie.find(l,o[C].location)).content)))[0].id!=C)throw"Bad HeaderStorageBucket";var k=ho(b[0].messages[0].data);for(I=0;I<s.length;++I){var N=ho(k[2][0].data);N[1][0].data=lo(I),N[4][0].data=lo(s[I].length),k[2][I]={type:k[2][0].type,data:fo(N)}}b[0].messages[0].data=fo(k),w.content=yo(mo(b)),w.size=w.content.length;var x=_o(A[2][0].data);if((b=po(vo((w=Ie.find(l,o[x].location)).content)))[0].id!=x)throw"Bad HeaderStorageBucket";for(k=ho(b[0].messages[0].data),E=0;E<=r.e.c;++E)(N=ho(k[2][0].data))[1][0].data=lo(E),N[4][0].data=lo(r.e.r+1),k[2][E]={type:k[2][0].type,data:fo(N)};b[0].messages[0].data=fo(k),w.content=yo(mo(b)),w.size=w.content.length;var D=_o(A[4][0].data);!function(){for(var e,t=Ie.find(l,o[D].location),n=po(vo(t.content)),r=0;r<n.length;++r){var i=n[r];i.id==D&&(e=i)}var s=ho(e.messages[0].data);s[3]=[];var c=[];a.forEach(function(e,t){c[1]=[{type:0,data:lo(t)}],c[2]=[{type:0,data:lo(1)}],c[3]=[{type:2,data:ao(e)}],s[3].push({type:2,data:fo(c)})}),e.messages[0].data=fo(s);var u=yo(mo(n));t.content=u,t.size=t.content.length}();var R=ho(A[3][0].data),P=R[1][0];delete R[2];var O=ho(P.data),M=_o(O[2][0].data);!function(){for(var e,t=Ie.find(l,o[M].location),n=po(vo(t.content)),i=0;i<n.length;++i){var c=n[i];c.id==M&&(e=c)}var u=ho(e.messages[0].data);delete u[6],delete R[7];var h=new Uint8Array(u[5][0].data);u[5]=[];for(var d=0,f=0;f<=r.e.r;++f){var p=ho(h);d+=To(p,s[f],a),p[1][0].data=lo(f),u[5].push({data:fo(p),type:2})}u[1]=[{type:0,data:lo(r.e.c+1)}],u[2]=[{type:0,data:lo(r.e.r+1)}],u[3]=[{type:0,data:lo(d)}],u[4]=[{type:0,data:lo(r.e.r+1)}],e.messages[0].data=fo(u);var m=yo(mo(n));t.content=m,t.size=t.content.length}(),P.data=fo(O),A[3][0].data=fo(R),v[4][0].data=fo(A),h.messages[0].data=fo(v);var L=yo(mo(f));return d.content=L,d.size=d.content.length,l}(e,t):"xlsb"==t.bookType?function(e,t){$i=1024,e&&!e.SSF&&(e.SSF=He(j));e&&e.SSF&&(Te(),_e(e.SSF),t.revssf=Re(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF);t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Gs?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xlsb"==t.bookType?"bin":"xml",r=is.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};So(t=t||{});var s=Xe(),a="",o=0;t.cellXfs=[],Xs(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});if(Qe(s,a="docProps/core.xml",Rr(e.Props,t)),i.coreprops.push(a),Ar(t.rels,2,a,Er.CORE_PROPS),a="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var c=[],l=0;l<e.SheetNames.length;++l)2!=(e.Workbook.Sheets[l]||{}).Hidden&&c.push(e.SheetNames[l]);e.Props.SheetNames=c}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Qe(s,a,Mr(e.Props)),i.extprops.push(a),Ar(t.rels,3,a,Er.EXT_PROPS),e.Custprops!==e.Props&&Ne(e.Custprops||{}).length>0&&(Qe(s,a="docProps/custom.xml",Lr(e.Custprops)),i.custprops.push(a),Ar(t.rels,4,a,Er.CUST_PROPS));for(o=1;o<=e.SheetNames.length;++o){var u={"!id":{}},h=e.Sheets[e.SheetNames[o-1]];(h||{})["!type"];if(Qe(s,a="xl/worksheets/sheet"+o+"."+n,Ia(o-1,a,t,e,u)),i.sheets.push(a),Ar(t.wbrels,-1,"worksheets/sheet"+o+"."+n,Er.WS[0]),h){var d=h["!comments"],f=!1,p="";d&&d.length>0&&(Qe(s,p="xl/comments"+o+"."+n,Aa(d,p,t)),i.comments.push(p),Ar(u,-1,"../comments"+o+"."+n,Er.CMNT),f=!0),h["!legacy"]&&f&&Qe(s,"xl/drawings/vmlDrawing"+o+".vml",Zi(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Qe(s,Sr(a),Ir(u))}null!=t.Strings&&t.Strings.length>0&&(Qe(s,a="xl/sharedStrings."+n,function(e,t,n){return(".bin"===t.slice(-4)?Ei:_i)(e,n)}(t.Strings,a,t)),i.strs.push(a),Ar(t.wbrels,-1,"sharedStrings."+n,Er.SST));Qe(s,a="xl/workbook."+n,function(e,t,n){return(".bin"===t.slice(-4)?Sa:_a)(e,n)}(e,a,t)),i.workbooks.push(a),Ar(t.rels,1,a,Er.WB),Qe(s,a="xl/theme/theme1.xml",Qi(e.Themes,t)),i.themes.push(a),Ar(t.wbrels,-1,"theme/theme1.xml",Er.THEME),Qe(s,a="xl/styles."+n,function(e,t,n){return(".bin"===t.slice(-4)?Yi:Mi)(e,n)}(e,a,t)),i.styles.push(a),Ar(t.wbrels,-1,"styles."+n,Er.STY),e.vbaraw&&r&&(Qe(s,a="xl/vbaProject.bin",e.vbaraw),i.vba.push(a),Ar(t.wbrels,-1,"vbaProject.bin",Er.VBA));return Qe(s,a="xl/metadata."+n,function(e){return(".bin"===e.slice(-4)?Xi:Ji)()}(a)),i.metadata.push(a),Ar(t.wbrels,-1,"metadata."+n,Er.XLMETA),Qe(s,"[Content_Types].xml",Tr(i,t)),Qe(s,"_rels/.rels",Ir(t.rels)),Qe(s,"xl/_rels/workbook."+n+".rels",Ir(t.wbrels)),delete t.revssf,delete t.ssf,s}(e,t):Ao(e,t)}function Ao(e,t){$i=1024,e&&!e.SSF&&(e.SSF=He(j)),e&&e.SSF&&(Te(),_e(e.SSF),t.revssf=Re(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Gs?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var n="xml",r=is.indexOf(t.bookType)>-1,i={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};So(t=t||{});var s=Xe(),a="",o=0;if(t.cellXfs=[],Xs(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),Qe(s,a="docProps/core.xml",Rr(e.Props,t)),i.coreprops.push(a),Ar(t.rels,2,a,Er.CORE_PROPS),a="docProps/app.xml",e.Props&&e.Props.SheetNames);else if(e.Workbook&&e.Workbook.Sheets){for(var c=[],l=0;l<e.SheetNames.length;++l)2!=(e.Workbook.Sheets[l]||{}).Hidden&&c.push(e.SheetNames[l]);e.Props.SheetNames=c}else e.Props.SheetNames=e.SheetNames;e.Props.Worksheets=e.Props.SheetNames.length,Qe(s,a,Mr(e.Props)),i.extprops.push(a),Ar(t.rels,3,a,Er.EXT_PROPS),e.Custprops!==e.Props&&Ne(e.Custprops||{}).length>0&&(Qe(s,a="docProps/custom.xml",Lr(e.Custprops)),i.custprops.push(a),Ar(t.rels,4,a,Er.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var h={"!id":{}},d=e.Sheets[e.SheetNames[o-1]];(d||{})["!type"];if(Qe(s,a="xl/worksheets/sheet"+o+"."+n,ta(o-1,t,e,h)),i.sheets.push(a),Ar(t.wbrels,-1,"worksheets/sheet"+o+"."+n,Er.WS[0]),d){var f=d["!comments"],p=!1,m="";if(f&&f.length>0){var g=!1;f.forEach(function(e){e[1].forEach(function(e){1==e.T&&(g=!0)})}),g&&(Qe(s,m="xl/threadedComments/threadedComment"+o+"."+n,ts(f,u,t)),i.threadedcomments.push(m),Ar(h,-1,"../threadedComments/threadedComment"+o+"."+n,Er.TCMNT)),Qe(s,m="xl/comments"+o+"."+n,es(f)),i.comments.push(m),Ar(h,-1,"../comments"+o+"."+n,Er.CMNT),p=!0}d["!legacy"]&&p&&Qe(s,"xl/drawings/vmlDrawing"+o+".vml",Zi(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&Qe(s,Sr(a),Ir(h))}return null!=t.Strings&&t.Strings.length>0&&(Qe(s,a="xl/sharedStrings."+n,_i(t.Strings,t)),i.strs.push(a),Ar(t.wbrels,-1,"sharedStrings."+n,Er.SST)),Qe(s,a="xl/workbook."+n,_a(e)),i.workbooks.push(a),Ar(t.rels,1,a,Er.WB),Qe(s,a="xl/theme/theme1.xml",Qi(e.Themes,t)),i.themes.push(a),Ar(t.wbrels,-1,"theme/theme1.xml",Er.THEME),Qe(s,a="xl/styles."+n,Mi(e,t)),i.styles.push(a),Ar(t.wbrels,-1,"styles."+n,Er.STY),e.vbaraw&&r&&(Qe(s,a="xl/vbaProject.bin",e.vbaraw),i.vba.push(a),Ar(t.wbrels,-1,"vbaProject.bin",Er.VBA)),Qe(s,a="xl/metadata."+n,Ji()),i.metadata.push(a),Ar(t.wbrels,-1,"metadata."+n,Er.XLMETA),u.length>1&&(Qe(s,a="xl/persons/person.xml",function(e){var t=[Je,vt("personList",null,{xmlns:St,"xmlns:x":Rt[0]}).replace(/[\/]>/,">")];return e.forEach(function(e,n){t.push(vt("person",null,{displayName:e,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:e,providerId:"None"}))}),t.push("</personList>"),t.join("")}(u)),i.people.push(a),Ar(t.wbrels,-1,"persons/person.xml",Er.PEOPLE)),Qe(s,"[Content_Types].xml",Tr(i,t)),Qe(s,"_rels/.rels",Ir(t.rels)),Qe(s,"xl/_rels/workbook.xml.rels",Ir(t.wbrels)),delete t.revssf,delete t.ssf,s}function Co(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=b(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function ko(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return ke(t.file,Ie.write(e,{type:_?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Ie.write(e,t)}function No(e,t){var n={},r=_?"nodebuffer":"undefined"!==typeof Uint8Array?"array":"string";if(t.compression&&(n.compression="DEFLATE"),t.password)n.type=r;else switch(t.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+t.type)}var i=e.FullPaths?Ie.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!t.compression}):e.generate(n);if("undefined"!==typeof Deno&&"string"==typeof i){if("binary"==t.type||"base64"==t.type)return i;i=new Uint8Array(A(i))}return t.password&&"undefined"!==typeof encrypt_agile?ko(encrypt_agile(i,t.password),t):"file"===t.type?ke(t.file,i):"string"==t.type?ht(i):i}function xo(e,t,n){n||(n="");var r=n+e;switch(t.type){case"base64":return w(dt(r));case"binary":return dt(r);case"string":return e;case"file":return ke(t.file,r,"utf8");case"buffer":return _?T(r,"utf8"):"undefined"!==typeof TextEncoder?(new TextEncoder).encode(r):xo(r,{type:"binary"}).split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Do(e,t){switch(t.type){case"string":case"base64":case"binary":for(var n="",r=0;r<e.length;++r)n+=String.fromCharCode(e[r]);return"base64"==t.type?w(n):"string"==t.type?ht(n):n;case"file":return ke(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Ro(e,t){f(),ba(e);var n=He(t||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),"array"==n.type){n.type="binary";var r=Ro(e,n);return n.type="array",A(r)}var i=0;if(n.sheet&&(i="number"==typeof n.sheet?n.sheet:e.SheetNames.indexOf(n.sheet),!e.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return xo(Ra(e,n),n);case"slk":case"sylk":return xo(mi.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"htm":case"html":return xo($a(e.Sheets[e.SheetNames[i]],n),n);case"txt":return function(e,t){switch(t.type){case"base64":return w(e);case"binary":case"string":return e;case"file":return ke(t.file,e,"binary");case"buffer":return _?T(e,"binary"):e.split("").map(function(e){return e.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}(jo(e.Sheets[e.SheetNames[i]],n),n);case"csv":return xo(Uo(e.Sheets[e.SheetNames[i]],n),n,"\ufeff");case"dif":return xo(gi.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"dbf":return Do(pi.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"prn":return xo(yi.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"rtf":return xo(Ai.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"eth":return xo(vi.from_sheet(e.Sheets[e.SheetNames[i]],n),n);case"fods":return xo(io(e,n),n);case"wk1":return Do(wi.sheet_to_wk1(e.Sheets[e.SheetNames[i]],n),n);case"wk3":return Do(wi.book_to_wk3(e,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),Do(Ka(e,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),function(e,t){var n=t||{};return ko(La(e,n),n)}(e,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return function(e,t){var n=He(t||{});return No(Io(e,n),n)}(e,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function Po(e){if(!e.bookType){var t=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(e.bookType=t.slice(1)),e.bookType={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"}[e.bookType]||e.bookType}}function Oo(e,t,n){var r=n||{};return r.type="file",r.file=t,Po(r),Ro(e,r)}function Mo(e,t,n,r,i,s,a,o){var c=Nn(n),l=o.defval,u=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,d=1===i?[]:{};if(1!==i)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:n,enumerable:!1})}catch(g){d.__rowNum__=n}else d.__rowNum__=n;if(!a||e[n])for(var f=t.s.c;f<=t.e.c;++f){var p=a?e[n][f]:e[r[f]+c];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=s[f]){if(null==m)if("e"==p.t&&null===m)d[s[f]]=null;else if(void 0!==l)d[s[f]]=l;else{if(!u||null!==m)continue;d[s[f]]=null}else d[s[f]]=u&&("n"!==p.t||"n"===p.t&&!1!==o.rawNumbers)?m:Vn(p,m,o);null!=m&&(h=!1)}}else{if(void 0===l)continue;null!=s[f]&&(d[s[f]]=l)}}return{row:d,isempty:h}}function Lo(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},r=0,i=1,s=[],a=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},l=t||{},u=null!=l.range?l.range:e["!ref"];switch(1===l.header?r=1:"A"===l.header?r=2:Array.isArray(l.header)?r=3:null==l.header&&(r=0),typeof u){case"string":c=Ln(u);break;case"number":(c=Ln(e["!ref"])).s.r=u;break;default:c=u}r>0&&(i=0);var h=Nn(c.s.r),d=[],f=[],p=0,m=0,g=Array.isArray(e),v=c.s.r,y=0,w={};g&&!e[v]&&(e[v]=[]);var b=l.skipHidden&&e["!cols"]||[],_=l.skipHidden&&e["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(b[y]||{}).hidden)switch(d[y]=Dn(y),n=g?e[v][y]:e[d[y]+h],r){case 1:s[y]=y-c.s.c;break;case 2:s[y]=d[y];break;case 3:s[y]=l.header[y-c.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=a=Vn(n,null,l),m=w[a]||0){do{o=a+"_"+m++}while(w[o]);w[a]=m,w[o]=1}else w[a]=1;s[y]=o}for(v=c.s.r+i;v<=c.e.r;++v)if(!(_[v]||{}).hidden){var T=Mo(e,c,v,d,r,s,g,l);(!1===T.isempty||(1===r?!1!==l.blankrows:l.blankrows))&&(f[p++]=T.row)}return f.length=p,f}var Fo=/"/g;function Vo(e,t,n,r,i,s,a,o){for(var c=!0,l=[],u="",h=Nn(n),d=t.s.c;d<=t.e.c;++d)if(r[d]){var f=o.dense?(e[n]||[])[d]:e[r[d]+h];if(null==f)u="";else if(null!=f.v){c=!1,u=""+(o.rawNumbers&&"n"==f.t?f.v:Vn(f,null,o));for(var p=0,m=0;p!==u.length;++p)if((m=u.charCodeAt(p))===i||m===s||34===m||o.forceQuotes){u='"'+u.replace(Fo,'""')+'"';break}"ID"==u&&(u='"ID"')}else null==f.f||f.F?u="":(c=!1,(u="="+f.f).indexOf(",")>=0&&(u='"'+u.replace(Fo,'""')+'"'));l.push(u)}return!1===o.blankrows&&c?null:l.join(a)}function Uo(e,t){var n=[],r=null==t?{}:t;if(null==e||null==e["!ref"])return"";var i=Ln(e["!ref"]),s=void 0!==r.FS?r.FS:",",a=s.charCodeAt(0),o=void 0!==r.RS?r.RS:"\n",c=o.charCodeAt(0),l=new RegExp(("|"==s?"\\|":s)+"+$"),u="",h=[];r.dense=Array.isArray(e);for(var d=r.skipHidden&&e["!cols"]||[],f=r.skipHidden&&e["!rows"]||[],p=i.s.c;p<=i.e.c;++p)(d[p]||{}).hidden||(h[p]=Dn(p));for(var m=0,g=i.s.r;g<=i.e.r;++g)(f[g]||{}).hidden||null!=(u=Vo(e,i,g,h,a,c,s,r))&&(r.strip&&(u=u.replace(l,"")),(u||!1!==r.blankrows)&&n.push((m++?o:"")+u));return delete r.dense,n.join("")}function jo(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=Uo(e,t);if("undefined"==typeof m||"string"==t.type)return n;var r=m.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+r}function Bo(e,t,n){var r,i=n||{},s=+!i.skipHeader,a=e||{},o=0,c=0;if(a&&null!=i.origin)if("number"==typeof i.origin)o=i.origin;else{var l="string"==typeof i.origin?Rn(i.origin):i.origin;o=l.r,c=l.c}var u={s:{c:0,r:0},e:{c:c,r:o+t.length-1+s}};if(a["!ref"]){var h=Ln(a["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),-1==o&&(o=h.e.r+1,u.e.r=o+t.length-1+s)}else-1==o&&(o=0,u.e.r=t.length-1+s);var d=i.header||[],f=0;t.forEach(function(e,t){Ne(e).forEach(function(n){-1==(f=d.indexOf(n))&&(d[f=d.length]=n);var l=e[n],u="z",h="",p=Pn({c:c+f,r:o+t+s});r=zo(a,p),!l||"object"!==typeof l||l instanceof Date?("number"==typeof l?u="n":"boolean"==typeof l?u="b":"string"==typeof l?u="s":l instanceof Date?(u="d",i.cellDates||(u="n",l=Oe(l)),h=i.dateNF||j[14]):null===l&&i.nullError&&(u="e",l=0),r?(r.t=u,r.v=l,delete r.w,delete r.R,h&&(r.z=h)):a[p]=r={t:u,v:l},h&&(r.z=h)):a[p]=l})}),u.e.c=Math.max(u.e.c,c+d.length-1);var p=Nn(o);if(s)for(f=0;f<d.length;++f)a[Dn(f+c)+p]={t:"s",v:d[f]};return a["!ref"]=Mn(u),a}function zo(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var r=Rn(t);return e[r.r]||(e[r.r]=[]),e[r.r][r.c]||(e[r.r][r.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return zo(e,Pn("number"!=typeof t?t:{r:t,c:n||0}))}function Wo(){return{SheetNames:[],Sheets:{}}}function Ho(e,t,n,r){var i=1;if(!n)for(;i<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+i);++i,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&e.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||n;for(++i;i<=65535&&-1!=e.SheetNames.indexOf(n=a+i);++i);}if(wa(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function qo(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var Go={encode_col:Dn,encode_row:Nn,encode_cell:Pn,encode_range:Mn,decode_col:xn,decode_row:kn,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:Rn,decode_range:On,format_cell:Vn,sheet_add_aoa:jn,sheet_add_json:Bo,sheet_add_dom:Za,aoa_to_sheet:Bn,json_to_sheet:function(e,t){return Bo(null,e,t)},table_to_sheet:eo,table_to_book:function(e,t){return Un(eo(e,t),t)},sheet_to_csv:Uo,sheet_to_txt:jo,sheet_to_json:Lo,sheet_to_html:$a,sheet_to_formulae:function(e){var t,n="",r="";if(null==e||null==e["!ref"])return[];var i,s=Ln(e["!ref"]),a="",o=[],c=[],l=Array.isArray(e);for(i=s.s.c;i<=s.e.c;++i)o[i]=Dn(i);for(var u=s.s.r;u<=s.e.r;++u)for(a=Nn(u),i=s.s.c;i<=s.e.c;++i)if(n=o[i]+a,r="",void 0!==(t=l?(e[u]||[])[i]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;r=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)r=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)r=""+t.v;else if("b"==t.t)r=t.v?"TRUE":"FALSE";else if(void 0!==t.w)r="'"+t.w;else{if(void 0===t.v)continue;r="s"==t.t?"'"+t.v:""+t.v}}c[c.length]=n+"="+r}return c},sheet_to_row_object_array:Lo,sheet_get_cell:zo,book_new:Wo,book_append_sheet:Ho,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var r=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[r]||(e.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[r].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:qo,cell_set_internal_link:function(e,t,n){return qo(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,r){for(var i="string"!=typeof t?t:Ln(t),s="string"==typeof t?t:Mn(t),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var c=zo(e,a,o);c.t="n",c.F=s,delete c.v,a==i.s.r&&o==i.s.c&&(c.f=n,r&&(c.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};a.version;var Ko=n(579);const Yo=["day","night","neither","cs"],Qo=()=>{const[e,t]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[c,l]=(0,r.useState)(""),[u,h]=(0,r.useState)(!1),d=(0,i.getAllEntries)(),f=Array.from(new Set(d.map(e=>e.date.slice(0,4))));f.sort();const p=Array.from(new Set(d.filter(e=>!a||e.date.startsWith(a)).map(e=>e.date.slice(5,7))));p.sort();return(0,Ko.jsxs)("div",{className:"holiday-manager",style:{marginTop:24},children:[(0,Ko.jsx)("h4",{children:"Export Entries"}),(0,Ko.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8,width:"100%",justifyContent:"space-between"},children:[(0,Ko.jsxs)("select",{value:a,onChange:e=>o(e.target.value),style:{flex:"1 1 120px",minWidth:90,maxWidth:160},children:[(0,Ko.jsx)("option",{value:"",children:"All Years"}),f.map(e=>(0,Ko.jsx)("option",{value:e,children:e},e))]}),(0,Ko.jsxs)("select",{value:c,onChange:e=>l(e.target.value),style:{flex:"1 1 120px",minWidth:90,maxWidth:160},children:[(0,Ko.jsx)("option",{value:"",children:"All Months"}),p.map(e=>(0,Ko.jsx)("option",{value:e,children:e},e))]}),(0,Ko.jsxs)("select",{value:e,onChange:e=>t(e.target.value),style:{flex:"1 1 120px",minWidth:90,maxWidth:160},children:[(0,Ko.jsx)("option",{value:"",children:"All Shifts"}),Yo.map(e=>(0,Ko.jsx)("option",{value:e,children:e},e))]}),(0,Ko.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:4},children:[(0,Ko.jsx)("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),style:{marginRight:4}}),"Yearly export (monthly OS summary)"]}),(0,Ko.jsx)("button",{onClick:()=>{var t;if(u&&a){const{calculateMonthlySummary:e}=n(449),t=Array.from({length:12},(e,t)=>t+1).map(t=>{var n,r,i,s,o;const c=e(Number(a),t-1);return{Month:"".concat(a,"-").concat(String(t).padStart(2,"0")),FTL:l(null!==(n=c.totalFTL)&&void 0!==n?n:0),OL:l(null!==(r=c.totalOL)&&void 0!==r?r:0),OS:l(null!==(i=c.osMonth)&&void 0!==i?i:0),WeekendHours:l(null!==(s=c.totalWeekend)&&void 0!==s?s:0),OSDebt:l(null!==(o=c.osDebt90d)&&void 0!==o?o:0)}}),r=Go.json_to_sheet(t);r["!cols"]=[{wch:10},{wch:10},{wch:10},{wch:10},{wch:14},{wch:14}];const i=Go.book_new();return Go.book_append_sheet(i,r,"YearlySummary"),void Oo(i,"pontaj-yearly-summary-".concat(a,".xlsx"))}let r=d;if(a&&(r=r.filter(e=>e.date.startsWith(a))),c&&(r=r.filter(e=>e.date.slice(5,7)===c)),e&&(r=r.filter(t=>t.shifts.some(t=>t.type===e))),!r.length)return void alert("No entries to export for selected filters.");let i=null;if(a&&c){const{calculateMonthlySummary:e}=n(449);i=e(Number(a),Number(c)-1)}else if(a&&!c){const{calculateMonthlySummary:e}=n(449);let t=0,r=0,s=0;for(let n=0;n<12;n++){const i=e(Number(a),n);t+=i.totalWeekend,r+=i.osMonth,s+=i.osDebt90d}i={totalWeekend:t,osMonth:r,osDebt90d:s}}const o=["day","night","neither","cs"];function l(e){const t=Math.floor(e/60),n=Math.abs(e%60);return"".concat(t,"h ").concat(n,"m")}let h=r.flatMap((t,r,i)=>{let a="";if(t.date&&"string"===typeof t.date){if(/^\d{4}-\d{2}-\d{2}$/.test(t.date)){const e=new Date(t.date+"T00:00:00");if(isNaN(e.getTime()))a=t.date;else try{a=(0,s.format)((0,s.utcToZonedTime)(e,"Europe/Bucharest"),"yyyy-MM-dd",{timeZone:"Europe/Bucharest"})}catch(c){a=t.date}}else a=t.date}return 0===t.shifts.length?[]:t.shifts.filter(t=>o.includes(t.type)&&(!e||t.type===e)).map((e,r)=>{const i=Number(e.duration);let s=0;const o=new Date(t.date),{isWeekend:c,isRomanianHoliday:u}=n(1713),h=u(o)||c(o);if("day"===e.type&&h&&(s=i),"night"===e.type){const e=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1),t=h,n=u(e)||c(e);t&&n?s=i:t&&!n?s=315:!t&&n&&(s=435)}return{Date:a,ID:t.id,ShiftType:String(e.type),Start:e.startTime,End:e.endTime,Duration:l(i),OS:"",WeekendHours:l(s),Notes:t.notes||""}})});h=h.filter(Boolean);let f=0,p=0;r.forEach((e,t)=>{e.shifts&&e.shifts.length>0&&e.shifts.forEach(e=>{f+=e.duration||0}),p+=function(e){const{isWeekend:t,isRomanianHoliday:r,timeToMinutes:i}=n(1713),s=new Date(e.date);let a=0;if(e.shifts.forEach(e=>{if("night"===e.type){const n=new Date(s.getFullYear(),s.getMonth(),s.getDate()+1),o=r(s),c=t(s),l=r(n),u=t(n);if((o||c)&&(l||u))a+=e.duration;else if(!o&&!c||l||u){if(!o&&!c&&(l||u)){const t=i(e.endTime);a+=t}}else{const t=i(e.startTime);a+=1440-t}}}),r(s)||t(s)){const t=e.shifts.filter(e=>"night"!==e.type).reduce(function(e,t){return e+("number"===typeof t.duration?t.duration:0)},0);a+=t}return a}(e)});let m=i&&"number"===typeof i.ftl?i.ftl:0;Math.max(0,f-m);Math.max(0,f-m);h.push({Date:"SUMMARY",ID:"",ShiftType:"",Start:"",End:"",Duration:l(f),OS:l(m),WeekendHours:l(p),Notes:i?"OS Debt: ".concat(l(null!==(t=i.osDebt90d)&&void 0!==t?t:0)):""});const g=Go.json_to_sheet(h);g["!cols"]=[{wch:12},{wch:14},{wch:10},{wch:8},{wch:8},{wch:10},{wch:10},{wch:14},{wch:30}];const v=Go.book_new();Go.book_append_sheet(v,g,"Entries");let y="pontaj-entries";a&&(y+="-".concat(a)),c&&(y+="-".concat(c)),e&&(y+="-".concat(e)),y+=".xlsx",Oo(v,y)},style:{flex:"1 1 120px",minWidth:90,maxWidth:160},children:"Export"})]})]})}},1713(e,t,n){"use strict";n.r(t),n.d(t,{calculateWorkHours:()=>c,isRomanianHoliday:()=>i,isWeekday:()=>u,isWeekend:()=>l,minutesToTime:()=>o,romanianHolidays:()=>r,roundToNearestMinute:()=>s,timeToMinutes:()=>a});const r={2024:["2024-01-01","2024-01-02","2024-01-06","2024-01-07","2024-01-24","2024-05-01","2024-06-01","2024-08-15","2024-08-30"],2025:["2025-01-01","2025-01-02","2025-01-06","2025-01-07","2025-01-24","2025-05-01","2025-06-01","2025-08-15","2025-08-30"],2026:["2026-01-01","2026-01-02","2026-01-06","2026-01-07","2026-01-24","2026-05-01","2026-06-01","2026-08-15","2026-08-30"]},i=e=>{const t=e.getFullYear().toString(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),s="".concat(t,"-").concat(n,"-").concat(i);let a=[];try{const e=localStorage.getItem("manualHolidays_".concat(t));e&&(a=JSON.parse(e))}catch(c){}const o=r[t]||[];return a.includes(s)||o.includes(s)},s=e=>Math.round(e),a=e=>{const[t,n]=e.split(":").map(Number);return 60*t+n},o=e=>{const t=Math.floor(e/60),n=e%60;return"".concat(String(t).padStart(2,"0"),":").concat(String(n).padStart(2,"0"))},c=(e,t)=>{const n=a(e);let r=a(t);return r<n&&(r+=1440),r-n},l=e=>{const t=e.getDay();return 0===t||6===t},u=e=>!l(e)},8107(e,t,n){"use strict";n.r(t),n.d(t,{auth:()=>a,db:()=>o});var r=n(5757);const i={apiKey:"AIzaSyDig3wwQRpVzH8VPgCcqm_V2jUrZO9ADSY",authDomain:"pontaj-e090b.firebaseapp.com",projectId:"pontaj-e090b",storageBucket:"pontaj-e090b.appspot.com",messagingSenderId:"668493273104",appId:"1:668493273104:web:3e9fa3c7a50a75928b9295",measurementId:"G-N3RP5WW8QH"};let s=null,a=null,o=null;if(!(0,r.MR)()){const{initializeApp:e}=n(3714),{getAuth:t}=n(6897),{getFirestore:r}=n(8544);s=e(i),a=t(s),o=r(s)}},5757(e,t,n){"use strict";function r(){try{return function(){if("undefined"===typeof window)return!1;try{var e;if(!0===window.__ELECTRON__)return!0;const t=!!window.require,n=null===(e=window.process)||void 0===e?void 0:e.type;return t&&"renderer"===n}catch(t){return!1}}()}catch(e){return!1}}n.d(t,{MR:()=>r})},449(e,t,n){"use strict";n.r(t),n.d(t,{ACTIVE_CALENDAR_KEY:()=>o,ACTIVE_PROFILE_KEY:()=>a,PROFILES_STORAGE_KEY:()=>s,calculateMonthlySummary:()=>x,createCalendar:()=>v,createProfile:()=>f,deleteCalendar:()=>_,deleteEntry:()=>N,deleteProfile:()=>p,getActiveCalendar:()=>I,getActiveCalendarId:()=>S,getActiveProfile:()=>g,getActiveProfileId:()=>u,getAllCalendars:()=>y,getAllEntries:()=>C,getAllProfiles:()=>c,getCalendarById:()=>w,getEntryByDate:()=>k,getProfileById:()=>d,renameCalendar:()=>T,renameProfile:()=>m,saveCalendar:()=>b,saveEntry:()=>A,saveProfiles:()=>l,setActiveCalendar:()=>E,setActiveProfile:()=>h});var r=n(5288),i=n(1713);const s="pontaj_profiles",a="pontaj_active_profile",o="pontaj_active_calendar";function c(){const e=localStorage.getItem(s);return e?JSON.parse(e):[]}function l(e){localStorage.setItem(s,JSON.stringify(e)),window.dispatchEvent(new Event("pontaj_profiles_changed"))}function u(){return localStorage.getItem(a)}function h(e){localStorage.setItem(a,e)}function d(e){return c().find(t=>t.id===e)||null}function f(e){const t=c(),n="profile_".concat(Date.now()),r={id:n,name:e,calendars:[],createdAt:new Date};return t.push(r),l(t),h(n),r}function p(e){let t=c();t=t.filter(t=>t.id!==e),l(t);u()===e&&t.length>0&&h(t[0].id)}function m(e,t){const n=c(),r=n.findIndex(t=>t.id===e);r>=0&&(n[r].name=t,l(n))}const g=()=>{const e=u();if(!e){const e=c();return 0===e.length?f("Profile 1"):(h(e[0].id),e[0])}return d(e)||null},v=e=>{const t=g();if(!t)throw new Error("No active profile");const n="calendar_".concat(Date.now()),r={id:n,name:e,createdAt:new Date,entries:[]};t.calendars.push(r);const i=c(),s=i.findIndex(e=>e.id===t.id);return s>=0&&(i[s]=t),l(i),E(n),r},y=()=>{const e=g();return e?e.calendars:[]},w=e=>{const t=g();return null===t||void 0===t?void 0:t.calendars.find(t=>t.id===e)},b=e=>{const t=g();if(!t)return;const n=t.calendars.findIndex(t=>t.id===e.id);n>=0?t.calendars[n]=e:t.calendars.push(e);const r=c(),i=r.findIndex(e=>e.id===t.id);i>=0&&(r[i]=t),l(r),window.dispatchEvent(new Event("pontaj_profiles_changed"))},_=e=>{const t=g();if(!t)return;t.calendars=t.calendars.filter(t=>t.id!==e);const n=c(),r=n.findIndex(e=>e.id===t.id);r>=0&&(n[r]=t),l(n),S()===e&&(t.calendars.length>0?E(t.calendars[0].id):localStorage.removeItem(o))},T=(e,t)=>{const n=g();if(!n)return;const r=n.calendars.find(t=>t.id===e);if(r){r.name=t;const e=c(),i=e.findIndex(e=>e.id===n.id);i>=0&&(e[i]=n),l(e)}},E=e=>{localStorage.setItem(o,e)},S=()=>localStorage.getItem(o),I=()=>{const e=S(),t=g();return t?e?t.calendars.find(t=>t.id===e)||null:0===t.calendars.length?v("Personal"):(E(t.calendars[0].id),t.calendars[0]):null},A=e=>{const t=I();if(!t)return;let n=e.date;if("object"===typeof e.date&&null!==e.date&&"getFullYear"in e.date){const t=(0,r.utcToZonedTime)(e.date,"Europe/Bucharest");n=(0,r.format)(t,"yyyy-MM-dd",{timeZone:"Europe/Bucharest"})}e.date=n;const i=t.entries.findIndex(e=>e.date===n);i>=0?t.entries[i]=e:t.entries.push(e),b(t),window.dispatchEvent(new Event("pontaj_profiles_changed"))},C=()=>{const e=I();return e?e.entries:[]},k=e=>{const t=C(),n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0"),s="".concat(n,"-").concat(r,"-").concat(i);return t.find(e=>e.date===s)},N=e=>{const t=I();if(!t)return;const n=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0"),s="".concat(n,"-").concat(r,"-").concat(i);t.entries=t.entries.filter(e=>e.date!==s),b(t),window.dispatchEvent(new Event("pontaj_profiles_changed"))};const x=(e,t)=>{const r=C(),s=r.filter(n=>{const r=new Date(n.date),i=r.getFullYear(),s=r.getMonth();return i===e&&s===t});let a=0;if(0===r.length||0===s.length)return{totalFTL:0,totalOL:0,totalWeekend:0,workDays:0,offDays:0,csMonth:0,csTotal:0,osMonth:0,osTotal:0,csBalance:0,osDebt90d:0};let o=0,c=0,l=0,u=0;s.forEach((e,t)=>{const r=new Date(e.date),s=e.shifts.reduce((e,t)=>e+t.duration,0);c+=s;const o=e.shifts.filter(e=>"cs"===e.type).reduce((e,t)=>e+t.duration,0);u+=o;const h=(0,i.isRomanianHoliday)(r)||(0,i.isWeekend)(r);for(const c of e.shifts)if("day"===c.type&&h&&(a+=c.duration),"night"===c.type){const e=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1),t=h,s=(0,i.isRomanianHoliday)(e)||(0,i.isWeekend)(e);if(t&&s)a+=c.duration;else if(t&&!s){const{timeToMinutes:e}=n(1713),t=e(c.startTime);a+=1440-t}else if(!t&&s){const{timeToMinutes:e}=n(1713),t=e(c.endTime);a+=t}}(0,i.isWeekday)(r)&&(l+=1)});const h=new Date(e,t+1,0).getDate();let d=0;for(let n=1;n<=h;n++){const r=new Date(e,t,n);(0,i.isWeekday)(r)&&!(0,i.isRomanianHoliday)(r)&&(d+=1)}o=8*d*60;const f=C();let p=e,m=t;if(f.length>0){const e=f.map(e=>new Date(e.date)).sort((e,t)=>e.getTime()-t.getTime());p=e[0].getFullYear(),m=e[0].getMonth()}new Date(p,m,1);const g=new Date(e,t,1),v=[];let y=0,w=0,b=0,_=[];const T=[];let E=new Date(p,m,1);for(;E<=g;)T.push({year:E.getFullYear(),month:E.getMonth()}),E=new Date(E.getFullYear(),E.getMonth()+1,1);for(let n=0;n<T.length;n++){const{year:e,month:t}=T[n],r=f.filter(n=>{const r=new Date(n.date);return r.getFullYear()===e&&r.getMonth()===t}),s=r.reduce((e,t)=>e+t.shifts.reduce((e,t)=>e+t.duration,0),0),a=new Date(e,t+1,0).getDate();let o=0;for(let n=1;n<=a;n++){const r=new Date(e,t,n);(0,i.isWeekday)(r)&&!(0,i.isRomanianHoliday)(r)&&(o+=1)}const c=8*o*60,l=s-c;b+=l,l>0&&_.push({month:t,year:e,amount:l});const u=r.reduce((e,t)=>e+t.shifts.filter(e=>"cs"===e.type).reduce((e,t)=>e+t.duration,0),0);w+=u;let h=u,d=0;const p=[..._].sort((e,t)=>{const n=new Date(e.year,e.month),r=new Date(t.year,t.month);return n.getTime()-r.getTime()});for(const n of p){if(h<=0)break;if(n.amount>0){const e=Math.min(h,n.amount);n.amount-=e,h-=e,d+=e}}_=_.filter(e=>e.amount>0);let m=t-4,g=e;for(;m<0;)m+=12,g-=1;let E=0,S=v.find(e=>e.year===g&&e.month===m);S&&(E=S.monthOS>0?S.monthOS:0);let I=0,A=_.find(e=>e.year===g&&e.month===m);A&&(I=A.amount);const C=E,k=(0,i.roundToNearestMinute)(y+l-C);y=k,v.push({year:e,month:t,monthOL:s,monthFTL:c,monthOS:l,monthCS:d,monthCSEntered:u,osCumulative:b,csCumulative:w,osDebt90d:I,osTotalAfterDebt:k})}const S=v.find(n=>n.year===e&&n.month===t),I=S?S.monthOS:0,A=S?S.osDebt90d:0,k=S?S.monthCSEntered:0,N=S?S.osCumulative:0,x=S?S.csCumulative:0,D=N-x,R=D;return{totalFTL:(0,i.roundToNearestMinute)(o),totalOL:(0,i.roundToNearestMinute)(c),totalWeekend:(0,i.roundToNearestMinute)(a),workDays:l,offDays:0,csMonth:(0,i.roundToNearestMinute)(k),csTotal:(0,i.roundToNearestMinute)(x),osMonth:(0,i.roundToNearestMinute)(I),osTotal:(0,i.roundToNearestMinute)(D),csBalance:(0,i.roundToNearestMinute)(R),osDebt90d:(0,i.roundToNearestMinute)(A)}};"undefined"!==typeof window&&(window.pontajDebug=(e,t)=>{if("number"===typeof e&&"number"===typeof t){const n=x(e,t);return console.log("Monthly summary for","".concat(t+1,"/").concat(e),n),n}const n=localStorage.getItem(s),r=n?JSON.parse(n):[];console.log("Stored profiles:",r);const i=localStorage.getItem(a),c=localStorage.getItem(o),l=r.find(e=>e.id===i)||r[0];if(!l)return console.warn("No profile data found in localStorage."),r;const u=(l.calendars||[]).find(e=>e.id===c)||(l.calendars||[])[0];if(!u)return console.warn("No calendar data found in active profile."),{profiles:r,activeProfile:l};const h=(u.entries||[]).map(e=>({date:new Date(e.date).toDateString(),minutes:e.shifts.reduce((e,t)=>e+(t.duration||0),0),shifts:e.shifts.map(e=>e.type).join(",")}));return console.table(h),{profiles:r,activeProfile:l,activeCalendar:u,entries:h}})},1098(e,t,n){"use strict";var r=n(2897).default;Object.defineProperty(t,"__esModule",{value:!0});var i=n(5858),s=n(9887),a=n(8679),o=n(2799);class c{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",u="0.14.8",h=new s.Logger("@firebase/app"),d="@firebase/app-compat",f="@firebase/analytics-compat",p="@firebase/analytics",m="@firebase/app-check-compat",g="@firebase/app-check",v="@firebase/auth",y="@firebase/auth-compat",w="@firebase/database",b="@firebase/data-connect",_="@firebase/database-compat",T="@firebase/functions",E="@firebase/functions-compat",S="@firebase/installations",I="@firebase/installations-compat",A="@firebase/messaging",C="@firebase/messaging-compat",k="@firebase/performance",N="@firebase/performance-compat",x="@firebase/remote-config",D="@firebase/remote-config-compat",R="@firebase/storage",P="@firebase/storage-compat",O="@firebase/firestore",M="@firebase/ai",L="@firebase/firestore-compat",F="firebase",V="[DEFAULT]",U={[l]:"fire-core",[d]:"fire-core-compat",[p]:"fire-analytics",[f]:"fire-analytics-compat",[g]:"fire-app-check",[m]:"fire-app-check-compat",[v]:"fire-auth",[y]:"fire-auth-compat",[w]:"fire-rtdb",[b]:"fire-data-connect",[_]:"fire-rtdb-compat",[T]:"fire-fn",[E]:"fire-fn-compat",[S]:"fire-iid",[I]:"fire-iid-compat",[A]:"fire-fcm",[C]:"fire-fcm-compat",[k]:"fire-perf",[N]:"fire-perf-compat",[x]:"fire-rc",[D]:"fire-rc-compat",[R]:"fire-gcs",[P]:"fire-gcs-compat",[O]:"fire-fst",[L]:"fire-fst-compat",[M]:"fire-vertex","fire-js":"fire-js",[F]:"fire-js-all"},j=new Map,B=new Map,z=new Map;function W(e,t){try{e.container.addComponent(t)}catch(n){h.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function H(e){const t=e.name;if(z.has(t))return h.debug("There were multiple attempts to register component ".concat(t,".")),!1;z.set(t,e);for(const n of j.values())W(n,e);for(const n of B.values())W(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function G(e){return void 0!==e.options}function K(e){return!G(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}const Y={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Q=new a.ErrorFactory("app","Firebase",Y);class X{constructor(e,t,n){this._isDeleted=!1,this._options=r({},e),this._config=r({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Q.create("app-deleted",{appName:this._name})}}function J(e,t){const n=a.base64Decode(e.split(".")[1]);if(null===n)return void console.error("FirebaseServerApp ".concat(t," is invalid: second part could not be parsed."));if(void 0===JSON.parse(n).exp)return void console.error("FirebaseServerApp ".concat(t," is invalid: expiration claim could not be parsed"));1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error("FirebaseServerApp ".concat(t," is invalid: the token has expired."))}class $ extends X{constructor(e,t,n,i){const s=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,a={name:n,automaticDataCollectionEnabled:s};if(void 0!==e.apiKey)super(e,a,i);else{super(e.options,a,i)}this._serverConfig=r({automaticDataCollectionEnabled:s},t),this._serverConfig.authIdToken&&J(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&J(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,te(l,u,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ee(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Q.create("server-app-deleted")}}function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s=r({name:V,automaticDataCollectionEnabled:!0},t),o=s.name;if("string"!==typeof o||!o)throw Q.create("bad-app-name",{appName:String(o)});if(n||(n=a.getDefaultAppConfig()),!n)throw Q.create("no-options");const c=j.get(o);if(c){if(a.deepEqual(n,c.options)&&a.deepEqual(s,c.config))return c;throw Q.create("duplicate-app",{appName:o})}const l=new i.ComponentContainer(o);for(const r of z.values())l.addComponent(r);const u=new X(n,s,l);return j.set(o,u),u}async function ee(e){let t=!1;const n=e.name;if(j.has(n))t=!0,j.delete(n);else if(B.has(n)){e.decRefCount()<=0&&(B.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function te(e,t,n){var r;let s=null!==(r=U[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void h.warn(e.join(" "))}H(new i.Component("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const ne="firebase-heartbeat-store";let re=null;function ie(){return re||(re=o.openDB("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ne)}catch(n){console.warn(n)}}}).catch(e=>{throw Q.create("idb-open",{originalErrorMessage:e.message})})),re}async function se(e,t){try{const n=(await ie()).transaction(ne,"readwrite"),r=n.objectStore(ne);await r.put(t,ae(e)),await n.done}catch(n){if(n instanceof a.FirebaseError)h.warn(n.message);else{const e=Q.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});h.warn(e.message)}}}function ae(e){return"".concat(e.name,"!").concat(e.options.appId)}class oe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new le(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ce();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){h.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ce(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ue(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ue(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=a.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return h.warn(t),""}}}function ce(){return(new Date).toISOString().substring(0,10)}class le{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!a.isIndexedDBAvailable()&&a.validateIndexedDBOpenable().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ie()).transaction(ne),n=await t.objectStore(ne).get(ae(e));return await t.done,n}catch(t){if(t instanceof a.FirebaseError)h.warn(t.message);else{const e=Q.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});h.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ue(e){return a.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}var he;he="node",H(new i.Component("platform-logger",e=>new c(e),"PRIVATE")),H(new i.Component("heartbeat",e=>new oe(e),"PRIVATE")),te(l,u,he),te(l,u,"cjs2020"),te("fire-js",""),Object.defineProperty(t,"FirebaseError",{enumerable:!0,get:function(){return a.FirebaseError}}),t.SDK_VERSION="12.9.0",t._DEFAULT_ENTRY_NAME=V,t._addComponent=W,t._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},t._apps=j,t._clearComponents=function(){z.clear()},t._components=z,t._getProvider=q,t._isFirebaseApp=G,t._isFirebaseServerApp=function(e){return null!==e&&void 0!==e&&void 0!==e.settings},t._isFirebaseServerAppSettings=K,t._registerComponent=H,t._removeServiceInstance=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V;q(e,t).clearInstance(n)},t._serverApps=B,t.deleteApp=ee,t.getApp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;const t=j.get(e);if(!t&&e===V&&a.getDefaultAppConfig())return Z();if(!t)throw Q.create("no-app",{appName:e});return t},t.getApps=function(){return Array.from(j.values())},t.initializeApp=Z,t.initializeServerApp=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a.isBrowser()&&!a.isWebWorker())throw Q.create("invalid-server-app-environment");let s=n||{};if(e&&(G(e)?t=e.options:K(e)?s=e:t=e),void 0===s.automaticDataCollectionEnabled&&(s.automaticDataCollectionEnabled=!0),t||(t=a.getDefaultAppConfig()),!t)throw Q.create("no-options");const o=r(r({},s),t);if(void 0!==o.releaseOnDeref&&delete o.releaseOnDeref,void 0!==s.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Q.create("finalization-registry-not-supported",{});const c=""+(l=JSON.stringify(o),[...l].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0));var l;const u=B.get(c);if(u)return u.incRefCount(s.releaseOnDeref),u;const h=new i.ComponentContainer(c);for(const r of z.values())h.addComponent(r);const d=new $(t,s,c,h);return B.set(c,d),d},t.onLog=function(e,t){if(null!==e&&"function"!==typeof e)throw Q.create("invalid-log-argument");s.setUserLogHandler(e,t)},t.registerVersion=te,t.setLogLevel=function(e){s.setLogLevel(e)}},9345(e,t,n){"use strict";var r=n(1847).default,i=n(2897).default;const s=["providerId"],a=["uid","auth","stsTokenManager"],o=["providerId","signInMethod"];var c=n(1098),l=n(8679),u=n(9887),h=n(5858);function d(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}},p=d,m=new l.ErrorFactory("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),g=new u.Logger("@firebase/auth");function v(e){if(g.logLevel<=u.LogLevel.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];g.error("Auth (".concat(c.SDK_VERSION,"): ").concat(e),...n)}}function y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw E(e,...n)}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return E(e,...n)}function b(e,t,n){const r=i(i({},p()),{},{[t]:n});return new l.ErrorFactory("auth","Firebase",r).create(t,{appName:e.name})}function _(e){return b(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function T(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&y(e,"argument-error"),b(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return m.create(e,...n)}function S(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw E(t,...r)}}function I(e){const t="INTERNAL ASSERTION FAILED: "+e;throw v(t),new Error(t)}function A(e,t){e||I(t)}function C(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function k(){return"http:"===N()||"https:"===N()}function N(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class x{constructor(e,t){this.shortDelay=e,this.longDelay=t,A(t>e,"Short delay should be less than long delay!"),this.isMobile=l.isMobileCordova()||l.isReactNative()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(k()||l.isBrowserExtension()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function D(e,t){A(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class R{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void I("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void I("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void I("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const P={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},O=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M=new x(3e4,6e4);function L(e,t){return e.tenantId&&!t.tenantId?i(i({},t),{},{tenantId:e.tenantId}):t}async function F(e,t,n,r){return V(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},a={};r&&("GET"===t?a=r:s={body:JSON.stringify(r)});const o=l.querystring(i({key:e.config.apiKey},a)).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u=i({method:t,headers:c},s);return l.isCloudflareWorker()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&l.isCloudWorkstation(e.emulatorConfig.host)&&(u.credentials="include"),R.fetch()(await j(e,e.config.apiHost,n,o),u)})}async function V(e,t,n){e._canInitEmulator=!1;const r=i(i({},P),t);try{const t=new z(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw W(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw W(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw W(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw W(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw b(e,o,a);y(e,o)}}catch(s){if(s instanceof l.FirebaseError)throw s;y(e,"network-request-failed",{message:String(s)})}}async function U(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await F(e,t,n,r,i);return"mfaPendingCredential"in s&&y(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function j(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?D(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(O.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function B(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class z{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(w(this.auth,"network-request-failed")),M.get())})}}function W(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=w(e,t,r);return i.customData._tokenResponse=n,i}function H(e){return void 0!==e&&void 0!==e.getResponse}function q(e){return void 0!==e&&void 0!==e.enterprise}class G{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return B(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function K(e,t){return F(e,"GET","/v2/recaptchaConfig",L(e,t))}async function Y(e,t){return F(e,"POST","/v1/accounts:lookup",t)}function Q(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}async function X(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=l.getModularInstance(e),r=await n.getIdToken(t),i=$(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Q(J(i.auth_time)),issuedAtTime:Q(J(i.iat)),expirationTime:Q(J(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}function J(e){return 1e3*Number(e)}function $(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return v("JWT malformed, contained fewer than 3 sections"),null;try{const e=l.base64Decode(n);return e?JSON.parse(e):(v("Failed to decode base64 JWT payload"),null)}catch(i){return v("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Z(e){const t=$(e);return S(t,"internal-error"),S("undefined"!==typeof t.exp,"internal-error"),S("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ee(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof l.FirebaseError&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class te{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ne{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Q(this.lastLoginAt),this.creationTime=Q(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function re(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ee(e,Y(n,{idToken:r}));S(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?se(s.providerUserInfo):[],o=(c=e.providerData,l=a,[...c.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ne(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}async function ie(e){const t=l.getModularInstance(e);await re(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function se(e){return e.map(e=>{let{providerId:t}=e,n=r(e,s);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ae{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S("undefined"!==typeof e.idToken,"internal-error"),S("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Z(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){S(0!==e.length,"internal-error");const t=Z(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(S(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await V(e,{},async()=>{const n=l.querystring({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await j(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&l.isCloudWorkstation(e.emulatorConfig.host)&&(o.credentials="include"),R.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new ae;return n&&(S("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(S("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(S("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ae,this.toJSON())}_performRefresh(){return I("not implemented")}}function oe(e,t){S("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ce{constructor(e){let{uid:t,auth:n,stsTokenManager:i}=e,s=r(e,a);this.providerId="firebase",this.proactiveRefresh=new te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ne(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ee(this,this.stsTokenManager.getToken(this.auth,e));return S(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return X(this,e)}reload(){return ie(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>i({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ce(i(i({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await re(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(c._isFirebaseServerApp(this.auth.app))return Promise.reject(_(this.auth));const e=await this.getIdToken();return await ee(this,async function(e,t){return F(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return i(i({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>i({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,o,c,l,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:_,providerData:T,stsTokenManager:E}=t;S(w&&E,e,"internal-error");const I=ae.fromJSON(this.name,E);S("string"===typeof w,e,"internal-error"),oe(h,e.name),oe(d,e.name),S("boolean"===typeof b,e,"internal-error"),S("boolean"===typeof _,e,"internal-error"),oe(f,e.name),oe(p,e.name),oe(m,e.name),oe(g,e.name),oe(v,e.name),oe(y,e.name);const A=new ce({uid:w,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:I,createdAt:v,lastLoginAt:y});return T&&Array.isArray(T)&&(A.providerData=T.map(e=>i({},e))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ae;r.updateFromServerResponse(t);const i=new ce({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await re(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];S(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?se(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new ae;a.updateFromIdToken(n);const o=new ce({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ne(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,c),o}}const le=new Map;function ue(e){A(e instanceof Function,"Expected a class definition");let t=le.get(e);return t?(A(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,le.set(e,t),t)}class he{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}he.type="NONE";const de=he;function fe(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class pe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fe(this.userKey,r.apiKey,i),this.fullPersistenceKey=fe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Y(this.auth,{idToken:e}).catch(()=>{});return t?ce._fromGetAccountInfoResponse(this.auth,t,e):null}return ce._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new pe(ue(de),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||ue(de);const s=fe(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const r=await Y(e,{idToken:t}).catch(()=>{});if(!r)break;n=await ce._fromGetAccountInfoResponse(e,r,t)}else n=ce._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(c){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new pe(i,e,n)):new pe(i,e,n)}}function me(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(we(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ge(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_e(t))return"Blackberry";if(Te(t))return"Webos";if(ve(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(be(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return/firefox\//i.test(e)}function ve(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return/crios\//i.test(e)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return/iemobile/i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return/android/i.test(e)}function _e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return/blackberry/i.test(e)}function Te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return/webos/i.test(e)}function Ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Se(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return Ee(e)||be(e)||Te(e)||_e(e)||/windows phone/i.test(e)||we(e)}function Ie(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=me(l.getUA());break;case"Worker":t="".concat(me(l.getUA()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(c.SDK_VERSION,"/").concat(r)}class Ae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ce{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ke{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xe(this),this.idTokenSubscription=new xe(this),this.beforeStateQueue=new Ae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ue(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await pe.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Y(this,{idToken:e}),n=await ce._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(c._isFirebaseServerApp(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(s=n)||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return S(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await re(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(c._isFirebaseServerApp(this.app))return Promise.reject(_(this));const t=e?l.getModularInstance(e):null;return t&&S(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&S(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return c._isFirebaseServerApp(this.app)?Promise.reject(_(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return c._isFirebaseServerApp(this.app)?Promise.reject(_(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ue(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return F(e,"GET","/v2/passwordPolicy",L(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ce(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new l.ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return F(e,"POST","/v2/accounts:revokeToken",L(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ue(e)||this._popupRedirectResolver;S(t,this,"argument-error"),this.redirectPersistenceManager=await pe.create(this,[ue(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(S(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ie(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(c._isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(g.logLevel<=u.LogLevel.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];g.warn("Auth (".concat(c.SDK_VERSION,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ne(e){return l.getModularInstance(e)}class xe{constructor(e){this.auth=e,this.observer=null,this.addObserver=l.createSubscribe(e=>this.observer=e)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let De={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Re(e){return De.loadJS(e)}function Pe(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const Oe=1e12;class Me{constructor(e){this.auth=e,this.counter=Oe,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Ve(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Oe;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Oe;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Oe;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Le{constructor(){this.enterprise=new Fe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Fe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ve{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;S(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ue="NO_RECAPTCHA";class je{constructor(e){this.type="recaptcha-enterprise",this.auth=Ne(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;q(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ue)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Le).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{K(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new G(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&q(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=De.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Re(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Be(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new je(e);let o;if(s)o=Ue;else try{o=await a.verify(n)}catch(l){o=await a.verify(n,!0)}const c=i({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in c){const e=c.phoneEnrollmentInfo.phoneNumber,t=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const e=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function ze(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Be(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Be(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await Be(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Be(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Be(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function We(e){const t=Ne(e),n=await K(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new G(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new je(t).verify()}}function He(e,t){const n=c._getProvider(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if(l.deepEqual(r,null!==t&&void 0!==t?t:{}))return e;y(e,"already-initialized")}return n.initialize({options:t})}function qe(e,t,n){const r=Ne(e);S(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Ge(t),{host:a,port:o}=function(e){const t=Ge(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ke(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ke(t)}}}(t),c=null===o?"":":".concat(o),u={url:"".concat(s,"//").concat(a).concat(c,"/")},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return S(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void S(l.deepEqual(u,r.config.emulator)&&l.deepEqual(h,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,l.isCloudWorkstation(a)?(l.pingServer("".concat(s,"//").concat(a).concat(c)),l.updateEmulatorBanner("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ge(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ke(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ye{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return I("not implemented")}_getIdTokenResponse(e){return I("not implemented")}_linkToIdToken(e,t){return I("not implemented")}_getReauthenticationResolver(e){return I("not implemented")}}async function Qe(e,t){return F(e,"POST","/v1/accounts:resetPassword",L(e,t))}async function Xe(e,t){return F(e,"POST","/v1/accounts:signUp",t)}async function Je(e,t){return U(e,"POST","/v1/accounts:signInWithPassword",L(e,t))}async function $e(e,t){return F(e,"POST","/v1/accounts:sendOobCode",L(e,t))}async function Ze(e,t){return $e(e,t)}async function et(e,t){return $e(e,t)}class tt extends Ye{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new tt(e,t,"password")}static _fromEmailAndCode(e,t){return new tt(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ze(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Je,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return U(e,"POST","/v1/accounts:signInWithEmailLink",L(e,t))}(e,{email:this._email,oobCode:this._password});default:y(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ze(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return U(e,"POST","/v1/accounts:signInWithEmailLink",L(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:y(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function nt(e,t){return U(e,"POST","/v1/accounts:signInWithIdp",L(e,t))}class rt extends Ye{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=r(t,o);if(!n||!i)return null;const a=new rt(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return nt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nt(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=l.querystring(t)}return e}}async function it(e,t){return F(e,"POST","/v1/accounts:sendVerificationCode",L(e,t))}const st={USER_NOT_FOUND:"user-not-found"};class at extends Ye{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new at({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new at({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await U(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,t));if(n.temporaryProof)throw W(e,"account-exists-with-different-credential",n);return n}(e,i({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return U(e,"POST","/v1/accounts:signInWithPhoneNumber",L(e,i(i({},t),{},{operation:"REAUTH"})),st)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new at({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ot{constructor(e){var t,n,r,i,s,a;const o=l.querystringDecode(l.extractQuerystring(e)),c=null!==(t=o.apiKey)&&void 0!==t?t:null,u=null!==(n=o.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);S(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=l.querystringDecode(l.extractQuerystring(e)).link,n=t?l.querystringDecode(l.extractQuerystring(t)).deep_link_id:null,r=l.querystringDecode(l.extractQuerystring(e)).deep_link_id;return(r?l.querystringDecode(l.extractQuerystring(r)).link:null)||r||n||t||e}(e);try{return new ot(t)}catch(n){return null}}}class ct{constructor(){this.providerId=ct.PROVIDER_ID}static credential(e,t){return tt._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ot.parseLink(t);return S(n,"argument-error"),tt._fromEmailAndCode(e,n.code,n.tenantId)}}ct.PROVIDER_ID="password",ct.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ct.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class lt{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ut extends lt{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ht extends ut{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return S("providerId"in t&&"signInMethod"in t,"argument-error"),rt._fromParams(t)}credential(e){return this._credential(i(i({},e),{},{nonce:e.rawNonce}))}_credential(e){return S(e.idToken||e.accessToken,"argument-error"),rt._fromParams(i(i({},e),{},{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ht.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ht.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new ht(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(c){return null}}}class dt extends ut{constructor(){super("facebook.com")}static credential(e){return rt._fromParams({providerId:dt.PROVIDER_ID,signInMethod:dt.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dt.credentialFromTaggedObject(e)}static credentialFromError(e){return dt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return dt.credential(t.oauthAccessToken)}catch(n){return null}}}dt.FACEBOOK_SIGN_IN_METHOD="facebook.com",dt.PROVIDER_ID="facebook.com";class ft extends ut{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rt._fromParams({providerId:ft.PROVIDER_ID,signInMethod:ft.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ft.credentialFromTaggedObject(e)}static credentialFromError(e){return ft.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ft.credential(n,r)}catch(i){return null}}}ft.GOOGLE_SIGN_IN_METHOD="google.com",ft.PROVIDER_ID="google.com";class pt extends ut{constructor(){super("github.com")}static credential(e){return rt._fromParams({providerId:pt.PROVIDER_ID,signInMethod:pt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pt.credentialFromTaggedObject(e)}static credentialFromError(e){return pt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pt.credential(t.oauthAccessToken)}catch(n){return null}}}pt.GITHUB_SIGN_IN_METHOD="github.com",pt.PROVIDER_ID="github.com";class mt extends Ye{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return nt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,nt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nt(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new mt(n,i):null}static _create(e,t){return new mt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gt extends lt{constructor(e){S(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return gt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return gt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=mt.fromJSON(e);return S(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return mt._create(r,n)}catch(i){return null}}}class vt extends ut{constructor(){super("twitter.com")}static credential(e,t){return rt._fromParams({providerId:vt.PROVIDER_ID,signInMethod:vt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vt.credentialFromTaggedObject(e)}static credentialFromError(e){return vt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return vt.credential(n,r)}catch(i){return null}}}async function yt(e,t){return U(e,"POST","/v1/accounts:signUp",L(e,t))}vt.TWITTER_SIGN_IN_METHOD="twitter.com",vt.PROVIDER_ID="twitter.com";class wt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ce._fromIdTokenResponse(e,n,r),s=bt(n);return new wt({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=bt(n);return new wt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function bt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class _t extends l.FirebaseError{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,_t.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new _t(e,t,n,r)}}function Tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw _t._fromErrorAndOperation(e,n,t,r);throw n})}function Et(e){return new Set(e.map(e=>{let{providerId:t}=e;return t}).filter(e=>!!e))}async function St(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ee(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return wt._forOperation(e,"link",r)}async function It(e,t,n){await re(t);const r=!1===e?"provider-already-linked":"no-such-provider";S(Et(t.providerData).has(n)===e,t.auth,r)}async function At(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(c._isFirebaseServerApp(r.app))return Promise.reject(_(r));const i="reauthenticate";try{const s=await ee(e,Tt(r,i,t,e),n);S(s.idToken,r,"internal-error");const a=$(s.idToken);S(a,r,"internal-error");const{sub:o}=a;return S(e.uid===o,r,"user-mismatch"),wt._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&y(r,"user-mismatch"),s}}async function Ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(c._isFirebaseServerApp(e.app))return Promise.reject(_(e));const r="signIn",i=await Tt(e,r,t),s=await wt._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function kt(e,t){return Ct(Ne(e),t)}async function Nt(e,t){const n=l.getModularInstance(e);return await It(!1,n,t.providerId),St(n,t)}async function xt(e,t){return At(l.getModularInstance(e),t)}class Dt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Rt._fromServerResponse(e,t):"totpInfo"in t?Pt._fromServerResponse(e,t):y(e,"internal-error")}}class Rt extends Dt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Rt(t)}}class Pt extends Dt{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Pt(t)}}function Ot(e,t,n){var r;S((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),S("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),S("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(S(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(S(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Mt(e){const t=Ne(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Lt(e,t){const n=l.getModularInstance(e),r=await Qe(n,{oobCode:t}),i=r.requestType;switch(S(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":S(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":S(r.mfaInfo,n,"internal-error");default:S(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Dt._fromServerResponse(Ne(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Ft(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await ee(e,async function(e,t){return F(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Vt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ut extends Vt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class jt extends Vt{constructor(e,t){super(e,"facebook.com",t)}}class Bt extends Ut{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class zt extends Vt{constructor(e,t){super(e,"google.com",t)}}class Wt extends Ut{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ht(e,t,n,r){return l.getModularInstance(e).onIdTokenChanged(t,n,r)}function qt(e,t,n){return l.getModularInstance(e).beforeAuthStateChanged(t,n)}class Gt{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Gt("enroll",e,t)}static _fromMfaPendingCredential(e){return new Gt("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){if(null!==e&&void 0!==e&&e.multiFactorSession){var t,n;if(null!==(t=e.multiFactorSession)&&void 0!==t&&t.pendingCredential)return Gt._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null!==(n=e.multiFactorSession)&&void 0!==n&&n.idToken)return Gt._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Kt{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ne(e),r=t.customData._serverResponse,s=(r.mfaInfo||[]).map(e=>Dt._fromServerResponse(n,e));S(r.mfaPendingCredential,n,"internal-error");const a=Gt._fromMfaPendingCredential(r.mfaPendingCredential);return new Kt(a,s,async e=>{const s=await e._process(n,a);delete r.mfaInfo,delete r.mfaPendingCredential;const o=i(i({},r),{},{idToken:s.idToken,refreshToken:s.refreshToken});switch(t.operationType){case"signIn":const e=await wt._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return S(t.user,n,"internal-error"),wt._forOperation(t.user,t.operationType,o);default:y(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Yt(e,t){return F(e,"POST","/v2/accounts/mfaEnrollment:start",L(e,t))}class Qt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Dt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Qt(e)}async getSession(){return Gt._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await ee(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await ee(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},F(r,"POST","/v2/accounts/mfaEnrollment:withdraw",L(r,i))));this.enrolledFactors=this.enrolledFactors.filter(e=>{let{uid:n}=e;return n!==t}),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(s){throw s}var r,i}}const Xt=new WeakMap;const Jt="__sak";class $t{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jt,"1"),this.storage.removeItem(Jt),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Zt extends $t{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Se(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);l.isIE()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zt.type="LOCAL";const en=Zt;function tn(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function nn(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class rn{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=nn(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return tn(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=nn(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=nn(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=tn(n);const i=setInterval(()=>{const e=tn(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}rn.type="COOKIE";const sn=rn;class an extends $t{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}an.type="SESSION";const on=an;class cn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new cn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}cn.receivers=[];class un{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const c=ln("",20);r.port1.start();const l=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(l),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function hn(){return window}function dn(){return"undefined"!==typeof hn().WorkerGlobalScope&&"function"===typeof hn().importScripts}const fn="firebaseLocalStorageDb",pn="firebaseLocalStorage",mn="fbase_key";class gn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vn(e,t){return e.transaction([pn],t?"readwrite":"readonly").objectStore(pn)}function yn(){const e=indexedDB.open(fn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(pn,{keyPath:mn})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(pn)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(fn);return new gn(e).toPromise()}(),t(await yn()))})})}async function wn(e,t,n){const r=vn(e,!0).put({[mn]:t,value:n});return new gn(r).toPromise()}function bn(e,t){const n=vn(e,!0).delete(t);return new gn(n).toPromise()}class _n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await yn()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cn._getInstance(dn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new un(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yn();return await wn(e,Jt,"1"),await bn(e,Jt),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wn(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=vn(e,!1).get(t),r=await new gn(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bn(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=vn(e,!1).getAll();return new gn(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}_n.type="LOCAL";const Tn=_n;function En(e,t){return F(e,"POST","/v2/accounts/mfaSignIn:start",L(e,t))}const Sn=Pe("rcb"),In=new x(3e4,6e4);class An{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=hn().grecaptcha)||void 0===e||!e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return S(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&H(hn().grecaptcha)?Promise.resolve(hn().grecaptcha):new Promise((n,r)=>{const i=hn().setTimeout(()=>{r(w(e,"network-request-failed"))},In.get());hn()[Sn]=()=>{hn().clearTimeout(i),delete hn()[Sn];const s=hn().grecaptcha;if(!s||!H(s))return void r(w(e,"internal-error"));const a=s.render;s.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Re("".concat(De.recaptchaV2Script,"?").concat(l.querystring({onload:Sn,render:"explicit",hl:t}))).catch(()=>{clearTimeout(i),r(w(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=hn().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Cn{async load(e){return new Me(e)}clearedOneInstance(){}}const kn="recaptcha",Nn={theme:"light",type:"image"};class xn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=at._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Dn(e,t,n){if(!e._getRecaptchaConfig())try{await We(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){S("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=ze(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ue){S((null===n||void 0===n?void 0:n.type)===kn,e,"argument-error");return Yt(e,await Rn(e,t,n))}return Yt(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;S("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;S(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=ze(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ue){S((null===n||void 0===n?void 0:n.type)===kn,e,"argument-error");return En(e,await Rn(e,t,n))}return En(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=ze(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ue){S((null===n||void 0===n?void 0:n.type)===kn,e,"argument-error");return it(e,await Rn(e,t,n))}return it(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Rn(e,t,n){S(n.type===kn,e,"argument-error");const r=await n.verify();S("string"===typeof r,e,"argument-error");const s=i({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Pn{constructor(e){this.providerId=Pn.PROVIDER_ID,this.auth=Ne(e)}verifyPhoneNumber(e,t){return Dn(this.auth,e,l.getModularInstance(t))}static credential(e,t){return at._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Pn.credentialFromTaggedObject(t)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?at._fromTokenResponse(n,r):null}}function On(e,t){return t?ue(t):(S(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Pn.PROVIDER_ID="phone",Pn.PHONE_SIGN_IN_METHOD="phone";class Mn extends Ye{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ln(e){return Ct(e.auth,new Mn(e),e.bypassAuthState)}function Fn(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),At(n,new Mn(e),e.bypassAuthState)}async function Vn(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),St(n,new Mn(e),e.bypassAuthState)}class Un{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ln;case"linkViaPopup":case"linkViaRedirect":return Vn;case"reauthViaPopup":case"reauthViaRedirect":return Fn;default:y(this.auth,"internal-error")}}resolve(e){A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){A(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jn=new x(2e3,1e4);class Bn extends Un{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Bn.currentPopupAction&&Bn.currentPopupAction.cancel(),Bn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return S(e,this.auth,"internal-error"),e}async onExecution(){A(1===this.filter.length,"Popup operations only handle one event");const e=ln();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(w(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(w(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(w(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,jn.get())};e()}}Bn.currentPopupAction=null;const zn=new Map;class Wn extends Un{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=zn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Kn(t),r=Gn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}zn.set(this.auth._key(),e)}return this.bypassAuthState||zn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Hn(e,t){return Gn(e)._set(Kn(t),"true")}function qn(e,t){zn.set(e._key(),t)}function Gn(e){return ue(e._redirectPersistence)}function Kn(e){return fe("pendingRedirect",e.config.apiKey,e.name)}async function Yn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(c._isFirebaseServerApp(e.app))return Promise.reject(_(e));const r=Ne(e),i=On(r,t),s=new Wn(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}async function Qn(e){const t=ln("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Xn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $n(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$n(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(w(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jn(e))}saveEventToCache(e){this.cachedEventUids.add(Jn(e)),this.lastProcessedEventTime=Date.now()}}function Jn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function $n(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Zn(e){return F(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const er=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tr=/^https?/;function nr(e){const t=C(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!tr.test(n))return!1;if(er.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const rr=new x(3e4,6e4);function ir(){const e=hn().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function sr(e){return new Promise((t,n)=>{var r,i;function s(){ir(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ir(),n(w(e,"network-request-failed"))},timeout:rr.get()})}if(null!==(r=hn().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=hn().gapi)||void 0===i||!i.load){const t=Pe("iframefcb");return hn()[t]=()=>{gapi.load?s():n(w(e,"network-request-failed"))},Re("".concat(De.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw ar=null,e})}let ar=null;const or=new x(5e3,15e3),cr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ur(e){const t=e.config;S(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?D(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:c.SDK_VERSION},i=lr.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(l.querystring(r).slice(1))}async function hr(e){const t=await function(e){return ar=ar||sr(e),ar}(e),n=hn().gapi;return S(n,e,"internal-error"),t.open({where:document.body,url:ur(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=w(e,"network-request-failed"),s=hn().setTimeout(()=>{r(i)},or.get());function a(){hn().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const dr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function pr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=i(i({},dr),{},{width:r.toString(),height:s.toString(),top:a,left:o}),h=l.getUA().toLowerCase();n&&(c=ye(h)?"_blank":n),ge(h)&&(t=t||"http://localhost",u.scrollbars="yes");const d=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Ee(arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(h)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new fr(null);const f=window.open(t||"",c,d);S(f,e,"popup-blocked");try{f.focus()}catch(p){}return new fr(f)}const mr="__/auth/handler",gr="emulator/auth/handler",vr=encodeURIComponent("fac");async function yr(e,t,n,r,i,s){S(e.config.authDomain,e,"auth-domain-config-required"),S(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:c.SDK_VERSION,eventId:i};if(t instanceof lt){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",l.isEmpty(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof ut){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const c of Object.keys(o))void 0===o[c]&&delete o[c];const u=await e._getAppCheckToken(),h=u?"#".concat(vr,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(mr);return D(t,gr)}(e),"?").concat(l.querystring(o).slice(1)).concat(h)}const wr="webStorageSupport";const br=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=on,this._completeRedirectFn=Yn,this._overrideRedirectResult=qn}async _openPopup(e,t,n,r){var i;A(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return pr(e,await yr(e,t,n,C(),r),ln())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){hn().location.href=e}(await yr(e,t,n,C(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(A(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await hr(e),n=new Xn(e);return t.register("authEvent",t=>{S(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wr,{type:wr},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[wr];void 0!==i&&t(!!i),y(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Zn(e);for(const r of t)try{if(nr(r))return}catch(n){}y(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Se()||ve()||Ee()}};class _r{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return I("unexpected MultiFactorSessionType")}}}class Tr extends _r{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Tr(e)}_finalizeEnroll(e,t,n){return function(e,t){return F(e,"POST","/v2/accounts/mfaEnrollment:finalize",L(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return F(e,"POST","/v2/accounts/mfaSignIn:finalize",L(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Er{constructor(){}static assertion(e){return Tr._fromCredential(e)}}Er.FACTOR_ID="phone";class Sr{static assertionForEnrollment(e,t){return Ir._fromSecret(e,t)}static assertionForSignIn(e,t){return Ir._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const n=e;S("undefined"!==typeof(null===(t=n.user)||void 0===t?void 0:t.auth),"internal-error");const r=await(i=n.user.auth,s={idToken:n.credential,totpEnrollmentInfo:{}},F(i,"POST","/v2/accounts/mfaEnrollment:start",L(i,s)));var i,s;return Ar._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}Sr.FACTOR_ID="totp";class Ir extends _r{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new Ir(t,void 0,e)}static _fromEnrollmentId(e,t){return new Ir(t,e)}async _finalizeEnroll(e,t,n){return S("undefined"!==typeof this.secret,e,"argument-error"),function(e,t){return F(e,"POST","/v2/accounts/mfaEnrollment:finalize",L(e,t))}(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){S(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return function(e,t){return F(e,"POST","/v2/accounts/mfaSignIn:finalize",L(e,t))}(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Ar{constructor(e,t,n,r,i,s,a){this.sessionInfo=s,this.auth=a,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(e,t){return new Ar(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;if((Cr(e)||Cr(t))&&(n=!0),n){var r;if(Cr(e))e=(null===(r=this.auth.currentUser)||void 0===r?void 0:r.email)||"unknownuser";Cr(t)&&(t=this.auth.name)}return"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}function Cr(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var kr="@firebase/auth",Nr="1.12.0";class xr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Dr=l.getExperimentalSetting("authIdTokenMaxAge")||300;let Rr=null;var Pr;De={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=w("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Pr="Browser",c._registerComponent(new h.Component("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;S(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:Pr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ie(Pr)},l=new ke(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ue);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),c._registerComponent(new h.Component("auth-internal",e=>(e=>new xr(e))(Ne(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),c.registerVersion(kr,Nr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Pr)),c.registerVersion(kr,Nr,"cjs2020"),t.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_PASSWORD:"auth/missing-password",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type",INVALID_HOSTING_LINK_DOMAIN:"auth/invalid-hosting-link-domain"},t.ActionCodeOperation={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},t.ActionCodeURL=ot,t.AuthCredential=Ye,t.AuthEventManager=Xn,t.AuthImpl=ke,t.AuthPopup=fr,t.EmailAuthCredential=tt,t.EmailAuthProvider=ct,t.FacebookAuthProvider=dt,t.FactorId={PHONE:"phone",TOTP:"totp"},t.FetchProvider=R,t.GithubAuthProvider=pt,t.GoogleAuthProvider=ft,t.OAuthCredential=rt,t.OAuthProvider=ht,t.OperationType={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},t.PhoneAuthCredential=at,t.PhoneAuthProvider=Pn,t.PhoneMultiFactorGenerator=Er,t.ProviderId={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},t.RecaptchaVerifier=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i({},Nn);this.parameters=n,this.type=kn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ne(e),this.isInvisible="invisible"===this.parameters.size,S("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;S(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Cn:new An,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){S(!this.parameters.sitekey,this.auth,"argument-error"),S(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),S("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=hn()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){S(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){S(k()&&!dn(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await F(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);S(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return S(this.recaptcha,this.auth,"internal-error"),this.recaptcha}},t.SAMLAuthCredential=mt,t.SAMLAuthProvider=gt,t.SignInMethod={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},t.TotpMultiFactorGenerator=Sr,t.TotpSecret=Ar,t.TwitterAuthProvider=vt,t.UserImpl=ce,t._assert=S,t._castAuth=Ne,t._clearRedirectOutcomes=function(){zn.clear()},t._createError=w,t._fail=y,t._generateEventId=ln,t._getClientVersion=Ie,t._getInstance=ue,t._getProjectConfig=Zn,t._getRedirectResult=Yn,t._getRedirectUrl=yr,t._isAndroid=be,t._isIOS=Ee,t._isIOS7Or8=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.getUA();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)},t._overrideRedirectResult=qn,t._persistenceKeyName=fe,t.applyActionCode=async function(e,t){await async function(e,t){return F(e,"POST","/v1/accounts:update",L(e,t))}(l.getModularInstance(e),{oobCode:t})},t.beforeAuthStateChanged=qt,t.browserCookiePersistence=sn,t.browserLocalPersistence=en,t.browserPopupRedirectResolver=br,t.browserSessionPersistence=on,t.checkActionCode=Lt,t.confirmPasswordReset=async function(e,t,n){await Qe(l.getModularInstance(e),{oobCode:t,newPassword:n}).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Mt(e),t})},t.connectAuthEmulator=qe,t.createUserWithEmailAndPassword=async function(e,t,n){if(c._isFirebaseServerApp(e.app))return Promise.reject(_(e));const r=Ne(e),i=ze(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yt,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Mt(e),t}),a=await wt._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a},t.debugAssert=A,t.debugErrorMap=f,t.deleteUser=async function(e){return l.getModularInstance(e).delete()},t.fetchSignInMethodsForEmail=async function(e,t){const n={identifier:t,continueUri:k()?C():"http://localhost"},{signinMethods:r}=await async function(e,t){return F(e,"POST","/v1/accounts:createAuthUri",L(e,t))}(l.getModularInstance(e),n);return r||[]},t.getAdditionalUserInfo=function(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){if(!e)return null;const{providerId:t}=e,n=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},r=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!t&&null!==e&&void 0!==e&&e.idToken){var i;const t=null===(i=$(e.idToken))||void 0===i||null===(i=i.firebase)||void 0===i?void 0:i.sign_in_provider;if(t)return new Vt(r,"anonymous"!==t&&"custom"!==t?t:null)}if(!t)return null;switch(t){case"facebook.com":return new jt(r,n);case"github.com":return new Bt(r,n);case"google.com":return new zt(r,n);case"twitter.com":return new Wt(r,n,e.screenName||null);case"custom":case"anonymous":return new Vt(r,null);default:return new Vt(r,t,n)}}(n)},t.getAuth=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.getApp();const t=c._getProvider(e,"auth");if(t.isInitialized())return t.getImmediate();const n=He(e,{popupRedirectResolver:br,persistence:[Tn,en,on]}),r=l.getExperimentalSetting("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Dr)return;const r=null===t||void 0===t?void 0:t.token;Rr!==r&&(Rr=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});qt(n,t,()=>t(n.currentUser)),Ht(n,e=>t(e))}}var i;const s=l.getDefaultEmulatorHost("auth");return s&&qe(n,"http://".concat(s)),n},t.getIdToken=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.getModularInstance(e).getIdToken(t)},t.getIdTokenResult=X,t.getMultiFactorResolver=function(e,t){var n;const r=l.getModularInstance(e),i=t;return S(t.customData.operationType,r,"argument-error"),S(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Kt._fromError(r,i)},t.getRedirectResult=async function(e,t){return await Ne(e)._initializationPromise,Yn(e,t,!1)},t.inMemoryPersistence=de,t.indexedDBLocalPersistence=Tn,t.initializeAuth=He,t.initializeRecaptchaConfig=function(e){return We(e)},t.isSignInWithEmailLink=function(e,t){const n=ot.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)},t.linkWithCredential=Nt,t.linkWithPhoneNumber=async function(e,t,n){const r=l.getModularInstance(e);await It(!1,r,"phone");const i=await Dn(r.auth,t,l.getModularInstance(n));return new xn(i,e=>Nt(r,e))},t.linkWithPopup=async function(e,t,n){const r=l.getModularInstance(e);T(r.auth,t,lt);const i=On(r.auth,n);return new Bn(r.auth,"linkViaPopup",t,i,r).executeNotNull()},t.linkWithRedirect=function(e,t,n){return async function(e,t,n){const r=l.getModularInstance(e);T(r.auth,t,lt),await r.auth._initializationPromise;const i=On(r.auth,n);await It(!1,r,t.providerId),await Hn(i,r.auth);const s=await Qn(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)},t.multiFactor=function(e){const t=l.getModularInstance(e);return Xt.has(t)||Xt.set(t,Qt._fromUser(t)),Xt.get(t)},t.onAuthStateChanged=function(e,t,n,r){return l.getModularInstance(e).onAuthStateChanged(t,n,r)},t.onIdTokenChanged=Ht,t.parseActionCodeURL=function(e){return ot.parseLink(e)},t.prodErrorMap=p,t.reauthenticateWithCredential=xt,t.reauthenticateWithPhoneNumber=async function(e,t,n){const r=l.getModularInstance(e);if(c._isFirebaseServerApp(r.auth.app))return Promise.reject(_(r.auth));const i=await Dn(r.auth,t,l.getModularInstance(n));return new xn(i,e=>xt(r,e))},t.reauthenticateWithPopup=async function(e,t,n){const r=l.getModularInstance(e);if(c._isFirebaseServerApp(r.auth.app))return Promise.reject(w(r.auth,"operation-not-supported-in-this-environment"));T(r.auth,t,lt);const i=On(r.auth,n);return new Bn(r.auth,"reauthViaPopup",t,i,r).executeNotNull()},t.reauthenticateWithRedirect=function(e,t,n){return async function(e,t,n){const r=l.getModularInstance(e);if(T(r.auth,t,lt),c._isFirebaseServerApp(r.auth.app))return Promise.reject(_(r.auth));await r.auth._initializationPromise;const i=On(r.auth,n);await Hn(i,r.auth);const s=await Qn(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)},t.reload=ie,t.revokeAccessToken=function(e,t){return Ne(e).revokeAccessToken(t)},t.sendEmailVerification=async function(e,t){const n=l.getModularInstance(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Ot(n.auth,r,t);const{email:i}=await async function(e,t){return $e(e,t)}(n.auth,r);i!==e.email&&await e.reload()},t.sendPasswordResetEmail=async function(e,t,n){const r=Ne(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ot(r,i,n),await ze(r,i,"getOobCode",Ze,"EMAIL_PASSWORD_PROVIDER")},t.sendSignInLinkToEmail=async function(e,t,n){const r=Ne(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){S(t.handleCodeInApp,r,"argument-error"),t&&Ot(r,e,t)}(i,n),await ze(r,i,"getOobCode",et,"EMAIL_PASSWORD_PROVIDER")},t.setPersistence=function(e,t){return l.getModularInstance(e).setPersistence(t)},t.signInAnonymously=async function(e){var t;if(c._isFirebaseServerApp(e.app))return Promise.reject(_(e));const n=Ne(e);if(await n._initializationPromise,null!==(t=n.currentUser)&&void 0!==t&&t.isAnonymous)return new wt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await yt(n,{returnSecureToken:!0}),i=await wt._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i},t.signInWithCredential=kt,t.signInWithCustomToken=async function(e,t){if(c._isFirebaseServerApp(e.app))return Promise.reject(_(e));const n=Ne(e),r=await async function(e,t){return U(e,"POST","/v1/accounts:signInWithCustomToken",L(e,t))}(n,{token:t,returnSecureToken:!0}),i=await wt._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i},t.signInWithEmailAndPassword=function(e,t,n){return c._isFirebaseServerApp(e.app)?Promise.reject(_(e)):kt(l.getModularInstance(e),ct.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Mt(e),t})},t.signInWithEmailLink=async function(e,t,n){if(c._isFirebaseServerApp(e.app))return Promise.reject(_(e));const r=l.getModularInstance(e),i=ct.credentialWithLink(t,n||C());return S(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),kt(r,i)},t.signInWithPhoneNumber=async function(e,t,n){if(c._isFirebaseServerApp(e.app))return Promise.reject(_(e));const r=Ne(e),i=await Dn(r,t,l.getModularInstance(n));return new xn(i,e=>kt(r,e))},t.signInWithPopup=async function(e,t,n){if(c._isFirebaseServerApp(e.app))return Promise.reject(w(e,"operation-not-supported-in-this-environment"));const r=Ne(e);T(e,t,lt);const i=On(r,n);return new Bn(r,"signInViaPopup",t,i).executeNotNull()},t.signInWithRedirect=function(e,t,n){return async function(e,t,n){if(c._isFirebaseServerApp(e.app))return Promise.reject(_(e));const r=Ne(e);T(e,t,lt),await r._initializationPromise;const i=On(r,n);return await Hn(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)},t.signOut=function(e){return l.getModularInstance(e).signOut()},t.unlink=async function(e,t){const n=l.getModularInstance(e);await It(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return F(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Et(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n},t.updateCurrentUser=function(e,t){return l.getModularInstance(e).updateCurrentUser(t)},t.updateEmail=function(e,t){const n=l.getModularInstance(e);return c._isFirebaseServerApp(n.auth.app)?Promise.reject(_(n.auth)):Ft(n,t,null)},t.updatePassword=function(e,t){return Ft(l.getModularInstance(e),null,t)},t.updatePhoneNumber=async function(e,t){const n=l.getModularInstance(e);if(c._isFirebaseServerApp(n.auth.app))return Promise.reject(_(n.auth));await St(n,t)},t.updateProfile=async function(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=l.getModularInstance(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await ee(i,async function(e,t){return F(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)},t.useDeviceLanguage=function(e){l.getModularInstance(e).useDeviceLanguage()},t.validatePassword=async function(e,t){return Ne(e).validatePassword(t)},t.verifyBeforeUpdateEmail=async function(e,t,n){const r=l.getModularInstance(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Ot(r.auth,i,n);const{email:s}=await async function(e,t){return $e(e,t)}(r.auth,i);s!==e.email&&await e.reload()},t.verifyPasswordResetCode=async function(e,t){const{data:n}=await Lt(l.getModularInstance(e),t);return n.email}},2509(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9345);n(1098),n(8679),n(9887),n(5858),t.ActionCodeOperation=r.ActionCodeOperation,t.ActionCodeURL=r.ActionCodeURL,t.AuthCredential=r.AuthCredential,t.AuthErrorCodes=r.AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY,t.EmailAuthCredential=r.EmailAuthCredential,t.EmailAuthProvider=r.EmailAuthProvider,t.FacebookAuthProvider=r.FacebookAuthProvider,t.FactorId=r.FactorId,t.GithubAuthProvider=r.GithubAuthProvider,t.GoogleAuthProvider=r.GoogleAuthProvider,t.OAuthCredential=r.OAuthCredential,t.OAuthProvider=r.OAuthProvider,t.OperationType=r.OperationType,t.PhoneAuthCredential=r.PhoneAuthCredential,t.PhoneAuthProvider=r.PhoneAuthProvider,t.PhoneMultiFactorGenerator=r.PhoneMultiFactorGenerator,t.ProviderId=r.ProviderId,t.RecaptchaVerifier=r.RecaptchaVerifier,t.SAMLAuthProvider=r.SAMLAuthProvider,t.SignInMethod=r.SignInMethod,t.TotpMultiFactorGenerator=r.TotpMultiFactorGenerator,t.TotpSecret=r.TotpSecret,t.TwitterAuthProvider=r.TwitterAuthProvider,t.applyActionCode=r.applyActionCode,t.beforeAuthStateChanged=r.beforeAuthStateChanged,t.browserCookiePersistence=r.browserCookiePersistence,t.browserLocalPersistence=r.browserLocalPersistence,t.browserPopupRedirectResolver=r.browserPopupRedirectResolver,t.browserSessionPersistence=r.browserSessionPersistence,t.checkActionCode=r.checkActionCode,t.confirmPasswordReset=r.confirmPasswordReset,t.connectAuthEmulator=r.connectAuthEmulator,t.createUserWithEmailAndPassword=r.createUserWithEmailAndPassword,t.debugErrorMap=r.debugErrorMap,t.deleteUser=r.deleteUser,t.fetchSignInMethodsForEmail=r.fetchSignInMethodsForEmail,t.getAdditionalUserInfo=r.getAdditionalUserInfo,t.getAuth=r.getAuth,t.getIdToken=r.getIdToken,t.getIdTokenResult=r.getIdTokenResult,t.getMultiFactorResolver=r.getMultiFactorResolver,t.getRedirectResult=r.getRedirectResult,t.inMemoryPersistence=r.inMemoryPersistence,t.indexedDBLocalPersistence=r.indexedDBLocalPersistence,t.initializeAuth=r.initializeAuth,t.initializeRecaptchaConfig=r.initializeRecaptchaConfig,t.isSignInWithEmailLink=r.isSignInWithEmailLink,t.linkWithCredential=r.linkWithCredential,t.linkWithPhoneNumber=r.linkWithPhoneNumber,t.linkWithPopup=r.linkWithPopup,t.linkWithRedirect=r.linkWithRedirect,t.multiFactor=r.multiFactor,t.onAuthStateChanged=r.onAuthStateChanged,t.onIdTokenChanged=r.onIdTokenChanged,t.parseActionCodeURL=r.parseActionCodeURL,t.prodErrorMap=r.prodErrorMap,t.reauthenticateWithCredential=r.reauthenticateWithCredential,t.reauthenticateWithPhoneNumber=r.reauthenticateWithPhoneNumber,t.reauthenticateWithPopup=r.reauthenticateWithPopup,t.reauthenticateWithRedirect=r.reauthenticateWithRedirect,t.reload=r.reload,t.revokeAccessToken=r.revokeAccessToken,t.sendEmailVerification=r.sendEmailVerification,t.sendPasswordResetEmail=r.sendPasswordResetEmail,t.sendSignInLinkToEmail=r.sendSignInLinkToEmail,t.setPersistence=r.setPersistence,t.signInAnonymously=r.signInAnonymously,t.signInWithCredential=r.signInWithCredential,t.signInWithCustomToken=r.signInWithCustomToken,t.signInWithEmailAndPassword=r.signInWithEmailAndPassword,t.signInWithEmailLink=r.signInWithEmailLink,t.signInWithPhoneNumber=r.signInWithPhoneNumber,t.signInWithPopup=r.signInWithPopup,t.signInWithRedirect=r.signInWithRedirect,t.signOut=r.signOut,t.unlink=r.unlink,t.updateCurrentUser=r.updateCurrentUser,t.updateEmail=r.updateEmail,t.updatePassword=r.updatePassword,t.updatePhoneNumber=r.updatePhoneNumber,t.updateProfile=r.updateProfile,t.useDeviceLanguage=r.useDeviceLanguage,t.validatePassword=r.validatePassword,t.verifyBeforeUpdateEmail=r.verifyBeforeUpdateEmail,t.verifyPasswordResetCode=r.verifyPasswordResetCode},5858(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8679);const i="[DEFAULT]";class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}t.Component=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},t.ComponentContainer=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},t.Provider=s},3708(e,t,n){"use strict";var r=n(2897).default,i=n(1098),s=n(8679),a=n(9193),o=n(9887),c=n(7761);class l{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}l.UNAUTHENTICATED=new l(null),l.GOOGLE_CREDENTIALS=new l("google-credentials-uid"),l.FIRST_PARTY=new l("first-party-uid"),l.MOCK_USER=new l("mock-user");let u="12.9.0";const h=new o.Logger("@firebase/firestore");function d(){return h.logLevel}function f(e){if(h.logLevel<=o.LogLevel.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(g);h.debug("Firestore (".concat(u,"): ").concat(e),...i)}}function p(e){if(h.logLevel<=o.LogLevel.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(g);h.error("Firestore (".concat(u,"): ").concat(e),...i)}}function m(e){if(h.logLevel<=o.LogLevel.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(g);h.warn("Firestore (".concat(u,"): ").concat(e),...i)}}function g(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function v(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,y(e,r,n)}function y(e,t,n){let r="FIRESTORE (".concat(u,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw p(r),new Error(r)}function w(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||y(t,i,r)}function b(e,t){return e}const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends s.FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class E{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(l.UNAUTHENTICATED))}shutdown(){}}class A{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class C{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=l.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class k{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new C(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(l.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class N{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}function x(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class D{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=x(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function R(e,t){return e<t?-1:e>t?1:0}function P(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return O(n)===O(i)?R(n,i):O(n)?1:-1}return R(e.length,t.length)}function O(e){const t=e.charCodeAt(0);return t>=55296&&t<=57343}function M(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function L(e){return e+"\0"}const F="__name__";class V{constructor(e,t,n){void 0===t?t=0:t>e.length&&v(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&v(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===V.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof V?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=V.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return R(e.length,t.length)}static compareSegments(e,t){const n=V.isNumericId(e),r=V.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?V.extractNumericId(e).compare(V.extractNumericId(t)):P(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return a.Integer.fromString(e.substring(4,e.length-2))}}class U extends V{construct(e,t,n){return new U(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new T(_.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new U(e)}static emptyPath(){return new U([])}}const j=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class B extends V{construct(e,t,n){return new B(e,t,n)}static isValidIdentifier(e){return j.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),B.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===F}static keyField(){return new B([F])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new T(_.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new T(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new T(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new T(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new B(t)}static emptyPath(){return new B([])}}class z{constructor(e){this.path=e}static fromPath(e){return new z(U.fromString(e))}static fromName(e){return new z(U.fromString(e).popFirst(5))}static empty(){return new z(U.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===U.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return U.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new z(new U(e.slice()))}}function W(e,t,n){if(!n)throw new T(_.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function H(e,t,n,r){if(!0===t&&!0===r)throw new T(_.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function q(e){if(!z.isDocumentKey(e))throw new T(_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function G(e){if(z.isDocumentKey(e))throw new T(_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function K(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Y(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":v(12329,{type:typeof e})}function Q(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new T(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Y(e);throw new T(_.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function X(e,t){const n={typeString:e};return t&&(n.value=t),n}function J(e,t){if(!K(e))throw new T(_.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new T(_.INVALID_ARGUMENT,n);return!0}const $=-62135596800,Z=1e6;class ee{static now(){return ee.fromMillis(Date.now())}static fromDate(e){return ee.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Z);return new ee(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z}_compareTo(e){return this.seconds===e.seconds?R(this.nanoseconds,e.nanoseconds):R(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(J(e,ee._jsonSchema))return new ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ee._jsonSchemaVersion="firestore/timestamp/1.0",ee._jsonSchema={type:X("string",ee._jsonSchemaVersion),seconds:X("number"),nanoseconds:X("number")};class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new ee(0,0))}static max(){return new te(new ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ne=-1;class re{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ie(e){return e.fields.find(e=>2===e.kind)}function se(e){return e.fields.filter(e=>2!==e.kind)}function ae(e,t){let n=R(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=ce(e.fields[r],t.fields[r]),0!==n)return n;return R(e.fields.length,t.fields.length)}re.UNKNOWN_ID=-1;class oe{constructor(e,t){this.fieldPath=e,this.kind=t}}function ce(e,t){const n=B.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:R(e.kind,t.kind)}class le{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new le(0,de.min())}}function ue(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=te.fromTimestamp(1e9===r?new ee(n+1,0):new ee(n,r));return new de(i,z.empty(),t)}function he(e){return new de(e.readTime,e.key,ne)}class de{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new de(te.min(),z.empty(),ne)}static max(){return new de(te.max(),z.empty(),ne)}}function fe(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=z.comparator(e.documentKey,t.documentKey),0!==n?n:R(e.largestBatchId,t.largestBatchId))}const pe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class me{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ge(e){if(e.code!==_.FAILED_PRECONDITION||e.message!==pe)throw e;f("LocalStore","Unexpectedly lost primary lease")}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&v(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(e){return ve.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,n)=>{t(e)})}static reject(e){return new ve((t,n)=>{n(e)})}static waitFor(e){return new ve((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=ve.resolve(!1);for(const n of e)t=t.next(e=>e?ve.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ve((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const c=o;t(e[c]).next(e=>{s[c]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new ve((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}const ye="SimpleDb";class we{static open(e,t,n,r){try{return new we(t,e.transaction(r,n))}catch(e){throw new Ee(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new E,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ee(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=ke(t.target.error);this.S.reject(new Ee(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(f(ye,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ie(t)}}class be{static delete(e){return f(ye,"Removing database:",e),Ae(s.getGlobal().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!s.isIndexedDBAvailable())return!1;if(be.F())return!0;const e=s.getUA(),t=be.M(e),n=0<t&&t<10,r=_e(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,12.2===be.M(s.getUA())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(f(ye,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ee(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new T(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new T(_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ee(e,r))},r.onupgradeneeded=e=>{f(ye,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next(()=>{f(ye,"Database upgrade to version "+this.version+" complete")})}})),this.K&&(this.db.onversionchange=e=>this.K(e)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.L(e);const t=we.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next(e=>(t.C(),e)).catch(e=>(t.abort(e),ve.reject(e))).toPromise();return s.catch(()=>{}),await t.D,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(f(ye,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _e(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Te{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Ae(this.U.delete())}}class Ee extends T{constructor(e,t){super(_.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Se(e){return"IndexedDbTransactionError"===e.name}class Ie{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(f(ye,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(f(ye,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ae(n)}add(e){return f(ye,"ADD",this.store.name,e,e),Ae(this.store.add(e))}get(e){return Ae(this.store.get(e)).next(t=>(void 0===t&&(t=null),f(ye,"GET",this.store.name,e,t),t))}delete(e){return f(ye,"DELETE",this.store.name,e),Ae(this.store.delete(e))}count(){return f(ye,"COUNT",this.store.name),Ae(this.store.count())}H(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new ve((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.J(e,(e,n)=>{t.push(n)}).next(()=>t)}}Z(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ve((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}X(e,t){f(ye,"DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.J(r,(e,t,n)=>n.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.J(r,t)}te(e){const t=this.cursor({});return new ve((n,r)=>{t.onerror=e=>{const t=ke(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}J(e,t){const n=[];return new ve((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Te(i),a=t(i.primaryKey,i.value,s);if(a instanceof ve){const e=a.catch(e=>(s.done(),ve.reject(e)));n.push(e)}s.isDone?r():null===s.G?i.continue():i.continue(s.G)}}).next(()=>ve.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ae(e){return new ve((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ke(e.target.error);n(t)}})}let Ce=!1;function ke(e){const t=be.M(s.getUA());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new T("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ce||(Ce=!0,setTimeout(()=>{throw e},0)),e}}return e}const Ne="IndexBackfiller";class xe{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}re(e){f(Ne,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.ne.ie();f(Ne,"Documents written: ".concat(e))}catch(e){Se(e)?f(Ne,"Ignoring IndexedDB error during index backfill: ",e):await ge(e)}await this.re(6e4)})}}class De{constructor(e,t){this.localStore=e,this.persistence=t}async ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let r=t,i=!0;return ve.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return f(Ne,"Processing collection: ".concat(t)),this.oe(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this._e(r,n)).next(n=>(f(Ne,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}_e(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=he(t);fe(r,n)>0&&(n=r)}),new de(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Re{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Re.ce=-1;const Pe=-1;function Oe(e){return null==e}function Me(e){return 0===e&&1/e==-1/0}function Le(e){return"number"==typeof e&&Number.isInteger(e)&&!Me(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Fe="\x01";function Ve(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=je(t)),t=Ue(e.get(n),t);return je(t)}function Ue(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Fe:n+="\x01\x11";break;default:n+=t}}return n}function je(e){return e+Fe+"\x01"}function Be(e){const t=e.length;if(w(t>=2,64408,{path:e}),2===t)return w(e.charAt(0)===Fe&&"\x01"===e.charAt(1),56145,{path:e}),U.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf(Fe,s);switch((t<0||t>n)&&v(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:v(61167,{path:e})}s=t+2}return new U(r)}const ze="remoteDocuments",We="owner",He="owner",qe="mutationQueues",Ge="mutations",Ke="batchId",Ye="userMutationsIndex",Qe=["userId","batchId"];function Xe(e,t){return[e,Ve(t)]}function Je(e,t,n){return[e,Ve(t),n]}const $e={},Ze="documentMutations",et="remoteDocumentsV14",tt=["prefixPath","collectionGroup","readTime","documentId"],nt="documentKeyIndex",rt=["prefixPath","collectionGroup","documentId"],it="collectionGroupIndex",st=["collectionGroup","readTime","prefixPath","documentId"],at="remoteDocumentGlobal",ot="remoteDocumentGlobalKey",ct="targets",lt="queryTargetsIndex",ut=["canonicalId","targetId"],ht="targetDocuments",dt=["targetId","path"],ft="documentTargetsIndex",pt=["path","targetId"],mt="targetGlobalKey",gt="targetGlobal",vt="collectionParents",yt=["collectionId","parent"],wt="clientMetadata",bt="bundles",_t="namedQueries",Tt="indexConfiguration",Et="collectionGroupIndex",St="indexState",It=["indexId","uid"],At="sequenceNumberIndex",Ct=["uid","sequenceNumber"],kt="indexEntries",Nt=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xt="documentKeyIndex",Dt=["indexId","uid","orderedDocumentKey"],Rt="documentOverlays",Pt=["userId","collectionPath","documentId"],Ot="collectionPathOverlayIndex",Mt=["userId","collectionPath","largestBatchId"],Lt="collectionGroupOverlayIndex",Ft=["userId","collectionGroup","largestBatchId"],Vt="globals",Ut=[qe,Ge,Ze,ze,ct,We,gt,ht,wt,at,vt,bt,_t],jt=[...Ut,Rt],Bt=[qe,Ge,Ze,et,ct,We,gt,ht,wt,at,vt,bt,_t,Rt],zt=Bt,Wt=[...zt,Tt,St,kt],Ht=Wt,qt=[...Wt,Vt],Gt=qt;class Kt extends me{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Yt(e,t){const n=b(e);return be.O(n.le,t)}function Qt(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Jt(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function $t(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zt{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new en(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new en(this.root,e,this.comparator,!1)}getReverseIterator(){return new en(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new en(this.root,e,this.comparator,!0)}}class en{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:tn.RED,this.left=null!=r?r:tn.EMPTY,this.right=null!=i?i:tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new tn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return tn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw v(43730,{key:this.key,value:this.value});if(this.right.isRed())throw v(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw v(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1,tn.EMPTY=new class{constructor(){this.size=0}get key(){throw v(57766)}get value(){throw v(16141)}get color(){throw v(16727)}get left(){throw v(29726)}get right(){throw v(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nn{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rn(this.data.getIterator())}getIteratorFrom(e){return new rn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nn(this.comparator);return t.data=e,t}}class rn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sn(e){return e.hasNext()?e.getNext():void 0}class an{constructor(e){this.fields=e,e.sort(B.comparator)}static empty(){return new an([])}unionWith(e){let t=new nn(B.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new an(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return M(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class on extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new on("Invalid base64 string: "+e):e}}(e);return new cn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return R(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const ln=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function un(e){if(w(!!e,39018),"string"==typeof e){let t=0;const n=ln.exec(e);if(w(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:hn(e.seconds),nanos:hn(e.nanos)}}function hn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function dn(e){return"string"==typeof e?cn.fromBase64String(e):cn.fromUint8Array(e)}const fn="server_timestamp",pn="__type__",mn="__previous_value__",gn="__local_write_time__";function vn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[pn])||void 0===t?void 0:t.stringValue)===fn}function yn(e){const t=e.mapValue.fields[mn];return vn(t)?yn(t):t}function wn(e){const t=un(e.mapValue.fields[gn].timestampValue);return new ee(t.seconds,t.nanos)}class bn{constructor(e,t,n,r,i,s,a,o,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c,this.isUsingEmulator=l,this.apiKey=u}}const _n="(default)";class Tn{constructor(e,t){this.projectId=e,this.database=t||_n}static empty(){return new Tn("","")}get isDefaultDatabase(){return this.database===_n}isEqual(e){return e instanceof Tn&&e.projectId===this.projectId&&e.database===this.database}}const En="__type__",Sn="__max__",In={mapValue:{fields:{__type__:{stringValue:Sn}}}},An="__vector__",Cn="value",kn={nullValue:"NULL_VALUE"};function Nn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vn(e)?4:Gn(e)?9007199254740991:Hn(e)?10:11:v(28295,{value:e})}function xn(e,t){if(e===t)return!0;const n=Nn(e);if(n!==Nn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return wn(e).isEqual(wn(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=un(e.timestampValue),r=un(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return dn(e.bytesValue).isEqual(dn(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return hn(e.geoPointValue.latitude)===hn(t.geoPointValue.latitude)&&hn(e.geoPointValue.longitude)===hn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return hn(e.integerValue)===hn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=hn(e.doubleValue),r=hn(t.doubleValue);return n===r?Me(n)===Me(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return M(e.arrayValue.values||[],t.arrayValue.values||[],xn);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qt(n)!==Qt(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xn(n[i],r[i])))return!1;return!0}(e,t);default:return v(52216,{left:e})}}function Dn(e,t){return void 0!==(e.values||[]).find(e=>xn(e,t))}function Rn(e,t){if(e===t)return 0;const n=Nn(e),r=Nn(t);if(n!==r)return R(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return R(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=hn(e.integerValue||e.doubleValue),r=hn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pn(e.timestampValue,t.timestampValue);case 4:return Pn(wn(e),wn(t));case 5:return P(e.stringValue,t.stringValue);case 6:return function(e,t){const n=dn(e),r=dn(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=R(n[i],r[i]);if(0!==e)return e}return R(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=R(hn(e.latitude),hn(t.latitude));return 0!==n?n:R(hn(e.longitude),hn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return On(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},c=null===(n=a[Cn])||void 0===n?void 0:n.arrayValue,l=null===(r=o[Cn])||void 0===r?void 0:r.arrayValue,u=R((null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0,(null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:On(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===In.mapValue&&t===In.mapValue)return 0;if(e===In.mapValue)return 1;if(t===In.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=P(r[a],s[a]);if(0!==e)return e;const t=Rn(n[r[a]],i[s[a]]);if(0!==t)return t}return R(r.length,s.length)}(e.mapValue,t.mapValue);default:throw v(23264,{he:n})}}function Pn(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return R(e,t);const n=un(e),r=un(t),i=R(n.seconds,r.seconds);return 0!==i?i:R(n.nanos,r.nanos)}function On(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Rn(n[i],r[i]);if(e)return e}return R(n.length,r.length)}function Mn(e){return Ln(e)}function Ln(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=un(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return dn(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return z.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ln(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ln(e.fields[i]));return n+"}"}(e.mapValue):v(61005,{value:e})}function Fn(e){switch(Nn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=yn(e);return t?16+Fn(t):16;case 5:return 2*e.stringValue.length;case 6:return dn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Fn(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Xt(e.fields,(e,n)=>{t+=e.length+Fn(n)}),t}(e.mapValue);default:throw v(13486,{value:e})}}function Vn(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Un(e){return!!e&&"integerValue"in e}function jn(e){return!!e&&"arrayValue"in e}function Bn(e){return!!e&&"nullValue"in e}function zn(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wn(e){return!!e&&"mapValue"in e}function Hn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[En])||void 0===t?void 0:t.stringValue)===An}function qn(e){if(e.geoPointValue)return{geoPointValue:r({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:r({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Xt(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=qn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=qn(e.arrayValue.values[n]);return t}return r({},e)}function Gn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Sn}const Kn={mapValue:{fields:{[En]:{stringValue:An},[Cn]:{arrayValue:{}}}}};function Yn(e){return"nullValue"in e?kn:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Vn(Tn.empty(),z.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Hn(e)?Kn:{mapValue:{}}:v(35942,{value:e})}function Qn(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Vn(Tn.empty(),z.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Kn:"mapValue"in e?Hn(e)?{mapValue:{}}:In:v(61959,{value:e})}function Xn(e,t){const n=Rn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Jn(e,t){const n=Rn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Wn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qn(t)}setAll(e){let t=B.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=qn(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Wn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Wn(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xt(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new $n(qn(this.value))}}function Zn(e){const t=[];return Xt(e.fields,(e,n)=>{const r=new B([e]);if(Wn(n)){const e=Zn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new an(t)}class er{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new er(e,0,te.min(),te.min(),te.min(),$n.empty(),0)}static newFoundDocument(e,t,n,r){return new er(e,1,t,te.min(),n,r,0)}static newNoDocument(e,t){return new er(e,2,t,te.min(),te.min(),$n.empty(),0)}static newUnknownDocument(e,t){return new er(e,3,t,te.min(),te.min(),$n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(te.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class tr{constructor(e,t){this.position=e,this.inclusive=t}}function nr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?z.comparator(z.fromName(a.referenceValue),n.key):Rn(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function rr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!xn(e.position[n],t.position[n]))return!1;return!0}class ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function sr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ar{}class or extends ar{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vr(e,t,n):"array-contains"===t?new _r(e,n):"in"===t?new Tr(e,n):"not-in"===t?new Er(e,n):"array-contains-any"===t?new Sr(e,n):new or(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new yr(e,n):new wr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Rn(t,this.value)):null!==t&&Nn(this.value)===Nn(t)&&this.matchesComparison(Rn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return v(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends ar{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new cr(e,t)}matches(e){return lr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lr(e){return"and"===e.op}function ur(e){return"or"===e.op}function hr(e){return dr(e)&&lr(e)}function dr(e){for(const t of e.filters)if(t instanceof cr)return!1;return!0}function fr(e){if(e instanceof or)return e.field.canonicalString()+e.op.toString()+Mn(e.value);if(hr(e))return e.filters.map(e=>fr(e)).join(",");{const t=e.filters.map(e=>fr(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function pr(e,t){return e instanceof or?function(e,t){return t instanceof or&&e.op===t.op&&e.field.isEqual(t.field)&&xn(e.value,t.value)}(e,t):e instanceof cr?function(e,t){return t instanceof cr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&pr(n,t.filters[r]),!0)}(e,t):void v(19439)}function mr(e,t){const n=e.filters.concat(t);return cr.create(n,e.op)}function gr(e){return e instanceof or?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Mn(e.value))}(e):e instanceof cr?function(e){return e.op.toString()+" {"+e.getFilters().map(gr).join(" ,")+"}"}(e):"Filter"}class vr extends or{constructor(e,t,n){super(e,t,n),this.key=z.fromName(n.referenceValue)}matches(e){const t=z.comparator(e.key,this.key);return this.matchesComparison(t)}}class yr extends or{constructor(e,t){super(e,"in",t),this.keys=br("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wr extends or{constructor(e,t){super(e,"not-in",t),this.keys=br("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function br(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>z.fromName(e.referenceValue))}class _r extends or{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jn(t)&&Dn(t.arrayValue,this.value)}}class Tr extends or{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dn(this.value.arrayValue,t)}}class Er extends or{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Dn(this.value.arrayValue,t)}}class Sr extends or{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jn(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Dn(this.value.arrayValue,e))}}class Ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function Ar(e){return new Ir(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Cr(e){const t=b(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>fr(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Oe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Mn(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Mn(e)).join(",")),t.Te=e}return t.Te}function kr(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!pr(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!rr(e.startAt,t.startAt)&&rr(e.endAt,t.endAt)}function Nr(e){return z.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function xr(e,t){return e.filters.filter(e=>e instanceof or&&e.field.isEqual(t))}function Dr(e,t,n){let r=kn,i=!0;for(const s of xr(e,t)){let e=kn,t=!0;switch(s.op){case"<":case"<=":e=Yn(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=kn}Xn({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Xn({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Rr(e,t,n){let r=In,i=!0;for(const s of xr(e,t)){let e=In,t=!0;switch(s.op){case">=":case">":e=Qn(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=In}Jn({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Jn({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Pr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Or(e,t,n,r,i,s,a,o){return new Pr(e,t,n,r,i,s,a,o)}function Mr(e){return new Pr(e)}function Lr(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fr(e){return z.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Vr(e){return null!==e.collectionGroup}function Ur(e){const t=b(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new nn(B.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ir(r,n))}),e.has(B.keyField().canonicalString())||t.Ie.push(new ir(B.keyField(),n))}return t.Ie}function jr(e){const t=b(e);return t.Ee||(t.Ee=zr(t,Ur(e))),t.Ee}function Br(e){const t=b(e);return t.Re||(t.Re=zr(t,e.explicitOrderBy)),t.Re}function zr(e,t){if("F"===e.limitType)return Ar(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ir(e.field,t)});const n=e.endAt?new tr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new tr(e.startAt.position,e.startAt.inclusive):null;return Ar(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Wr(e,t,n){return new Pr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hr(e,t){return kr(jr(e),jr(t))&&e.limitType===t.limitType}function qr(e){return"".concat(Cr(jr(e)),"|lt:").concat(e.limitType)}function Gr(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>gr(e)).join(", "),"]")),Oe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Mn(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Mn(e)).join(",")),"Target(".concat(t,")")}(jr(e)),"; limitType=").concat(e.limitType,")")}function Kr(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):z.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ur(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=nr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ur(e),t))&&!(e.endAt&&!function(e,t,n){const r=nr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ur(e),t))}(e,t)}function Yr(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qr(e){return(t,n)=>{let r=!1;for(const i of Ur(e)){const e=Xr(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Xr(e,t,n){const r=e.field.isKeyField()?z.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Rn(r,i):v(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return v(19790,{direction:e.dir})}}class Jr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xt(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return $t(this.inner)}size(){return this.innerSize}}const $r=new Zt(z.comparator);function Zr(){return $r}const ei=new Zt(z.comparator);function ti(){let e=ei;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ni(e){let t=ei;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ri(){return si()}function ii(){return si()}function si(){return new Jr(e=>e.toString(),(e,t)=>e.isEqual(t))}const ai=new Zt(z.comparator),oi=new nn(z.comparator);function ci(){let e=oi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const li=new nn(R);function ui(){return li}function hi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Me(t)?"-0":t}}function di(e){return{integerValue:""+e}}function fi(e,t){return Le(t)?di(t):hi(e,t)}class pi{constructor(){this._=void 0}}function mi(e,t,n){return e instanceof yi?function(e,t){const n={fields:{[pn]:{stringValue:fn},[gn]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&vn(t)&&(t=yn(t)),t&&(n.fields[mn]=t),{mapValue:n}}(n,t):e instanceof wi?bi(e,t):e instanceof _i?Ti(e,t):function(e,t){const n=vi(e,t),r=Si(n)+Si(e.Ae);return Un(n)&&Un(e.Ae)?di(r):hi(e.serializer,r)}(e,t)}function gi(e,t,n){return e instanceof wi?bi(e,t):e instanceof _i?Ti(e,t):n}function vi(e,t){return e instanceof Ei?function(e){return Un(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yi extends pi{}class wi extends pi{constructor(e){super(),this.elements=e}}function bi(e,t){const n=Ii(t);for(const r of e.elements)n.some(e=>xn(e,r))||n.push(r);return{arrayValue:{values:n}}}class _i extends pi{constructor(e){super(),this.elements=e}}function Ti(e,t){let n=Ii(t);for(const r of e.elements)n=n.filter(e=>!xn(e,r));return{arrayValue:{values:n}}}class Ei extends pi{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Si(e){return hn(e.integerValue||e.doubleValue)}function Ii(e){return jn(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ai{constructor(e,t){this.field=e,this.transform=t}}class Ci{constructor(e,t){this.version=e,this.transformResults=t}}class ki{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ki}static exists(e){return new ki(void 0,e)}static updateTime(e){return new ki(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ni(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xi{}function Di(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Bi(e.key,ki.none()):new Li(e.key,e.data,ki.none());{const n=e.data,r=$n.empty();let i=new nn(B.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Fi(e.key,r,new an(i.toArray()),ki.none())}}function Ri(e,t,n){e instanceof Li?function(e,t,n){const r=e.value.clone(),i=Ui(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Fi?function(e,t,n){if(!Ni(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ui(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Vi(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pi(e,t,n,r){return e instanceof Li?function(e,t,n,r){if(!Ni(e.precondition,t))return n;const i=e.value.clone(),s=ji(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Fi?function(e,t,n,r){if(!Ni(e.precondition,t))return n;const i=ji(e.fieldTransforms,r,t),s=t.data;return s.setAll(Vi(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ni(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Oi(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vi(r.transform,e||null);null!=i&&(null===n&&(n=$n.empty()),n.set(r.field,i))}return n||null}function Mi(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&M(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wi&&t instanceof wi||e instanceof _i&&t instanceof _i?M(e.elements,t.elements,xn):e instanceof Ei&&t instanceof Ei?xn(e.Ae,t.Ae):e instanceof yi&&t instanceof yi}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Li extends xi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fi extends xi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vi(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ui(e,t,n){const r=new Map;w(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,gi(a,o,n[i]))}return r}function ji(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,mi(e,s,t))}return r}class Bi extends xi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zi extends xi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Wi{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ri(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pi(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pi(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ii();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Di(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(te.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ci())}isEqual(e){return this.batchId===e.batchId&&M(this.mutations,e.mutations,(e,t)=>Mi(e,t))&&M(this.baseMutations,e.baseMutations,(e,t)=>Mi(e,t))}}class Hi{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){w(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ai;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Hi(e,t,n,r)}}class qi{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Gi{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class Ki{constructor(e,t){this.count=e,this.unchangedNames=t}}var Yi,Qi;function Xi(e){switch(e){case _.OK:return v(64938);case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0;default:return v(15467,{code:e})}}function Ji(e){if(void 0===e)return p("GRPC error has no .code"),_.UNKNOWN;switch(e){case Yi.OK:return _.OK;case Yi.CANCELLED:return _.CANCELLED;case Yi.UNKNOWN:return _.UNKNOWN;case Yi.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case Yi.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case Yi.INTERNAL:return _.INTERNAL;case Yi.UNAVAILABLE:return _.UNAVAILABLE;case Yi.UNAUTHENTICATED:return _.UNAUTHENTICATED;case Yi.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case Yi.NOT_FOUND:return _.NOT_FOUND;case Yi.ALREADY_EXISTS:return _.ALREADY_EXISTS;case Yi.PERMISSION_DENIED:return _.PERMISSION_DENIED;case Yi.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case Yi.ABORTED:return _.ABORTED;case Yi.OUT_OF_RANGE:return _.OUT_OF_RANGE;case Yi.UNIMPLEMENTED:return _.UNIMPLEMENTED;case Yi.DATA_LOSS:return _.DATA_LOSS;default:return v(39323,{code:e})}}(Qi=Yi||(Yi={}))[Qi.OK=0]="OK",Qi[Qi.CANCELLED=1]="CANCELLED",Qi[Qi.UNKNOWN=2]="UNKNOWN",Qi[Qi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qi[Qi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qi[Qi.NOT_FOUND=5]="NOT_FOUND",Qi[Qi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qi[Qi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qi[Qi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qi[Qi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qi[Qi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qi[Qi.ABORTED=10]="ABORTED",Qi[Qi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qi[Qi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qi[Qi.INTERNAL=13]="INTERNAL",Qi[Qi.UNAVAILABLE=14]="UNAVAILABLE",Qi[Qi.DATA_LOSS=15]="DATA_LOSS";let $i=null;function Zi(){return new TextEncoder}const es=new a.Integer([4294967295,4294967295],0);function ts(e){const t=Zi().encode(e),n=new a.Md5;return n.update(t),new Uint8Array(n.digest())}function ns(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new a.Integer([n,r],0),new a.Integer([i,s],0)]}class rs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new is("Invalid padding: ".concat(t));if(n<0)throw new is("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new is("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new is("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=a.Integer.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(a.Integer.fromNumber(n)));return 1===r.compare(es)&&(r=new a.Integer([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ts(e),[n,r]=ns(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new rs(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=ts(e),[n,r]=ns(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class is extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ss{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,as.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ss(te.min(),r,new Zt(R),Zr(),ci())}}class as{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new as(n,t,ci(),ci(),ci())}}class os{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class cs{constructor(e,t){this.targetId=e,this.Ce=t}}class ls{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cn.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class us{constructor(){this.ve=0,this.Fe=fs(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ci(),t=ci(),n=ci();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:v(38017,{changeType:i})}}),new as(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=fs()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,w(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class hs{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zr(),this.He=ds(),this.Je=ds(),this.Ze=new Zt(R)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:v(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Nr(s))if(0===n){const e=new z(s.path);this.et(t,e,er.newNoDocument(e,te.min()))}else w(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null===(i=$i)||void 0===i||i.lt(function(e,t,n,r,i){var s,a,o,c,l;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===h||void 0===h||null===(o=h.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(c=null===h||void 0===h||null===(l=h.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=dn(n).toUint8Array()}catch(e){if(e instanceof on)return m("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new rs(s,r,i)}catch(e){return m(e instanceof is?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Nr(i.target)){const t=new z(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,er.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}});let n=ci();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ss(e,t,this.Ze,this.je,n);return this.je=Zr(),this.He=ds(),this.Je=ds(),this.Ze=new Zt(R),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new us,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new nn(R),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new nn(R),this.He=this.He.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||f("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new us),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ds(){return new Zt(z.comparator)}function fs(){return new Zt(z.comparator)}const ps={asc:"ASCENDING",desc:"DESCENDING"},ms={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gs={and:"AND",or:"OR"};class vs{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ys(e,t){return e.useProto3Json||Oe(t)?t:{value:t}}function ws(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function bs(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _s(e,t){return ws(e,t.toTimestamp())}function Ts(e){return w(!!e,49232),te.fromTimestamp(function(e){const t=un(e);return new ee(t.seconds,t.nanos)}(e))}function Es(e,t){return Ss(e,t).canonicalString()}function Ss(e,t){const n=function(e){return new U(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Is(e){const t=U.fromString(e);return w(Qs(t),10190,{key:t.toString()}),t}function As(e,t){return Es(e.databaseId,t.path)}function Cs(e,t){const n=Is(t);if(n.get(1)!==e.databaseId.projectId)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new z(Ds(n))}function ks(e,t){return Es(e.databaseId,t)}function Ns(e){const t=Is(e);return 4===t.length?U.emptyPath():Ds(t)}function xs(e){return new U(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ds(e){return w(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Rs(e,t,n){return{name:As(e,t),fields:n.value.mapValue.fields}}function Ps(e,t,n){var r;const i={};(null===(r=t.transaction)||void 0===r?void 0:r.length)&&(i.transaction=t.transaction);const s=t.executionTime?Ts(t.executionTime):void 0;return i.executionTime=s,n&&(i.key=n.name?Cs(e,n.name):void 0,i.fields=new $n({mapValue:{fields:n.fields}}),i.createTime=n.createTime?Ts(n.createTime):void 0,i.updateTime=n.updateTime?Ts(n.updateTime):void 0),i}function Os(e,t,n){const r=Cs(e,t.name),i=Ts(t.updateTime),s=t.createTime?Ts(t.createTime):te.min(),a=new $n({mapValue:{fields:t.fields}}),o=er.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ms(e,t){let n;if(t instanceof Li)n={update:Rs(e,t.key,t.value)};else if(t instanceof Bi)n={delete:As(e,t.key)};else if(t instanceof Fi)n={update:Rs(e,t.key,t.data),updateMask:Ys(t.fieldMask)};else{if(!(t instanceof zi))return v(16599,{dt:t.type});n={verify:As(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _i)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ei)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw v(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_s(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:v(27497)}(e,t.precondition)),n}function Ls(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?ki.updateTime(Ts(e.updateTime)):void 0!==e.exists?ki.exists(e.exists):ki.none()}(t.currentDocument):ki.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)w("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new yi;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new wi(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new _i(e)}else"increment"in t?n=new Ei(e,t.increment):v(16584,{proto:t});const r=B.fromServerFormat(t.fieldPath);return new Ai(r,n)}(e,t)):[];if(t.update){t.update.name;const i=Cs(e,t.update.name),s=new $n({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new an(t.map(e=>B.fromServerFormat(e)))}(t.updateMask);return new Fi(i,s,e,n,r)}return new Li(i,s,n,r)}if(t.delete){const r=Cs(e,t.delete);return new Bi(r,n)}if(t.verify){const r=Cs(e,t.verify);return new zi(r,n)}return v(1463,{proto:t})}function Fs(e,t){return{documents:[ks(e,t.path)]}}function Vs(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ks(e,i);const s=function(e){if(0!==e.length)return Ks(cr.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:qs(e.field),direction:zs(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ys(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Us(e,t,n,r){const{ft:i,parent:s}=Vs(e,t),a={},o=[];let c=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+c++;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:qs(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:qs(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},gt:a,parent:s}}function js(e){let t=Ns(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){w(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Bs(e);return t instanceof cr&&hr(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new ir(Gs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Oe(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new tr(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new tr(n,t)}(n.endAt)),Or(t,i,a,s,o,"F",c,l)}function Bs(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gs(e.unaryFilter.field);return or.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gs(e.unaryFilter.field);return or.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gs(e.unaryFilter.field);return or.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gs(e.unaryFilter.field);return or.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return v(61313);default:return v(60726)}}(e):void 0!==e.fieldFilter?function(e){return or.create(Gs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return v(58110);default:return v(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cr.create(e.compositeFilter.filters.map(e=>Bs(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return v(1026)}}(e.compositeFilter.op))}(e):v(30097,{filter:e})}function zs(e){return ps[e]}function Ws(e){return ms[e]}function Hs(e){return gs[e]}function qs(e){return{fieldPath:e.canonicalString()}}function Gs(e){return B.fromServerFormat(e.fieldPath)}function Ks(e){return e instanceof or?function(e){if("=="===e.op){if(zn(e.value))return{unaryFilter:{field:qs(e.field),op:"IS_NAN"}};if(Bn(e.value))return{unaryFilter:{field:qs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zn(e.value))return{unaryFilter:{field:qs(e.field),op:"IS_NOT_NAN"}};if(Bn(e.value))return{unaryFilter:{field:qs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(e.field),op:Ws(e.op),value:e.value}}}(e):e instanceof cr?function(e){const t=e.getFilters().map(e=>Ks(e));return 1===t.length?t[0]:{compositeFilter:{op:Hs(e.op),filters:t}}}(e):v(54877,{filter:e})}function Ys(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Qs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Xs(e){return!!e&&"function"==typeof e._toProto&&"ProtoValue"===e._protoValueType}class Js{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:te.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:te.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:cn.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $s{constructor(e){this.yt=e}}function Zs(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ea(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:As(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ws(e,t.version.toTimestamp()),createTime:ws(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ta(t.version)};else{if(!t.isUnknownDocument())return v(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:ta(t.version)}}return r}function ea(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ta(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function na(e){const t=new ee(e.seconds,e.nanoseconds);return te.fromTimestamp(t)}function ra(e,t){const n=(t.baseMutations||[]).map(t=>Ls(e.yt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(t=>Ls(e.yt,t)),i=ee.fromMillis(t.localWriteTimeMs);return new Wi(t.batchId,i,n,r)}function ia(e){const t=na(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?na(e.lastLimboFreeSnapshotVersion):te.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return w(1===t,1966,{count:t}),jr(Mr(Ns(e.documents[0])))}(e.query):function(e){return jr(js(e))}(e.query),new Js(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,cn.fromBase64String(e.resumeToken))}function sa(e,t){const n=ta(t.snapshotVersion),r=ta(t.lastLimboFreeSnapshotVersion);let i;i=Nr(t.target)?Fs(e.yt,t.target):Vs(e.yt,t.target).ft;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Cr(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function aa(e){const t=js({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Wr(t,t.limit,"L"):t}function oa(e,t){return new qi(t.largestBatchId,Ls(e.yt,t.overlayMutation))}function ca(e,t){const n=t.path.lastSegment();return[e,Ve(t.path.popLast()),n]}function la(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ta(r.readTime),documentKey:Ve(r.documentKey.path),largestBatchId:r.largestBatchId}}class ua{getBundleMetadata(e,t){return ha(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:na(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return ha(e).put(function(e){return{bundleId:e.id,createTime:ta(Ts(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return da(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:aa(e.bundledQuery),readTime:na(e.readTime)}}(e)})}saveNamedQuery(e,t){return da(e).put(function(e){return{name:e.name,readTime:ta(Ts(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function ha(e){return Yt(e,bt)}function da(e){return Yt(e,_t)}class fa{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new fa(e,n)}getOverlay(e,t){return pa(e).get(ca(this.userId,t)).next(e=>e?oa(this.serializer,e):null)}getOverlays(e,t){const n=ri();return ve.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new qi(t,i);r.push(this.bt(e,s))}),ve.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(Ve(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(pa(e).X(Ot,r))}),ve.waitFor(i)}getOverlaysForCollection(e,t,n){const r=ri(),i=Ve(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return pa(e).H(Ot,s).next(e=>{for(const t of e){const e=oa(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=ri();let s;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pa(e).ee({index:Lt,range:a},(e,t,n)=>{const a=oa(this.serializer,t);i.size()<r||a.largestBatchId===s?(i.set(a.getKey(),a),s=a.largestBatchId):n.done()}).next(()=>i)}bt(e,t){return pa(e).put(function(e,t,n){const[r,i,s]=ca(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ms(e.yt,n.mutation)}}(this.serializer,this.userId,t))}}function pa(e){return Yt(e,Rt)}class ma{St(e){return Yt(e,Vt)}getSessionToken(e){return this.St(e).get("sessionToken").next(e=>{const t=null===e||void 0===e?void 0:e.value;return t?cn.fromUint8Array(t):cn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ga{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(hn(e.integerValue));else if("doubleValue"in e){const n=hn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Me(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=un(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(dn(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Gn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Hn(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):v(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Cn,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(hn(s)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),z.fromName(e).path.forEach(e=>{this.Ft(t,60),this.$t(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ga.Wt=new ga;const va=255;function ya(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function wa(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=ya(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class ba{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ht(n.value),n=t.next();this.Jt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{const e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ht(e);else if(e<2048)this.Ht(960|e>>>6),this.Ht(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ht(480|e>>>12),this.Ht(128|63&e>>>6),this.Ht(128|63&e);else{const e=t.codePointAt(0);this.Ht(240|e>>>18),this.Ht(128|63&e>>>12),this.Ht(128|63&e>>>6),this.Ht(128|63&e)}}this.Jt()}Yt(e){const t=this.en(e),n=wa(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),n=wa(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(va),this.sn(255)}_n(){this.an(va),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Gt(e){const t=255&e;0===t?(this.sn(0),this.sn(255)):t===va?(this.sn(va),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;0===t?(this.an(0),this.an(255)):t===va?(this.an(va),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class _a{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class Ta{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ea{constructor(){this.cn=new ba,this.ascending=new _a(this.cn),this.descending=new Ta(this.cn)}seed(e){this.cn.seed(e)}ln(e){return 0===e?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class Sa{constructor(e,t,n,r){this.hn=e,this.Pn=t,this.Tn=n,this.In=r}En(){const e=this.In.length,t=0===e||255===this.In[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.In,0),t!==e?n.set([0],this.In.length):++n[n.length-1],new Sa(this.hn,this.Pn,this.Tn,n)}Rn(e,t,n){return{indexId:this.hn,uid:e,arrayValue:Ca(this.Tn),directionalValue:Ca(this.In),orderedDocumentKey:Ca(t),documentKey:n.path.toArray()}}An(e,t,n){const r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Ia(e,t){let n=e.hn-t.hn;return 0!==n?n:(n=Aa(e.Tn,t.Tn),0!==n?n:(n=Aa(e.In,t.In),0!==n?n:z.comparator(e.Pn,t.Pn)))}function Aa(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function Ca(e){return s.isSafariOrWebkit()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function ka(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class Na{constructor(e){this.Vn=new nn((e,t)=>B.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Vn=this.Vn.add(e):this.mn.push(e)}}get fn(){return this.Vn.size>1}gn(e){if(w(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=ie(e);if(void 0!==t&&!this.pn(t))return!1;const n=se(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.pn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Vn.size>0){const e=this.Vn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.yn(e,t)||!this.wn(this.dn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.dn.length||!this.wn(this.dn[s++],e))return!1}return!0}bn(){if(this.fn)return null;let e=new nn(B.comparator);const t=[];for(const n of this.mn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new oe(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new oe(n.field,0))}for(const n of this.dn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new oe(n.field,"asc"===n.dir?0:1)));return new re(re.UNKNOWN_ID,this.collectionId,t,le.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function xa(e){if(w(e instanceof or||e instanceof cr,20012),e instanceof or){if(e instanceof Tr){var t;const n=(null===(t=e.value.arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(t=>or.create(e.field,"==",t)))||[];return cr.create(n,"or")}return e}const n=e.filters.map(e=>xa(e));return cr.create(n,e.op)}function Da(e){if(0===e.getFilters().length)return[];const t=Ma(xa(e));return w(Oa(t),7391),Ra(t)||Pa(t)?[t]:t.getFilters()}function Ra(e){return e instanceof or}function Pa(e){return e instanceof cr&&hr(e)}function Oa(e){return Ra(e)||Pa(e)||function(e){if(e instanceof cr&&ur(e)){for(const t of e.getFilters())if(!Ra(t)&&!Pa(t))return!1;return!0}return!1}(e)}function Ma(e){if(w(e instanceof or||e instanceof cr,34018),e instanceof or)return e;if(1===e.filters.length)return Ma(e.filters[0]);const t=e.filters.map(e=>Ma(e));let n=cr.create(t,e.op);return n=Va(n),Oa(n)?n:(w(n instanceof cr,64498),w(lr(n),40251),w(n.filters.length>1,57927),n.filters.reduce((e,t)=>La(e,t)))}function La(e,t){let n;return w(e instanceof or||e instanceof cr,38388),w(t instanceof or||t instanceof cr,25473),n=e instanceof or?t instanceof or?function(e,t){return cr.create([e,t],"and")}(e,t):Fa(e,t):t instanceof or?Fa(t,e):function(e,t){if(w(e.filters.length>0&&t.filters.length>0,48005),lr(e)&&lr(t))return mr(e,t.getFilters());const n=ur(e)?e:t,r=ur(e)?t:e,i=n.filters.map(e=>La(e,r));return cr.create(i,"or")}(e,t),Va(n)}function Fa(e,t){if(lr(t))return mr(t,e.getFilters());{const n=t.filters.map(t=>La(e,t));return cr.create(n,"or")}}function Va(e){if(w(e instanceof or||e instanceof cr,11850),e instanceof or)return e;const t=e.getFilters();if(1===t.length)return Va(t[0]);if(dr(e))return e;const n=t.map(e=>Va(e)),r=[];return n.forEach(t=>{t instanceof or?r.push(t):t instanceof cr&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:cr.create(r,e.op)}class Ua{constructor(){this.Sn=new ja}addToCollectionParentIndex(e,t){return this.Sn.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getIndexType(e,t){return ve.resolve(0)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,t){return ve.resolve(de.min())}getMinOffsetFromCollectionGroup(e,t){return ve.resolve(de.min())}updateCollectionGroup(e,t,n){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class ja{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nn(U.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new nn(U.comparator)).toArray()}}const Ba="IndexedDbIndexManager",za=new Uint8Array(0);class Wa{constructor(e,t){this.databaseId=t,this.Dn=new ja,this.Cn=new Jr(e=>Cr(e),(e,t)=>kr(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Dn.add(t)});const i={collectionId:n,parent:Ve(r)};return Ha(e).put(i)}return ve.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[L(t),""],!1,!0);return Ha(e).H(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Be(r.parent))}return n})}addFieldIndex(e,t){const n=Ga(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Ka(e);return i.next(e=>{n.put(la(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=Ga(e),r=Ka(e),i=qa(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ga(e),n=qa(e),r=Ka(e);return t.X().next(()=>n.X()).next(()=>r.X())}createTargetIndexes(e,t){return ve.forEach(this.vn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Na(t).bn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=qa(e);let r=!0;const i=new Map;return ve.forEach(this.vn(t),t=>this.Fn(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=ci();const r=[];return ve.forEach(i,(i,s)=>{f(Ba,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(i)," to execute ").concat(Cr(t)));const a=function(e,t){const n=ie(t);if(void 0===n)return null;for(const r of xr(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),o=function(e,t){const n=new Map;for(const r of se(t))for(const t of xr(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of se(t)){const t=0===i.kind?Dr(e,i.fieldPath,e.startAt):Rr(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new tr(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of se(t)){const t=0===i.kind?Rr(e,i.fieldPath,e.endAt):Dr(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new tr(n,r)}(s,i),u=this.Mn(i,s,c),h=this.Mn(i,s,l),d=this.xn(i,s,o),p=this.On(i.indexId,a,u,c.inclusive,h,l.inclusive,d);return ve.forEach(p,i=>n.Z(i,t.limit).next(t=>{t.forEach(t=>{const n=z.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return ve.resolve(null)})}vn(e){let t=this.Cn.get(e);return t||(t=0===e.filters.length?[e]:Da(cr.create(e.filters,"and")).map(t=>Ar(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t),t)}On(e,t,n,r,i,s,a){const o=(null!=t?t.length:1)*Math.max(n.length,i.length),c=o/(null!=t?t.length:1),l=[];for(let u=0;u<o;++u){const o=t?this.Nn(t[u/c]):za,h=this.Bn(e,o,n[u%c],r),d=this.Ln(e,o,i[u%c],s),f=a.map(t=>this.Bn(e,o,t,!0));l.push(...this.createRange(h,d,f))}return l}Bn(e,t,n,r){const i=new Sa(e,z.empty(),t,n);return r?i:i.En()}Ln(e,t,n,r){const i=new Sa(e,z.empty(),t,n);return r?i.En():i}Fn(e,t){const n=new Na(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.gn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.vn(t);return ve.forEach(r,t=>this.Fn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new nn(B.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}kn(e,t){const n=new Ea;for(const r of se(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.ln(r.kind);ga.Wt.Dt(e,i)}return n.un()}Nn(e){const t=new Ea;return ga.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const n=new Ea;return ga.Wt.Dt(Vn(this.databaseId,t),n.ln(function(e){const t=se(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.un()}xn(e,t,n){if(null===n)return[];let r=[];r.push(new Ea);let i=0;for(const s of se(e)){const e=n[i++];for(const n of r)if(this.qn(t,s.fieldPath)&&jn(e))r=this.Un(r,s,e);else{const t=n.ln(s.kind);ga.Wt.Dt(e,t)}}return this.$n(r)}Mn(e,t,n){return this.xn(e,t,n.position)}$n(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Un(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Ea;n.seed(e.un()),ga.Wt.Dt(s,n.ln(t.kind)),i.push(n)}return i}qn(e,t){return!!e.filters.find(e=>e instanceof or&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Ga(e),r=Ka(e);return(t?n.H(Et,IDBKeyRange.bound(t,t)):n.H()).next(e=>{const t=[];return ve.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new le(t.sequenceNumber,new de(na(t.readTime),new z(Be(t.documentKey)),t.largestBatchId)):le.empty(),r=e.fields.map(e=>{let[t,n]=e;return new oe(B.fromServerFormat(t),n)});return new re(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:R(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=Ga(e),i=Ka(e);return this.Wn(e).next(e=>r.H(Et,IDBKeyRange.bound(t,t)).next(t=>ve.forEach(t,t=>i.put(la(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return ve.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?ve.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),ve.forEach(i,n=>this.Qn(e,t,n).next(t=>{const i=this.Gn(r,n);return t.isEqual(i)?ve.resolve():this.zn(e,r,n,t,i)}))))})}jn(e,t,n,r){return qa(e).put(r.Rn(this.uid,this.Kn(n,t.key),t.key))}Hn(e,t,n,r){return qa(e).delete(r.An(this.uid,this.Kn(n,t.key),t.key))}Qn(e,t,n){const r=qa(e);let i=new nn(Ia);return r.ee({index:xt,range:IDBKeyRange.only([n.indexId,this.uid,Ca(this.Kn(n,t))])},(e,r)=>{i=i.add(new Sa(n.indexId,t,ka(r.arrayValue),ka(r.directionalValue)))}).next(()=>i)}Gn(e,t){let n=new nn(Ia);const r=this.kn(t,e);if(null==r)return n;const i=ie(t);if(null!=i){const s=e.data.field(i.fieldPath);if(jn(s))for(const i of s.arrayValue.values||[])n=n.add(new Sa(t.indexId,e.key,this.Nn(i),r))}else n=n.add(new Sa(t.indexId,e.key,za,r));return n}zn(e,t,n,r,i){f(Ba,"Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),a=t.getIterator();let o=sn(s),c=sn(a);for(;o||c;){let e=!1,t=!1;if(o&&c){const r=n(o,c);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(c),c=sn(a)):t?(i(o),o=sn(s)):(o=sn(s),c=sn(a))}}(r,i,Ia,r=>{s.push(this.jn(e,t,n,r))},r=>{s.push(this.Hn(e,t,n,r))}),ve.waitFor(s)}Wn(e){let t=1;return Ka(e).ee({index:At,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Ia(e,t)).filter((e,t,n)=>!t||0!==Ia(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=Ia(s,e),i=Ia(s,t);if(0===n)r[0]=e.En();else if(n>0&&i<0)r.push(s),r.push(s.En());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Jn(r[s],r[s+1]))return[];const e=r[s].An(this.uid,za,z.empty()),t=r[s+1].An(this.uid,za,z.empty());i.push(IDBKeyRange.bound(e,t))}return i}Jn(e,t){return Ia(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ya)}getMinOffset(e,t){return ve.mapArray(this.vn(t),t=>this.Fn(e,t).next(e=>e||v(44426))).next(Ya)}}function Ha(e){return Yt(e,vt)}function qa(e){return Yt(e,kt)}function Ga(e){return Yt(e,Tt)}function Ka(e){return Yt(e,St)}function Ya(e){w(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;fe(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new de(t.readTime,t.documentKey,n)}const Qa={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xa=41943040;class Ja{static withCacheSize(e){return new Ja(e,Ja.DEFAULT_COLLECTION_PERCENTILE,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function $a(e,t,n){const r=e.store(Ge),i=e.store(Ze),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const c=r.ee({range:a},(e,t,n)=>(o++,n.delete()));s.push(c.next(()=>{w(1===o,47070,{batchId:n.batchId})}));const l=[];for(const u of n.mutations){const e=Je(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return ve.waitFor(s).next(()=>l)}function Za(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v(14731);t=e.noDocument}return JSON.stringify(t).length}Ja.DEFAULT_COLLECTION_PERCENTILE=10,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ja.DEFAULT=new Ja(Xa,Ja.DEFAULT_COLLECTION_PERCENTILE,Ja.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ja.DISABLED=new Ja(-1,0,0);class eo{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Zn={}}static wt(e,t,n,r){w(""!==e.uid,64387);const i=e.isAuthenticated()?e.uid:"";return new eo(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return no(e).ee({index:Ye,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=ro(e),s=no(e);return s.add({}).next(a=>{w("number"==typeof a,49019);const o=new Wi(a,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>Ms(e.yt,t)),i=n.mutations.map(t=>Ms(e.yt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,o),l=[];let u=new nn((e,t)=>R(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Je(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,$e))}return u.forEach(t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Zn[a]=o.keys()}),ve.waitFor(l).next(()=>o)})}lookupMutationBatch(e,t){return no(e).get(t).next(e=>e?(w(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),ra(this.serializer,e)):null)}Xn(e,t){return this.Zn[t]?ve.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Zn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return no(e).ee({index:Ye,range:r},(e,t,r)=>{t.userId===this.userId&&(w(t.batchId>=n,47524,{Yn:n}),i=ra(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Pe;return no(e).ee({index:Ye,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Pe],[this.userId,Number.POSITIVE_INFINITY]);return no(e).H(Ye,t).next(e=>e.map(e=>ra(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Xe(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ro(e).ee({range:r},(n,r,s)=>{const[a,o,c]=n,l=Be(o);if(a===this.userId&&t.path.isEqual(l))return no(e).get(c).next(e=>{if(!e)throw v(61480,{er:n,batchId:c});w(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:c}),i.push(ra(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nn(R);const r=[];return t.forEach(t=>{const i=Xe(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=ro(e).ee({range:s},(e,r,i)=>{const[s,a,o]=e,c=Be(a);s===this.userId&&t.path.isEqual(c)?n=n.add(o):i.done()});r.push(a)}),ve.waitFor(r).next(()=>this.tr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Xe(this.userId,n),s=IDBKeyRange.lowerBound(i);let a=new nn(R);return ro(e).ee({range:s},(e,t,i)=>{const[s,o,c]=e,l=Be(o);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(a=a.add(c)):i.done()}).next(()=>this.tr(e,a))}tr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(no(e).get(t).next(e=>{if(null===e)throw v(35274,{batchId:t});w(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(ra(this.serializer,e))}))}),ve.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return $a(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.nr(t.batchId)}),ve.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ro(e).ee({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Be(e[1]);r.push(t)}else n.done()}).next(()=>{w(0===r.length,56720,{rr:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return to(e,this.userId,t)}ir(e){return io(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Pe,lastStreamToken:""})}}function to(e,t,n){const r=Xe(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return ro(e).ee({range:s,Y:!0},(e,n,r)=>{const[s,o,c]=e;s===t&&o===i&&(a=!0),r.done()}).next(()=>a)}function no(e){return Yt(e,Ge)}function ro(e){return Yt(e,Ze)}function io(e){return Yt(e,qe)}class so{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new so(0)}static ar(){return new so(-1)}}class ao{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next(t=>{const n=new so(t.highestTargetId);return t.highestTargetId=n.next(),this.cr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.ur(e).next(e=>te.fromTimestamp(new ee(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.ur(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.ur(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.cr(e,r)))}addTargetData(e,t){return this.lr(e,t).next(()=>this.ur(e).next(n=>(n.targetCount+=1,this.hr(t,n),this.cr(e,n))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oo(e).delete(t.targetId)).next(()=>this.ur(e)).next(t=>(w(t.targetCount>0,8065),t.targetCount-=1,this.cr(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return oo(e).ee((s,a)=>{const o=ia(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,i.push(this.removeTargetData(e,o)))}).next(()=>ve.waitFor(i)).next(()=>r)}forEachTarget(e,t){return oo(e).ee((e,n)=>{const r=ia(n);t(r)})}ur(e){return co(e).get(mt).next(e=>(w(null!==e,2888),e))}cr(e,t){return co(e).put(mt,t)}lr(e,t){return oo(e).put(sa(this.serializer,t))}hr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.ur(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Cr(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return oo(e).ee({range:r,index:lt},(e,n,r)=>{const s=ia(n);kr(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=lo(e);return t.forEach(t=>{const s=Ve(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),ve.waitFor(r)}removeMatchingKeys(e,t,n){const r=lo(e);return ve.forEach(t,t=>{const i=Ve(t.path);return ve.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=lo(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lo(e);let i=ci();return r.ee({range:n,Y:!0},(e,t,n)=>{const r=Be(e[1]),s=new z(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Ve(t.path),r=IDBKeyRange.bound([n],[L(n)],!1,!0);let i=0;return lo(e).ee({index:ft,Y:!0,range:r},(e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())}).next(()=>i>0)}At(e,t){return oo(e).get(t).next(e=>e?ia(e):null)}}function oo(e){return Yt(e,ct)}function co(e){return Yt(e,gt)}function lo(e){return Yt(e,ht)}const uo="LruGarbageCollector",ho=1048576;function fo(e,t){let[n,r]=e,[i,s]=t;const a=R(n,i);return 0===a?R(r,s):a}class po{constructor(e){this.Pr=e,this.buffer=new nn(fo),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();fo(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mo{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Ar(e){f(uo,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Se(e)?f(uo,"Ignoring IndexedDB error during garbage collection: ",e):await ge(e)}await this.Ar(3e5)})}}class go{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(Re.ce);const n=new po(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.mr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(Qa)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Qa):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,s,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),d()<=o.LogLevel.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(c-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-c)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),ve.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function vo(e,t){return new go(e,t)}class yo{constructor(e,t){this.db=e,this.garbageCollector=vo(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,(e,n)=>t(n))}addReference(e,t,n){return wo(e,n)}removeReference(e,t,n){return wo(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return wo(e,t)}wr(e,t){return function(e,t){let n=!1;return io(e).te(r=>to(e,r,t).next(e=>(e&&(n=!0),ve.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.yr(e,(s,a)=>{if(a<=t){const t=this.wr(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,te.min()),lo(e).delete(function(e){return[0,Ve(e.path)]}(s))))});r.push(t)}}).next(()=>ve.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return wo(e,t)}yr(e,t){const n=lo(e);let r,i=Re.ce;return n.ee({index:ft},(e,n)=>{let[s,a]=e,{path:o,sequenceNumber:c}=n;0===s?(i!==Re.ce&&t(new z(Be(r)),i),i=c,r=o):i=Re.ce}).next(()=>{i!==Re.ce&&t(new z(Be(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wo(e,t){return lo(e).put(function(e,t){return{targetId:0,path:Ve(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class bo{constructor(){this.changes=new Jr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ve.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _o{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Io(e).put(n)}removeEntry(e,t,n){return Io(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ea(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.br(e,n)))}getEntry(e,t){let n=er.newInvalidDocument(t);return Io(e).ee({index:nt,range:IDBKeyRange.only(Ao(t))},(e,r)=>{n=this.Sr(t,r)}).next(()=>n)}Dr(e,t){let n={size:0,document:er.newInvalidDocument(t)};return Io(e).ee({index:nt,range:IDBKeyRange.only(Ao(t))},(e,r)=>{n={document:this.Sr(t,r),size:Za(r)}}).next(()=>n)}getEntries(e,t){let n=Zr();return this.Cr(e,t,(e,t)=>{const r=this.Sr(e,t);n=n.insert(e,r)}).next(()=>n)}vr(e,t){let n=Zr(),r=new Zt(z.comparator);return this.Cr(e,t,(e,t)=>{const i=this.Sr(e,t);n=n.insert(e,i),r=r.insert(e,Za(t))}).next(()=>({documents:n,Fr:r}))}Cr(e,t,n){if(t.isEmpty())return ve.resolve();let r=new nn(ko);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(Ao(r.first()),Ao(r.last())),s=r.getIterator();let a=s.getNext();return Io(e).ee({index:nt,range:i},(e,t,r)=>{const i=z.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&ko(a,i)<0;)n(a,null),a=s.getNext();a&&a.isEqual(i)&&(n(a,t),a=s.hasNext()?s.getNext():null),a?r.j(Ao(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),ea(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Io(e).H(IDBKeyRange.bound(a,o,!0)).next(e=>{null===i||void 0===i||i.incrementDocumentReadCount(e.length);let n=Zr();for(const i of e){const e=this.Sr(z.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Kr(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=Zr();const s=Co(t,n),a=Co(t,de.max());return Io(e).ee({index:it,range:IDBKeyRange.bound(s,a,!0)},(e,t,n)=>{const s=this.Sr(z.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new Eo(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return So(e).get(ot).next(e=>(w(!!e,20021),e))}br(e,t){return So(e).put(ot,t)}Sr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Os(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=z.fromSegments(t.noDocument.path),r=na(t.noDocument.readTime);n=er.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return v(56709);{const e=z.fromSegments(t.unknownDocument.path),r=na(t.unknownDocument.version);n=er.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ee(e[0],e[1]);return te.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(te.min()))return e}return er.newInvalidDocument(e)}}function To(e){return new _o(e)}class Eo extends bo{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Jr(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new nn((e,t)=>R(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const a=this.Or.get(i);if(t.push(this.Mr.removeEntry(e,i,a.readTime)),s.isValidDocument()){const o=Zs(this.Mr.serializer,s);r=r.add(i.path.popLast());const c=Za(o);n+=c-a.size,t.push(this.Mr.addEntry(e,i,o))}else if(n-=a.size,this.trackRemovals){const n=Zs(this.Mr.serializer,s.convertToNoDocument(te.min()));t.push(this.Mr.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Mr.updateMetadata(e,n)),ve.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next(e=>(this.Or.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Mr.vr(e,t).next(e=>{let{documents:t,Fr:n}=e;return n.forEach((e,n)=>{this.Or.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function So(e){return Yt(e,at)}function Io(e){return Yt(e,et)}function Ao(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Co(e,t){const n=t.documentKey.path.toArray();return[e,ea(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ko(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=R(n[s],r[s]),i)return i;return i=R(n.length,r.length),i||(i=R(n[n.length-2],r[r.length-2]),i||R(n[n.length-1],r[r.length-1]))}class No{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class xo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Pi(n.mutation,e,an.empty(),ee.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ci()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci();const r=ri();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ti();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ri();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ci()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Zr();const s=si(),a=si();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Fi)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Pi(a.mutation,t,a.mutation.getFieldMask(),ee.now())):s.set(t.key,an.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new No(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=si();let r=new Zt((e,t)=>e-t),i=ci();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||an.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||ci()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,c=r.value,l=ii();c.forEach(e=>{if(!i.has(e)){const r=Di(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,l))}return ve.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return Fr(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vr(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ve.resolve(ri());let a=ne,o=i;return s.next(t=>ve.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?ve.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,ci())).next(e=>({batchId:a,changes:ni(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(e=>{let t=ti();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ti();return this.indexManager.getCollectionParents(e,i).next(a=>ve.forEach(a,a=>{const o=function(e,t){return new Pr(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,er.newInvalidDocument(r)))});let n=ti();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Pi(s.mutation,r,an.empty(),ee.now()),Kr(t,r)&&(n=n.insert(e,r))}),n})}}class Do{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ve.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ts(e.createTime)}}(t)),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:aa(e.bundledQuery),readTime:Ts(e.readTime)}}(t)),ve.resolve()}}class Ro{constructor(){this.overlays=new Zt(z.comparator),this.Lr=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ri();return ve.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.bt(e,t,r)}),ve.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Lr.delete(n)),ve.resolve()}getOverlaysForCollection(e,t,n){const r=ri(),i=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ve.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Zt((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ri(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ri(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ve.resolve(a)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qi(t,n));let i=this.Lr.get(t);void 0===i&&(i=ci(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}class Po{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ve.resolve()}}class Oo{constructor(){this.kr=new nn(Mo.Kr),this.qr=new nn(Mo.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new Mo(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Mo(e,t))}Qr(e,t){e.forEach(e=>this.removeReference(e,t))}Gr(e){const t=new z(new U([])),n=new Mo(t,e),r=new Mo(t,e+1),i=[];return this.qr.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new z(new U([])),n=new Mo(t,e),r=new Mo(t,e+1);let i=ci();return this.qr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Mo(e,0),n=this.kr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Mo{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return z.comparator(e.key,t.key)||R(e.Hr,t.Hr)}static Ur(e,t){return R(e.Hr,t.Hr)||z.comparator(e.key,t.key)}}class Lo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new nn(Mo.Kr)}checkEmpty(e){return ve.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Wi(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Jr=this.Jr.add(new Mo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ve.resolve(s)}lookupMutationBatch(e,t){return ve.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return ve.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.mutationQueue.length?Pe:this.Yn-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Mo(t,0),r=new Mo(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),ve.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nn(R);return t.forEach(e=>{const t=new Mo(e,0),r=new Mo(e,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),ve.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;z.isDocumentKey(i)||(i=i.child(""));const s=new Mo(new z(i),0);let a=new nn(R);return this.Jr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},s),ve.resolve(this.Yr(a))}Yr(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){w(0===this.ei(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Jr;return ve.forEach(t.mutations,r=>{const i=new Mo(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Jr=n})}nr(e){}containsKey(e,t){const n=new Mo(t,0),r=this.Jr.firstAfterOrEqual(n);return ve.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Fo{constructor(e){this.ti=e,this.docs=new Zt(z.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ve.resolve(n?n.document.mutableCopy():er.newInvalidDocument(t))}getEntries(e,t){let n=Zr();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():er.newInvalidDocument(e))}),ve.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Zr();const s=t.path,a=new z(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||fe(he(a),n)<=0||(r.has(a.key)||Kr(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return ve.resolve(i)}getAllFromCollectionGroup(e,t,n,r){v(9500)}ni(e,t){return ve.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Vo(this)}getSize(e){return ve.resolve(this.size)}}class Vo extends bo{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)}),ve.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class Uo{constructor(e){this.persistence=e,this.ri=new Jr(e=>Cr(e),kr),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.ii=0,this.si=new Oo,this.targetCount=0,this.oi=so._r()}forEachTarget(e,t){return this.ri.forEach((e,n)=>t(n)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),ve.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new so(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.lr(t),ve.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ri.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ve.waitFor(i).next(()=>r)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return ve.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),ve.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ve.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return ve.resolve(n)}containsKey(e,t){return ve.resolve(this.si.containsKey(t))}}class jo{constructor(e,t){this._i={},this.overlays={},this.ai=new Re(0),this.ui=!1,this.ui=!0,this.ci=new Po,this.referenceDelegate=e(this),this.li=new Uo(this),this.indexManager=new Ua,this.remoteDocumentCache=function(e){return new Fo(e)}(e=>this.referenceDelegate.hi(e)),this.serializer=new $s(t),this.Pi=new Do(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ro,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new Lo(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){f("MemoryPersistence","Starting transaction:",e);const r=new Bo(this.ai.next());return this.referenceDelegate.Ti(),n(r).next(e=>this.referenceDelegate.Ii(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return ve.or(Object.values(this._i).map(n=>()=>n.containsKey(e,t)))}}class Bo extends me{constructor(e){super(),this.currentSequenceNumber=e}}class zo{constructor(e){this.persistence=e,this.Ri=new Oo,this.Ai=null}static Vi(e){return new zo(e)}get di(){if(this.Ai)return this.Ai;throw v(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),ve.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(e=>this.di.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.di.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.di,n=>{const r=z.fromPath(n);return this.mi(e,r).next(e=>{e||t.removeEntry(r,te.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return ve.or([()=>ve.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Wo{constructor(e,t){this.persistence=e,this.fi=new Jr(e=>Ve(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=vo(this,t)}static Vi(e,t){return new Wo(e,t)}Ti(){}Ii(e){return ve.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}mr(e,t){return ve.forEach(this.fi,(n,r)=>this.wr(e,n,r).next(e=>e?ve.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,r=>this.wr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,te.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ve.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ve.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ve.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fn(e.data.value)),t}wr(e,t,n){return ve.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.fi.get(t);return ve.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ho{constructor(e){this.serializer=e}k(e,t,n,r){const i=new we("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(We)}(e),function(e){e.createObjectStore(qe,{keyPath:"userId"});e.createObjectStore(Ge,{keyPath:Ke,autoIncrement:!0}).createIndex(Ye,Qe,{unique:!0}),e.createObjectStore(Ze)}(e),qo(e),function(e){e.createObjectStore(ze)}(e));let a=ve.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ht),e.deleteObjectStore(ct),e.deleteObjectStore(gt)}(e),qo(e)),a=a.next(()=>function(e){const t=e.store(gt),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return t.put(mt,n)}(i))),n<4&&r>=4&&(0!==n&&(a=a.next(()=>function(e,t){return t.store(Ge).H().next(n=>{e.deleteObjectStore(Ge),e.createObjectStore(Ge,{keyPath:Ke,autoIncrement:!0}).createIndex(Ye,Qe,{unique:!0});const r=t.store(Ge),i=n.map(e=>r.put(e));return ve.waitFor(i)})}(e,i))),a=a.next(()=>{!function(e){e.createObjectStore(wt,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(a=a.next(()=>this.gi(i))),n<6&&r>=6&&(a=a.next(()=>(function(e){e.createObjectStore(at)}(e),this.pi(i)))),n<7&&r>=7&&(a=a.next(()=>this.yi(i))),n<8&&r>=8&&(a=a.next(()=>this.wi(e,i))),n<9&&r>=9&&(a=a.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(a=a.next(()=>this.bi(i))),n<11&&r>=11&&(a=a.next(()=>{!function(e){e.createObjectStore(bt,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(_t,{keyPath:"name"})}(e)})),n<12&&r>=12&&(a=a.next(()=>{!function(e){const t=e.createObjectStore(Rt,{keyPath:Pt});t.createIndex(Ot,Mt,{unique:!1}),t.createIndex(Lt,Ft,{unique:!1})}(e)})),n<13&&r>=13&&(a=a.next(()=>function(e){const t=e.createObjectStore(et,{keyPath:tt});t.createIndex(nt,rt),t.createIndex(it,st)}(e)).next(()=>this.Si(e,i)).next(()=>e.deleteObjectStore(ze))),n<14&&r>=14&&(a=a.next(()=>this.Di(e,i))),n<15&&r>=15&&(a=a.next(()=>function(e){e.createObjectStore(Tt,{keyPath:"indexId",autoIncrement:!0}).createIndex(Et,"collectionGroup",{unique:!1});e.createObjectStore(St,{keyPath:It}).createIndex(At,Ct,{unique:!1});e.createObjectStore(kt,{keyPath:Nt}).createIndex(xt,Dt,{unique:!1})}(e))),n<16&&r>=16&&(a=a.next(()=>{t.objectStore(St).clear()}).next(()=>{t.objectStore(kt).clear()})),n<17&&r>=17&&(a=a.next(()=>{!function(e){e.createObjectStore(Vt,{keyPath:"name"})}(e)})),n<18&&r>=18&&s.isSafariOrWebkit()&&(a=a.next(()=>{t.objectStore(St).clear()}).next(()=>{t.objectStore(kt).clear()})),a}pi(e){let t=0;return e.store(ze).ee((e,n)=>{t+=Za(n)}).next(()=>{const n={byteSize:t};return e.store(at).put(ot,n)})}gi(e){const t=e.store(qe),n=e.store(Ge);return t.H().next(t=>ve.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,Pe],[t.userId,t.lastAcknowledgedBatchId]);return n.H(Ye,r).next(n=>ve.forEach(n,n=>{w(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=ra(this.serializer,n);return $a(e,t.userId,r).next(()=>{})}))}))}yi(e){const t=e.store(ht),n=e.store(ze);return e.store(gt).get(mt).next(e=>{const r=[];return n.ee((n,i)=>{const s=new U(n),a=function(e){return[0,Ve(e)]}(s);r.push(t.get(a).next(n=>n?ve.resolve():(n=>t.put({targetId:0,path:Ve(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>ve.waitFor(r))})}wi(e,t){e.createObjectStore(vt,{keyPath:yt});const n=t.store(vt),r=new ja,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ve(r)})}};return t.store(ze).ee({Y:!0},(e,t)=>{const n=new U(e);return i(n.popLast())}).next(()=>t.store(Ze).ee({Y:!0},(e,t)=>{let[n,r,s]=e;const a=Be(r);return i(a.popLast())}))}bi(e){const t=e.store(ct);return t.ee((e,n)=>{const r=ia(n),i=sa(this.serializer,r);return t.put(i)})}Si(e,t){const n=t.store(ze),r=[];return n.ee((e,n)=>{const i=t.store(et),s=function(e){return e.document?new z(U.fromString(e.document.name).popFirst(5)):e.noDocument?z.fromSegments(e.noDocument.path):e.unknownDocument?z.fromSegments(e.unknownDocument.path):v(36783)}(n).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>ve.waitFor(r))}Di(e,t){const n=t.store(Ge),r=To(this.serializer),i=new jo(zo.Vi,this.serializer.yt);return n.H().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ci();ra(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),ve.forEach(n,(e,n)=>{const s=new l(n),a=fa.wt(this.serializer,s),o=i.getIndexManager(s),c=eo.wt(s,this.serializer,o,i.referenceDelegate);return new xo(r,c,a,o).recalculateAndSaveOverlaysForDocumentKeys(new Kt(t,Re.ce),e).next()})})}}function qo(e){e.createObjectStore(ht,{keyPath:dt}).createIndex(ft,pt,{unique:!0}),e.createObjectStore(ct,{keyPath:"targetId"}).createIndex(lt,ut,{unique:!0}),e.createObjectStore(gt)}const Go="IndexedDbPersistence",Ko=18e5,Yo=5e3,Qo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Xo="main";class Jo{constructor(e,t,n,r,i,s,a,o,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Ci=i,this.window=s,this.document=a,this.Fi=c,this.Mi=l,this.xi=u,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=e=>Promise.resolve(),!Jo.v())throw new T(_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yo(this,r),this.Ki=t+Xo,this.serializer=new $s(o),this.qi=new be(this.Ki,this.xi,new Ho(this.serializer)),this.ci=new ma,this.li=new ao(this.referenceDelegate,this.serializer),this.remoteDocumentCache=To(this.serializer),this.Pi=new ua,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,!1===l&&p(Go,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new T(_.FAILED_PRECONDITION,Qo);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.li.getHighestSequenceNumber(e))}).then(e=>{this.ai=new Re(e,this.Fi)}).then(()=>{this.ui=!0}).catch(e=>(this.qi&&this.qi.close(),Promise.reject(e)))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget(async()=>{this.started&&await this.$i()}))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zo(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ji(e).next(e=>{e||(this.isPrimary=!1,this.Ci.enqueueRetryable(()=>this.ki(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Ji(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(Se(e))return f(Go,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return f(Go,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable(()=>this.ki(e)),this.isPrimary=e})}ji(e){return $o(e).get(He).next(e=>ve.resolve(this.Xi(e)))}Yi(e){return Zo(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Ko)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Yt(e,wt);return t.H().next(e=>{const n=this.ns(e,Ko),r=e.filter(e=>-1===n.indexOf(e));return ve.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.$i().then(()=>this.es()).then(()=>this.Gi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?ve.resolve(!0):$o(e).get(He).next(t=>{if(null!==t&&this.ts(t.leaseTimestampMs,Yo)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new T(_.FAILED_PRECONDITION,Qo);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zo(e).H().next(e=>void 0===this.ns(e,Yo).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&f(Go,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[We,wt],e=>{const t=new Kt(e,Re.ce);return this.Ji(t).next(()=>this.Yi(t))}),this.qi.close(),this.ls()}ns(e,t){return e.filter(e=>this.ts(e.updateTimeMs,t)&&!this.ss(e.clientId))}hs(){return this.runTransaction("getActiveClients","readonly",e=>Zo(e).H().next(e=>this.ns(e,Ko).map(e=>e.clientId)))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return eo.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Wa(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return fa.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,n){f(Go,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 18===e?Gt:17===e?qt:16===e?Ht:15===e?Wt:14===e?zt:13===e?Bt:12===e?jt:11===e?Ut:void v(60245)}(this.xi);let s;return this.qi.runTransaction(e,r,i,r=>(s=new Kt(r,this.ai?this.ai.next():Re.ce),"readwrite-primary"===t?this.ji(s).next(e=>!!e||this.Hi(s)).next(t=>{if(!t)throw p("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.Ci.enqueueRetryable(()=>this.ki(!1)),new T(_.FAILED_PRECONDITION,pe);return n(s)}).next(e=>this.Zi(s).next(()=>e)):this.Ps(s).next(()=>n(s)))).then(e=>(s.raiseOnCommittedEvent(),e))}Ps(e){return $o(e).get(He).next(e=>{if(null!==e&&this.ts(e.leaseTimestampMs,Yo)&&!this.ss(e.ownerId)&&!this.Xi(e)&&!(this.Mi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new T(_.FAILED_PRECONDITION,Qo)})}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $o(e).put(He,t)}static v(){return be.v()}Ji(e){const t=$o(e);return t.get(He).next(e=>this.Xi(e)?(f(Go,"Releasing primary lease."),t.delete(He)):ve.resolve())}ts(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(p("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Wi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ni=()=>{this.Ci.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.$i()))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground="visible"===this.document.visibilityState)}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Oi=()=>{this._s();const e=/(?:Version|Mobile)\/1[456]/;s.isSafari()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{var t;const n=null!==(null===(t=this.Ui)||void 0===t?void 0:t.getItem(this.rs(e)));return f(Go,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return p(Go,"Failed to get zombied client id.",e),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){p("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch(e){}}rs(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function $o(e){return Yt(e,We)}function Zo(e){return Yt(e,wt)}function ec(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class tc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=ci(),r=ci();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new tc(e,t.fromCache,n,r)}}class nc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rc{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=s.isSafari()?8:_e(s.getUA())>0?6:4}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ps(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new nc;return this.ys(e,t,n).next(r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)})}).next(()=>i.result)}ws(e,t,n,r){return n.documentReadCount<this.Vs?(d()<=o.LogLevel.DEBUG&&f("QueryEngine","SDK will not create cache indexes for query:",Gr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ve.resolve()):(d()<=o.LogLevel.DEBUG&&f("QueryEngine","Query:",Gr(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(d()<=o.LogLevel.DEBUG&&f("QueryEngine","The SDK decides to create cache indexes for query:",Gr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(t))):ve.resolve())}gs(e,t){if(Lr(t))return ve.resolve(null);let n=jr(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Wr(t,null,"F"),n=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ci(...r);return this.fs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ss(t,s,i,n.readTime)?this.gs(e,Wr(t,null,"F")):this.Ds(e,s,t,n)}))})))}ps(e,t,n,r){return Lr(t)||r.isEqual(te.min())?ve.resolve(null):this.fs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ss(t,s,n,r)?ve.resolve(null):(d()<=o.LogLevel.DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gr(t)),this.Ds(e,s,t,ue(r,ne)).next(e=>e))})}bs(e,t){let n=new nn(Qr(e));return t.forEach((t,r)=>{Kr(e,r)&&(n=n.add(r))}),n}Ss(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return d()<=o.LogLevel.DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Gr(t)),this.fs.getDocumentsMatchingQuery(e,t,de.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const ic="LocalStore";class sc{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new Zt(R),this.Fs=new Jr(e=>Cr(e),kr),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xo(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}}function ac(e,t,n,r){return new sc(e,t,n,r)}async function oc(e,t){const n=b(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=ci();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ns:e,removedBatchIds:i,addedBatchIds:s}))})})}function cc(e){const t=b(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.li.getLastRemoteSnapshotVersion(e))}function lc(e,t,n){let r=ci(),i=ci();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Zr();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(te.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):f(ic,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Bs:r,Ls:i}})}function uc(e,t){const n=b(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Pe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function hc(e,t){const n=b(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.li.getTargetData(e,t).next(i=>i?(r=i,ve.resolve(r)):n.li.allocateTargetId(e).next(i=>(r=new Js(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.li.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.vs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e})}async function dc(e,t,n){const r=b(e),i=r.vs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Se(e))throw e;f(ic,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function fc(e,t,n){const r=b(e);let i=te.min(),s=ci();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=b(e),i=r.Fs.get(n);return void 0!==i?ve.resolve(r.vs.get(i)):r.li.getTargetData(t,n)}(r,e,jr(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:te.min(),n?s:ci())).next(e=>(gc(r,Yr(t),e),{documents:e,ks:s})))}function pc(e,t){const n=b(e),r=b(n.li),i=n.vs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.At(e,t).next(e=>e?e.target:null))}function mc(e,t){const n=b(e),r=n.Ms.get(t)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.xs.getAllFromCollectionGroup(e,t,ue(r,ne),Number.MAX_SAFE_INTEGER)).then(e=>(gc(n,t,e),e))}function gc(e,t,n){let r=e.Ms.get(t)||te.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ms.set(t,r)}async function vc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci();const r=await hc(e,jr(aa(t.bundledQuery))),i=b(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=Ts(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Pi.saveNamedQuery(e,t);const a=r.withResumeToken(cn.EMPTY_BYTE_STRING,s);return i.vs=i.vs.insert(a.targetId,a),i.li.updateTargetData(e,a).next(()=>i.li.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.li.addMatchingKeys(e,n,r.targetId)).next(()=>i.Pi.saveNamedQuery(e,t))})}const yc="firestore_clients";function wc(e,t){return"".concat(yc,"_").concat(e,"_").concat(t)}const bc="firestore_mutations";function _c(e,t,n){let r="".concat(bc,"_").concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}const Tc="firestore_targets";function Ec(e,t){return"".concat(Tc,"_").concat(e,"_").concat(t)}const Sc="SharedClientState";class Ic{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new T(r.error.code,r.error.message))),s?new Ic(e,t,r.state,i):(p(Sc,"Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ac{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new T(n.error.code,n.error.message))),i?new Ac(e,n.state,r):(p(Sc,"Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ui();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Le(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Cc(e,i):(p(Sc,"Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class kc{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new kc(t.clientId,t.onlineState):(p(Sc,"Failed to parse online state: ".concat(e)),null)}}class Nc{constructor(){this.activeTargetIds=ui()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xc{constructor(e,t,n,r,i){this.window=e,this.Ci=t,this.persistenceKey=n,this.zs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new Zt(R),this.started=!1,this.Zs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=wc(this.persistenceKey,this.zs),this.Ys=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Js=this.Js.insert(this.zs,new Nc),this.eo=new RegExp("^".concat(yc,"_").concat(s,"_([^_]*)$")),this.no=new RegExp("^".concat(bc,"_").concat(s,"_(\\d+)(?:_(.*))?$")),this.ro=new RegExp("^".concat(Tc,"_").concat(s,"_(\\d+)$")),this.io=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.so=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const n of e){if(n===this.zs)continue;const e=this.getItem(wc(this.persistenceKey,n));if(e){const t=Cc.$s(n,e);t&&(this.Js=this.Js.insert(t.clientId,t))}}this.oo();const t=this.storage.getItem(this.io);if(t){const e=this._o(t);e&&this.ao(e)}for(const n of this.Zs)this.Hs(n);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,n){this.co(e,t,n),this.lo(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(Ec(this.persistenceKey,e));if(t){const r=Ac.$s(e,t);r&&(n=r.state)}}return t&&this.ho.Qs(e),this.oo(),n}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ec(this.persistenceKey,e))}updateQueryState(e,t,n){this.Po(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.lo(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return f(Sc,"READ",e,t),t}setItem(e,t){f(Sc,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){f(Sc,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(f(Sc,"EVENT",t.key,t.newValue),t.key===this.Xs)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.eo.test(t.key)){if(null==t.newValue){const e=this.Eo(t.key);return this.Ro(e,null)}{const e=this.Ao(t.key,t.newValue);if(e)return this.Ro(e.clientId,e)}}else if(this.no.test(t.key)){if(null!==t.newValue){const e=this.Vo(t.key,t.newValue);if(e)return this.mo(e)}}else if(this.ro.test(t.key)){if(null!==t.newValue){const e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(t.key===this.io){if(null!==t.newValue){const e=this._o(t.newValue);if(e)return this.ao(e)}}else if(t.key===this.Ys){const e=function(e){let t=Re.ce;if(null!=e)try{const n=JSON.parse(e);w("number"==typeof n,30636,{yo:e}),t=n}catch(e){p(Sc,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Re.ce&&this.sequenceNumberHandler(e)}else if(t.key===this.so){const e=this.wo(t.newValue);await Promise.all(e.map(e=>this.syncEngine.bo(e)))}}else this.Zs.push(t)})}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,n){const r=new Ic(this.currentUser,e,t,n),i=_c(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ws())}lo(e){const t=_c(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,n){const r=Ec(this.persistenceKey,e),i=new Ac(e,t,n);this.setItem(r,i.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const n=this.Eo(e);return Cc.$s(n,t)}Vo(e,t){const n=this.no.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ic.$s(new l(i),r,t)}fo(e,t){const n=this.ro.exec(e),r=Number(n[1]);return Ac.$s(r,t)}_o(e){return kc.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);f(Sc,"Ignoring mutation for non-active user ".concat(e.user.uid))}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const n=t?this.Js.insert(e,t):this.Js.remove(e),r=this.uo(this.Js),i=this.uo(n),s=[],a=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.Co(s,a).then(()=>{this.Js=n})}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=ui();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Dc{constructor(){this.vo=new Nc,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Nc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rc{Mo(e){}shutdown(){}}const Pc="ConnectivityMonitor";class Oc{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){f(Pc,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){f(Pc,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Mc=null;function Lc(){return null===Mc?Mc=268435456+Math.round(2147483648*Math.random()):Mc++,"0x"+Mc.toString(16)}const Fc="RestConnection",Vc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Uc{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.$o=this.databaseId.database===_n?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,i){const a=Lc(),o=this.Qo(e,t.toUriEncodedString());f(Fc,"Sending RPC '".concat(e,"' ").concat(a,":"),o,n);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,r,i);const{host:l}=new URL(o),u=s.isCloudWorkstation(l);return this.zo(e,o,c,n,u).then(t=>(f(Fc,"Received RPC '".concat(e,"' ").concat(a,": "),t),t),t=>{throw m(Fc,"RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t})}jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+u,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Qo(e,t){const n=Vc[e];let r="".concat(this.qo,"/v1/").concat(t,":").concat(n);return this.databaseInfo.apiKey&&(r="".concat(r,"?key=").concat(encodeURIComponent(this.databaseInfo.apiKey))),r}terminate(){}}class jc{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Bc="WebChannelConnection",zc=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};class Wc extends Uc{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Wc.c_){const e=c.getStatEventTarget();zc(e,c.Event.STAT_EVENT,e=>{e.stat===c.Stat.PROXY?f(Bc,"STAT_EVENT: detected buffering proxy"):e.stat===c.Stat.NOPROXY&&f(Bc,"STAT_EVENT: detected no buffering proxy")}),Wc.c_=!0}}zo(e,t,n,r,i){const s=Lc();return new Promise((i,a)=>{const o=new c.XhrIo;o.setWithCredentials(!0),o.listenOnce(c.EventType.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case c.ErrorCode.NO_ERROR:const n=o.getResponseJson();f(Bc,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case c.ErrorCode.TIMEOUT:f(Bc,"RPC '".concat(e,"' ").concat(s," timed out")),a(new T(_.DEADLINE_EXCEEDED,"Request time out"));break;case c.ErrorCode.HTTP_ERROR:const r=o.getStatus();if(f(Bc,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(t)>=0?t:_.UNKNOWN}(n.status);a(new T(e,n.message))}else a(new T(_.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new T(_.UNAVAILABLE,"Connection failed."));break;default:v(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{f(Bc,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);f(Bc,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Lc(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;void 0!==o&&(a.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");f(Bc,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);this.I_(u);let h=!1,d=!1;const p=new jc({Ho:t=>{d?f(Bc,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(f(Bc,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),f(Bc,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Jo:()=>u.close()});return zc(u,c.WebChannel.EventType.OPEN,()=>{d||(f(Bc,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.i_())}),zc(u,c.WebChannel.EventType.CLOSE,()=>{d||(d=!0,f(Bc,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.o_(),this.E_(u))}),zc(u,c.WebChannel.EventType.ERROR,t=>{d||(d=!0,m(Bc,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),p.o_(new T(_.UNAVAILABLE,"The operation could not be completed")))}),zc(u,c.WebChannel.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];w(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){f(Bc,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Yi[e];if(void 0!==t)return Ji(t)}(t),i=a.message;"NOT_FOUND"===t&&i.includes("database")&&i.includes("does not exist")&&i.includes(this.databaseId.database)&&m("Database '".concat(this.databaseId.database,"' not found. Please check your project configuration.")),void 0===n&&(n=_.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,p.o_(new T(n,i)),u.close()}else f(Bc,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.__(i)}}),Wc.u_(),setTimeout(()=>{p.s_()},0),p}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return c.createWebChannelTransport()}}function Hc(e){return new Wc(e)}function qc(){return"undefined"!=typeof window?window:null}function Gc(){return"undefined"!=typeof document?document:null}function Kc(e){return new vs(e,!0)}Wc.c_=!1;class Yc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&f("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.d_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Qc="PersistentStream";class Xc{constructor(e,t,n,r,i,s,a,o){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yc(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(p(t.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new T(_.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.Yo(()=>{n(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.H_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return f(Qc,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(f(Qc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jc extends Xc{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:v(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(w(void 0===t||"string"==typeof t,58123),cn.fromBase64String(t||"")):(w(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),cn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?_.UNKNOWN:Ji(e.code);return new T(t,e.message||"")}(a);n=new ls(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cs(e,r.document.name),s=Ts(r.document.updateTime),a=r.document.createTime?Ts(r.document.createTime):te.min(),o=new $n({mapValue:{fields:r.document.fields}}),c=er.newFoundDocument(i,s,a,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new os(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Cs(e,r.document),s=r.readTime?Ts(r.readTime):te.min(),a=er.newNoDocument(i,s),o=r.removedTargetIds||[];n=new os([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Cs(e,r.document),s=r.removedTargetIds||[];n=new os([],s,i,null)}else{if(!("filter"in t))return v(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ki(r,i),a=e.targetId;n=new cs(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return te.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?te.min():t.readTime?Ts(t.readTime):te.min()}(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=xs(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Nr(r)?{documents:Fs(e,r)}:{query:Vs(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=bs(e,t.resumeToken);const r=ys(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(te.min())>0){n.readTime=ws(e,t.snapshotVersion.toTimestamp());const r=ys(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return v(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=xs(this.serializer),t.removeTarget=e,this.K_(t)}}class $c extends Xc{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return w(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,w(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){w(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(w(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Ts(e.updateTime):Ts(t);return n.isEqual(te.min())&&(n=Ts(t)),new Ci(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ts(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=xs(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ms(this.serializer,e))};this.K_(t)}}class Zc{}class el extends Zc{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Wo(e,Ss(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new T(_.UNKNOWN,e.toString())})}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.jo(e,Ss(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new T(_.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function tl(e,t,n,r){return new el(e,t,n,r)}class nl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(p(t),this.aa=!1):f("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const rl="RemoteStore";class il{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(e=>{n.enqueueAndForget(async()=>{fl(this)&&(f(rl,"Restarting streams for network reachability change."),await async function(e){const t=b(e);t.Ea.add(4),await al(t),t.Va.set("Unknown"),t.Ea.delete(4),await sl(t)}(this))})}),this.Va=new nl(n,r)}}async function sl(e){if(fl(e))for(const t of e.Ra)await t(!0)}async function al(e){for(const t of e.Ra)await t(!1)}function ol(e,t){const n=b(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),dl(n)?hl(n):Rl(n).O_()&&ll(n,t))}function cl(e,t){const n=b(e),r=Rl(n);n.Ia.delete(t),r.O_()&&ul(n,t),0===n.Ia.size&&(r.O_()?r.L_():fl(n)&&n.Va.set("Unknown"))}function ll(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(te.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Rl(e).Z_(t)}function ul(e,t){e.da.$e(t),Rl(e).X_(t)}function hl(e){e.da=new hs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Rl(e).start(),e.Va.ua()}function dl(e){return fl(e)&&!Rl(e).x_()&&e.Ia.size>0}function fl(e){return 0===b(e).Ea.size}function pl(e){e.da=void 0}async function ml(e){e.Va.set("Online")}async function gl(e){e.Ia.forEach((t,n)=>{ll(e,t)})}async function vl(e,t){pl(e),dl(e)?(e.Va.ha(t),hl(e)):e.Va.set("Unknown")}async function yl(e,t,n){if(e.Va.set("Online"),t instanceof ls&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){f(rl,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wl(e,n)}else if(t instanceof os?e.da.Xe(t):t instanceof cs?e.da.st(t):e.da.tt(t),!n.isEqual(te.min()))try{const t=await cc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.da.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(cn.EMPTY_BYTE_STRING,r.snapshotVersion)),ul(e,t);const i=new Js(r.target,t,n,r.sequenceNumber);ll(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){f(rl,"Failed to raise snapshot:",t),await wl(e,t)}}async function wl(e,t,n){if(!Se(t))throw t;e.Ea.add(1),await al(e),e.Va.set("Offline"),n||(n=()=>cc(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{f(rl,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await sl(e)})}function bl(e,t){return t().catch(n=>wl(e,n,t))}async function _l(e){const t=b(e),n=Pl(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pe;for(;Tl(t);)try{const e=await uc(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,El(t,e)}catch(e){await wl(t,e)}Sl(t)&&Il(t)}function Tl(e){return fl(e)&&e.Ta.length<10}function El(e,t){e.Ta.push(t);const n=Pl(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function Sl(e){return fl(e)&&!Pl(e).x_()&&e.Ta.length>0}function Il(e){Pl(e).start()}async function Al(e){Pl(e).ra()}async function Cl(e){const t=Pl(e);for(const n of e.Ta)t.ea(n.mutations)}async function kl(e,t,n){const r=e.Ta.shift(),i=Hi.from(r,t,n);await bl(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await _l(e)}async function Nl(e,t){t&&Pl(e).Y_&&await async function(e,t){if(function(e){return Xi(e)&&e!==_.ABORTED}(t.code)){const n=e.Ta.shift();Pl(e).B_(),await bl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await _l(e)}}(e,t),Sl(e)&&Il(e)}async function xl(e,t){const n=b(e);n.asyncQueue.verifyOperationInProgress(),f(rl,"RemoteStore received new credentials");const r=fl(n);n.Ea.add(3),await al(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await sl(n)}async function Dl(e,t){const n=b(e);t?(n.Ea.delete(2),await sl(n)):t||(n.Ea.add(2),await al(n),n.Va.set("Unknown"))}function Rl(e){return e.ma||(e.ma=function(e,t,n){const r=b(e);return r.sa(),new Jc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:ml.bind(null,e),Yo:gl.bind(null,e),t_:vl.bind(null,e),J_:yl.bind(null,e)}),e.Ra.push(async t=>{t?(e.ma.B_(),dl(e)?hl(e):e.Va.set("Unknown")):(await e.ma.stop(),pl(e))})),e.ma}function Pl(e){return e.fa||(e.fa=function(e,t,n){const r=b(e);return r.sa(),new $c(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Al.bind(null,e),t_:Nl.bind(null,e),ta:Cl.bind(null,e),na:kl.bind(null,e)}),e.Ra.push(async t=>{t?(e.fa.B_(),await _l(e)):(await e.fa.stop(),e.Ta.length>0&&(f(rl,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Ol{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new E,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Ol(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ml(e,t){if(p("AsyncQueue","".concat(t,": ").concat(e)),Se(e))return new T(_.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ll{static emptySet(e){return new Ll(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||z.comparator(t.key,n.key):(e,t)=>z.comparator(e.key,t.key),this.keyedMap=ti(),this.sortedSet=new Zt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ll;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Fl{constructor(){this.ga=new Zt(z.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):v(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Vl{constructor(e,t,n,r,i,s,a,o,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Vl(e,t,Ll.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ul{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class jl{constructor(){this.queries=Bl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=b(e),r=n.queries;n.queries=Bl(),r.forEach((e,n)=>{for(const r of n.ba)r.onError(t)})}(this,new T(_.ABORTED,"Firestore shutting down"))}}function Bl(){return new Jr(e=>qr(e),Hr)}async function zl(e,t){const n=b(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.Da()&&(r=2):(s=new Ul,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ml(e,"Initialization of query '".concat(Gr(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.ba.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Gl(n)}async function Wl(e,t){const n=b(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ba.indexOf(t);e>=0&&(s.ba.splice(e,1),0===s.ba.length?i=t.Da()?0:1:!s.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Hl(e,t){const n=b(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ba)e.Fa(i)&&(r=!0);t.wa=i}}r&&Gl(n)}function ql(e,t,n){const r=b(e),i=r.queries.get(t);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(t)}function Gl(e){e.Ca.forEach(e=>{e.next()})}var Kl,Yl;(Yl=Kl||(Kl={})).Ma="default",Yl.Cache="cache";class Ql{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Vl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kl.Cache}}class Xl{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class Jl{constructor(e){this.serializer=e}Ks(e){return Cs(this.serializer,e)}qs(e){return e.metadata.exists?Os(this.serializer,e.document,!1):er.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Ts(e)}}class $l{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=Zl(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const n=U.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,r({},this.progress)):null}za(e){const t=new Map,n=new Jl(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ks(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||ci()).add(e);t.set(n,r)}}return t}async ja(e){const t=await async function(e,t,n,r){const i=b(e);let s=ci(),a=Zr();for(const l of n){const e=t.Ks(l.metadata.name);l.document&&(s=s.add(e));const n=t.qs(l);n.setReadTime(t.Us(l.metadata.readTime)),a=a.insert(e,n)}const o=i.xs.newChangeBuffer({trackRemovals:!0}),c=await hc(i,function(e){return jr(Mr(U.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>lc(e,o,a).next(t=>(o.apply(e),t)).next(t=>i.li.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.li.addMatchingKeys(e,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.Bs,t.Ls)).next(()=>t.Bs)))}(e,new Jl(this.serializer),this.Qa,this.$a.id),n=this.za(this.documents);for(const r of this.Wa)await vc(e,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function Zl(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class eu{constructor(e){this.key=e}}class tu{constructor(e){this.key=e}}class nu{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ci(),this.mutatedKeys=ci(),this.eu=Qr(e),this.tu=new Ll(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new Fl,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=Kr(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(l,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||c&&this.eu(u,c)<0)&&(a=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(o||c)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Ss:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Ya.size&&this.current&&!r?1:0,c=o!==this.Xa;return this.Xa=o,0!==s.length||c?{snapshot:new Vl(this.query,e.tu,i,s,e.mutatedKeys,0===o,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fl,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Za=this.Za.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Za=this.Za.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ci(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))});const t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new tu(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new eu(n))}),t}cu(e){this.Za=e.ks,this.Ya=ci();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Xa,this.hasCachedResults)}}const ru="SyncEngine";class iu{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class su{constructor(e){this.key=e,this.hu=!1}}class au{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Jr(e=>qr(e),Hr),this.Iu=new Map,this.Eu=new Set,this.Ru=new Zt(z.comparator),this.Au=new Map,this.Vu=new Oo,this.du={},this.mu=new Map,this.fu=so.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function ou(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Lu(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await lu(r,t,n,!0),i}async function cu(e,t){const n=Lu(e);await lu(n,t,!0,!1)}async function lu(e,t,n,r){const i=await hc(e.localStore,jr(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await uu(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&ol(e.remoteStore,i),o}async function uu(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await fc(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Tu(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await fc(e.localStore,t,!0),a=new nu(t,s.ks),o=a.ru(s.documents),c=as.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=a.applyChanges(o,e.isPrimaryClient,c);Tu(e,n,l.au);const u=new iu(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function hu(e,t,n){const r=b(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Hr(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await dc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cl(r.remoteStore,i.targetId),bu(r,i.targetId)}).catch(ge)):(bu(r,i.targetId),await dc(r.localStore,i.targetId,!0))}async function du(e,t){const n=b(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cl(n.remoteStore,r.targetId))}async function fu(e,t){const n=b(e);try{const e=await function(e,t){const n=b(e),r=t.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const a=[];t.targetChanges.forEach((s,o)=>{const c=i.get(o);if(!c)return;a.push(n.li.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.li.addMatchingKeys(e,s.addedDocuments,o)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?l=l.withResumeToken(cn.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(o,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,s)&&a.push(n.li.updateTargetData(e,l))});let o=Zr(),c=ci();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(lc(e,s,t.documentUpdates).next(e=>{o=e.Bs,c=e.Ls})),!r.isEqual(te.min())){const t=n.li.getLastRemoteSnapshotVersion(e).next(t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ve.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,c)).next(()=>o)}).then(e=>(n.vs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(w(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?w(r.hu,14607):e.removedDocuments.size>0&&(w(r.hu,42227),r.hu=!1))}),await Iu(n,e,t)}catch(e){await ge(e)}}function pu(e,t,n){const r=b(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=b(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.ba)i.va(t)&&(r=!0)}),r&&Gl(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function mu(e,t,n){const r=b(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Zt(z.comparator);e=e.insert(s,er.newNoDocument(s,te.min()));const n=ci().add(s),i=new ss(te.min(),new Map,new Zt(R),e,n);await fu(r,i),r.Ru=r.Ru.remove(s),r.Au.delete(t),Su(r)}else await dc(r.localStore,t,!1).then(()=>bu(r,t,n)).catch(ge)}async function gu(e,t){const n=b(e),r=t.batch.batchId;try{const e=await function(e,t){const n=b(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=ve.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);w(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ci();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);wu(n,r,null),yu(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Iu(n,e)}catch(e){await ge(e)}}async function vu(e,t,n){const r=b(e);try{const e=await function(e,t){const n=b(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(w(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);wu(r,t,n),yu(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Iu(r,e)}catch(n){await ge(n)}}function yu(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function wu(e,t,n){const r=b(e);let i=r.du[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function bu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach(t=>{e.Vu.containsKey(t)||_u(e,t)})}function _u(e,t){e.Eu.delete(t.path.canonicalString());const n=e.Ru.get(t);null!==n&&(cl(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),Su(e))}function Tu(e,t,n){for(const r of n)r instanceof eu?(e.Vu.addReference(r.key,t),Eu(e,r)):r instanceof tu?(f(ru,"Document no longer in limbo: "+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||_u(e,r.key)):v(19791,{wu:r})}function Eu(e,t){const n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(f(ru,"New document in limbo: "+n),e.Eu.add(r),Su(e))}function Su(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new z(U.fromString(t)),r=e.fu.next();e.Au.set(r,new su(n)),e.Ru=e.Ru.insert(n,r),ol(e.remoteStore,new Js(jr(Mr(n.path)),r,"TargetPurposeLimboResolution",Re.ce))}}async function Iu(e,t,n){const r=b(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=tc.Es(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.J_(i),await async function(e,t){const n=b(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ve.forEach(t,t=>ve.forEach(t.Ts,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ve.forEach(t.Is,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Se(e))throw e;f(ic,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.vs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(e,i)}}}(r.localStore,s))}async function Au(e,t){const n=b(e);if(!n.currentUser.isEqual(t)){f(ru,"User change. New user:",t.toKey());const e=await oc(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new T(_.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Iu(n,e.Ns)}}function Cu(e,t){const n=b(e),r=n.Au.get(t);if(r&&r.hu)return ci().add(r.key);{let e=ci();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function ku(e,t){const n=b(e),r=await fc(n.localStore,t.query,!0),i=t.view.cu(r);return n.isPrimaryClient&&Tu(n,t.targetId,i.au),i}async function Nu(e,t){const n=b(e);return mc(n.localStore,t).then(e=>Iu(n,e))}async function xu(e,t,n,r){const i=b(e),s=await function(e,t){const n=b(e),r=b(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xn(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):ve.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await _l(i.remoteStore):"acknowledged"===n||"rejected"===n?(wu(i,t,r||null),yu(i,t),function(e,t){b(b(e).mutationQueue).nr(t)}(i.localStore,t)):v(6720,"Unknown batchState",{bu:n}),await Iu(i,s)):f(ru,"Cannot apply mutation batch with id: "+t)}async function Du(e,t,n){const r=b(e),i=[],s=[];for(const a of t){let e;const t=r.Iu.get(a);if(t&&0!==t.length){e=await hc(r.localStore,jr(t[0]));for(const e of t){const t=r.Tu.get(e),n=await ku(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await pc(r.localStore,a);e=await hc(r.localStore,t),await uu(r,Ru(t),a,!1,e.resumeToken)}i.push(e)}return r.Pu.J_(s),i}function Ru(e){return Or(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Pu(e){return function(e){return b(b(e).persistence).hs()}(b(e).localStore)}async function Ou(e,t,n,r){const i=b(e);if(i.gu)return void f(ru,"Ignoring unexpected query state notification.");const s=i.Iu.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await mc(i.localStore,Yr(s[0])),r=ss.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,cn.EMPTY_BYTE_STRING);await Iu(i,e,r);break}case"rejected":await dc(i.localStore,t,!0),bu(i,t,r);break;default:v(64155,n)}}async function Mu(e,t,n){const r=Lu(e);if(r.gu){for(const e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){f(ru,"Adding an already active target "+e);continue}const t=await pc(r.localStore,e),n=await hc(r.localStore,t);await uu(r,Ru(t),n.targetId,!1,n.resumeToken),ol(r.remoteStore,n)}for(const e of n)r.Iu.has(e)&&await dc(r.localStore,e,!1).then(()=>{cl(r.remoteStore,e),bu(r,e)}).catch(ge)}}function Lu(e){const t=b(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=mu.bind(null,t),t.Pu.J_=Hl.bind(null,t.eventManager),t.Pu.yu=ql.bind(null,t.eventManager),t}function Fu(e){const t=b(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vu.bind(null,t),t}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return ac(this.persistence,new rc,e.initialUser,this.serializer)}Cu(e){return new jo(zo.Vi,this.serializer)}Du(e){return new Dc}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class Uu extends Vu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){w(this.persistence.referenceDelegate instanceof Wo,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new mo(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Ja.withCacheSize(this.cacheSizeBytes):Ja.DEFAULT;return new jo(e=>Wo.Vi(e,t),this.serializer)}}class ju extends Vu{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Fu(this.xu.syncEngine),await _l(this.xu.remoteStore),await this.persistence.zi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return ac(this.persistence,new rc,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new mo(n,e.asyncQueue,t)}Mu(e,t){const n=new De(t,this.persistence);return new xe(e.asyncQueue,n)}Cu(e){const t=ec(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ja.withCacheSize(this.cacheSizeBytes):Ja.DEFAULT;return new Jo(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,qc(),Gc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Dc}}class Bu extends ju{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof xc&&(this.sharedClientState.syncEngine={So:xu.bind(null,t),Do:Ou.bind(null,t),Co:Mu.bind(null,t),hs:Pu.bind(null,t),bo:Nu.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi(async e=>{await async function(e,t){const n=b(e);if(Lu(n),Fu(n),!0===t&&!0!==n.gu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Du(n,e.toArray());n.gu=!0,await Dl(n.remoteStore,!0);for(const r of t)ol(n.remoteStore,r)}else if(!1===t&&!1!==n.gu){const e=[];let t=Promise.resolve();n.Iu.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(bu(n,i),dc(n.localStore,i,!0))),cl(n.remoteStore,i)}),await t,await Du(n,e),function(e){const t=b(e);t.Au.forEach((e,n)=>{cl(t.remoteStore,n)}),t.Vu.zr(),t.Au=new Map,t.Ru=new Zt(z.comparator)}(n),n.gu=!1,await Dl(n.remoteStore,!1)}}(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Du(e){const t=qc();if(!xc.v(t))throw new T(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ec(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xc(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class zu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Au.bind(null,this.syncEngine),await Dl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jl}createDatastore(e){const t=Kc(e.databaseInfo.databaseId),n=Hc(e.databaseInfo);return tl(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new il(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>pu(this.syncEngine,e,0),Oc.v()?new Oc:new Rc)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new au(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=b(e);f(rl,"RemoteStore shutting down."),t.Ea.add(5),await al(t),t.Aa.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function Wu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}zu.provider={build:()=>new zu};class Hu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):p("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class qu{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new E,this.buffer=new Uint8Array,this.Lu=new TextDecoder("utf-8"),this.ku().then(e=>{e&&e.Ua()?this.metadata.resolve(e.qa.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null===e||void 0===e?void 0:e.qa))))},e=>this.metadata.reject(e))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.Ku();if(null===e)return null;const t=this.Lu.decode(e),n=Number(t);isNaN(n)&&this.qu("length string (".concat(t,") is not valid number"));const r=await this.Uu(n);return new Xl(JSON.parse(r),e.length+n)}$u(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Ku(){for(;this.$u()<0&&!await this.Wu(););if(0===this.buffer.length)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),new Error("Invalid bundle format: ".concat(e))}async Wu(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Gu{constructor(e,t){var n;this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw new Error("The first element of the bundle is not a metadata object, it is\n         ".concat(JSON.stringify(null===(n=r)||void 0===n?void 0:n.qa)));this.metadata=r;do{r=this.Su(),null!==r&&this.elements.push(r)}while(null!==r)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.Ku(),t=this.Uu(e);return new Xl(JSON.parse(t),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new T(_.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if("{"===this.bundleData[t]){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}class Ku{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new T(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=b(e),r={documents:t.map(e=>As(n.serializer,e))},i=await n.jo("BatchGetDocuments",n.serializer.databaseId,U.emptyPath(),r,t.length),s=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){w(!!t.found,43571),t.found.name,t.found.updateTime;const n=Cs(e,t.found.name),r=Ts(t.found.updateTime),i=t.found.createTime?Ts(t.found.createTime):te.min(),s=new $n({mapValue:{fields:t.found.fields}});return er.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){w(!!t.missing,3894),w(!!t.readTime,22933);const n=Cs(e,t.missing),r=Ts(t.readTime);return er.newNoDocument(n,r)}(e,t):v(7234,{result:t})}(n.serializer,e);s.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=s.get(e.toString());w(!!t,55234,{key:e}),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=z.fromPath(t);this.mutations.push(new zi(n,this.precondition(n)))}),await async function(e,t){const n=b(e),r={writes:t.map(e=>Ms(n.serializer,e))};await n.Wo("Commit",n.serializer.databaseId,U.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw v(50498,{Gu:e.constructor.name});t=te.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new T(_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(te.min())?ki.exists(!1):ki.updateTime(t):ki.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(te.min()))throw new T(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ki.updateTime(t)}return ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Yu{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.zu=n.maxAttempts,this.M_=new Yc(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_(async()=>{const e=new Ku(this.datastore),t=this.Ju(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Zu(e)}))}).catch(e=>{this.Zu(e)})})}Ju(e){try{const t=this.updateFunction(e);return!Oe(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Hu(),Promise.resolve()))):this.deferred.reject(e)}Xu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Xi(t)}return!1}}const Qu="FirestoreClient";class Xu{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=l.UNAUTHENTICATED,this.clientId=D.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{f(Qu,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(f(Qu,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new E;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ml(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ju(e,t){e.asyncQueue.verifyOperationInProgress(),f(Qu,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await oc(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function $u(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Zu(e);f(Qu,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>xl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>xl(t.remoteStore,n)),e._onlineComponents=t}async function Zu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){f(Qu,"Using user provided OfflineComponentProvider");try{await Ju(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===_.FAILED_PRECONDITION||e.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;m("Error using user provided cache. Falling back to memory cache: "+n),await Ju(e,new Vu)}}else f(Qu,"Using default OfflineComponentProvider"),await Ju(e,new Uu(void 0));return e._offlineComponents}async function eh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(f(Qu,"Using user provided OnlineComponentProvider"),await $u(e,e._uninitializedComponentsProvider._online)):(f(Qu,"Using default OnlineComponentProvider"),await $u(e,new zu))),e._onlineComponents}function th(e){return Zu(e).then(e=>e.persistence)}function nh(e){return Zu(e).then(e=>e.localStore)}function rh(e){return eh(e).then(e=>e.remoteStore)}function ih(e){return eh(e).then(e=>e.syncEngine)}function sh(e){return eh(e).then(e=>e.datastore)}async function ah(e){const t=await eh(e),n=t.eventManager;return n.onListen=ou.bind(null,t.syncEngine),n.onUnlisten=hu.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=cu.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=du.bind(null,t.syncEngine),n}function oh(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Zi().encode(e):e,function(e,t){return new qu(e,t)}(function(e,t){if(e instanceof Uint8Array)return Wu(e,t);if(e instanceof ArrayBuffer)return Wu(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Kc(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=b(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=b(e),r=Ts(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Pi.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Zl(r));const i=new $l(r,t.serializer);let s=await t.Su();for(;s;){const e=await i.Ga(s);e&&n._updateProgress(e),s=await t.Su()}const a=await i.ja(e.localStore);return await Iu(e,a.Ja,void 0),await function(e,t){const n=b(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Pi.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(a.progress),Promise.resolve(a.Ha)}catch(e){return m(ru,"Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await ih(e),i,r)})}function ch(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const lh="ComponentProvider",uh=new Map;function hh(e,t,n,r,i){return new bn(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,ch(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const dh="firestore.googleapis.com",fh=!0;class ph{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new T(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dh,this.ssl=fh}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:fh;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Xa;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ho)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ch(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new T(_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new T(_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new T(_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ph({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new T(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ph(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new I;switch(e.type){case"firstParty":return new k(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new T(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=uh.get(e);t&&(f(lh,"Removing Datastore"),uh.delete(e),t.terminate())}(this),Promise.resolve()}}function gh(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Q(e,mh);const a=s.isCloudWorkstation(t),o=e._getSettings(),c=r(r({},o),{},{emulatorOptions:e._getEmulatorOptions()}),u="".concat(t,":").concat(n);a&&(s.pingServer("https://".concat(u)),s.updateEmulatorBanner("Firestore",!0)),o.host!==dh&&o.host!==u&&m("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=r(r({},o),{},{host:u,ssl:a,emulatorOptions:i});if(!s.deepEqual(h,c)&&(e._setSettings(h),i.mockUserToken)){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=l.MOCK_USER;else{var d;t=s.createMockUserToken(i.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new T(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new l(r)}e._authCredentials=new A(new S(t,n))}}class vh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vh(this.firestore,e,this._query)}}class yh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yh(this.firestore,e,this._key)}toJSON(){return{type:yh._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(J(t,yh._jsonSchema))return new yh(e,n||null,new z(U.fromString(t.referencePath)))}}yh._jsonSchemaVersion="firestore/documentReference/1.0",yh._jsonSchema={type:X("string",yh._jsonSchemaVersion),referencePath:X("string")};class wh extends vh{constructor(e,t,n){super(e,t,Mr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yh(this.firestore,null,new z(e))}withConverter(e){return new wh(this.firestore,e,this._path)}}const bh="AsyncQueue";class _h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yc(this,"async_queue_retry"),this._c=()=>{const e=Gc();e&&f(bh,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Gc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Gc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new E;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(0!==this.Yu.length){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Se(e))throw e;f(bh,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,p("INTERNAL UNHANDLED ERROR: ",Th(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ol.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&v(47125,{Pc:Th(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Th(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Eh{constructor(){this._progressObserver={},this._taskCompletionResolver=new E,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sh extends mh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new _h,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _h(e),this._firestoreClient=void 0,await e}}}function Ih(e){if(e._terminated)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ah(e),e._firestoreClient}function Ah(e){var t,n,r,i;const s=e._freezeSettings(),a=hh(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,null===(n=e._app)||void 0===n?void 0:n.options.apiKey,s);e._componentsProvider||null!==(r=s.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(i=s.localCache)&&void 0!==i&&i._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Xu(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function Ch(e,t,n){if((e=Q(e,Sh))._firestoreClient||e._terminated)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new T(_.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},Ah(e)}class kh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kh(cn.fromBase64String(e))}catch(e){throw new T(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new kh(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(J(e,kh._jsonSchema))return kh.fromBase64String(e.bytes)}}kh._jsonSchemaVersion="firestore/bytes/1.0",kh._jsonSchema={type:X("string",kh._jsonSchemaVersion),bytes:X("string")};class Nh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new T(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new B(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xh{constructor(e){this._methodName=e}}class Dh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return R(this._lat,e._lat)||R(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dh._jsonSchemaVersion}}static fromJSON(e){if(J(e,Dh._jsonSchema))return new Dh(e.latitude,e.longitude)}}Dh._jsonSchemaVersion="firestore/geoPoint/1.0",Dh._jsonSchema={type:X("string",Dh._jsonSchemaVersion),latitude:X("number"),longitude:X("number")};class Rh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(J(e,Rh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Rh(e.vectorValues);throw new T(_.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rh._jsonSchemaVersion="firestore/vectorValue/1.0",Rh._jsonSchema={type:X("string",Rh._jsonSchemaVersion),vectorValues:X("object")};const Ph=/^__.*__$/;class Oh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Li(e,this.data,t,this.fieldTransforms)}}class Mh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v(40011,{dataSource:e})}}class Fh{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Fh(r(r({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $h(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(Lh(this.dataSource)&&Ph.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Vh{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Kc(e)}createContext(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Fh({dataSource:e,methodName:t,targetDoc:n,path:B.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}class Uh extends xh{_toFieldTransform(e){if(2!==e.dataSource)throw 1===e.dataSource?e.createError("".concat(this._methodName,"() can only appear at the top level of your update data")):e.createError("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uh}}function jh(e,t,n){return new Fh({dataSource:3,targetDoc:t.settings.targetDoc,methodName:e._methodName,arrayElement:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Bh extends xh{_toFieldTransform(e){return new Ai(e.path,new yi)}isEqual(e){return e instanceof Bh}}class zh extends xh{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=jh(this,e,!0),n=this.Ac.map(e=>qh(e,t)),r=new wi(n);return new Ai(e.path,r)}isEqual(e){return e instanceof zh&&s.deepEqual(this.Ac,e.Ac)}}class Wh extends xh{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=jh(this,e,!0),n=this.Ac.map(e=>qh(e,t)),r=new _i(n);return new Ai(e.path,r)}isEqual(e){return e instanceof Wh&&s.deepEqual(this.Ac,e.Ac)}}class Hh extends xh{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new Ei(e.serializer,fi(e.serializer,this.Vc));return new Ai(e.path,t)}isEqual(e){return e instanceof Hh&&this.Vc===e.Vc}}function qh(e,t){if(Kh(e=s.getModularInstance(e)))return Yh("Unsupported field value:",t,e),Gh(e,t);if(e instanceof xh)return function(e,t){if(!Lh(t.dataSource))throw t.createError("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.createError("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=qh(i,t.childContextForArray(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=s.getModularInstance(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ee.fromDate(e);return{timestampValue:ws(t.serializer,n)}}if(e instanceof ee){const n=new ee(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ws(t.serializer,n)}}if(e instanceof Dh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof kh)return{bytesValue:bs(t.serializer,e._byteString)};if(e instanceof yh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Es(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Rh)return function(e,t){const n=e instanceof Rh?e.toArray():e,r={fields:{[En]:{stringValue:An},[Cn]:{arrayValue:{values:n.map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return hi(t.serializer,e)})}}}};return{mapValue:r}}(e,t);if(Xs(e))return e._toProto(t.serializer);throw t.createError("Unsupported field value: ".concat(Y(e)))}(e,t)}function Gh(e,t){const n={};return $t(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xt(e,(e,r)=>{const i=qh(r,t.childContextForField(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Kh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ee||e instanceof Dh||e instanceof kh||e instanceof yh||e instanceof xh||e instanceof Rh||Xs(e))}function Yh(e,t,n){if(!Kh(n)||!K(n)){const r=Y(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Qh(e,t,n){if((t=s.getModularInstance(t))instanceof Nh)return t._internalPath;if("string"==typeof t)return Jh(e,t);throw $h("Field path arguments must be of type string or ",e,!1,void 0,n)}const Xh=new RegExp("[~\\*/\\[\\]]");function Jh(e,t,n){if(t.search(Xh)>=0)throw $h("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Nh(...t.split("."))._internalPath}catch(r){throw $h("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $h(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=" in field ".concat(r)),a&&(c+=" in document ".concat(i)),c+=")"),new T(_.INVALID_ARGUMENT,o+e+c)}function Zh(e,t){return e.some(e=>e.isEqual(t))}class ed{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw v(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Xt(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Cn].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>hn(e.doubleValue));return new Rh(n)}convertGeoPoint(e){return new Dh(hn(e.latitude),hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=yn(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(wn(e));default:return null}}convertTimestamp(e){const t=un(e);return new ee(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=U.fromString(e);w(Qs(n),9688,{name:e});const r=new Tn(n.get(1),n.get(3)),i=new z(n.popFirst(5));return r.isEqual(t)||p("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}class td{constructor(e){this.optionDefinitions=e}_getKnownOptions(e,t){const n=$n.empty();for(const i in this.optionDefinitions)if(this.optionDefinitions.hasOwnProperty(i)){const s=this.optionDefinitions[i];if(i in e){var r;const a=e[i];let o;s.nestedOptions&&K(a)?o={mapValue:{fields:new td(s.nestedOptions).getOptionsProto(t,a)}}:a&&(o=null!==(r=qh(a,t))&&void 0!==r?r:void 0),o&&n.set(B.fromServerFormat(s.serverName),o)}}return n}getOptionsProto(e,t,n){var r;const i=this._getKnownOptions(t,e);if(n){const t=new Map(Jt(n,(t,n)=>[B.fromServerFormat(n),void 0!==t?qh(t,e):null]));i.setAll(t)}return null!==(r=i.value.mapValue.fields)&&void 0!==r?r:{}}}class nd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dc=e,this.mc=t,this.fc=new td({indexMode:{serverName:"index_mode"}})}_readUserData(e){this.proto=this.fc.getOptionsProto(e,this.dc,this.mc)}}class rd{constructor(e,t){this.pipeline=e,this.options=t}_toProto(e){return{pipeline:this.pipeline._toProto(e),options:this.options.proto}}}t.AbstractUserDataWriter=ed,t.Bound=tr,t.ByteString=cn,t.Bytes=kh,t.C=_,t.CollectionReference=wh,t.CompositeFilter=cr,t.DatabaseId=Tn,t.DocumentKey=z,t.DocumentReference=yh,t.DocumentSet=Ll,t.FieldFilter=or,t.FieldIndex=re,t.FieldPath=Nh,t.FieldPath$1=B,t.FieldValue=xh,t.Firestore=Sh,t.FirestoreError=T,t.GeoPoint=Dh,t.IndexSegment=oe,t.IndexState=le,t.LoadBundleTask=Eh,t.M=F,t.ObjectValue=$n,t.OnlineComponentProvider=zu,t.OptionsUtil=td,t.OrderBy=ir,t.Precondition=ki,t.Query=vh,t.ResourcePath=U,t.StructuredPipeline=rd,t.Timestamp=ee,t.UserDataReader=Vh,t.VectorValue=Rh,t.ViewSnapshot=Vl,t.__PRIVATE_AggregateImpl=Gi,t.__PRIVATE_AutoId=D,t.__PRIVATE_BundleLoader=$l,t.__PRIVATE_DeleteMutation=Bi,t.__PRIVATE_EmptyAppCheckTokenProvider=class{getToken(){return Promise.resolve(new N(""))}invalidateToken(){}start(e,t){}shutdown(){}},t.__PRIVATE_EmptyAuthCredentialsProvider=I,t.__PRIVATE_ExpUserDataWriter=class extends ed{constructor(e){super(),this.firestore=e}convertBytes(e){return new kh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yh(this.firestore,null,t)}},t.__PRIVATE_FirebaseAppCheckTokenProvider=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,i._isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){w(void 0===this.o,3512);const n=e=>{null!=e.error&&f("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,f("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{f("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):f("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new N(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(w("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new N(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}},t.__PRIVATE_FirebaseAuthCredentialsProvider=class{constructor(e){this.t=e,this.currentUser=l.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){w(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new E;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new E,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{f("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(f("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new E)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(f("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(w("string"==typeof t.accessToken,31837,{l:t}),new S(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return w(null===e||"string"==typeof e,2055,{h:e}),new l(e)}},t.__PRIVATE_IndexedDbOfflineComponentProvider=ju,t.__PRIVATE_LruGcMemoryOfflineComponentProvider=Uu,t.__PRIVATE_MemoryOfflineComponentProvider=Vu,t.__PRIVATE_MultiTabOfflineComponentProvider=Bu,t.__PRIVATE_StructuredPipelineOptions=nd,t.__PRIVATE_cast=Q,t.__PRIVATE_createBundleReaderSync=function(e,t){return function(e,t){return new Gu(e,t)}(e,t)},t.__PRIVATE_databaseIdFromApp=function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new T(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tn(e.options.projectId,t)},t.__PRIVATE_debugAssert=function(e,t){e||v(57014,t)},t.__PRIVATE_documentKeySet=ci,t.__PRIVATE_fieldPathFromArgument=Qh,t.__PRIVATE_fieldPathFromDotSeparatedString=Jh,t.__PRIVATE_firestoreClientAddSnapshotsInSyncListener=function(e,t){const n=new Hu(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){b(e).Ca.add(t),t.next()}(await ah(e),n)),()=>{n.Nu(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){b(e).Ca.delete(t)}(await ah(e),n))}},t.__PRIVATE_firestoreClientDeleteAllFieldIndexes=function(e){return e.asyncQueue.enqueue(async()=>function(e){const t=b(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>n.deleteAllFieldIndexes(e))}(await nh(e)))},t.__PRIVATE_firestoreClientExecutePipeline=function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>{try{const r=await sh(e);n.resolve(async function(e,t){const n=b(e),r={database:xs(n.serializer),structuredPipeline:t._toProto(n.serializer)},i=await n.jo("ExecutePipeline",n.serializer.databaseId,U.emptyPath(),r),s=[];return i.forEach(e=>{if(e.results&&0!==e.results.length)return e.results.forEach(t=>s.push(Ps(n.serializer,e,t)));s.push(Ps(n.serializer,e))}),s}(r,t))}catch(e){n.reject(e)}}),n.promise},t.__PRIVATE_firestoreClientGetDocumentFromLocalCache=function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=b(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new T(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Ml(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await nh(e),t,n)),n.promise},t.__PRIVATE_firestoreClientGetDocumentViaSnapshotListener=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new E;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Hu({next:o=>{s.Nu(),t.enqueueAndForget(()=>Wl(e,a));const c=o.docs.has(n);!c&&o.fromCache?i.reject(new T(_.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&o.fromCache&&r&&"server"===r.source?i.reject(new T(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Ql(Mr(n.path),s,{includeMetadataChanges:!0,Ka:!0});return zl(e,a)}(await ah(e),e.asyncQueue,t,n,r)),r.promise},t.__PRIVATE_firestoreClientGetDocumentsFromLocalCache=function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await fc(e,t,!0),i=new nu(t,r.ks),s=i.ru(r.documents),a=i.applyChanges(s,!1);n.resolve(a.snapshot)}catch(e){const r=Ml(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await nh(e),t,n)),n.promise},t.__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new E;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Hu({next:n=>{s.Nu(),t.enqueueAndForget(()=>Wl(e,a)),n.fromCache&&"server"===r.source?i.reject(new T(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Ql(n,s,{includeMetadataChanges:!0,Ka:!0});return zl(e,a)}(await ah(e),e.asyncQueue,t,n,r)),r.promise},t.__PRIVATE_firestoreClientListen=function(e,t,n,r){const i=new Hu(r),s=new Ql(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>zl(await ah(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>Wl(await ah(e),s))}},t.__PRIVATE_firestoreClientRunAggregateQuery=function(e,t,n){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>{try{const i=await sh(e);r.resolve(async function(e,t,n){var r;const i=b(e),{request:s,gt:a,parent:o}=Us(i.serializer,Br(t),n);i.connection.Ko||delete s.parent;const c=(await i.jo("RunAggregationQuery",i.serializer.databaseId,o,s,1)).filter(e=>!!e.result);w(1===c.length,64727);const l=null===(r=c[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(l).reduce((e,t)=>(e[a[t]]=l[t],e),{})}(i,t,n))}catch(e){r.reject(e)}}),r.promise},t.__PRIVATE_firestoreClientSetIndexConfiguration=function(e,t){return e.asyncQueue.enqueue(async()=>async function(e,t){const n=b(e),r=n.indexManager,i=[];return n.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(n=>function(e,t,n,r,i){e=[...e],t=[...t],e.sort(n),t.sort(n);const s=e.length,a=t.length;let o=0,c=0;for(;o<a&&c<s;){const s=n(e[c],t[o]);s<0?i(e[c++]):s>0?r(t[o++]):(o++,c++)}for(;o<a;)r(t[o++]);for(;c<s;)i(e[c++])}(n,t,ae,t=>{i.push(r.addFieldIndex(e,t))},t=>{i.push(r.deleteFieldIndex(e,t))})).next(()=>ve.waitFor(i)))}(await nh(e),t))},t.__PRIVATE_firestoreClientSetPersistentCacheIndexAutoCreationEnabled=function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){b(e).Cs.As=t}(await nh(e),t))},t.__PRIVATE_firestoreClientTransaction=function(e,t,n){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>{const i=await sh(e);new Yu(e.asyncQueue,i,n,t,r).ju()}),r.promise},t.__PRIVATE_firestoreClientWrite=function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Fu(e);try{const e=await function(e,t){const n=b(e),r=ee.now(),i=t.reduce((e,t)=>e.add(t.key),ci());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Zr(),c=ci();return n.xs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Oi(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Fi(e.key,t,Zn(t.value.mapValue),ki.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:ni(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||(r=new Zt(R)),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await Iu(r,e.changes),await _l(r.remoteStore)}catch(e){const t=Ml(e,"Failed to persist write");n.reject(t)}}(await ih(e),t,n)),n.promise},t.__PRIVATE_fromBundledQuery=aa,t.__PRIVATE_fromDocument=Os,t.__PRIVATE_hardAssert=w,t.__PRIVATE_isBase64Available=function(){return"undefined"!=typeof atob},t.__PRIVATE_isCollectionGroupQuery=Vr,t.__PRIVATE_isCollectionReference=function(e){return e instanceof wh},t.__PRIVATE_isDocumentQuery$1=Fr,t.__PRIVATE_isNumber$1=function(e){return"number"==typeof e},t.__PRIVATE_isOptionalEqual=function(e,t,n){return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&n(e,t)},t.__PRIVATE_isPlainObject=K,t.__PRIVATE_isServerTimestamp=vn,t.__PRIVATE_isString=function(e){return"string"==typeof e},t.__PRIVATE_isUserData=function(e){return"function"==typeof e._readUserData},t.__PRIVATE_logDebug=f,t.__PRIVATE_logWarn=m,t.__PRIVATE_mapToArray=Jt,t.__PRIVATE_newQueryForPath=Mr,t.__PRIVATE_newSerializer=Kc,t.__PRIVATE_newUserDataReader=function(e){const t=e._freezeSettings(),n=Kc(e._databaseId);return new Vh(e._databaseId,!!t.ignoreUndefinedProperties,n)},t.__PRIVATE_parseData=qh,t.__PRIVATE_parseQueryValue=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qh(n,e.createContext(r?4:3,t))},t.__PRIVATE_parseSetData=function(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.createContext(s.merge||s.mergeFields?2:0,t,n,i);Yh("Data must be an object, but it was:",a,r);const o=Gh(r,a);let c,l;if(s.merge)c=new an(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Qh(t,r,n);if(!a.contains(i))throw new T(_.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Zh(e,i)||e.push(i)}c=new an(e),l=a.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=a.fieldTransforms;return new Oh(new $n(o),c,l)},t.__PRIVATE_parseUpdateData=function(e,t,n,r){const i=e.createContext(1,t,n);Yh("Data must be an object, but it was:",i,r);const a=[],o=$n.empty();Xt(r,(e,r)=>{const c=Jh(t,e,n);r=s.getModularInstance(r);const l=i.childContextForFieldPath(c);if(r instanceof Uh)a.push(c);else{const e=qh(r,l);null!=e&&(a.push(c),o.set(c,e))}});const c=new an(a);return new Mh(o,c,i.fieldTransforms)},t.__PRIVATE_parseUpdateVarargs=function(e,t,n,r,i,a){const o=e.createContext(1,t,n),c=[Qh(t,r,n)],l=[i];if(a.length%2!=0)throw new T(_.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let s=0;s<a.length;s+=2)c.push(Qh(t,a[s])),l.push(a[s+1]);const u=[],h=$n.empty();for(let f=c.length-1;f>=0;--f)if(!Zh(u,c[f])){const e=c[f];let t=l[f];t=s.getModularInstance(t);const n=o.childContextForFieldPath(e);if(t instanceof Uh)u.push(e);else{const r=qh(t,n);null!=r&&(u.push(e),h.set(e,r))}}const d=new an(u);return new Mh(h,d,o.fieldTransforms)},t.__PRIVATE_queryNormalizedOrderBy=Ur,t.__PRIVATE_queryWithAddedFilter=function(e,t){const n=e.filters.concat([t]);return new Pr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)},t.__PRIVATE_queryWithAddedOrderBy=function(e,t){const n=e.explicitOrderBy.concat([t]);return new Pr(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)},t.__PRIVATE_queryWithEndAt=function(e,t){return new Pr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)},t.__PRIVATE_queryWithLimit=Wr,t.__PRIVATE_queryWithStartAt=function(e,t){return new Pr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)},t.__PRIVATE_refValue=Vn,t.__PRIVATE_setSDKVersion=function(e){u=e},t.__PRIVATE_setTestingHooksSpi=function(e){if($i)throw new Error("a TestingHooksSpi instance is already set");$i=e},t.__PRIVATE_toMapValue=function(e,t){const n={fields:{}};return t.forEach((t,r)=>{if("string"!=typeof r)throw new Error("Cannot encode map with non-string key: ".concat(r));n.fields[r]=t._toProto(e)}),{mapValue:n}},t.__PRIVATE_toPipelineValue=function(e){return{pipelineValue:e}},t.__PRIVATE_toStringValue=function(e){return{stringValue:e}},t.__PRIVATE_validateIsNotUsedTogether=H,t.__PRIVATE_validateJSON=J,t.__PRIVATE_validatePositiveNumber=function(e,t){if(t<=0)throw new T(_.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))},t.__PRIVATE_valueDescription=Y,t._internalAggregationQueryToProtoRunAggregationQueryRequest=function(e,t){var n;const r=Jt(t,(e,t)=>new Gi(t,e.aggregateType,e._internalFieldPath)),i=null===(n=Ih(Q(e.firestore,Sh))._onlineComponents)||void 0===n?void 0:n.datastore.serializer;return void 0===i?null:Us(i,Br(e._query),r,!0).request},t._internalPipelineToExecutePipelineRequestProto=function(e){const t=function(e){if(e._terminated)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.");if(!uh.has(e)){f(lh,"Initializing Datastore");const t=Hc(hh(e._databaseId,e.app.options.appId||"",e._persistenceKey,e.app.options.apiKey,e._freezeSettings())),n=Kc(e._databaseId),r=tl(e._authCredentials,e._appCheckCredentials,t,n);uh.set(e,r)}return uh.get(e)}(Q(e._db,Sh)).serializer;if(void 0===t)return null;const n=new rd(e,new nd);return{database:xs(t),structuredPipeline:n._toProto(t)}},t._internalQueryToProtoQueryTarget=function(e){var t;const n=null===(t=Ih(Q(e.firestore,Sh))._onlineComponents)||void 0===t?void 0:t.datastore.serializer;return void 0===n?null:Vs(n,jr(e._query)).ft},t.arrayRemove=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Wh("arrayRemove",t)},t.arrayUnion=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zh("arrayUnion",t)},t.clearIndexedDbPersistence=function(e){if(e._initialized&&!e._terminated)throw new T(_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new E;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!be.v())return Promise.resolve();const t=e+Xo;await be.delete(t)}(ec(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise},t.collection=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=s.getModularInstance(e),W("collection","path",t),e instanceof mh){const n=U.fromString(t,...r);return G(n),new wh(e,null,n)}{if(!(e instanceof yh||e instanceof wh))throw new T(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(U.fromString(t,...r));return G(n),new wh(e.firestore,null,n)}},t.collectionGroup=function(e,t){if(e=Q(e,mh),W("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new T(_.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new vh(e,null,function(e){return new Pr(U.emptyPath(),e)}(t))},t.connectFirestoreEmulator=gh,t.deleteField=function(){return new Uh("deleteField")},t.disableNetwork=function(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await th(e),n=await rh(e);return t.setNetworkEnabled(!1),async function(e){const t=b(e);t.Ea.add(0),await al(t),t.Va.set("Offline")}(n)})}(Ih(e=Q(e,Sh)))},t.doc=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=s.getModularInstance(e),1===arguments.length&&(t=D.newId()),W("doc","path",t),e instanceof mh){const n=U.fromString(t,...r);return q(n),new yh(e,null,new z(n))}{if(!(e instanceof yh||e instanceof wh))throw new T(_.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(U.fromString(t,...r));return q(n),new yh(e.firestore,e instanceof wh?e.converter:null,new z(n))}},t.documentId=function(){return new Nh(F)},t.enableIndexedDbPersistence=function(e,t){m("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return Ch(e,zu.provider,{build:e=>new ju(e,n.cacheSizeBytes,null===t||void 0===t?void 0:t.forceOwnership)}),Promise.resolve()},t.enableMultiTabIndexedDbPersistence=async function(e){m("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();Ch(e,zu.provider,{build:e=>new Bu(e,t.cacheSizeBytes)})},t.enableNetwork=function(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await th(e),n=await rh(e);return t.setNetworkEnabled(!0),function(e){const t=b(e);return t.Ea.delete(0),sl(t)}(n)})}(Ih(e=Q(e,Sh)))},t.ensureFirestoreConfigured=Ih,t.fail=v,t.getFirestore=function(e,t){const n="object"==typeof e?e:i.getApp(),r="string"==typeof e?e:t||_n,a=i._getProvider(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const e=s.getDefaultEmulatorHostnameAndPort("firestore");e&&gh(a,...e)}return a},t.increment=function(e){return new Hh("increment",e)},t.initializeFirestore=function(e,t,n){n||(n=_n);const r=i._getProvider(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n}),i=r.getOptions(n);if(s.deepEqual(i,t))return e;throw new T(_.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new T(_.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<ho)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&s.isCloudWorkstation(t.host)&&s.pingServer(t.host),r.initialize({options:t,instanceIdentifier:n})},t.loadBundle=function(e,t){const n=Ih(e=Q(e,Sh)),r=new Eh;return oh(n,e._databaseId,t,r),r},t.namedQuery=function(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=b(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Pi.getNamedQuery(e,t))}(await nh(e),t))}(Ih(e=Q(e,Sh)),t).then(t=>t?new vh(e,null,t.query):null)},t.on=-1,t.property=X,t.queryEqual=function(e,t){return e=s.getModularInstance(e),t=s.getModularInstance(t),e instanceof vh&&t instanceof vh&&e.firestore===t.firestore&&Hr(e._query,t._query)&&e.converter===t.converter},t.refEqual=function(e,t){return e=s.getModularInstance(e),t=s.getModularInstance(t),(e instanceof yh||e instanceof wh)&&(t instanceof yh||t instanceof wh)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter},t.serverTimestamp=function(){return new Bh("serverTimestamp")},t.setLogLevel=function(e){h.setLogLevel(e)},t.terminate=function(e){return i._removeServiceInstance(e.app,"firestore",e._databaseId.database),e._delete()},t.toNumber=fi,t.vector=function(e){return new Rh(e)},t.waitForPendingWrites=function(e){return function(e){const t=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=b(e);fl(n.remoteStore)||f(ru,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=b(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(e===Pe)return void t.resolve();const r=n.mu.get(e)||[];r.push(t),n.mu.set(e,r)}catch(e){const n=Ml(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ih(e),t)),t.promise}(Ih(e=Q(e,Sh)))}},8968(e,t,n){"use strict";var r=n(2897).default;Object.defineProperty(t,"__esModule",{value:!0});var i=n(1098),s=n(5858),a=n(3708),o=n(8679);n(9193),n(9887),n(7761);const c="@firebase/firestore",l="4.11.0";function u(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class d{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new a.ObjectValue({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class f{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new a.DocumentReference(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new p(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e,t;return null!==(e=null===(t=this._document)||void 0===t?void 0:t.data.clone().value.mapValue.fields)&&void 0!==e?e:void 0}get(e){if(this._document){const t=this._document.data.field(a.__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class p extends f{data(){return super.data()}}function m(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new a.FirestoreError(a.C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g{}class v extends g{}class y extends v{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new y(e,t,n)}_apply(e){const t=this._parse(e);return C(e._query,t),new a.Query(e.firestore,e.converter,a.__PRIVATE_queryWithAddedFilter(e._query,t))}_parse(e){const t=a.__PRIVATE_newUserDataReader(e.firestore),n=function(e,t,n,r,i,s,o){let c;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){A(o,s);const t=[];for(const n of o)t.push(I(r,e,n));c={arrayValue:{values:t}}}else c=I(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||A(o,s),c=a.__PRIVATE_parseQueryValue(n,t,o,"in"===s||"not-in"===s);return a.FieldFilter.create(i,s,c)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class w extends g{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new w(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:a.CompositeFilter.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)C(n,i),n=a.__PRIVATE_queryWithAddedFilter(n,i)}(e._query,t),new a.Query(e.firestore,e.converter,a.__PRIVATE_queryWithAddedFilter(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class b extends v{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new b(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new a.OrderBy(t,n)}(e._query,this._field,this._direction);return new a.Query(e.firestore,e.converter,a.__PRIVATE_queryWithAddedOrderBy(e._query,t))}}class _ extends v{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new _(e,t,n)}_apply(e){return new a.Query(e.firestore,e.converter,a.__PRIVATE_queryWithLimit(e._query,this._limit,this._limitType))}}class T extends v{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new T(e,t,n)}_apply(e){const t=S(e,this.type,this._docOrFields,this._inclusive);return new a.Query(e.firestore,e.converter,a.__PRIVATE_queryWithStartAt(e._query,t))}}class E extends v{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new E(e,t,n)}_apply(e){const t=S(e,this.type,this._docOrFields,this._inclusive);return new a.Query(e.firestore,e.converter,a.__PRIVATE_queryWithEndAt(e._query,t))}}function S(e,t,n,r){if(n[0]=o.getModularInstance(n[0]),n[0]instanceof f)return function(e,t,n,r,i){if(!r)throw new a.FirestoreError(a.C.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of a.__PRIVATE_queryNormalizedOrderBy(e))if(o.field.isKeyField())s.push(a.__PRIVATE_refValue(t,r.key));else{const e=r.data.field(o.field);if(a.__PRIVATE_isServerTimestamp(e))throw new a.FirestoreError(a.C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new a.Bound(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=a.__PRIVATE_newUserDataReader(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const c=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!a.__PRIVATE_isCollectionGroupQuery(e)&&-1!==s.indexOf("/"))throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(a.ResourcePath.fromString(s));if(!a.DocumentKey.isDocumentKey(n))throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new a.DocumentKey(n);c.push(a.__PRIVATE_refValue(t,i))}else{const e=a.__PRIVATE_parseQueryValue(n,r,s);c.push(e)}}return new a.Bound(c,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function I(e,t,n){if("string"==typeof(n=o.getModularInstance(n))){if(""===n)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a.__PRIVATE_isCollectionGroupQuery(t)&&-1!==n.indexOf("/"))throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(a.ResourcePath.fromString(n));if(!a.DocumentKey.isDocumentKey(r))throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return a.__PRIVATE_refValue(e,new a.DocumentKey(r))}if(n instanceof a.DocumentReference)return a.__PRIVATE_refValue(e,n._key);throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(a.__PRIVATE_valueDescription(n),"."))}function A(e,t){if(!Array.isArray(e)||0===e.length)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function C(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new a.FirestoreError(a.C.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function k(e,t){if(!(t instanceof y||t instanceof w))throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}function N(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class x extends a.AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new a.Bytes(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new a.DocumentReference(this.firestore,null,t)}}function D(){return new h("count")}function R(e,t){const n=a.__PRIVATE_cast(e.firestore,a.Firestore),r=a.ensureFirestoreConfigured(n),i=a.__PRIVATE_mapToArray(t,(e,t)=>new a.__PRIVATE_AggregateImpl(t,e.aggregateType,e._internalFieldPath));return a.__PRIVATE_firestoreClientRunAggregateQuery(r,e._query,i).then(t=>function(e,t,n){const r=new a.__PRIVATE_ExpUserDataWriter(e);return new d(t,r,n)}(n,e,t))}class P{constructor(e){this.kind="memory",this._onlineComponentProvider=a.OnlineComponentProvider.provider,this._offlineComponentProvider=null!==e&&void 0!==e&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new a.__PRIVATE_LruGcMemoryOfflineComponentProvider(void 0)}}toJSON(){return{kind:this.kind}}}class O{constructor(e){let t;this.kind="persistent",null!==e&&void 0!==e&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=U(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class M{constructor(){this.kind="memoryEager",this._offlineComponentProvider=a.__PRIVATE_MemoryOfflineComponentProvider.provider}toJSON(){return{kind:this.kind}}}class L{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new a.__PRIVATE_LruGcMemoryOfflineComponentProvider(e)}}toJSON(){return{kind:this.kind}}}class F{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=a.OnlineComponentProvider.provider,this._offlineComponentProvider={build:t=>new a.__PRIVATE_IndexedDbOfflineComponentProvider(t,null===e||void 0===e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class V{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=a.OnlineComponentProvider.provider,this._offlineComponentProvider={build:t=>new a.__PRIVATE_MultiTabOfflineComponentProvider(t,null===e||void 0===e?void 0:e.cacheSizeBytes)}}}function U(e){return new F(null===e||void 0===e?void 0:e.forceOwnership)}const j="NOT SUPPORTED";class B{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class z extends f{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new W(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(a.__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new a.FirestoreError(a.C.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=z._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}z._jsonSchemaVersion="firestore/documentSnapshot/1.0",z._jsonSchema={type:a.property("string",z._jsonSchemaVersion),bundleSource:a.property("string","DocumentSnapshot"),bundleName:a.property("string"),bundle:a.property("string")};class W extends z{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class H{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new B(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new W(this._firestore,this._userDataWriter,n.key,n,new B(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new W(e._firestore,e._userDataWriter,n.doc.key,n.doc,new B(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new W(e._firestore,e._userDataWriter,t.doc.key,t.doc,new B(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:q(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new a.FirestoreError(a.C.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=H._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=a.__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function q(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return a.fail(61501,{type:e})}}H._jsonSchemaVersion="firestore/querySnapshot/1.0",H._jsonSchema={type:a.property("string",H._jsonSchemaVersion),bundleSource:a.property("string","QuerySnapshot"),bundleName:a.property("string"),bundle:a.property("string")};const G={maxAttempts:5};class K{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=a.__PRIVATE_newUserDataReader(e)}set(e,t,n){this._verifyNotCommitted();const r=Y(e,this._firestore),i=N(r.converter,t,n),s=a.__PRIVATE_parseSetData(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,a.Precondition.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Y(e,this._firestore);let i;for(var s=arguments.length,c=new Array(s>3?s-3:0),l=3;l<s;l++)c[l-3]=arguments[l];return i="string"==typeof(t=o.getModularInstance(t))||t instanceof a.FieldPath?a.__PRIVATE_parseUpdateVarargs(this._dataReader,"WriteBatch.update",r._key,t,n,c):a.__PRIVATE_parseUpdateData(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,a.Precondition.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Y(e,this._firestore);return this._mutations=this._mutations.concat(new a.__PRIVATE_DeleteMutation(t._key,a.Precondition.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new a.FirestoreError(a.C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Y(e,t){if((e=o.getModularInstance(e)).firestore!==t)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Q{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=a.__PRIVATE_newUserDataReader(e)}get(e){const t=Y(e,this._firestore),n=new x(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return a.fail(24041);const r=e[0];if(r.isFoundDocument())return new f(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new f(this._firestore,n,t._key,null,t.converter);throw a.fail(18433,{doc:r})})}set(e,t,n){const r=Y(e,this._firestore),i=N(r.converter,t,n),s=a.__PRIVATE_parseSetData(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Y(e,this._firestore);let i;for(var s=arguments.length,c=new Array(s>3?s-3:0),l=3;l<s;l++)c[l-3]=arguments[l];return i="string"==typeof(t=o.getModularInstance(t))||t instanceof a.FieldPath?a.__PRIVATE_parseUpdateVarargs(this._dataReader,"Transaction.update",r._key,t,n,c):a.__PRIVATE_parseUpdateData(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Y(e,this._firestore);return this._transaction.delete(t._key),this}}class X extends Q{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Y(e,this._firestore),n=new a.__PRIVATE_ExpUserDataWriter(this._firestore);return super.get(e).then(e=>new z(this._firestore,n,t._key,e._document,new B(!1,!1),t.converter))}}function J(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=o.getModularInstance(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||u(n[s])||(i=n[s++]);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(u(n[s])){var l,h,d;const e=n[s];n[s]=null===(l=e.next)||void 0===l?void 0:l.bind(e),n[s+1]=null===(h=e.error)||void 0===h?void 0:h.bind(e),n[s+2]=null===(d=e.complete)||void 0===d?void 0:d.bind(e)}let f,p,g;if(e instanceof a.DocumentReference)p=a.__PRIVATE_cast(e.firestore,a.Firestore),g=a.__PRIVATE_newQueryForPath(e._key.path),f={next:t=>{n[s]&&n[s](Z(p,e,t))},error:n[s+1],complete:n[s+2]};else{const t=a.__PRIVATE_cast(e,a.Query);p=a.__PRIVATE_cast(t.firestore,a.Firestore),g=t._query;const r=new a.__PRIVATE_ExpUserDataWriter(p);f={next:e=>{n[s]&&n[s](new H(p,r,t,e))},error:n[s+1],complete:n[s+2]},m(e._query)}const v=a.ensureFirestoreConfigured(p);return a.__PRIVATE_firestoreClientListen(v,g,c,f)}function $(e,t){const n=a.ensureFirestoreConfigured(e);return a.__PRIVATE_firestoreClientWrite(n,t)}function Z(e,t,n){const r=n.docs.get(t._key),i=new a.__PRIVATE_ExpUserDataWriter(e);return new z(e,i,t._key,r,new B(n.hasPendingWrites,n.fromCache),t.converter)}function ee(e,t){if("string"!=typeof e[t])throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class te{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function ne(e,t){const n=a.ensureFirestoreConfigured(e._firestore);a.__PRIVATE_firestoreClientSetPersistentCacheIndexAutoCreationEnabled(n,t).then(e=>a.__PRIVATE_logDebug("setting persistent cache index auto creation isEnabled=".concat(t," succeeded"))).catch(e=>a.__PRIVATE_logWarn("setting persistent cache index auto creation isEnabled=".concat(t," failed"),e))}const re=new WeakMap;class ie{constructor(){this.i=new Map}static get instance(){return se||(se=new ie,a.__PRIVATE_setTestingHooksSpi(se)),se}u(e){this.i.forEach(t=>t(e))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.i;return n.set(t,e),()=>n.delete(t)}}let se=null;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a.__PRIVATE_setSDKVersion(i.SDK_VERSION),i._registerComponent(new s.Component("firestore",(e,n)=>{let{instanceIdentifier:i,options:s}=n;const o=e.getProvider("app").getImmediate(),c=new a.Firestore(new a.__PRIVATE_FirebaseAuthCredentialsProvider(e.getProvider("auth-internal")),new a.__PRIVATE_FirebaseAppCheckTokenProvider(o,e.getProvider("app-check-internal")),a.__PRIVATE_databaseIdFromApp(o,i),o);return s=r({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),i.registerVersion(c,l,e),i.registerVersion(c,l,"cjs2020")}(),t.AbstractUserDataWriter=a.AbstractUserDataWriter,t.Bytes=a.Bytes,t.CACHE_SIZE_UNLIMITED=a.on,t.CollectionReference=a.CollectionReference,t.DocumentReference=a.DocumentReference,t.FieldPath=a.FieldPath,t.FieldValue=a.FieldValue,t.Firestore=a.Firestore,t.FirestoreError=a.FirestoreError,t.GeoPoint=a.GeoPoint,t.LoadBundleTask=a.LoadBundleTask,t.Query=a.Query,t.Timestamp=a.Timestamp,t.VectorValue=a.VectorValue,t._AutoId=a.__PRIVATE_AutoId,t._ByteString=a.ByteString,t._DatabaseId=a.DatabaseId,t._DocumentKey=a.DocumentKey,t._EmptyAppCheckTokenProvider=a.__PRIVATE_EmptyAppCheckTokenProvider,t._EmptyAuthCredentialsProvider=a.__PRIVATE_EmptyAuthCredentialsProvider,t._FieldPath=a.FieldPath$1,t._cast=a.__PRIVATE_cast,t._debugAssert=a.__PRIVATE_debugAssert,t._internalAggregationQueryToProtoRunAggregationQueryRequest=a._internalAggregationQueryToProtoRunAggregationQueryRequest,t._internalQueryToProtoQueryTarget=a._internalQueryToProtoQueryTarget,t._isBase64Available=a.__PRIVATE_isBase64Available,t._logWarn=a.__PRIVATE_logWarn,t._validateIsNotUsedTogether=a.__PRIVATE_validateIsNotUsedTogether,t.arrayRemove=a.arrayRemove,t.arrayUnion=a.arrayUnion,t.clearIndexedDbPersistence=a.clearIndexedDbPersistence,t.collection=a.collection,t.collectionGroup=a.collectionGroup,t.connectFirestoreEmulator=a.connectFirestoreEmulator,t.deleteField=a.deleteField,t.disableNetwork=a.disableNetwork,t.doc=a.doc,t.documentId=a.documentId,t.enableIndexedDbPersistence=a.enableIndexedDbPersistence,t.enableMultiTabIndexedDbPersistence=a.enableMultiTabIndexedDbPersistence,t.enableNetwork=a.enableNetwork,t.ensureFirestoreConfigured=a.ensureFirestoreConfigured,t.getFirestore=a.getFirestore,t.increment=a.increment,t.initializeFirestore=a.initializeFirestore,t.loadBundle=a.loadBundle,t.namedQuery=a.namedQuery,t.queryEqual=a.queryEqual,t.refEqual=a.refEqual,t.serverTimestamp=a.serverTimestamp,t.setLogLevel=a.setLogLevel,t.terminate=a.terminate,t.vector=a.vector,t.waitForPendingWrites=a.waitForPendingWrites,t.AggregateField=h,t.AggregateQuerySnapshot=d,t.DocumentSnapshot=z,t.PersistentCacheIndexManager=te,t.QueryCompositeFilterConstraint=w,t.QueryConstraint=v,t.QueryDocumentSnapshot=W,t.QueryEndAtConstraint=E,t.QueryFieldFilterConstraint=y,t.QueryLimitConstraint=_,t.QueryOrderByConstraint=b,t.QuerySnapshot=H,t.QueryStartAtConstraint=T,t.SnapshotMetadata=B,t.Transaction=X,t.WriteBatch=K,t._TestingHooks=class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return ie.instance.onExistenceFilterMismatch(e)}},t.addDoc=function(e,t){const n=a.__PRIVATE_cast(e.firestore,a.Firestore),r=a.doc(e),i=N(e.converter,t),s=a.__PRIVATE_newUserDataReader(e.firestore);return $(n,[a.__PRIVATE_parseSetData(s,"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,a.Precondition.exists(!1))]).then(()=>r)},t.aggregateFieldEqual=function(e,t){var n,r;return e instanceof h&&t instanceof h&&e.aggregateType===t.aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())},t.aggregateQuerySnapshotEqual=function(e,t){return a.queryEqual(e.query,t.query)&&o.deepEqual(e.data(),t.data())},t.and=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>k("and",e)),w._create("and",t)},t.average=function(e){return new h("avg",a.__PRIVATE_fieldPathFromArgument("average",e))},t.count=D,t.deleteAllPersistentCacheIndexes=function(e){const t=a.ensureFirestoreConfigured(e._firestore);a.__PRIVATE_firestoreClientDeleteAllFieldIndexes(t).then(e=>a.__PRIVATE_logDebug("deleting all persistent cache indexes succeeded")).catch(e=>a.__PRIVATE_logWarn("deleting all persistent cache indexes failed",e))},t.deleteDoc=function(e){return $(a.__PRIVATE_cast(e.firestore,a.Firestore),[new a.__PRIVATE_DeleteMutation(e._key,a.Precondition.none())])},t.disablePersistentCacheIndexAutoCreation=function(e){ne(e,!1)},t.documentSnapshotFromJSON=function(e,t,n){if(a.__PRIVATE_validateJSON(t,z._jsonSchema)){if(t.bundle===j)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=a.__PRIVATE_newSerializer(e._databaseId),i=a.__PRIVATE_createBundleReaderSync(t.bundle,r),s=i.t(),o=new a.__PRIVATE_BundleLoader(i.getMetadata(),r);for(const e of s)o.o(e);const c=o.documents;if(1!==c.length)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Expected bundle data to contain 1 document, but it contains ".concat(c.length," documents."));const l=a.__PRIVATE_fromDocument(r,c[0].document),u=new a.DocumentKey(a.ResourcePath.fromString(t.bundleName));return new z(e,new x(e),u,l,new B(!1,!1),n||null)}},t.enablePersistentCacheIndexAutoCreation=function(e){ne(e,!0)},t.endAt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E._create("endAt",t,!0)},t.endBefore=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E._create("endBefore",t,!1)},t.executeWrite=$,t.getAggregateFromServer=R,t.getCountFromServer=function(e){return R(e,{count:D()})},t.getDoc=function(e){e=a.__PRIVATE_cast(e,a.DocumentReference);const t=a.__PRIVATE_cast(e.firestore,a.Firestore),n=a.ensureFirestoreConfigured(t);return a.__PRIVATE_firestoreClientGetDocumentViaSnapshotListener(n,e._key).then(n=>Z(t,e,n))},t.getDocFromCache=function(e){e=a.__PRIVATE_cast(e,a.DocumentReference);const t=a.__PRIVATE_cast(e.firestore,a.Firestore),n=a.ensureFirestoreConfigured(t),r=new a.__PRIVATE_ExpUserDataWriter(t);return a.__PRIVATE_firestoreClientGetDocumentFromLocalCache(n,e._key).then(n=>new z(t,r,e._key,n,new B(null!==n&&n.hasLocalMutations,!0),e.converter))},t.getDocFromServer=function(e){e=a.__PRIVATE_cast(e,a.DocumentReference);const t=a.__PRIVATE_cast(e.firestore,a.Firestore),n=a.ensureFirestoreConfigured(t);return a.__PRIVATE_firestoreClientGetDocumentViaSnapshotListener(n,e._key,{source:"server"}).then(n=>Z(t,e,n))},t.getDocs=function(e){e=a.__PRIVATE_cast(e,a.Query);const t=a.__PRIVATE_cast(e.firestore,a.Firestore),n=a.ensureFirestoreConfigured(t),r=new a.__PRIVATE_ExpUserDataWriter(t);return m(e._query),a.__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(n,e._query).then(n=>new H(t,r,e,n))},t.getDocsFromCache=function(e){e=a.__PRIVATE_cast(e,a.Query);const t=a.__PRIVATE_cast(e.firestore,a.Firestore),n=a.ensureFirestoreConfigured(t),r=new a.__PRIVATE_ExpUserDataWriter(t);return a.__PRIVATE_firestoreClientGetDocumentsFromLocalCache(n,e._query).then(n=>new H(t,r,e,n))},t.getDocsFromServer=function(e){e=a.__PRIVATE_cast(e,a.Query);const t=a.__PRIVATE_cast(e.firestore,a.Firestore),n=a.ensureFirestoreConfigured(t),r=new a.__PRIVATE_ExpUserDataWriter(t);return a.__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(n,e._query,{source:"server"}).then(n=>new H(t,r,e,n))},t.getPersistentCacheIndexManager=function(e){var t;e=a.__PRIVATE_cast(e,a.Firestore);const n=re.get(e);if(n)return n;if("persistent"!==(null===(t=a.ensureFirestoreConfigured(e)._uninitializedComponentsProvider)||void 0===t?void 0:t._offline.kind))return null;const r=new te(e);return re.set(e,r),r},t.limit=function(e){return a.__PRIVATE_validatePositiveNumber("limit",e),_._create("limit",e,"F")},t.limitToLast=function(e){return a.__PRIVATE_validatePositiveNumber("limitToLast",e),_._create("limitToLast",e,"L")},t.memoryEagerGarbageCollector=function(){return new M},t.memoryLocalCache=function(e){return new P(e)},t.memoryLruGarbageCollector=function(e){return new L(null===e||void 0===e?void 0:e.cacheSizeBytes)},t.onSnapshot=J,t.onSnapshotResume=function(e,t){const n=o.getModularInstance(e),r=function(e){const t={bundle:"",bundleName:"",bundleSource:""},n=["bundle","bundleName","bundleSource"];for(const r of n){if(!(r in e)){t.error="snapshotJson missing required field: ".concat(r);break}const n=e[r];if("string"!=typeof n){t.error="snapshotJson field '".concat(r,"' must be a string.");break}if(0===n.length){t.error="snapshotJson field '".concat(r,"' cannot be an empty string.");break}"bundle"===r?t.bundle=n:"bundleName"===r?t.bundleName=n:"bundleSource"===r&&(t.bundleSource=n)}return t}(t);if(r.error)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,r.error);let i,s=0;for(var c=arguments.length,l=new Array(c>2?c-2:0),h=2;h<c;h++)l[h-2]=arguments[h];if("object"!=typeof l[s]||u(l[s])||(i=l[s++]),"QuerySnapshot"===r.bundleSource){let e=null;if("object"==typeof l[s]&&u(l[s])){const t=l[s++];e={next:t.next,error:t.error,complete:t.complete}}else e={next:l[s++],error:l[s++],complete:l[s++]};return function(e,t,n,r,i){let s,o=!1;return a.loadBundle(e,t.bundle).then(()=>a.namedQuery(e,t.bundleName)).then(e=>{e&&!o&&(i&&e.withConverter(i),s=J(e,n||{},r))}).catch(e=>(r.error&&r.error(e),()=>{})),()=>{o||(o=!0,s&&s())}}(n,r,i,e,l[s])}if("DocumentSnapshot"===r.bundleSource){let e=null;if("object"==typeof l[s]&&u(l[s])){const t=l[s++];e={next:t.next,error:t.error,complete:t.complete}}else e={next:l[s++],error:l[s++],complete:l[s++]};return function(e,t,n,r,i){let s,o=!1;return a.loadBundle(e,t.bundle).then(()=>{if(!o){const o=new a.DocumentReference(e,i||null,a.DocumentKey.fromPath(t.bundleName));s=J(o,n||{},r)}}).catch(e=>(r.error&&r.error(e),()=>{})),()=>{o||(o=!0,s&&s())}}(n,r,i,e,l[s])}throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"unsupported bundle source: ".concat(r.bundleSource))},t.onSnapshotsInSync=function(e,t){e=a.__PRIVATE_cast(e,a.Firestore);const n=a.ensureFirestoreConfigured(e),r=u(t)?t:{next:t};return a.__PRIVATE_firestoreClientAddSnapshotsInSyncListener(n,r)},t.or=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>k("or",e)),w._create("or",t)},t.orderBy=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=a.__PRIVATE_fieldPathFromArgument("orderBy",e);return b._create(n,t)},t.persistentLocalCache=function(e){return new O(e)},t.persistentMultipleTabManager=function(){return new V},t.persistentSingleTabManager=U,t.query=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof g&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof w).length,n=e.filter(e=>e instanceof y).length;if(t>1||t>0&&n>0)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e},t.querySnapshotFromJSON=function(e,t,n){if(a.__PRIVATE_validateJSON(t,H._jsonSchema)){if(t.bundle===j)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=a.__PRIVATE_newSerializer(e._databaseId),i=a.__PRIVATE_createBundleReaderSync(t.bundle,r),s=i.t(),o=new a.__PRIVATE_BundleLoader(i.getMetadata(),r);for(const e of s)o.o(e);if(1!==o.queries.length)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Snapshot data expected 1 query but found ".concat(o.queries.length," queries."));const c=a.__PRIVATE_fromBundledQuery(o.queries[0].bundledQuery),l=o.documents;let u=new a.DocumentSet;l.map(e=>{const t=a.__PRIVATE_fromDocument(r,e.document);u=u.add(t)});const h=a.ViewSnapshot.fromInitialDocuments(c,u,a.__PRIVATE_documentKeySet(),!1,!1),d=new a.Query(e,n||null,c);return new H(e,new x(e),d,h)}},t.runTransaction=function(e,t,n){e=a.__PRIVATE_cast(e,a.Firestore);const i=r(r({},G),n);!function(e){if(e.maxAttempts<1)throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i);const s=a.ensureFirestoreConfigured(e);return a.__PRIVATE_firestoreClientTransaction(s,n=>t(new X(e,n)),i)},t.setDoc=function(e,t,n){e=a.__PRIVATE_cast(e,a.DocumentReference);const r=a.__PRIVATE_cast(e.firestore,a.Firestore),i=N(e.converter,t,n),s=a.__PRIVATE_newUserDataReader(r);return $(r,[a.__PRIVATE_parseSetData(s,"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,a.Precondition.none())])},t.setIndexConfiguration=function(e,t){e=a.__PRIVATE_cast(e,a.Firestore);const n=a.ensureFirestoreConfigured(e);if(!n._uninitializedComponentsProvider||"memory"===n._uninitializedComponentsProvider._offline.kind)return a.__PRIVATE_logWarn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new a.FirestoreError(a.C.INVALID_ARGUMENT,"Failed to parse JSON: "+(null===e||void 0===e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=ee(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=ee(n,"fieldPath"),r=a.__PRIVATE_fieldPathFromDotSeparatedString("setIndexConfiguration",e);"CONTAINS"===n.arrayConfig?t.push(new a.IndexSegment(r,2)):"ASCENDING"===n.order?t.push(new a.IndexSegment(r,0)):"DESCENDING"===n.order&&t.push(new a.IndexSegment(r,1))}n.push(new a.FieldIndex(a.FieldIndex.UNKNOWN_ID,e,t,a.IndexState.empty()))}return n}(t);return a.__PRIVATE_firestoreClientSetIndexConfiguration(n,r)},t.snapshotEqual=function(e,t){return e instanceof z&&t instanceof z?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof H&&t instanceof H&&e._firestore===t._firestore&&a.queryEqual(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)},t.startAfter=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T._create("startAfter",t,!1)},t.startAt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T._create("startAt",t,!0)},t.sum=function(e){return new h("sum",a.__PRIVATE_fieldPathFromArgument("sum",e))},t.updateDoc=function(e,t,n){e=a.__PRIVATE_cast(e,a.DocumentReference);const r=a.__PRIVATE_cast(e.firestore,a.Firestore),i=a.__PRIVATE_newUserDataReader(r);let s;for(var c=arguments.length,l=new Array(c>3?c-3:0),u=3;u<c;u++)l[u-3]=arguments[u];return s="string"==typeof(t=o.getModularInstance(t))||t instanceof a.FieldPath?a.__PRIVATE_parseUpdateVarargs(i,"updateDoc",e._key,t,n,l):a.__PRIVATE_parseUpdateData(i,"updateDoc",e._key,t),$(r,[s.toMutation(e._key,a.Precondition.exists(!0))])},t.where=function(e,t,n){const r=t,i=a.__PRIVATE_fieldPathFromArgument("where",e);return y._create(i,r,n)},t.writeBatch=function(e){return e=a.__PRIVATE_cast(e,a.Firestore),a.ensureFirestoreConfigured(e),new K(e,t=>$(e,t))}},9887(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[];var r;t.LogLevel=void 0,(r=t.LogLevel||(t.LogLevel={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";const i={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},s=t.LogLevel.INFO,a={[t.LogLevel.DEBUG]:"log",[t.LogLevel.VERBOSE]:"log",[t.LogLevel.INFO]:"info",[t.LogLevel.WARN]:"warn",[t.LogLevel.ERROR]:"error"},o=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};t.Logger=class{constructor(e){this.name=e,this._logLevel=s,this._logHandler=o,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in t.LogLevel))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.DEBUG,...n),this._logHandler(this,t.LogLevel.DEBUG,...n)}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.VERBOSE,...n),this._logHandler(this,t.LogLevel.VERBOSE,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.INFO,...n),this._logHandler(this,t.LogLevel.INFO,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.WARN,...n),this._logHandler(this,t.LogLevel.WARN,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.ERROR,...n),this._logHandler(this,t.LogLevel.ERROR,...n)}},t.setLogLevel=function(e){n.forEach(t=>{t.setLogLevel(e)})},t.setUserLogHandler=function(e,r){for(const s of n){let n=null;r&&r.level&&(n=i[r.level]),s.userLogHandler=null===e?null:function(r,i){for(var s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];const c=a.map(e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");i>=(null!==n&&void 0!==n?n:r.logLevel)&&e({level:t.LogLevel[i].toLowerCase(),message:c,args:a,type:r.name})}}}},8679(e,t,n){"use strict";var r=n(2897).default;Object.defineProperty(t,"__esModule",{value:!0});var i=n(7198);const s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(e,t){if(!e)throw o(t)},o=function(e){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},c=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,c=o?e[i+2]:0,l=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|c>>6,d=63&c;o||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new u;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h=function(e){const t=c(e);return l.encodeByteArray(t,!0)},d=function(e){return h(e).replace(/\./g,"")},f=function(e){try{return l.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&m(n)&&(e[n]=p(e[n],t[n]));return e}function m(e){return"__proto__"!==e}function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const v=()=>{try{return i.getDefaultsFromPostinstall()||g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/pontaj",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&f(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},y=e=>{var t;return null===(t=v())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function b(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}const _={};let T=!1;function E(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){var e;const t=null===(e=v())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function I(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}class A extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,C.prototype.create)}}class C{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(k,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new A(n,s,t)}}const k=/\{\$([^}]+)}/g;function N(e){return JSON.parse(e)}const x=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=N(f(s[0])||""),n=N(f(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};function D(e){return null!==e&&"object"===typeof e}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=P),void 0===r.error&&(r.error=P),void 0===r.complete&&(r.complete=P);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P(){}function O(e,t){return"".concat(e," failed: ").concat(t," argument ")}const M=144e5;t.CONSTANTS=s,t.DecodeBase64StringError=u,t.Deferred=w,t.ErrorFactory=C,t.FirebaseError=A,t.MAX_VALUE_MILLIS=M,t.RANDOM_FACTOR=.5,t.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=c^a&(o^c),i=1518500249):(r=a^o^c,i=1859775393):u<60?(r=a&o|c&(a|o),i=2400959708):(r=a^o^c,i=3395469782);const e=(s<<5|s>>>27)+r+l+i+n[u]&4294967295;l=c,c=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}},t.areCookiesEnabled=function(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)},t.assert=a,t.assertionError=o,t.async=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Promise.resolve(!0).then(()=>{e(...r)}).catch(e=>{t&&t(e)})}},t.base64=l,t.base64Decode=f,t.base64Encode=h,t.base64urlEncodeWithoutPadding=d,t.calculateBackoffMillis=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(M,n+r)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=r({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(a)),""].join(".")},t.createSubscribe=function(e,t){const n=new R(e,t);return n.subscribe.bind(n)},t.decode=x,t.deepCopy=function(e){return p(void 0,e)},t.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),i=Object.keys(n);for(const s of r){if(!i.includes(s))return!1;const r=t[s],a=n[s];if(D(r)&&D(a)){if(!e(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0},t.deepExtend=p,t.errorPrefix=O,t.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)},t.getDefaultAppConfig=()=>{var e;return null===(e=v())||void 0===e?void 0:e.config},t.getDefaultEmulatorHost=y,t.getDefaultEmulatorHostnameAndPort=e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},t.getDefaults=v,t.getExperimentalSetting=e=>{var t;return null===(t=v())||void 0===t?void 0:t["_".concat(e)]},t.getGlobal=g,t.getModularInstance=function(e){return e&&e._delegate?e._delegate:e},t.getUA=E,t.isAdmin=function(e){const t=x(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"undefined"!==typeof window||I()},t.isBrowserExtension=function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id},t.isCloudWorkstation=b,t.isCloudflareWorker=function(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent},t.isElectron=function(){return E().indexOf("Electron/")>=0},t.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){try{return"object"===typeof indexedDB}catch(e){return!1}},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())},t.isNode=S,t.isNodeSdk=function(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isSafariOrWebkit=function(){return!S()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return E().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){const t=x(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){const t=x(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.isWebWorker=I,t.issuedAtTime=function(e){const t=x(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=N,t.map=function(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.ordinal=function(e){return Number.isFinite(e)?e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e):"".concat(e)},t.pingServer=async function(e){return(await fetch(e,{credentials:"include"})).ok},t.promiseWithTimeout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;const n=new w;return setTimeout(()=>n.reject("timeout!"),t),e.then(n.resolve,n.reject),n.promise},t.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,a(r<e.length,"Surrogate pair missing trail surrogate.");i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.updateEmulatorBanner=function(e,t){if("undefined"===typeof window||"undefined"===typeof document||!b(window.location.host)||_[e]===t||_[e]||T)return;function n(e){return"__firebase__banner__".concat(e)}_[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(_))_[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{T=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),c=document.getElementById(o)||document.createElement("a"),l=n("preprendIcon"),u=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(c,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,l),t.append(u,a,c,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()},t.validateArgCount=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(O(e,t)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(O(e,t)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})},t.validateNamespace=function(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(O(e,"namespace")+"must be a valid firebase namespace.")}},7198(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultsFromPostinstall=()=>{}},9193(e,t,n){(function(){"use strict";var t;function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function r(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function i(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(n,function(){this.blockSize=-1}),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},n.prototype.v=function(e,t){void 0===t&&(t=e.length);const n=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=n;)r(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){r(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){r(this,i),s=0;break}}this.h=s,this.o+=t},n.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var s={};function a(e){return-128<=e&&e<128?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],e<0?-1:0)}):new i([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return c;if(e<0)return f(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=a(0),l=a(1),u=a(16777216);function h(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function f(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function p(e,t){return e.add(f(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function v(e,t){if(h(t))throw Error("division by zero");if(h(e))return new g(c,c);if(d(e))return t=v(f(e),t),new g(f(t.g),f(t.h));if(d(t))return t=v(e,f(t)),new g(f(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=w(n,1),s=w(r,1);for(r=w(r,2),n=w(n,2);!h(r);){var a=s.add(r);a.l(e)<=0&&(i=i.add(n),s=a),r=w(r,1),n=w(n,1)}return t=p(e,i.j(t)),new g(i,t)}for(i=c;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),a=(s=o(n)).j(t);d(a)||a.l(e)>0;)a=(s=o(n-=r)).j(t);h(s)&&(s=l),i=i.add(s),e=p(e,a)}return new g(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function w(e,t){const n=t>>5;t%=32;const r=e.g.length-n,s=[];for(let i=0;i<r;i++)s[i]=t>0?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new i(s,e.h)}(t=i.prototype).m=function(){if(d(this))return-f(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},t.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(d(this))return"-"+f(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=v(n,t).g;let s=(((n=p(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(h(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},t.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},t.l=function(e){return d(e=p(this,e))?-1:h(e)?0:1},t.abs=function(){return d(this)?f(this):this},t.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let i=0;i<=t;i++){let t=r+(65535&this.i(i))+(65535&e.i(i)),s=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=s>>>16,t&=65535,s&=65535,n[i]=s<<16|t}return new i(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(e){if(h(this)||h(e))return c;if(d(this))return d(e)?f(this).j(f(e)):f(f(this).j(e));if(d(e))return f(this.j(f(e)));if(this.l(u)<0&&e.l(u)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const i=this.i(r)>>>16,s=65535&this.i(r),a=e.i(t)>>>16,o=65535&e.i(t);n[2*r+2*t]+=s*o,m(n,2*r+2*t),n[2*r+2*t+1]+=i*o,m(n,2*r+2*t+1),n[2*r+2*t+1]+=s*a,m(n,2*r+2*t+1),n[2*r+2*t+2]+=i*a,m(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new i(n,0)},t.B=function(e){return v(this,e).h},t.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},t.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},t.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,e.exports.Md5=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.B,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=c;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},e.exports.Integer=i}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},7761(e,t,n){(function(){"use strict";var t,r=Object.defineProperty;var i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var n=i;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in n))break e;n=n[a]}(t=t(s=n[e=e[e.length-1]]))!=s&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}s("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var a=a||{},o=this||self;function c(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function l(e,t,n){return e.call.apply(e.bind,arguments)}function u(e,t,n){return(u=l).apply(null,arguments)}function h(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var f="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function g(e){o.setTimeout(()=>{throw e},0)}function v(){var e=T;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var y=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new w,e=>e.reset());class w{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let b,_=!1,T=new class{constructor(){this.h=this.g=null}add(e,t){const n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},E=()=>{const e=Promise.resolve(void 0);b=()=>{e.then(S)}};function S(){for(var e;e=v();){try{e.h.call(e.g)}catch(n){g(n)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}_=!1}function I(){this.u=this.u,this.C=this.C}function A(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},A.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function k(e){return/^[\s\xa0]*$/.test(e)}function N(e,t){A.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}d(N,A),N.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&N.Z.h.call(this)},N.prototype.h=function(){N.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var x="closure_listenable_"+(1e6*Math.random()|0),D=0;function R(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++D,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function O(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function M(e){const t={};for(const n in e)t[n]=e[n];return t}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<L.length;t++)n=L[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){this.src=e,this.g={},this.h=0}function U(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function j(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=j(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new R(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),z={};function W(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=$(n),e&&e[x]?e.J(t,n,c(r)?!!r.capture:!!r,i):H(e,t,n,!1,r,i)}function H(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=c(i)?!!i.capture:!!i;let o=X(e);if(o||(e[B]=o=new V(e)),(n=o.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Q;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)C||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=$(n),e&&e[x]?e.K(t,n,c(r)?!!r.capture:!!r,i):H(e,t,n,!0,r,i)}function G(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);else r=c(r)?!!r.capture:!!r,n=$(n),e&&e[x]?(e=e.i,(s=String(t).toString())in e.g&&((n=j(t=e.g[s],n,r,i))>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=X(e))&&(t=e.g[t.toString()],e=-1,t&&(e=j(t,n,r,i)),(n=e>-1?t[e]:null)&&K(n))}function K(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[x])U(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Y(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=X(t))?(U(n,e),0==n.h&&(n.src=null,t[B]=null)):P(e)}}}function Y(e){return e in z?z[e]:z[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new N(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function X(e){return(e=e[B])instanceof V?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function $(e){return"function"===typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function Z(){I.call(this),this.i=new V(this),this.M=this,this.G=null}function ee(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new A(t,e);else if(t instanceof A)t.target=t.target||e;else{var i=t;F(t=new A(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=te(s,r,!0,t)&&i;if(s=t.g=e,i=te(s,r,!0,t)&&i,i=te(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=te(s,r,!1,t)&&i}function te(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&U(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ne(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ne(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(Z,I),Z.prototype[x]=!0,Z.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},Z.prototype.N=function(){if(Z.Z.N.call(this),this.i){var e=this.i;let t=0;for(const n in e.g){const r=e.g[n];for(let e=0;e<r.length;e++)++t,P(r[e]);delete e.g[n],e.h--}}this.G=null},Z.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Z.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class re extends I{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(e){I.call(this),this.h=e,this.g={}}d(ie,I);var se=[];function ae(e){O(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}ie.prototype.N=function(){ie.Z.N.call(this),ae(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,ce=o.JSON.parse,le=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function ue(){}function he(){}var de={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fe(){A.call(this,"d")}function pe(){A.call(this,"c")}d(fe,A),d(pe,A);var me={},ge=null;function ve(){return ge=ge||new Z}function ye(e){A.call(this,me.Ia,e)}function we(e){const t=ve();ee(t,new ye(t,e))}function be(e,t){A.call(this,me.STAT_EVENT,e),this.stat=t}function _e(e){const t=ve();ee(t,new be(t,e))}function Te(e,t){A.call(this,me.Ja,e),this.size=t}function Ee(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function Se(){this.g=!0}function Ie(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return oe(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}me.Ia="serverreachability",d(ye,A),me.STAT_EVENT="statevent",d(be,A),me.Ja="timingevent",d(Te,A),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var Ae,Ce={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ke={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ne(){}function xe(e){return encodeURIComponent(String(e))}function De(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Re(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ie(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}d(Ne,ue),Ne.prototype.g=function(){return new XMLHttpRequest},Ae=new Ne;var Oe={},Me={};function Le(e,t,n){e.M=1,e.A=ot(nt(t)),e.u=n,e.R=!0,Fe(e,null)}function Fe(e,t){e.F=Date.now(),je(e),e.B=nt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),_t(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Pe,e.g=cn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new re(u(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(se[0]=i.toString()),i=se);for(let s=0;s<i.length;s++){const e=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?M(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),we(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var c=o[e].split("=");if(c.length>1){const e=c[0];c=c[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+c+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ve(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Ue(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Me:(n=Number(t.substring(n,r)),isNaN(n)?Oe:(r+=1)+n>t.length?Me:(t=t.slice(r,r+n),e.C=r+n,t))}function je(e){e.T=Date.now()+e.H,Be(e,e.H)}function Be(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Ee(u(e.aa,e),t)}function ze(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function We(e){0==e.j.I||e.K||nn(e.j,e)}function He(e){ze(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ae(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Xe(n.h,e)))if(!e.L&&Xe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;tn(n),qt(n)}$t(n),_e(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Ee(u(n.Va,n),6e3));Qe(n.h)<=1&&n.ta&&(n.ta=void 0)}else sn(n,11)}else if((e.L||n.g==e)&&tn(n),!k(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,at(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=on(r,r.L?r.ba:null,r.W),a.L){$e(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(ze(o),je(o)),r.g=a}else Jt(r);n.i.length>0&&Kt(n)}else"stop"!=l[0]&&"close"!=l[0]||sn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?sn(n,7):Ht(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}we(4)}catch(l){}}Re.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==jt(e)?t.j():this.Y(e)},Re.prototype.Y=function(e){try{if(e==this.g)e:{const c=jt(this.g),l=this.g.ya(),u=this.g.ca();if(!(c<3)&&(3!=c||this.g&&(this.h.h||this.g.la()||Bt(this.g)))){this.K||4!=c||7==l||we(8==l||u<=0?3:2),ze(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ve(e))return e.g.la();const t=Bt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==jt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return He(e),We(e),"";e.h.i=new o.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,c,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(r)){var s=r;break t}}s=null}if(!(e=s)){this.o=!1,this.m=3,_e(12),He(this),We(this);break e}Ie(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Ue(this,n),t==Me){4==c&&(this.m=4,_e(14),e=!1),Ie(this.i,this.l,null,"[Incomplete Response]");break}if(t==Oe){this.m=4,_e(15),Ie(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ie(this.i,this.l,t,null),qe(this,t)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=n.length||this.h.h||(this.m=1,_e(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zt(a),a.P=!0,_e(11))}}else Ie(this.i,this.l,n,"[Invalid Chunked Response]"),He(this),We(this)}else Ie(this.i,this.l,n,null),qe(this,n);4==c&&He(this),this.o&&!this.K&&(4==c?nn(this.j,this):(this.o=!1,je(this)))}else(function(e){const t={};e=(e.g&&jt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=De(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,_e(12)):(this.m=0,_e(13)),He(this),We(this)}}}catch(c){}},Re.prototype.cancel=function(){this.K=!0,He(this)},Re.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(we(3),_e(17)),He(this),this.m=2,We(this)):Be(this,this.T-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ye(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qe(e){return e.h?1:e.g?e.g.size:0}function Xe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function $e(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ze(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}Ke.prototype.cancel=function(){if(this.i=Ze(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof tt?(this.l=e.l,rt(this,e.j),this.o=e.o,this.g=e.g,it(this,e.u),this.h=e.h,st(this,Tt(e.i)),this.m=e.m):e&&(t=String(e).match(et))?(this.l=!1,rt(this,t[1]||"",!0),this.o=ct(t[2]||""),this.g=ct(t[3]||"",!0),it(this,t[4]),this.h=ct(t[5]||"",!0),st(this,t[6]||"",!0),this.m=ct(t[7]||"")):(this.l=!1,this.i=new gt(null,this.l))}function nt(e){return new tt(e)}function rt(e,t,n){e.j=n?ct(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function it(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function st(e,t,n){t instanceof gt?(e.i=t,function(e,t){t&&!e.j&&(vt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(yt(this,t),_t(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=lt(t,pt)),e.i=new gt(t,e.l))}function at(e,t,n){e.i.set(t,n)}function ot(e){return at(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ct(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ut(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(lt(t,ht,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(lt(t,ht,!0),"@"),e.push(xe(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(lt(n,"/"==n.charAt(0)?ft:dt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",lt(n,mt)),e.join("")},tt.prototype.resolve=function(e){const t=nt(this);let n=!!e.j;n?rt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)it(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?st(t,Tt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ht=/[#\/\?@]/g,dt=/[#\?:]/g,ft=/[#\?]/g,pt=/[#\?@]/g,mt=/#/g;function gt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function vt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function yt(e,t){vt(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return vt(e),t=Et(e,t),e.g.has(t)}function bt(e,t){vt(e);let n=[];if("string"===typeof t)wt(e,t)&&(n=n.concat(e.g.get(Et(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function _t(e,t,n){yt(e,t),n.length>0&&(e.i=null,e.g.set(Et(e,t),p(n)),e.h+=n.length)}function Tt(e){const t=new gt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function It(){this.g=new le}function At(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ct(e,t){Z.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function kt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Nt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,xt(e)}function xt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return O(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Rt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?(xe(t),null!=n&&xe(n)):at(e,t,n))}function Pt(e){Z.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=gt.prototype).add=function(e,t){vt(this),this.i=null,e=Et(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},t.forEach=function(e,t){vt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},t.set=function(e,t){return vt(this),this.i=null,wt(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&(e=bt(this,e)).length>0?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=xe(n);n=bt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+xe(n[t])),e.push(r)}}return this.i=e.join("&")},d(At,ue),At.prototype.g=function(){return new Ct(this.i,this.h)},d(Ct,Z),(t=Ct.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,xt(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=0},t.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,xt(this)),this.g&&(this.readyState=3,xt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nt(this):xt(this),3==this.readyState&&kt(this)}},t.Oa=function(e){this.g&&(this.response=this.responseText=e,Nt(this))},t.Na=function(e){this.g&&(this.response=e,Nt(this))},t.ga=function(){this.g&&Nt(this)},t.setRequestHeader=function(e,t){this.A.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ct.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Pt,Z);var Ot=/^https?$/i,Mt=["POST","PUT"];function Lt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ft(e),Ut(e)}function Ft(e){e.A||(e.A=!0,ee(e,"complete"),ee(e,"error"))}function Vt(e){if(e.h&&"undefined"!=typeof a)if(e.v&&4==jt(e))setTimeout(e.Ca.bind(e),0);else if(ee(e,"readystatechange"),4==jt(e)){e.h=!1;try{const a=e.ca();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){let t=String(e.D).match(et)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Ot.test(t?t.toLowerCase():"")}n=r}if(n)ee(e,"complete"),ee(e,"success");else{e.o=6;try{var i=jt(e)>2?e.g.statusText:""}catch(s){i=""}e.l=i+" ["+e.ca()+"]",Ft(e)}}finally{Ut(e)}}}function Ut(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ee(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function jt(e){return e.g?e.g.readyState:0}function Bt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wt(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zt("baseRetryDelayMs",5e3,e),this.Za=zt("retryDelaySeedMs",1e4,e),this.Ta=zt("forwardChannelMaxRetries",2,e),this.va=zt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Ba=new It,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Ht(e){if(Gt(e),3==e.I){var t=e.V++,n=nt(e.J);if(at(n,"SID",e.M),at(n,"RID",t),at(n,"TYPE","terminate"),Qt(e,n),(t=new Re(e,e.j,t)).M=2,t.A=ot(nt(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=cn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),je(t)}an(e)}function qt(e){e.g&&(Zt(e),e.g.cancel(),e.g=null)}function Gt(e){qt(e),e.v&&(o.clearTimeout(e.v),e.v=null),tn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function Kt(e){if(!Ye(e.h)&&!e.m){e.m=!0;var t=e.Ea;b||E(),_||(b(),_=!0),T.add(t,e),e.D=0}}function Yt(e,t){var n;n=t?t.l:e.V++;const r=nt(e.J);at(r,"SID",e.M),at(r,"RID",n),at(r,"AID",e.K),Qt(e,r),e.u&&e.o&&Rt(r,e.u,e.o),n=new Re(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Xt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Je(e.h,n),Le(n,r,t)}function Qt(e,t){e.H&&O(e.H,function(e,n){at(t,n,e)}),e.l&&O({},function(e,n){at(t,n,e)})}function Xt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?u(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<n;u++){var s=i[u].g;const n=i[u].map;if((s-=t)<0)t=Math.max(0,i[u].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;c(n)&&(r=oe(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(o){throw e.push(s+"type="+encodeURIComponent("_badmap")),o}}catch(o){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function Jt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;b||E(),_||(b(),_=!0),T.add(t,e),e.A=0}}function $t(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=Ee(u(e.Da,e),rn(e,e.A)),e.A++,!0)}function Zt(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function en(e){e.g=new Re(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=nt(e.na);at(t,"RID","rpc"),at(t,"SID",e.M),at(t,"AID",e.K),at(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&at(t,"TO",e.ia),at(t,"TYPE","xmlhttp"),Qt(e,t),e.u&&e.o&&Rt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ot(nt(t)),n.u=null,n.R=!0,Fe(n,e)}function tn(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function nn(e,t){var n=null;if(e.g==t){tn(e),Zt(e),e.g=null;var r=2}else{if(!Xe(e.h,t))return;n=t.G,$e(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;ee(r=ve(),new Te(r,n,t,i)),Kt(e)}else Jt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Qe(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=Ee(u(e.Ea,e,t),rn(e,e.D)),e.D++,!0))}(e,t)||2==r&&$t(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:sn(e,5);break;case 4:sn(e,10);break;case 3:sn(e,6);break;default:sn(e,2)}}function rn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function sn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.bb,e),r=e.Ua;const t=!r;r=new tt(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||rt(r,"https"),ot(r),t?function(e,t){const n=new Se;if(o.Image){const r=new Image;r.onload=h(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=h(St,n,"TestLoadImage: error",!1,t,r),r.onabort=h(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=h(St,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.I=0,e.l&&e.l.pa(t),an(e),Gt(e)}function an(e){if(e.I=0,e.ja=[],e.l){const t=Ze(e.h);0==t.length&&0==e.i.length||(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var r=n instanceof tt?nt(n):new tt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),it(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new tt(null);r&&rt(e,r),t&&(e.g=t),i&&it(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&at(r,n,t),at(r,"VER",e.ka),Qt(e,r),r}function cn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Pt(new At({ab:n})):new Pt(e.ma)).Fa(e.L),t}function ln(){}function un(){}function hn(e,t){Z.call(this),this.g=new Wt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!k(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new pn(this)}function dn(e){fe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fn(){pe.call(this),this.status=1}function pn(e){this.g=e}(t=Pt.prototype).Fa=function(e){this.H=e},t.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ae.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Lt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Mt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(s){Lt(this,s)}},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ee(this,"complete"),ee(this,"abort"),Ut(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ut(this,!0)),Pt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Vt(this):this.Xa())},t.Xa=function(){Vt(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return jt(this)>2?this.g.status:-1}catch(e){return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},t.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ce(t)}},t.ya=function(){return this.o},t.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=Wt.prototype).ka=8,t.I=1,t.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=on(this,null,this.W),Kt(this)},t.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Re(this,this.j,e);let s=this.o;if(this.U&&(s?(s=M(s),F(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Xt(this,i,t),at(n=nt(this.J),"RID",e),at(n,"CVER",22),this.G&&at(n,"X-HTTP-Session-Id",this.G),Qt(this,n),s&&(this.R?t="headers="+xe(Dt(s))+"&"+t:this.u&&Rt(n,this.u,s)),Je(this.h,i),this.Ra&&at(n,"TYPE","init"),this.S?(at(n,"$req",t),at(n,"SID","null"),i.U=!0,Le(i,n,null)):Le(i,n,t),this.I=2}}else 3==this.I&&(e?Yt(this,e):0==this.i.length||Ye(this.h)||Yt(this))},t.Da=function(){if(this.v=null,en(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Ee(u(this.Wa,this),e)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_e(10),qt(this),en(this))},t.Va=function(){null!=this.C&&(this.C=null,qt(this),$t(this),_e(19))},t.bb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=ln.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},un.prototype.g=function(e,t){return new hn(e,t)},d(hn,Z),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ht(this.g)},hn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.I&&Kt(t)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,hn.Z.N.call(this)},d(dn,fe),d(fn,pe),d(pn,ln),pn.prototype.ra=function(){ee(this.g,"a")},pn.prototype.qa=function(e){ee(this.g,new dn(e))},pn.prototype.pa=function(e){ee(this.g,new fn(e))},pn.prototype.oa=function(){ee(this.g,"b")},un.prototype.createWebChannel=un.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,e.exports.createWebChannelTransport=function(){return new un},e.exports.getStatEventTarget=function(){return ve()},e.exports.Event=me,e.exports.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,e.exports.ErrorCode=Ce,ke.COMPLETE="complete",e.exports.EventType=ke,he.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",Z.prototype.listen=Z.prototype.J,e.exports.WebChannel=he,e.exports.FetchXmlHttpFactory=At,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,e.exports.XhrIo=Pt}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},7876(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e<0?"-":"",r=Math.abs(e).toString();for(;r.length<t;)r="0"+r;return n+r},e.exports=t.default},1067(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},e.exports=t.default},2088(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,i.default)({},e)};var i=r(n(1067));e.exports=t.default},2653(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9406)).default;t.default=i,e.exports=t.default},6139(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=function(){return n},t.setDefaultOptions=function(e){n=e};var n={}},8065(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5130)),s=r(n(389)),a=r(n(2964)),o=r(n(5252)),c=r(n(605)),l=r(n(7876)),u=r(n(5997)),h="midnight",d="noon",f="morning",p="afternoon",m="evening",g="night";function v(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),s=r%60;if(0===s)return n+String(i);var a=t||"";return n+String(i)+a+(0,l.default)(s,2)}function y(e,t){return e%60===0?(e>0?"-":"+")+(0,l.default)(Math.abs(e)/60,2):w(e,t)}function w(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+(0,l.default)(Math.floor(i/60),2)+n+(0,l.default)(i%60,2)}var b={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return u.default.y(e,t)},Y:function(e,t,n,r){var i=(0,c.default)(e,r),s=i>0?i:1-i;if("YY"===t){var a=s%100;return(0,l.default)(a,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):(0,l.default)(s,t.length)},R:function(e,t){var n=(0,a.default)(e);return(0,l.default)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return(0,l.default)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,l.default)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,l.default)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return u.default.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return(0,l.default)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=(0,o.default)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):(0,l.default)(i,t.length)},I:function(e,t,n){var r=(0,s.default)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):(0,l.default)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):u.default.d(e,t)},D:function(e,t,n){var r=(0,i.default)(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):(0,l.default)(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return(0,l.default)(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return(0,l.default)(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return(0,l.default)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?d:0===i?h:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?m:i>=12?p:i>=4?f:g,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return u.default.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):u.default.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,l.default)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,l.default)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):u.default.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):u.default.s(e,t)},S:function(e,t){return u.default.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return y(i);case"XXXX":case"XX":return w(i);default:return w(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return y(i);case"xxxx":case"xx":return w(i);default:return w(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+v(i,":");default:return"GMT"+w(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+v(i,":");default:return"GMT"+w(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e,s=Math.floor(i.getTime()/1e3);return(0,l.default)(s,t.length)},T:function(e,t,n,r){var i=(r._originalDate||e).getTime();return(0,l.default)(i,t.length)}};t.default=b,e.exports=t.default},5997(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7876)),s={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return(0,i.default)("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):(0,i.default)(n+1,2)},d:function(e,t){return(0,i.default)(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return(0,i.default)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return(0,i.default)(e.getUTCHours(),t.length)},m:function(e,t){return(0,i.default)(e.getUTCMinutes(),t.length)},s:function(e,t){return(0,i.default)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds(),s=Math.floor(r*Math.pow(10,n-3));return(0,i.default)(s,t.length)}};t.default=s,e.exports=t.default},6723(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},r=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},i={p:r,P:function(e,t){var i,s=e.match(/(P+)(p+)?/)||[],a=s[1],o=s[2];if(!o)return n(e,t);switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",n(a,t)).replace("{{time}}",r(o,t))}};t.default=i,e.exports=t.default},5899(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},e.exports=t.default},5130(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,s.default)(1,arguments);var t=(0,i.default)(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/864e5)+1};var i=r(n(7336)),s=r(n(230));e.exports=t.default},389(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,o.default)(1,arguments);var t=(0,i.default)(e),n=(0,s.default)(t).getTime()-(0,a.default)(t).getTime();return Math.round(n/6048e5)+1};var i=r(n(7336)),s=r(n(144)),a=r(n(3089)),o=r(n(230));e.exports=t.default},2964(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,s.default)(1,arguments);var t=(0,i.default)(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var o=(0,a.default)(r),c=new Date(0);c.setUTCFullYear(n,0,4),c.setUTCHours(0,0,0,0);var l=(0,a.default)(c);return t.getTime()>=o.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1};var i=r(n(7336)),s=r(n(230)),a=r(n(144));e.exports=t.default},5252(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,o.default)(1,arguments);var n=(0,i.default)(e),r=(0,s.default)(n,t).getTime()-(0,a.default)(n,t).getTime();return Math.round(r/6048e5)+1};var i=r(n(7336)),s=r(n(5419)),a=r(n(9222)),o=r(n(230));e.exports=t.default},605(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r,l,u,h,d,f,p;(0,s.default)(1,arguments);var m=(0,i.default)(e),g=m.getUTCFullYear(),v=(0,c.getDefaultOptions)(),y=(0,o.default)(null!==(n=null!==(r=null!==(l=null!==(u=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==u?u:null===t||void 0===t||null===(h=t.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:v.firstWeekContainsDate)&&void 0!==r?r:null===(f=v.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==n?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=new Date(0);w.setUTCFullYear(g+1,0,y),w.setUTCHours(0,0,0,0);var b=(0,a.default)(w,t),_=new Date(0);_.setUTCFullYear(g,0,y),_.setUTCHours(0,0,0,0);var T=(0,a.default)(_,t);return m.getTime()>=b.getTime()?g+1:m.getTime()>=T.getTime()?g:g-1};var i=r(n(7336)),s=r(n(230)),a=r(n(5419)),o=r(n(911)),c=n(6139);e.exports=t.default},2810(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isProtectedDayOfYearToken=function(e){return-1!==n.indexOf(e)},t.isProtectedWeekYearToken=function(e){return-1!==r.indexOf(e)},t.throwProtectedError=function(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))};var n=["D","DD"],r=["YY","YYYY"]},230(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},e.exports=t.default},144(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,s.default)(1,arguments);var t=(0,i.default)(e),n=t.getUTCDay(),r=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t};var i=r(n(7336)),s=r(n(230));e.exports=t.default},3089(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.default)(1,arguments);var t=(0,i.default)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,s.default)(n)};var i=r(n(2964)),s=r(n(144)),a=r(n(230));e.exports=t.default},5419(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r,c,l,u,h,d,f;(0,s.default)(1,arguments);var p=(0,o.getDefaultOptions)(),m=(0,a.default)(null!==(n=null!==(r=null!==(c=null!==(l=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==l?l:null===t||void 0===t||null===(u=t.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==c?c:p.weekStartsOn)&&void 0!==r?r:null===(d=p.locale)||void 0===d||null===(f=d.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=(0,i.default)(e),v=g.getUTCDay(),y=(v<m?7:0)+v-m;return g.setUTCDate(g.getUTCDate()-y),g.setUTCHours(0,0,0,0),g};var i=r(n(7336)),s=r(n(230)),a=r(n(911)),o=n(6139);e.exports=t.default},9222(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r,l,u,h,d,f,p;(0,s.default)(1,arguments);var m=(0,c.getDefaultOptions)(),g=(0,o.default)(null!==(n=null!==(r=null!==(l=null!==(u=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==u?u:null===t||void 0===t||null===(h=t.locale)||void 0===h||null===(d=h.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:m.firstWeekContainsDate)&&void 0!==r?r:null===(f=m.locale)||void 0===f||null===(p=f.options)||void 0===p?void 0:p.firstWeekContainsDate)&&void 0!==n?n:1),v=(0,i.default)(e,t),y=new Date(0);return y.setUTCFullYear(v,0,g),y.setUTCHours(0,0,0,0),(0,a.default)(y,t)};var i=r(n(605)),s=r(n(230)),a=r(n(5419)),o=r(n(911)),c=n(6139);e.exports=t.default},911(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);if(isNaN(t))return t;return t<0?Math.ceil(t):Math.floor(t)},e.exports=t.default},9142(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(2,arguments);var n=(0,s.default)(e).getTime(),r=(0,i.default)(t);return new Date(n+r)};var i=r(n(911)),s=r(n(7336)),a=r(n(230));e.exports=t.default},6422(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,b,_,T,E,S,I,A,C,k,N,x,D,R,P,O,M,L;(0,d.default)(2,arguments);var F=String(t),V=(0,f.getDefaultOptions)(),U=null!==(r=null!==(b=null===n||void 0===n?void 0:n.locale)&&void 0!==b?b:V.locale)&&void 0!==r?r:p.default,j=(0,h.default)(null!==(_=null!==(T=null!==(E=null!==(S=null===n||void 0===n?void 0:n.firstWeekContainsDate)&&void 0!==S?S:null===n||void 0===n||null===(I=n.locale)||void 0===I||null===(A=I.options)||void 0===A?void 0:A.firstWeekContainsDate)&&void 0!==E?E:V.firstWeekContainsDate)&&void 0!==T?T:null===(C=V.locale)||void 0===C||null===(k=C.options)||void 0===k?void 0:k.firstWeekContainsDate)&&void 0!==_?_:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var B=(0,h.default)(null!==(N=null!==(x=null!==(D=null!==(R=null===n||void 0===n?void 0:n.weekStartsOn)&&void 0!==R?R:null===n||void 0===n||null===(P=n.locale)||void 0===P||null===(O=P.options)||void 0===O?void 0:O.weekStartsOn)&&void 0!==D?D:V.weekStartsOn)&&void 0!==x?x:null===(M=V.locale)||void 0===M||null===(L=M.options)||void 0===L?void 0:L.weekStartsOn)&&void 0!==N?N:0);if(!(B>=0&&B<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!U.localize)throw new RangeError("locale must contain localize property");if(!U.formatLong)throw new RangeError("locale must contain formatLong property");var z=(0,a.default)(e);if(!(0,i.default)(z))throw new RangeError("Invalid time value");var W=(0,l.default)(z),H=(0,s.default)(z,W),q={firstWeekContainsDate:j,weekStartsOn:B,locale:U,_originalDate:z};return F.match(g).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,c.default[t])(e,U.formatLong):e}).join("").match(m).map(function(r){if("''"===r)return"'";var i=r[0];if("'"===i)return function(e){var t=e.match(v);if(!t)return e;return t[1].replace(y,"'")}(r);var s=o.default[i];if(s)return null!==n&&void 0!==n&&n.useAdditionalWeekYearTokens||!(0,u.isProtectedWeekYearToken)(r)||(0,u.throwProtectedError)(r,t,String(e)),null!==n&&void 0!==n&&n.useAdditionalDayOfYearTokens||!(0,u.isProtectedDayOfYearToken)(r)||(0,u.throwProtectedError)(r,t,String(e)),s(H,r,U.localize,q);if(i.match(w))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");return r}).join("")};var i=r(n(5009)),s=r(n(967)),a=r(n(7336)),o=r(n(8065)),c=r(n(6723)),l=r(n(5899)),u=n(2810),h=r(n(911)),d=r(n(230)),f=n(6139),p=r(n(2653)),m=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,g=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,v=/^'([^]*?)'?$/,y=/''/g,w=/[a-zA-Z]/;e.exports=t.default},6161(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.default)(1,arguments),e instanceof Date||"object"===(0,i.default)(e)&&"[object Date]"===Object.prototype.toString.call(e)};var i=r(n(3738)),s=r(n(230));e.exports=t.default},5009(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,a.default)(1,arguments),!(0,i.default)(e)&&"number"!==typeof e)return!1;var t=(0,s.default)(e);return!isNaN(Number(t))};var i=r(n(6161)),s=r(n(7336)),a=r(n(230));e.exports=t.default},118(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}},e.exports=t.default},3500(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){var r;if("formatting"===(null!==n&&void 0!==n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=null!==n&&void 0!==n&&n.width?String(n.width):i;r=e.formattingValues[s]||e.formattingValues[i]}else{var a=e.defaultWidth,o=null!==n&&void 0!==n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}},e.exports=t.default},2308(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;var a,o=s[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(c,function(e){return e.test(o)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(c,function(e){return e.test(o)});return a=e.valueCallback?e.valueCallback(l):l,{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(o.length)}}},e.exports=t.default},4010(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var i=r[0],s=t.match(e.parsePattern);if(!s)return null;var a=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(i.length)}}},e.exports=t.default},8516(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r=function(e,t,r){var i,s=n[e];return i="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==r&&void 0!==r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};t.default=r,e.exports=t.default},2533(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(118)),s={date:(0,i.default)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,i.default)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,i.default)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};t.default=s,e.exports=t.default},7527(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},r=function(e,t,r,i){return n[e]};t.default=r,e.exports=t.default},5687(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3500)),s={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,i.default)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,i.default)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:(0,i.default)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,i.default)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,i.default)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};t.default=s,e.exports=t.default},9417(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2308)),s={ordinalNumber:(0,r(n(4010)).default)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,i.default)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,i.default)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,i.default)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,i.default)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,i.default)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};t.default=s,e.exports=t.default},9406(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8516)),s=r(n(2533)),a=r(n(7527)),o=r(n(5687)),c=r(n(9417)),l={code:"en-US",formatDistance:i.default,formatLong:s.default,formatRelative:a.default,localize:o.default,match:c.default,options:{weekStartsOn:0,firstWeekContainsDate:1}};t.default=l,e.exports=t.default},967(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,s.default)(2,arguments);var n=(0,a.default)(t);return(0,i.default)(e,-n)};var i=r(n(9142)),s=r(n(230)),a=r(n(911));e.exports=t.default},7336(e,t,n){"use strict";var r=n(4994).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,s.default)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===(0,i.default)(e)&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))};var i=r(n(3738)),s=r(n(230));e.exports=t.default},3714(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1098);r.registerVersion("firebase","12.9.0","app"),Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},6897(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2509);Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},8544(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8968);Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},2730(e,t,n){"use strict";var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function V(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function j(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var c="\n"+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case T:return"Portal";case I:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case x:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ee=null,Se=null;function Ie(e){if(e=wi(e)){if("function"!==typeof Te)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Te(e.stateNode,e.type,t))}}function Ae(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function ke(e,t){return e(t)}function Ne(){}var xe=!1;function De(e,t,n){if(xe)return e(t,n);xe=!0;try{return ke(e,t,n)}finally{xe=!1,(null!==Ee||null!==Se)&&(Ne(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Me(e,t,n,r,i,s,a,o,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Ve=!1,Ue=null,je={onError:function(e){Le=!0,Fe=e}};function Be(e,t,n,r,i,s,a,o,c){Le=!1,Fe=null,Me.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/ct|0)|0},ot=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Tt,Et,St,It,At=!1,Ct=[],kt=null,Nt=null,xt=null,Dt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void It(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Tt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function jt(){At=!1,null!==kt&&Vt(kt)&&(kt=null),null!==Nt&&Vt(Nt)&&(Nt=null),null!==xt&&Vt(xt)&&(xt=null),Dt.forEach(Ut),Rt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Bt(kt,e),null!==Nt&&Bt(Nt,e),null!==xt&&Bt(xt,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var Wt=b.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=wt,s=Wt.transition;Wt.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=i,Wt.transition=s}}function Gt(e,t,n,r){var i=wt,s=Wt.transition;Wt.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=i,Wt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Lt(kt,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return xt=Lt(xt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Qt(e,t,n,r))&&Hr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=yi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,on=e.screenY-cn.screenY):on=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function In(){return Sn}var An=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(An),kn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),xn=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Dn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,Fn=u&&(!On||Mn&&8<Mn&&11>=Mn),Vn=String.fromCharCode(32),Un=!1;function jn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Ae(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Yn(e){Vr(e,0)}function Qn(e){if(K(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];qn(t,Kn,e,_e(e)),De(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function ar(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Sr={};function Ir(e){if(Er[e])return Er[e];if(!Tr[e])return e;var t,n=Tr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);var Ar=Ir("animationend"),Cr=Ir("animationiteration"),kr=Ir("animationstart"),Nr=Ir("transitionend"),xr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){xr.set(e,t),c(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Ar,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(kr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,c,l){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,Ve||(Ve=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,l=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,o,l),s=c}else for(a=0;a<r.length;a++){if(c=(o=r[a]).instance,l=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,o,l),s=c}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||jr(t,!1,e),jr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=qt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(c=a.tag)||6===c){r=s=a;continue e}o=o.parentNode}}r=r.return}De(function(){var r=s,i=_e(n),a=[];e:{var o=xr.get(e);if(void 0!==o){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case Ar:case Cr:case kr:c=vn;break;case Nr:c=xn;break;case"scroll":c=dn;break;case"wheel":c=Rn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=kn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(qr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new c(o,l,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=kn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?o:bi(c),f=null==l?o:bi(l),(o=new u(m,p+"leave",c,n,i)).target=h,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Kr(f))p++;for(f=0,m=d;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==c&&Yr(a,o,c,u,!1),null!==l&&null!==h&&Yr(a,h,l,u,!0)}if("select"===(c=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var g=Xn;else if(Hn(o))if(Jn)g=ar;else{g=ir;var v=rr}else(c=o.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(y=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(v=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),a.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=$t=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Vr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(qr(e,s,i)),null!=(s=Re(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,c=o.alternate,l=o.stateNode;if(null!==c&&c===r)break;5===o.tag&&null!==l&&(o=l,i?null!=(c=Re(n,s))&&a.unshift(qr(n,c,o)):i||null!=(c=Re(n,s))&&a.push(qr(n,c,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ti=[],Ei=-1;function Si(e){return{current:e}}function Ii(e){0>Ei||(e.current=Ti[Ei],Ti[Ei]=null,Ei--)}function Ai(e,t){Ei++,Ti[Ei]=e.current,e.current=t}var Ci={},ki=Si(Ci),Ni=Si(!1),xi=Ci;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ii(Ni),Ii(ki)}function Oi(e,t,n){if(ki.current!==Ci)throw Error(s(168));Ai(ki,t),Ai(Ni,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,W(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,xi=ki.current,Ai(ki,e),Ai(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,xi),r.__reactInternalMemoizedMergedChildContext=e,Ii(Ni),Ii(ki),Ai(ki,e)):Ii(Ni),Ai(Ni,n)}var Vi=null,Ui=!1,ji=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!ji&&null!==Vi){ji=!0;var e=0,t=wt;try{var n=Vi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ke(Ze,zi),i}finally{wt=t,ji=!1}}return null}var Wi=[],Hi=0,qi=null,Gi=0,Ki=[],Yi=0,Qi=null,Xi=1,Ji="";function $i(e,t){Wi[Hi++]=Gi,Wi[Hi++]=qi,qi=e,Gi=t}function Zi(e,t,n){Ki[Yi++]=Xi,Ki[Yi++]=Ji,Ki[Yi++]=Qi,Qi=e;var r=Xi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===qi;)qi=Wi[--Hi],Wi[Hi]=null,Gi=Wi[--Hi],Wi[Hi]=null;for(;e===Qi;)Qi=Ki[--Yi],Ki[Yi]=null,Ji=Ki[--Yi],Ki[Yi]=null,Xi=Ki[--Yi],Ki[Yi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=xl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=xl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ll(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Pl(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ol(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ll(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Pl(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case T:return(t=Fl(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Ol(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case T:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,o[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=a(v,s,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===o.length)return n(i,h),is&&$i(i,m),l;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],c))&&(s=a(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&$i(i,m),l}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),is&&$i(i,m),l}function g(i,o,c,l){var u=M(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),o=a(w,o,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return is&&$i(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(i,e)}),is&&$i(i,g),u}return function e(r,s,a,c){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var l=a.key,u=s;null!==u;){if(u.key===l){if((l=a.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===R&&ys(l)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===E?((s=Ol(a.props.children,r.mode,c,a.key)).return=r,r=s):((c=Pl(a.type,a.key,a.props,null,r.mode,c)).ref=gs(r,s,a),c.return=r,r=c)}return o(r);case T:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fl(a,r.mode,c)).return=r,r=s}return o(r);case R:return e(r,s,(u=a._init)(a._payload),c)}if(te(a))return m(r,s,a,c);if(M(a))return g(r,s,a,c);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Ll(a,r.mode,c)).return=r,r=s),o(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),Ts=Si(null),Es=null,Ss=null,Is=null;function As(){Is=Ss=Es=null}function Cs(e){var t=Ts.current;Ii(Ts),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Es=e,Is=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function xs(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===Es)throw Error(s(308));Ss=e,Es.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ds=null;function Rs(e){null===Ds?Ds=[e]:Ds.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function js(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var c=o,l=c.next;c.next=null,null===a?s=l:a.next=l,a=c;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(a=0,u=l=c=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Mc|=a,e.lanes=a,e.memoizedState=h}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},qs=Si(Hs),Gs=Si(Hs),Ks=Si(Hs);function Ys(e){if(e===Hs)throw Error(s(174));return e}function Qs(e,t){switch(Ai(Ks,t),Ai(Gs,e),Ai(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(qs),Ai(qs,t)}function Xs(){Ii(qs),Ii(Gs),Ii(Ks)}function Js(e){Ys(Ks.current);var t=Ys(qs.current),n=ce(t,e.type);t!==n&&(Ai(Gs,e),Ai(qs,n))}function $s(e){Gs.current===e&&(Ii(qs),Ii(Gs))}var Zs=Si(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,ca=null,la=!1,ua=!1,ha=0,da=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:Za,e=n(r,i),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(s(301));a+=1,ca=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Ja,t=null!==oa&&null!==oa.next,sa=0,ca=oa=aa=null,la=!1,t)throw Error(s(300));return e}function ga(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?aa.memoizedState=ca=e:ca=ca.next=e,ca}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===ca?aa.memoizedState:ca.next;if(null!==t)ca=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===ca?aa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var c=o=null,l=null,u=a;do{var h=u.lane;if((sa&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,o=r):l=l.next=d,aa.lanes|=h,Mc|=h}u=u.next}while(null!==u&&u!==a);null===l?o=r:l.next=c,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Mc|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ta(){}function Ea(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,Ma(Aa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,xa(9,Ia.bind(null,n,r,i,t),void 0,null),null===kc)throw Error(s(349));0!==(30&sa)||Sa(n,t,i)}return i}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ia(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&ka(e)}function Aa(e,t,n){return n(function(){Ca(t)&&ka(e)})}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function ka(e){var t=Os(e,1);null!==t&&tl(t,e,1,-1)}function Na(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function xa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Da(){return ya().memoizedState}function Ra(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=xa(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=xa(t,n,s,r))}aa.flags|=e,i.memoizedState=xa(1|t,n,s,r)}function Oa(e,t){return Ra(8390656,8,e,t)}function Ma(e,t){return Pa(2048,8,e,t)}function La(e,t){return Pa(4,2,e,t)}function Fa(e,t){return Pa(4,4,e,t)}function Va(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Va.bind(null,t,e),n)}function ja(){}function Ba(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Mc|=n,e.baseState=!0),t)}function Ha(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{wt=n,ia.transition=r}}function qa(){return ya().memoizedState}function Ga(e,t,n){var r=el(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Qa(t,n);else if(null!==(n=Ps(e,t,n,r))){tl(n,e,r,Zc()),Xa(n,t,r)}}function Ka(e,t,n){var r=el(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Qa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var c=t.interleaved;return null===c?(i.next=i,Rs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ps(e,t,i,r))&&(tl(n,e,r,i=Zc()),Xa(n,t,r))}}function Ya(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Qa(e,t){ua=la=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ja={readContext:xs,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:xs,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:xs,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4194308,4,Va.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Na,useDebugValue:ja,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Na(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===kc)throw Error(s(349));0!==(30&sa)||Sa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Oa(Aa.bind(null,r,a,e),[e]),r.flags|=2048,xa(9,Ia.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=kc.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:xs,useCallback:Ba,useContext:xs,useEffect:Ma,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:za,useReducer:ba,useRef:Da,useState:function(){return ba(wa)},useDebugValue:ja,useDeferredValue:function(e){return Wa(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(wa)[0],ya().memoizedState]},useMutableSource:Ta,useSyncExternalStore:Ea,useId:qa,unstable_isNewReconciler:!1},eo={readContext:xs,useCallback:Ba,useContext:xs,useEffect:Ma,useImperativeHandle:Ua,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:za,useReducer:_a,useRef:Da,useState:function(){return _a(wa)},useDebugValue:ja,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Wa(t,oa.memoizedState,e)},useTransition:function(){return[_a(wa)[0],ya().memoizedState]},useMutableSource:Ta,useSyncExternalStore:Ea,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zc(),i=el(e),s=Vs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(tl(t,e,i,r),js(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zc(),i=el(e),s=Vs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(tl(t,e,i,r),js(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zc(),r=el(e),i=Vs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(tl(t,e,r,n),js(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function so(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=xs(s):(i=Ri(t)?xi:ki.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=xs(s):(s=Ri(t)?xi:ki.current,i.context=Di(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function lo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Vs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wc||(Wc=!0,Hc=r),uo(0,t)},n}function po(e,t,n){(n=Vs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===qc?qc=new Set([this]):qc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=b.ReactCurrentOwner,wo=!1;function bo(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _o(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||wo?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wo(e,t,i))}function To(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Eo(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Wo(e,t,i)}return t.flags|=1,(e=Rl(s,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wo(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return Ao(e,t,n,r,i)}function So(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Rc,Dc),Dc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Rc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ai(Rc,Dc),Dc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ai(Rc,Dc),Dc|=r;return bo(e,t,i,n),t.child}function Io(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,n,r,i){var s=Ri(n)?xi:ki.current;return s=Di(t,s),Ns(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||wo?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wo(e,t,i))}function Co(e,t,n,r,i){if(Ri(n)){var s=!0;Li(t)}else s=!1;if(Ns(t,i),null===t.stateNode)zo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=xs(l):l=Di(t,l=Ri(n)?xi:ki.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||c!==l)&&ao(t,a,r,l),Ms=!1;var d=t.memoizedState;a.state=d,zs(t,r,a,i),c=t.memoizedState,o!==r||d!==c||Ni.current||Ms?("function"===typeof u&&(no(t,n,u,r),c=t.memoizedState),(o=Ms||io(t,n,o,r,d,c,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,l=t.type===t.elementType?o:to(t.type,o),a.props=l,h=t.pendingProps,d=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=xs(c):c=Di(t,c=Ri(n)?xi:ki.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==c)&&ao(t,a,r,c),Ms=!1,d=t.memoizedState,a.state=d,zs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ni.current||Ms?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(l=Ms||io(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ko(e,t,n,r,s,i)}function ko(e,t,n,r,i,s){Io(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Wo(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function No(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Qs(e,t.containerInfo)}function xo(e,t,n,r,i){return fs(),ps(i),t.flags|=256,bo(e,t,n,r),t.child}var Do,Ro,Po,Oo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ai(Zs,1&a),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,o?(i=t.mode,o=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=c):o=Ml(c,i,0,null),e=Ol(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Oo,e):Fo(t,c));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=lo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(a=Ol(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Oo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Vo(e,t,o,r=lo(a=Error(s(419)),r,void 0))}if(c=0!==(o&e.childLanes),wo||c){if(null!==(r=kc)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Os(e,i),tl(r,e,i,-1))}return pl(),Vo(e,t,o,r=lo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Al.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Yi++]=Xi,Ki[Yi++]=Ji,Ki[Yi++]=Qi,Xi=e.id,Ji=e.overflow,Qi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,a,n);if(o){o=i.fallback,c=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Rl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Rl(r,o):(o=Ol(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,c=null===(c=e.child.memoizedState)?Mo(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,i}return e=(o=e.child).sibling,i=Rl(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function jo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),jo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}jo(t,!0,n,null,s);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Ri(t.type)&&Pi(),qo(t),null;case 3:return r=t.stateNode,Xs(),Ii(Ni),Ii(ki),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(sl(ss),ss=null))),qo(t),null;case 5:$s(t);var i=Ys(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return qo(t),null}if(e=Ys(qs.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var c in ye(n,a),i=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",""+l]):o.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ur("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Do(e,t),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),l=i)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&w(e,a,u,c))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)Po(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ys(Ks.current),Ys(qs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return qo(t),null;case 13:if(Ii(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ss&&(sl(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Pc&&(Pc=3):pl())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Xs(),null===e&&zr(t.stateNode.containerInfo),qo(t),null;case 10:return Cs(t.type._context),qo(t),null;case 19:if(Ii(Zs),null===(a=t.memoizedState))return qo(t),null;if(r=0!==(128&t.flags),null===(c=a.rendering))if(r)Ho(a,!1);else{if(0!==Pc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>Bc&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!is)return qo(t),null}else 2*Je()-a.renderingStartTime>Bc&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=a.last)?n.sibling=c:t.child=c,a.last=c)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=Zs.current,Ai(Zs,r?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return ul(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dc)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ii(Ni),Ii(ki),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Ii(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(Zs),null;case 4:return Xs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return ul(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ys(qs.current);var s,a=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ur("scroll",e),a||c===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Qo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){El(e,t,r)}else n.current=null}function Zo(e,t,n){try{n()}catch(r){El(e,t,r)}}var ec=!1;function tc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&Zo(t,n,s)}i=i.next}while(i!==r)}}function nc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function oc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(oc(e,t,n),e=e.sibling;null!==e;)oc(e,t,n),e=e.sibling}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}var lc=null,uc=!1;function hc(e,t,n){for(n=n.child;null!==n;)dc(e,t,n),n=n.sibling}function dc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Qo||$o(n,t);case 6:var r=lc,i=uc;lc=null,hc(e,t,n),uc=i,null!==(lc=r)&&(uc?(e=lc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lc.removeChild(n.stateNode));break;case 18:null!==lc&&(uc?(e=lc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),zt(e)):ci(lc,n.stateNode));break;case 4:r=lc,i=uc,lc=n.stateNode.containerInfo,uc=!0,hc(e,t,n),lc=r,uc=i;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&Zo(n,t,a),i=i.next}while(i!==r)}hc(e,t,n);break;case 1:if(!Qo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){El(n,t,o)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,hc(e,t,n),Qo=r):hc(e,t,n);break;default:hc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach(function(t){var r=Cl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,c=o;e:for(;null!==c;){switch(c.tag){case 5:lc=c.stateNode,uc=!1;break e;case 3:case 4:lc=c.stateNode.containerInfo,uc=!0;break e}c=c.return}if(null===lc)throw Error(s(160));dc(a,o,i),lc=null,uc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){El(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pc(t,e),gc(e),4&r){try{tc(3,e,e.return),nc(3,e)}catch(g){El(e,e.return,g)}try{tc(5,e,e.return)}catch(g){El(e,e.return,g)}}break;case 1:pc(t,e),gc(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(pc(t,e),gc(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){El(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===a.type&&null!=a.name&&J(i,a),we(c,o);var u=we(c,a);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){El(e,e.return,g)}}break;case 6:if(pc(t,e),gc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){El(e,e.return,g)}}break;case 3:if(pc(t,e),gc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){El(e,e.return,g)}break;case 4:default:pc(t,e),gc(e);break;case 13:pc(t,e),gc(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(jc=Je())),4&r&&fc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(u=Qo)||h,pc(t,e),Qo=u):pc(t,e),gc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Jo=e,h=e.child;null!==h;){for(d=Jo=h;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:tc(4,f,f.return);break;case 1:$o(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){El(r,n,g)}}break;case 5:$o(f,f.return);break;case 22:if(null!==f.memoizedState){bc(d);continue}}null!==p?(p.return=f,Jo=p):bc(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=d.stateNode,o=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",o))}catch(g){El(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){El(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pc(t,e),gc(e),4&r&&fc(e);case 21:}}function gc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cc(e,ac(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;oc(e,ac(e),a);break;default:throw Error(s(161))}}catch(o){El(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,n){Jo=e,yc(e,t,n)}function yc(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var i=Jo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,c=null!==o&&null!==o.memoizedState||Qo;o=Yo;var l=Qo;if(Yo=a,(Qo=c)&&!l)for(Jo=i;null!==Jo;)c=(a=Jo).child,22===a.tag&&null!==a.memoizedState?_c(i):null!==c?(c.return=a,Jo=c):_c(i);for(;null!==s;)Jo=s,yc(s,t,n),s=s.sibling;Jo=i,Yo=o,Qo=l}wc(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Jo=s):wc(e)}}function wc(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||nc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ws(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&rc(t)}catch(f){El(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function bc(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function _c(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nc(4,t)}catch(c){El(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){El(t,i,c)}}var s=t.return;try{rc(t)}catch(c){El(t,s,c)}break;case 5:var a=t.return;try{rc(t)}catch(c){El(t,a,c)}}}catch(c){El(t,t.return,c)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Tc,Ec=Math.ceil,Sc=b.ReactCurrentDispatcher,Ic=b.ReactCurrentOwner,Ac=b.ReactCurrentBatchConfig,Cc=0,kc=null,Nc=null,xc=0,Dc=0,Rc=Si(0),Pc=0,Oc=null,Mc=0,Lc=0,Fc=0,Vc=null,Uc=null,jc=0,Bc=1/0,zc=null,Wc=!1,Hc=null,qc=null,Gc=!1,Kc=null,Yc=0,Qc=0,Xc=null,Jc=-1,$c=0;function Zc(){return 0!==(6&Cc)?Je():-1!==Jc?Jc:Jc=Je()}function el(e){return 0===(1&e.mode)?1:0!==(2&Cc)&&0!==xc?xc&-xc:null!==ms.transition?(0===$c&&($c=mt()),$c):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function tl(e,t,n,r){if(50<Qc)throw Qc=0,Xc=null,Error(s(185));vt(e,n,r),0!==(2&Cc)&&e===kc||(e===kc&&(0===(2&Cc)&&(Lc|=n),4===Pc&&al(e,xc)),nl(e,r),1===n&&0===Cc&&0===(1&t.mode)&&(Bc=Je()+500,Ui&&zi()))}function nl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,c=i[a];-1===c?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===kc?xc:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(ol.bind(null,e)):Bi(ol.bind(null,e)),ai(function(){0===(6&Cc)&&zi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=kl(n,rl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rl(e,t){if(Jc=-1,$c=0,0!==(6&Cc))throw Error(s(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=dt(e,e===kc?xc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Cc;Cc|=2;var a=fl();for(kc===e&&xc===t||(zc=null,Bc=Je()+500,hl(e,t));;)try{vl();break}catch(c){dl(e,c)}As(),Sc.current=a,Cc=i,null!==Nc?t=0:(kc=null,xc=0,t=Pc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=il(e,i))),1===t)throw n=Oc,hl(e,0),al(e,r),nl(e,Je()),n;if(6===t)al(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(a=pt(e))&&(r=a,t=il(e,a))),1===t))throw n=Oc,hl(e,0),al(e,r),nl(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:bl(e,Uc,zc);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=jc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bl.bind(null,e,Uc,zc),t);break}bl(e,Uc,zc);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ec(r/1960))-r)){e.timeoutHandle=ri(bl.bind(null,e,Uc,zc),r);break}bl(e,Uc,zc);break;default:throw Error(s(329))}}}return nl(e,Je()),e.callbackNode===n?rl.bind(null,e):null}function il(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Uc,Uc=n,null!==t&&sl(t)),e}function sl(e){null===Uc?Uc=e:Uc.push.apply(Uc,e)}function al(e,t){for(t&=~Fc,t&=~Lc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function ol(e){if(0!==(6&Cc))throw Error(s(327));_l();var t=dt(e,0);if(0===(1&t))return nl(e,Je()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Oc,hl(e,0),al(e,t),nl(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bl(e,Uc,zc),nl(e,Je()),null}function cl(e,t){var n=Cc;Cc|=1;try{return e(t)}finally{0===(Cc=n)&&(Bc=Je()+500,Ui&&zi())}}function ll(e){null!==Kc&&0===Kc.tag&&0===(6&Cc)&&_l();var t=Cc;Cc|=1;var n=Ac.transition,r=wt;try{if(Ac.transition=null,wt=1,e)return e()}finally{wt=r,Ac.transition=n,0===(6&(Cc=t))&&zi()}}function ul(){Dc=Rc.current,Ii(Rc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nc)for(n=Nc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xs(),Ii(Ni),Ii(ki),na();break;case 5:$s(r);break;case 4:Xs();break;case 13:case 19:Ii(Zs);break;case 10:Cs(r.type._context);break;case 22:case 23:ul()}n=n.return}if(kc=e,Nc=e=Rl(e.current,null),xc=Dc=t,Pc=0,Oc=null,Fc=Lc=Mc=0,Uc=Vc=null,null!==Ds){for(t=0;t<Ds.length;t++)if(null!==(r=(n=Ds[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ds=null}return e}function dl(e,t){for(;;){var n=Nc;try{if(As(),ra.current=Ja,la){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}la=!1}if(sa=0,ca=oa=aa=null,ua=!1,ha=0,Ic.current=null,null===n||null===n.return){Pc=1,Oc=t,Nc=null;break}e:{var a=e,o=n.return,c=n,l=t;if(t=xc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,c,0,t),1&p.mode&&mo(a,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){mo(a,u,t),pl();break e}l=Error(s(426))}else if(is&&1&c.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,c,0,t),ps(co(l,c));break e}}a=l=co(l,c),4!==Pc&&(Pc=2),null===Vc?Vc=[a]:Vc.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,fo(0,l,t));break e;case 1:c=l;var y=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===qc||!qc.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,po(a,c,t));break e}}a=a.return}while(null!==a)}wl(n)}catch(b){t=b,Nc===n&&null!==n&&(Nc=n=n.return);continue}break}}function fl(){var e=Sc.current;return Sc.current=Ja,null===e?Ja:e}function pl(){0!==Pc&&3!==Pc&&2!==Pc||(Pc=4),null===kc||0===(268435455&Mc)&&0===(268435455&Lc)||al(kc,xc)}function ml(e,t){var n=Cc;Cc|=2;var r=fl();for(kc===e&&xc===t||(zc=null,hl(e,t));;)try{gl();break}catch(i){dl(e,i)}if(As(),Cc=n,Sc.current=r,null!==Nc)throw Error(s(261));return kc=null,xc=0,Pc}function gl(){for(;null!==Nc;)yl(Nc)}function vl(){for(;null!==Nc&&!Qe();)yl(Nc)}function yl(e){var t=Tc(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?wl(e):Nc=t,Ic.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Dc)))return void(Nc=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Nc=n);if(null===e)return Pc=6,void(Nc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nc=t);Nc=t=e}while(null!==t);0===Pc&&(Pc=5)}function bl(e,t,n){var r=wt,i=Ac.transition;try{Ac.transition=null,wt=1,function(e,t,n,r){do{_l()}while(null!==Kc);if(0!==(6&Cc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===kc&&(Nc=kc=null,xc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gc||(Gc=!0,kl(tt,function(){return _l(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ac.transition,Ac.transition=null;var o=wt;wt=1;var c=Cc;Cc|=4,Ic.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=o+i),d!==a||0!==r&&3!==d.nodeType||(l=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=o),f===a&&++h===r&&(l=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){El(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=ec,ec=!1}(e,n),mc(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vc(n,e,i),Xe(),Cc=c,wt=o,Ac.transition=a}else e.current=n;if(Gc&&(Gc=!1,Kc=e,Yc=i),a=e.pendingLanes,0===a&&(qc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nl(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,e=Hc,Hc=null,e;0!==(1&Yc)&&0!==e.tag&&_l(),a=e.pendingLanes,0!==(1&a)?e===Xc?Qc++:(Qc=0,Xc=e):Qc=0,zi()}(e,t,n,r)}finally{Ac.transition=i,wt=r}return null}function _l(){if(null!==Kc){var e=bt(Yc),t=Ac.transition,n=wt;try{if(Ac.transition=null,wt=16>e?16:e,null===Kc)var r=!1;else{if(e=Kc,Kc=null,Yc=0,0!==(6&Cc))throw Error(s(331));var i=Cc;for(Cc|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var c=a.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Jo=u;null!==Jo;){var h=Jo;switch(h.tag){case 0:case 11:case 15:tc(8,h,a)}var d=h.child;if(null!==d)d.return=h,Jo=d;else for(;null!==Jo;){var f=(h=Jo).sibling,p=h.return;if(ic(h),h===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:tc(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var w=e.current;for(Jo=w;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=w;null!==Jo;){if(0!==(2048&(c=Jo).flags))try{switch(c.tag){case 0:case 11:case 15:nc(9,c)}}catch(T){El(c,c.return,T)}if(c===o){Jo=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Jo=_;break e}Jo=c.return}}if(Cc=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(T){}r=!0}return r}finally{wt=n,Ac.transition=t}}return!1}function Tl(e,t,n){e=Us(e,t=fo(0,t=co(n,t),1),1),t=Zc(),null!==e&&(vt(e,1,t),nl(e,t))}function El(e,t,n){if(3===e.tag)Tl(e,e,n);else for(;null!==t;){if(3===t.tag){Tl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qc||!qc.has(r))){t=Us(t,e=po(t,e=co(n,e),1),1),e=Zc(),null!==t&&(vt(t,1,e),nl(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zc(),e.pingedLanes|=e.suspendedLanes&n,kc===e&&(xc&n)===n&&(4===Pc||3===Pc&&(130023424&xc)===xc&&500>Je()-jc?hl(e,0):Fc|=n),nl(e,t)}function Il(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Zc();null!==(e=Os(e,t))&&(vt(e,t,n),nl(e,n))}function Al(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Il(e,n)}function Cl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Il(e,n)}function kl(e,t){return Ke(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xl(e,t,n,r){return new Nl(e,t,n,r)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rl(e,t){var n=e.alternate;return null===n?((n=xl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pl(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Dl(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case E:return Ol(n.children,i,a,t);case S:o=8,i|=8;break;case I:return(e=xl(12,n,t,2|i)).elementType=I,e.lanes=a,e;case N:return(e=xl(13,n,t,i)).elementType=N,e.lanes=a,e;case x:return(e=xl(19,n,t,i)).elementType=x,e.lanes=a,e;case P:return Ml(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case C:o=9;break e;case k:o=11;break e;case D:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=xl(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ol(e,t,n,r){return(e=xl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=xl(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Ll(e,t,n){return(e=xl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=xl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ul(e,t,n,r,i,s,a,o,c){return e=new Vl(e,t,n,o,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=xl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function jl(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function Bl(e,t,n,r,i,s,a,o,c){return(e=Ul(n,r,!0,e,0,s,0,o,c)).context=jl(null),n=e.current,(s=Vs(r=Zc(),i=el(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),nl(e,r),e}function zl(e,t,n,r){var i=t.current,s=Zc(),a=el(i);return n=jl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(tl(e,i,a,s),js(e,i,a)),a}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ql(e,t){Hl(e,t),(e=e.alternate)&&Hl(e,t)}Tc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:No(t),fs();break;case 5:Js(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(Ts,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Ai(Zs,1&Zs.current),null!==(e=Wo(e,t,n))?e.sibling:null);Ai(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return Wo(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var i=Di(t,ki.current);Ns(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ls(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=ko(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===D)return 14}return 2}(r),e=to(r,e),i){case 0:t=Ao(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=_o(null,t,r,e,n);break e;case 14:t=To(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(No(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fs(e,t),zs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=xo(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=xo(e,t,r,n,i=co(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wo(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&ls(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Io(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Lo(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ai(Ts,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ni.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){o=a.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Vs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=xs(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),To(e,t,r,i=to(r.type,i),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),zo(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Ns(t,n),so(t,r,i),oo(t,r,i,n),ko(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return So(e,t,n)}throw Error(s(156,t.tag))};var Gl="function"===typeof reportError?reportError:function(e){console.error(e)};function Kl(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function $l(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Wl(a);o.call(e)}}zl(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wl(a);s.call(e)}}var a=Bl(t,r,e,0,null,!1,0,"",Jl);return e._reactRootContainer=a,e[pi]=a.current,zr(8===e.nodeType?e.parentNode:e),ll(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Wl(c);o.call(e)}}var c=Ul(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=c,e[pi]=c.current,zr(8===e.nodeType?e.parentNode:e),ll(function(){zl(t,c,n,r)}),c}(n,t,e,i,r);return Wl(a)}Yl.prototype.render=Kl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));zl(e,t,null,null)},Yl.prototype.unmount=Kl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ll(function(){zl(null,e,null,null)}),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),nl(t,Je()),0===(6&Cc)&&(Bc=Je()+500,zi()))}break;case 13:ll(function(){var t=Os(e,1);if(null!==t){var n=Zc();tl(t,e,1,n)}}),ql(e,1)}},Tt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)tl(t,e,134217728,Zc());ql(e,134217728)}},Et=function(e){if(13===e.tag){var t=el(e),n=Os(e,t);if(null!==n)tl(n,e,t,Zc());ql(e,t)}},St=function(){return wt},It=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Te=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=cl,Ne=ll;var Zl={usingClientEntryPoint:!1,Events:[wi,bi,_i,Ae,Ce,cl]},eu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{it=nu.inject(tu),st=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ql(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ql(e))throw Error(s(299));var n=!1,r="",i=Gl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ul(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Kl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return ll(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return $l(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ql(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Gl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return $l(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(ll(function(){$l(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $l(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391(e,t,n){"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153(e,t,n){"use strict";var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},4202(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,T=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)T.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:E.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var c=!1;if(null===e)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===s?"."+k(c,0):s,_(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(a,t,i,"",function(e){return e})):null!=a&&(A(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+k(o=e[l],l);c+=N(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(o=e.next()).done;)c+=N(o=o.value,t,i,u=s+k(o,l++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function x(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:x,forEach:function(e,t,n){x(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return x(e,function(){t++}),t},toArray:function(e){return x(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)T.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},5043(e,t,n){"use strict";e.exports=n(4202)},579(e,t,n){"use strict";e.exports=n(1153)},7234(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,c=e[o],l=o+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[o]=n,r=o);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,P(T);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function T(e,n){m=!1,g&&(g=!1,y(A),A=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,I=null,A=-1,C=5,k=-1;function N(){return!(t.unstable_now()-k<C)}function x(){if(null!==I){var e=t.unstable_now();k=e;var n=!0;try{n=I(!0,e)}finally{n?E():(S=!1,I=null)}}else S=!1}if("function"===typeof w)E=function(){w(x)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=x,E=function(){R.postMessage(null)}}else E=function(){v(x,0)};function P(e){I=e,S||(S=!0,E())}function O(e,n){A=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(T))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(y(A),A=-1):g=!0,O(_,s-a))):(e.sortIndex=o,n(l,e),m||p||(m=!0,P(T))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8853(e,t,n){"use strict";e.exports=n(7234)},9243(){},3693(e,t,n){var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},4994(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},2897(e,t,n){var r=n(3693);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},1847(e,t,n){var r=n(4893);e.exports=function(e,t){if(null==e)return{};var n,i,s=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports},4893(e){e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},9045(e,t,n){var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7736(e,t,n){var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},3738(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},8566(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i,s,a){var o=new Date(0);return o.setUTCFullYear(e,t,n),o.setUTCHours(r,i,s,a),o},e.exports=t.default},7107(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=function(e,t,n){if(n&&!n.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale);return r.formatToParts?function(e,t){for(var n=e.formatToParts(t),r=n.length-1;r>=0;--r)if("timeZoneName"===n[r].type)return n[r].value}(r,t):function(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(n);return r?r[0].substr(1):""}(r,t)},e.exports=t.default},5332(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,s,h;if(""===e)return 0;if(r=o.timezoneZ.exec(e))return 0;if(r=o.timezoneHH.exec(e))return l(h=parseInt(r[1],10))?-h*a:NaN;if(r=o.timezoneHHMM.exec(e)){h=parseInt(r[1],10);var d=parseInt(r[2],10);return l(h,d)?(s=Math.abs(h)*a+6e4*d,h>0?-s:s):NaN}if(function(e){if(u[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),u[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());var f=n?t:function(e){return(0,i.default)(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),p=c(f,e),m=n?p:function(e,t,n){var r=e.getTime(),i=r-t,s=c(new Date(i),n);if(t===s)return t;i-=s-t;var a=c(new Date(i),n);if(s===a)return s;return Math.max(s,a)}(t,p,e);return-m}return NaN};var r=s(n(7157)),i=s(n(8566));function s(e){return e&&e.__esModule?e:{default:e}}var a=36e5,o={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function c(e,t){var n=(0,r.default)(e,t),s=(0,i.default)(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),a=e.getTime(),o=a%1e3;return s-(a-=o>=0?o:1e3+o)}function l(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var u={};e.exports=t.default},6178(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;t.default=n,e.exports=t.default},7157(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var i=function(e){if(!r[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n="06/25/2014, 00:00:00"===t||"\u200e06\u200e/\u200e25\u200e/\u200e2014\u200e \u200e00\u200e:\u200e00\u200e:\u200e00"===t;r[e]=n?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return r[e]}(t);return i.formatToParts?function(e,t){try{for(var r=e.formatToParts(t),i=[],s=0;s<r.length;s++){var a=n[r[s].type];a>=0&&(i[a]=parseInt(r[s].value,10))}return i}catch(o){if(o instanceof RangeError)return[NaN];throw o}}(i,e):function(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}(i,e)};var n={year:0,month:1,day:2,hour:3,minute:4,second:5};var r={};e.exports=t.default},2808(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(7107)),i=s(n(5332));function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e?(0,i.default)(e,t,!0)/6e4:t.getTimezoneOffset();if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+e);return n}function o(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}function c(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+o(Math.floor(i/60),2)+n+o(Math.floor(i%60),2)}function l(e,t){return e%60===0?(e>0?"-":"+")+o(Math.abs(e)/60,2):c(e,t)}var u={X:function(e,t,n,r){var i=a(r.timeZone,r._originalDate||e);if(0===i)return"Z";switch(t){case"X":return l(i);case"XXXX":case"XX":return c(i);default:return c(i,":")}},x:function(e,t,n,r){var i=a(r.timeZone,r._originalDate||e);switch(t){case"x":return l(i);case"xxxx":case"xx":return c(i);default:return c(i,":")}},O:function(e,t,n,r){var i=a(r.timeZone,r._originalDate||e);switch(t){case"O":case"OO":case"OOO":return"GMT"+function(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),s=r%60;if(0===s)return n+String(i);var a=t||"";return n+String(i)+a+o(s,2)}(i,":");default:return"GMT"+c(i,":")}},z:function(e,t,n,i){var s=i._originalDate||e;switch(t){case"z":case"zz":case"zzz":return(0,r.default)("short",s,i);default:return(0,r.default)("long",s,i)}}};t.default=u,e.exports=t.default},9894(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=String(t),c=n||{},l=a.match(o);if(l){var u=(0,s.default)(e,c);a=l.reduce(function(e,t){if("'"===t[0])return e;var n=e.indexOf(t),r="'"===e[n-1],s=e.replace(t,"'"+i.default[t[0]](u,t,null,c)+"'");return r?s.substring(0,n-1)+s.substring(n+1):s},a)}return(0,r.default)(e,a,c)};var r=a(n(6422)),i=a(n(2808)),s=a(n(6776));function a(e){return e&&e.__esModule?e:{default:e}}var o=/([xXOz]+)|''|'(''|[^'])+('|$)/g;e.exports=t.default},7318(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){var o=(0,r.default)(a);return o.timeZone=t,(0,i.default)((0,s.default)(e,t),n,o)};var r=a(n(2088)),i=a(n(9894)),s=a(n(6183));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},4519(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return-(0,i.default)(e,t)};var r,i=(r=n(5332))&&r.__esModule?r:{default:r};e.exports=t.default},5288(e,t,n){"use strict";e.exports={format:n(9894),formatInTimeZone:n(7318),getTimezoneOffset:n(4519),toDate:n(6776),utcToZonedTime:n(6183),zonedTimeToUtc:n(2465)}},6776(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},a=null==n.additionalDigits?2:(0,r.default)(n.additionalDigits);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"===typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!==typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var o=function(e){var t,n={},r=u.dateTimePattern.exec(e);r?(n.date=r[1],t=r[3]):(r=u.datePattern.exec(e))?(n.date=r[1],t=r[2]):(n.date=null,t=e);if(t){var i=u.timeZone.exec(t);i?(n.time=t.replace(i[1],""),n.timeZone=i[1].trim()):n.time=t}return n}(e),d=function(e,t){var n,r=u.YYY[t],i=u.YYYYY[t];if(n=u.YYYY.exec(e)||i.exec(e)){var s=n[1];return{year:parseInt(s,10),restDateString:e.slice(s.length)}}if(n=u.YY.exec(e)||r.exec(e)){var a=n[1];return{year:100*parseInt(a,10),restDateString:e.slice(a.length)}}return{year:null}}(o.date,a),f=d.year,y=function(e,t){if(null===t)return null;var n,r,i,s;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=u.MM.exec(e))return r=new Date(0),m(t,i=parseInt(n[1],10)-1)?(r.setUTCFullYear(t,i),r):new Date(NaN);if(n=u.DDD.exec(e)){r=new Date(0);var a=parseInt(n[1],10);return function(e,t){if(t<1)return!1;var n=p(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,a)?(r.setUTCFullYear(t,0,a),r):new Date(NaN)}if(n=u.MMDD.exec(e)){r=new Date(0),i=parseInt(n[1],10)-1;var o=parseInt(n[2],10);return m(t,i,o)?(r.setUTCFullYear(t,i,o),r):new Date(NaN)}if(n=u.Www.exec(e))return g(t,s=parseInt(n[1],10)-1)?h(t,s):new Date(NaN);if(n=u.WwwD.exec(e)){s=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return g(t,s,c)?h(t,s,c):new Date(NaN)}return null}(d.restDateString,f);if(isNaN(y))return new Date(NaN);if(y){var w,b=y.getTime(),_=0;if(o.time&&(_=function(e){var t,n,r;if(t=u.HH.exec(e))return v(n=parseFloat(t[1].replace(",",".")))?n%24*c:NaN;if(t=u.HHMM.exec(e))return v(n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")))?n%24*c+r*l:NaN;if(t=u.HHMMSS.exec(e)){n=parseInt(t[1],10),r=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return v(n,r,i)?n%24*c+r*l+1e3*i:NaN}return null}(o.time),isNaN(_)))return new Date(NaN);if(o.timeZone||n.timeZone){if(w=(0,s.default)(o.timeZone||n.timeZone,new Date(b+_)),isNaN(w))return new Date(NaN)}else w=(0,i.default)(new Date(b+_)),w=(0,i.default)(new Date(b+_+w));return new Date(b+_+w)}return new Date(NaN)};var r=o(n(911)),i=o(n(5899)),s=o(n(5332)),a=o(n(6178));function o(e){return e&&e.__esModule?e:{default:e}}var c=36e5,l=6e4,u={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:a.default};function h(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var d=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31];function p(e){return e%400===0||e%4===0&&e%100!==0}function m(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var r=p(e);if(r&&n>f[t])return!1;if(!r&&n>d[t])return!1}return!0}function g(e,t,n){return!(t<0||t>52)&&(null==n||!(n<0||n>6))}function v(e,t,n){return(null==e||!(e<0||e>=25))&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}e.exports=t.default},6183(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var s=(0,i.default)(e,n),a=(0,r.default)(t,s,!0),o=new Date(s.getTime()-a),c=new Date(0);return c.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),c.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),c};var r=s(n(5332)),i=s(n(6776));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2465(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if("string"===typeof e&&!e.match(s.default)){var c=(0,r.default)(n);return c.timeZone=t,(0,i.default)(e,c)}var l=(0,i.default)(e,n),u=(0,o.default)(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()).getTime(),h=(0,a.default)(t,new Date(u));return new Date(u+h)};var r=c(n(2088)),i=c(n(6776)),s=c(n(6178)),a=c(n(5332)),o=c(n(8566));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},2555(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},2799(e,t,n){"use strict";n.r(t),n.d(t,{deleteDB:()=>v,openDB:()=>g,unwrap:()=>m,wrap:()=>p});var r=n(2555);let i,s;const a=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(m(this),n),p(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(e.apply(m(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(m(this),t,...r);return c.set(s,t.sort?t.sort():[t]),p(s)}}function f(e){return"function"===typeof e?d(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});o.set(e,t)}(e),t=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,h):e);var t}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(p(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&a.set(t,e)}).catch(()=>{}),u.set(t,e),t}(e);if(l.has(e))return l.get(e);const t=f(e);return t!==e&&(l.set(e,t),u.set(t,e)),t}const m=e=>u.get(e);function g(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=p(a);return r&&a.addEventListener("upgradeneeded",e=>{r(p(a.result),e.oldVersion,e.newVersion,p(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}function v(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),p(n).then(()=>{})}const y=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],b=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return b.set(t,s),s}h=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>_(t,n)||e.get(t,n,r),has:(t,n)=>!!_(t,n)||e.has(t,n)}))(h)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(5043),t=n(4391),r=n(5757);const i="pontaj_users",s="pontaj_session";function a(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t).toString(16)}function o(e,t){const n=l(),r=n.find(t=>t.username.toLowerCase()===e.toLowerCase());if(!r)throw new Error("Username not found");if(r.passwordHash!==a(t))throw new Error("Incorrect password");return r.lastLogin=new Date,u(n),function(e){localStorage.setItem(s,JSON.stringify(e))}(r),r}function c(){const e=localStorage.getItem(s);if(!e)return null;try{return JSON.parse(e)}catch(t){return null}}function l(){const e=localStorage.getItem(i);return e?JSON.parse(e):[]}function u(e){localStorage.setItem(i,JSON.stringify(e))}const h=(0,r.MR)();let d=null,f=null,p=null,m=null,g=null;if(!h){const e=n(6897),t=n(8107);d=e.signInWithEmailAndPassword,f=e.createUserWithEmailAndPassword,p=e.signOut,m=e.onAuthStateChanged,g=t.auth}async function v(e,t){try{if(h){const n=function(e,t){const n=l();if(n.find(t=>t.username.toLowerCase()===e.toLowerCase()))throw new Error("Username already taken");if(!e||!t)throw new Error("Username and password required");if(e.length<3)throw new Error("Username must be at least 3 characters");if(t.length<4)throw new Error("Password must be at least 4 characters");const r={id:"user_".concat(Date.now()),uid:"local_".concat(Date.now()),username:e,passwordHash:a(t),createdAt:new Date};return n.push(r),u(n),r}(e,t);return{uid:n.uid,email:n.username}}{const n=await f(g,e,t);return{uid:n.user.uid,email:n.user.email||void 0}}}catch(n){throw new Error(n.message||"Registration failed")}}async function y(e,t){try{if(h){const n=o(e,t);return{uid:n.uid,email:n.username}}{const n=await d(g,e,t);return{uid:n.user.uid,email:n.user.email||void 0}}}catch(n){throw new Error(n.message||"Login failed")}}async function w(){try{h?localStorage.removeItem(s):await p(g)}catch(e){throw new Error(e.message||"Logout failed")}}function b(e){if(h)return e(function(){if(h){const e=c();return e?{uid:e.uid,email:e.username}:null}{const e=g.currentUser;return e?{uid:e.uid,email:e.email||void 0}:null}}()),()=>{};return m(g,t=>{e(t?{uid:t.uid,email:t.email||void 0}:null)})}var _=n(579);const T=t=>{let{onAuthChange:n}=t;const[i,s]=(0,e.useState)(""),[a,o]=(0,e.useState)(""),[c,l]=(0,e.useState)(!1),[u,h]=(0,e.useState)(""),[d,f]=(0,e.useState)(!1),[p,m]=(0,e.useState)(!1);(0,e.useEffect)(()=>{m((0,r.MR)())},[]);return(0,_.jsxs)("div",{style:{width:"100%",maxWidth:260,minWidth:0,padding:12,background:"#6c47c7",borderRadius:14,boxShadow:"0 2px 12px rgba(0,0,0,0.10)",color:"#fff",fontFamily:"inherit",fontSize:15,marginBottom:12},children:[(0,_.jsxs)("h3",{style:{textAlign:"center",marginBottom:14,fontWeight:700,letterSpacing:1,fontSize:18},children:["\u23f0 ",c?"Register":"Login"]}),(0,_.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f(!0),h("");try{if(c){await v(i,a);const e=await y(i,a);n(e),h("")}else{const e=await y(i,a);n(e),h("")}}catch(t){h(t.message||"Authentication failed")}finally{f(!1)}},children:[(0,_.jsx)("input",{type:p?"text":"email",placeholder:p?"Username":"Email",value:i,onChange:e=>s(e.target.value),required:!0,style:{width:"100%",marginBottom:8,padding:"8px 10px",borderRadius:7,border:"none",fontSize:15,background:"#f5f5fa",color:"#333"}}),(0,_.jsx)("input",{type:"password",placeholder:"Password",value:a,onChange:e=>o(e.target.value),required:!0,style:{width:"100%",marginBottom:10,padding:"8px 10px",borderRadius:7,border:"none",fontSize:15,background:"#f5f5fa",color:"#333"}}),(0,_.jsx)("button",{type:"submit",disabled:d,style:{width:"100%",marginBottom:8,padding:"8px 0",borderRadius:7,border:"none",background:d?"#b9a7e6":"#fff",color:d?"#fff":"#6c47c7",fontWeight:700,fontSize:15,cursor:d?"not-allowed":"pointer",transition:"background 0.2s"},children:d?"Please wait...":c?"Register":"Login"})]}),(0,_.jsx)("button",{onClick:()=>{l(e=>!e),h("")},style:{width:"100%",marginBottom:8,padding:"8px 0",borderRadius:7,border:"none",background:"#fff",color:"#6c47c7",fontWeight:700,fontSize:14,cursor:"pointer",transition:"background 0.2s"},children:c?"Already have an account? Login":"No account? Register"}),u&&(0,_.jsx)("div",{style:{color:"#ffb3b3",marginBottom:8,textAlign:"center",fontWeight:600,fontSize:12,padding:6,background:"rgba(255,255,255,0.1)",borderRadius:5,wordWrap:"break-word"},children:u}),(0,_.jsx)("button",{onClick:async()=>{try{await w(),n(null)}catch(e){h(e.message)}},style:{width:"100%",marginTop:2,padding:"7px 0",borderRadius:7,border:"none",background:"#ff6b6b",color:"#fff",fontWeight:700,fontSize:14,cursor:"pointer",transition:"background 0.2s"},children:"Logout"})]})};var E=n(449),S=n(8107),I=n(2555);const A=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,c=o?e[i+2]:0,l=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|c>>6,d=63&c;o||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(A(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new k;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N=function(e){return function(e){const t=A(e);return C.encodeByteArray(t,!0)}(e).replace(/\./g,"")},x=function(e){try{return C.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function D(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const R=()=>{try{return D().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/pontaj",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&x(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}};function P(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}function O(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){var e;const t=null===(e=R())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function L(){return!M()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function F(){try{return"object"===typeof indexedDB}catch(e){return!1}}class V extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,V.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U.prototype.create)}}class U{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(j,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new V(n,s,t)}}const j=/\{\$([^}]+)}/g;function B(e){return e&&e._delegate?e._delegate:e}class z{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const W=[];var H;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(H||(H={}));const q={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},G=H.INFO,K={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},Y=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=K[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Q{constructor(e){this.name=e,this._logLevel=G,this._logHandler=Y,this._userLogHandler=null,W.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...t),this._logHandler(this,H.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...t),this._logHandler(this,H.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.INFO,...t),this._logHandler(this,H.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.WARN,...t),this._logHandler(this,H.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,H.ERROR,...t),this._logHandler(this,H.ERROR,...t)}}var X=n(2799);class J{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const $="@firebase/app",Z="0.14.8",ee=new Q("@firebase/app"),te="@firebase/app-compat",ne="@firebase/analytics-compat",re="@firebase/analytics",ie="@firebase/app-check-compat",se="@firebase/app-check",ae="@firebase/auth",oe="@firebase/auth-compat",ce="@firebase/database",le="@firebase/data-connect",ue="@firebase/database-compat",he="@firebase/functions",de="@firebase/functions-compat",fe="@firebase/installations",pe="@firebase/installations-compat",me="@firebase/messaging",ge="@firebase/messaging-compat",ve="@firebase/performance",ye="@firebase/performance-compat",we="@firebase/remote-config",be="@firebase/remote-config-compat",_e="@firebase/storage",Te="@firebase/storage-compat",Ee="@firebase/firestore",Se="@firebase/ai",Ie="@firebase/firestore-compat",Ae="firebase",Ce={[$]:"fire-core",[te]:"fire-core-compat",[re]:"fire-analytics",[ne]:"fire-analytics-compat",[se]:"fire-app-check",[ie]:"fire-app-check-compat",[ae]:"fire-auth",[oe]:"fire-auth-compat",[ce]:"fire-rtdb",[le]:"fire-data-connect",[ue]:"fire-rtdb-compat",[he]:"fire-fn",[de]:"fire-fn-compat",[fe]:"fire-iid",[pe]:"fire-iid-compat",[me]:"fire-fcm",[ge]:"fire-fcm-compat",[ve]:"fire-perf",[ye]:"fire-perf-compat",[we]:"fire-rc",[be]:"fire-rc-compat",[_e]:"fire-gcs",[Te]:"fire-gcs-compat",[Ee]:"fire-fst",[Ie]:"fire-fst-compat",[Se]:"fire-vertex","fire-js":"fire-js",[Ae]:"fire-js-all"},ke=new Map,Ne=new Map,xe=new Map;function De(e,t){try{e.container.addComponent(t)}catch(n){ee.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Re(e){const t=e.name;if(xe.has(t))return ee.debug("There were multiple attempts to register component ".concat(t,".")),!1;xe.set(t,e);for(const n of ke.values())De(n,e);for(const n of Ne.values())De(n,e);return!0}const Pe=new U("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});function Oe(e,t,n){var r;let i=null!==(r=Ce[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ee.warn(e.join(" "))}Re(new z("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Me="firebase-heartbeat-store";let Le=null;function Fe(){return Le||(Le=(0,X.openDB)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Me)}catch(n){console.warn(n)}}}).catch(e=>{throw Pe.create("idb-open",{originalErrorMessage:e.message})})),Le}async function Ve(e,t){try{const n=(await Fe()).transaction(Me,"readwrite"),r=n.objectStore(Me);await r.put(t,Ue(e)),await n.done}catch(n){if(n instanceof V)ee.warn(n.message);else{const e=Pe.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ee.warn(e.message)}}}function Ue(e){return"".concat(e.name,"!").concat(e.options.appId)}class je{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ze(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Be();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ee.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Be(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),We(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),We(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=N(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ee.warn(t),""}}}function Be(){return(new Date).toISOString().substring(0,10)}class ze{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!F()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Fe()).transaction(Me),n=await t.objectStore(Me).get(Ue(e));return await t.done,n}catch(t){if(t instanceof V)ee.warn(t.message);else{const e=Pe.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ee.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Ve(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function We(e){return N(JSON.stringify({version:2,heartbeats:e})).length}var He;He="",Re(new z("platform-logger",e=>new J(e),"PRIVATE")),Re(new z("heartbeat",e=>new je(e),"PRIVATE")),Oe($,Z,He),Oe($,Z,"esm2020"),Oe("fire-js","");var qe,Ge,Ke="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ye={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return d(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),c=s(1),l=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;r.l(e)<=0;)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var l=s.add(r);l.l(e)<=0&&(i=i.add(n),s=l),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),l=(s=a(n)).j(t);h(l)||l.l(e)>0;)l=(s=a(n-=r)).j(t);u(s)&&(s=c),i=i.add(s),e=f(e,l)}return new m(i,e)}function v(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function y(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(l)<0&&e.l(l)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),a=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=s*o,p(n,2*i+2*t),n[2*i+2*t+1]+=r*o,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Ge=Ye.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+s),n);s<8?(s=a(Math.pow(n,s)),i=i.j(s).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},qe=Ye.Integer=r}).apply("undefined"!==typeof Ke?Ke:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Qe,Xe,Je,$e,Ze,et,tt,nt,rt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},it={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof rt&&rt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){return(c=o).apply(null,arguments)}function l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new v,e=>e.reset());class v{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let y,w=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},_=()=>{const e=Promise.resolve(void 0);y=()=>{e.then(T)}};function T(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}w=!1}function E(){this.u=this.u,this.C=this.C}function S(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},S.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function A(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){S.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,S),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var k="closure_listenable_"+(1e6*Math.random()|0),N=0;function x(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++N,this.da=this.fa=!1}function D(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function P(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function F(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(D(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function V(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=V(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new x(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),j={};function B(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)B(e,t[s],n,r,i);return null}return n=X(n),e&&e[k]?e.J(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!1,r,i)}function z(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let c=Y(e);if(c||(e[U]=c=new L(e)),(n=c.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)I||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=X(n),e&&e[k]?e.K(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[k]?(e=e.i,(s=String(t).toString())in e.g&&((n=V(t=e.g[s],n,r,i))>-1&&(D(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=V(t,n,r,i)),(n=e>-1?t[e]:null)&&q(n))}function q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[k])F(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(F(n,e),0==n.h&&(n.src=null,t[U]=null)):D(e)}}}function G(e){return e in j?j[e]:j[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&q(e),e=n.call(r,t)}return e}function Y(e){return(e=e[U])instanceof L?e:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Q]||(e[Q]=function(t){return e.handleEvent(t)}),e[Q])}function J(){E.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new S(t,e);else if(t instanceof S)t.target=t.target||e;else{var i=t;M(t=new S(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&F(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,E),J.prototype[k]=!0,J.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)D(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){E.call(this),this.h=e,this.g={}}u(ne,E);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,ae=s.JSON.parse,oe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function ce(){}function le(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){S.call(this,"d")}function de(){S.call(this,"c")}u(he,S),u(de,S);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){S.call(this,fe.Ia,e)}function ve(e){const t=me();$(t,new ge(t))}function ye(e,t){S.call(this,fe.STAT_EVENT,e),this.stat=t}function we(e){const t=me();$(t,new ye(t,e))}function be(e,t){S.call(this,fe.Ja,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Te(){this.g=!0}function Ee(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,S),fe.STAT_EVENT="statevent",u(ye,S),fe.Ja="timingevent",u(be,S),Te.prototype.ua=function(){this.g=!1},Te.prototype.info=function(){};var Se,Ie={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ae={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function ke(e){return encodeURIComponent(String(e))}function Ne(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function xe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}u(Ce,ce),Ce.prototype.g=function(){return new XMLHttpRequest},Se=new Ce;var Re={},Pe={};function Oe(e,t,n){e.M=1,e.A=mt(ut(t)),e.u=n,e.R=!0,Me(e,null)}function Me(e,t){e.F=Date.now(),Ve(e),e.B=ut(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Nt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new De,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(c(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=B(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?P(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ve(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var c=o[e].split("=");if(c.length>1){const e=c[0];c=c[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+c+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Fe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pe:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?Pe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=_e(c(e.aa,e),t)}function je(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Be(e){0==e.j.I||e.K||dn(e.j,e)}function ze(e){je(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ye(n.h,e)))if(!e.L&&Ye(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;hn(n),en(n)}cn(n),we(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=_e(c(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else pn(n,11)}else if((e.L||n.g==e)&&hn(n),!A(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let c=i[t];const u=c[0];if(!(u<=n.K))if(n.K=u,c=c[1],2==n.I)if("c"==c[0]){n.M=c[1],n.ba=c[2];const t=c[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=c[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=c[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(st(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,pt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=gn(r,r.L?r.ba:null,r.W),a.L){at(r.h,a);var o=a,l=r.O;l&&(o.H=l),o.D&&(je(o),Ve(o)),r.g=a}else on(r);n.i.length>0&&nn(n)}else"stop"!=c[0]&&"close"!=c[0]||pn(n,7);else 3==n.I&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?pn(n,7):Zt(n):"noop"!=c[0]&&n.l&&n.l.qa(c),n.A=0)}ve()}catch(u){}}xe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Qt(e)?t.j():this.Y(e)},xe.prototype.Y=function(e){try{if(e==this.g)e:{const c=Qt(this.g),l=this.g.ya();this.g.ca();if(!(c<3)&&(3!=c||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||4!=c||7==l||ve(),je(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Xt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Qt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Be(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,c,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,we(12),ze(this),Be(this);break e}Ee(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Fe(this,n),t==Pe){4==c&&(this.m=4,we(14),e=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,we(15),Ee(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ee(this.i,this.l,t,null),We(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=n.length||this.h.h||(this.m=1,we(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ln(o),o.P=!0,we(11))}}else Ee(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Be(this)}else Ee(this.i,this.l,n,null),We(this,n);4==c&&ze(this),this.o&&!this.K&&(4==c?dn(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&Qt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(A(e[r]))continue;var n=Ne(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,we(12)):(this.m=0,we(13)),ze(this),Be(this)}}}catch(c){}},xe.prototype.cancel=function(){this.K=!0,ze(this)},xe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ve(),we(17)),ze(this),this.m=2,Be(this)):Ue(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function st(e,t){e.g?e.g.add(t):e.h=t}function at(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ot(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}qe.prototype.cancel=function(){if(this.i=ot(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ct=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof lt?(this.l=e.l,ht(this,e.j),this.o=e.o,this.g=e.g,dt(this,e.u),this.h=e.h,ft(this,xt(e.i)),this.m=e.m):e&&(t=String(e).match(ct))?(this.l=!1,ht(this,t[1]||"",!0),this.o=gt(t[2]||""),this.g=gt(t[3]||"",!0),dt(this,t[4]),this.h=gt(t[5]||"",!0),ft(this,t[6]||"",!0),this.m=gt(t[7]||"")):(this.l=!1,this.i=new St(null,this.l))}function ut(e){return new lt(e)}function ht(e,t,n){e.j=n?gt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function dt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function ft(e,t,n){t instanceof St?(e.i=t,function(e,t){t&&!e.j&&(It(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(At(this,t),Nt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=vt(t,Tt)),e.i=new St(t,e.l))}function pt(e,t,n){e.i.set(t,n)}function mt(e){return pt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function gt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function vt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,yt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function yt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}lt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(vt(t,wt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(vt(t,wt,!0),"@"),e.push(ke(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(vt(n,"/"==n.charAt(0)?_t:bt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",vt(n,Et)),e.join("")},lt.prototype.resolve=function(e){const t=ut(this);let n=!!e.j;n?ht(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)dt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?ft(t,xt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var wt=/[#\/\?@]/g,bt=/[#\?:]/g,_t=/[#\?]/g,Tt=/[#\?@]/g,Et=/#/g;function St(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function It(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function At(e,t){It(e),t=Dt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ct(e,t){return It(e),t=Dt(e,t),e.g.has(t)}function kt(e,t){It(e);let n=[];if("string"===typeof t)Ct(e,t)&&(n=n.concat(e.g.get(Dt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function Nt(e,t,n){At(e,t),n.length>0&&(e.i=null,e.g.set(Dt(e,t),d(n)),e.h+=n.length)}function xt(e){const t=new St;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Dt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Rt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Pt(){this.g=new oe}function Ot(e){this.i=e.Sb||null,this.h=e.ab||!1}function Lt(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ft(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Vt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ut(e)}function Ut(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Bt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&ke(n):pt(e,t,n))}function zt(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=St.prototype).add=function(e,t){It(this),this.i=null,e=Dt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){It(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return It(this),this.i=null,Ct(this,e=Dt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=kt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=ke(n);n=kt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+ke(n[t])),e.push(r)}}return this.i=e.join("&")},u(Ot,ce),Ot.prototype.g=function(){return new Lt(this.i,this.h)},u(Lt,J),(e=Lt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ut(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Vt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ut(this)),this.g&&(this.readyState=3,Ut(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ft(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vt(this):Ut(this),3==this.readyState&&Ft(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Vt(this))},e.Na=function(e){this.g&&(this.response=e,Vt(this))},e.ga=function(){this.g&&Vt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(zt,J);var Wt=/^https?$/i,Ht=["POST","PUT"];function qt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Gt(e),Yt(e)}function Gt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Kt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Qt(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Qt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(ct)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Wt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Qt(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Gt(e)}}finally{Yt(e)}}}function Yt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Qt(e){return e.g?e.g.readyState:0}function Xt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Jt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.za=0,this.i=[],this.j=new Te,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jt("baseRetryDelayMs",5e3,e),this.Za=Jt("retryDelaySeedMs",1e4,e),this.Ta=Jt("forwardChannelMaxRetries",2,e),this.va=Jt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(e&&e.concurrentRequestLimit),this.Ba=new Pt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Zt(e){if(tn(e),3==e.I){var t=e.V++,n=ut(e.J);if(pt(n,"SID",e.M),pt(n,"RID",t),pt(n,"TYPE","terminate"),sn(e,n),(t=new xe(e,e.j,t)).M=2,t.A=mt(ut(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Ve(t)}mn(e)}function en(e){e.g&&(ln(e),e.g.cancel(),e.g=null)}function tn(e){en(e),e.v&&(s.clearTimeout(e.v),e.v=null),hn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function nn(e){if(!Ge(e.h)&&!e.m){e.m=!0;var t=e.Ea;y||_(),w||(y(),w=!0),b.add(t,e),e.D=0}}function rn(e,t){var n;n=t?t.l:e.V++;const r=ut(e.J);pt(r,"SID",e.M),pt(r,"RID",n),pt(r,"AID",e.K),sn(e,r),e.u&&e.o&&Bt(r,e.u,e.o),n=new xe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=an(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),st(e.h,n),Oe(n,r,t)}function sn(e,t){e.H&&R(e.H,function(e,n){pt(t,n,e)}),e.l&&R({},function(e,n){pt(t,n,e)})}function an(e,t,n){n=Math.min(e.i.length,n);const r=e.l?c(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let c=!0;for(let l=0;l<n;l++){var s=i[l].g;const n=i[l].map;if((s-=t)<0)t=Math.max(0,i[l].g-100),c=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Mt){throw e.push(s+"type="+encodeURIComponent("_badmap")),Mt}}catch(Mt){r&&r(n)}}if(c){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function on(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;y||_(),w||(y(),w=!0),b.add(t,e),e.A=0}}function cn(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=_e(c(e.Da,e),fn(e,e.A)),e.A++,!0)}function ln(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function un(e){e.g=new xe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=ut(e.na);pt(t,"RID","rpc"),pt(t,"SID",e.M),pt(t,"AID",e.K),pt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&pt(t,"TO",e.ia),pt(t,"TYPE","xmlhttp"),sn(e,t),e.u&&e.o&&Bt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=mt(ut(t)),n.u=null,n.R=!0,Me(n,e)}function hn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function dn(e,t){var n=null;if(e.g==t){hn(e),ln(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.G,at(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new be(r,n)),nn(e)}else on(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=_e(c(e.Ea,e,t),fn(e,e.D)),e.D++,!0))}(e,t)||2==r&&cn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:pn(e,5);break;case 4:pn(e,10);break;case 3:pn(e,6);break;default:pn(e,2)}}function fn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function pn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.bb,e),r=e.Ua;const t=!r;r=new lt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ht(r,"https"),mt(r),t?function(e,t){const n=new Te;if(s.Image){const r=new Image;r.onload=l(Rt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=l(Rt,n,"TestLoadImage: error",!1,t,r),r.onabort=l(Rt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=l(Rt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Te;const n=new AbortController,r=setTimeout(()=>{n.abort(),Rt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Rt(0,0,!0,t):Rt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Rt(0,0,!1,t)})}(r.toString(),n)}else we(2);e.I=0,e.l&&e.l.pa(t),mn(e),tn(e)}function mn(e){if(e.I=0,e.ja=[],e.l){const t=ot(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function gn(e,t,n){var r=n instanceof lt?ut(n):new lt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),dt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new lt(null);r&&ht(e,r),t&&(e.g=t),i&&dt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&pt(r,n,t),pt(r,"VER",e.ka),sn(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new zt(new Ot({ab:n})):new zt(e.ma)).Fa(e.L),t}function yn(){}function wn(){}function bn(e,t){J.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!A(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new En(this)}function _n(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tn(){de.call(this),this.status=1}function En(e){this.g=e}(e=zt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Se.g(),this.g.onreadystatechange=h(c(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void qt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Ht,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){qt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Yt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yt(this,!0)),zt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Kt(this):this.Xa())},e.Xa=function(){Kt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Qt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=$t.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){we(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=gn(this,null,this.W),nn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new xe(this,this.j,e);let s=this.o;if(this.U&&(s?(s=P(s),M(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=an(this,i,t),pt(n=ut(this.J),"RID",e),pt(n,"CVER",22),this.G&&pt(n,"X-HTTP-Session-Id",this.G),sn(this,n),s&&(this.R?t="headers="+ke(jt(s))+"&"+t:this.u&&Bt(n,this.u,s)),st(this.h,i),this.Ra&&pt(n,"TYPE","init"),this.S?(pt(n,"$req",t),pt(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?rn(this,e):0==this.i.length||Ge(this.h)||rn(this))},e.Da=function(){if(this.v=null,un(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=_e(c(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,we(10),en(this),un(this))},e.Va=function(){null!=this.C&&(this.C=null,en(this),cn(this),we(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),we(2)):(this.j.info("Failed to ping google.com"),we(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=yn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},wn.prototype.g=function(e,t){return new bn(e,t)},u(bn,J),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Zt(this.g)},bn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&nn(t)},bn.prototype.N=function(){this.g.l=null,delete this.j,Zt(this.g),delete this.g,bn.Z.N.call(this)},u(_n,he),u(Tn,de),u(En,yn),En.prototype.ra=function(){$(this.g,"a")},En.prototype.qa=function(e){$(this.g,new _n(e))},En.prototype.pa=function(e){$(this.g,new Tn)},En.prototype.oa=function(){$(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,nt=it.createWebChannelTransport=function(){return new wn},tt=it.getStatEventTarget=function(){return me()},et=it.Event=fe,Ze=it.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,$e=it.ErrorCode=Ie,Ae.COMPLETE="complete",Je=it.EventType=Ae,le.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,Xe=it.WebChannel=le,it.FetchXmlHttpFactory=Ot,zt.prototype.listenOnce=zt.prototype.K,zt.prototype.getLastError=zt.prototype.Ha,zt.prototype.getLastErrorCode=zt.prototype.ya,zt.prototype.getStatus=zt.prototype.ca,zt.prototype.getResponseJson=zt.prototype.La,zt.prototype.getResponseText=zt.prototype.la,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Fa,Qe=it.XhrIo=zt}).apply("undefined"!==typeof rt?rt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});class st{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");let at="12.9.0";const ot=new Q("@firebase/firestore");function ct(){return ot.logLevel}function lt(e){if(ot.logLevel<=H.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dt);ot.debug("Firestore (".concat(at,"): ").concat(e),...i)}}function ut(e){if(ot.logLevel<=H.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dt);ot.error("Firestore (".concat(at,"): ").concat(e),...i)}}function ht(e){if(ot.logLevel<=H.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(dt);ot.warn("Firestore (".concat(at,"): ").concat(e),...i)}}function dt(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function ft(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,pt(e,r,n)}function pt(e,t,n){let r="FIRESTORE (".concat(at,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw ut(r),new Error(r)}function mt(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||pt(t,i,r)}function gt(e,t){return e}const vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends V{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class wt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class _t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}}class Tt{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new wt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wt,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wt)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(mt("string"==typeof t.accessToken,31837,{l:t}),new bt(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(null===e||"string"==typeof e,2055,{h:e}),new st(e)}}class Et{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=st.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class St{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Et(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class It{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class At{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!==(n=e)&&void 0!==n&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(void 0===this.o,3512);const n=e=>{null!=e.error&&lt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,lt("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new It(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(mt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new It(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ct(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class kt{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Ct(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Nt(e,t){return e<t?-1:e>t?1:0}function xt(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return Pt(n)===Pt(i)?Nt(n,i):Pt(n)?1:-1}return Nt(e.length,t.length)}const Dt=55296,Rt=57343;function Pt(e){const t=e.charCodeAt(0);return t>=Dt&&t<=Rt}function Ot(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Mt="__name__";class Lt{constructor(e,t,n){void 0===t?t=0:t>e.length&&ft(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&ft(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Lt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lt?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Lt.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Nt(e.length,t.length)}static compareSegments(e,t){const n=Lt.isNumericId(e),r=Lt.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Lt.extractNumericId(e).compare(Lt.extractNumericId(t)):xt(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qe.fromString(e.substring(4,e.length-2))}}class Ft extends Lt{construct(e,t,n){return new Ft(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new yt(vt.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Ft(e)}static emptyPath(){return new Ft([])}}const Vt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Lt{construct(e,t,n){return new Ut(e,t,n)}static isValidIdentifier(e){return Vt.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Mt}static keyField(){return new Ut([Mt])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new yt(vt.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new yt(vt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new yt(vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new yt(vt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}class jt{constructor(e){this.path=e}static fromPath(e){return new jt(Ft.fromString(e))}static fromName(e){return new jt(Ft.fromString(e).popFirst(5))}static empty(){return new jt(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ft.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new jt(new Ft(e.slice()))}}function Bt(e,t,n){if(!n)throw new yt(vt.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zt(e){if(!jt.isDocumentKey(e))throw new yt(vt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Wt(e){if(jt.isDocumentKey(e))throw new yt(vt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ht(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function qt(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ft(12329,{type:typeof e})}function Gt(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yt(vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qt(e);throw new yt(vt.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Kt(e,t){const n={typeString:e};return t&&(n.value=t),n}function Yt(e,t){if(!Ht(e))throw new yt(vt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new yt(vt.INVALID_ARGUMENT,n);return!0}const Qt=-62135596800,Xt=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Xt);return new Jt(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yt(vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yt(vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qt)throw new yt(vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xt}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yt(e,Jt._jsonSchema))return new Jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qt;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Kt("string",Jt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};class $t{static fromTimestamp(e){return new $t(e)}static min(){return new $t(new Jt(0,0))}static max(){return new $t(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Zt=-1;class en{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}en.UNKNOWN_ID=-1;function tn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=$t.fromTimestamp(1e9===r?new Jt(n+1,0):new Jt(n,r));return new rn(i,jt.empty(),t)}function nn(e){return new rn(e.readTime,e.key,Zt)}class rn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new rn($t.min(),jt.empty(),Zt)}static max(){return new rn($t.max(),jt.empty(),Zt)}}function sn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=jt.comparator(e.documentKey,t.documentKey),0!==n?n:Nt(e.largestBatchId,t.largestBatchId))}const an="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class on{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function cn(e){if(e.code!==vt.FAILED_PRECONDITION||e.message!==an)throw e;lt("LocalStore","Unexpectedly lost primary lease")}class ln{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ln((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ln?t:ln.resolve(t)}catch(e){return ln.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ln.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ln.reject(t)}static resolve(e){return new ln((t,n)=>{t(e)})}static reject(e){return new ln((t,n)=>{n(e)})}static waitFor(e){return new ln((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=ln.resolve(!1);for(const n of e)t=t.next(e=>e?ln.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ln((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const c=o;t(e[c]).next(e=>{s[c]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new ln((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function un(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hn(e){return"IndexedDbTransactionError"===e.name}class dn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dn.ce=-1;const fn=-1;function pn(e){return null==e}function mn(e){return 0===e&&1/e==-1/0}function gn(e){return"number"==typeof e&&Number.isInteger(e)&&!mn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const vn="\x01";function yn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=bn(t)),t=wn(e.get(n),t);return bn(t)}function wn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case vn:n+="\x01\x11";break;default:n+=t}}return n}function bn(e){return e+vn+"\x01"}const _n="remoteDocuments",Tn="owner",En="mutationQueues",Sn="mutations";const In="documentMutations",An="remoteDocumentsV14",Cn="remoteDocumentGlobal",kn="targets",Nn="targetDocuments",xn="targetGlobal",Dn="collectionParents",Rn="clientMetadata",Pn="bundles",On="namedQueries",Mn="indexConfiguration",Ln="indexState",Fn="indexEntries",Vn="documentOverlays",Un="globals",jn=[En,Sn,In,_n,kn,Tn,xn,Nn,Rn,Cn,Dn,Pn,On],Bn=[En,Sn,In,An,kn,Tn,xn,Nn,Rn,Cn,Dn,Pn,On,Vn],zn=Bn,Wn=[...zn,Mn,Ln,Fn];function Hn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Gn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Kn{constructor(e,t){this.comparator=e,this.root=t||Qn.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yn(this.root,e,this.comparator,!0)}}class Yn{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Qn.RED,this.left=null!=r?r:Qn.EMPTY,this.right=null!=i?i:Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Qn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Qn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ft(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ft(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1,Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw ft(57766)}get value(){throw ft(16141)}get color(){throw ft(16727)}get left(){throw ft(29726)}get right(){throw ft(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xn{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jn(this.data.getIterator())}getIteratorFrom(e){return new Jn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Xn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xn(this.comparator);return t.data=e,t}}class Jn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class $n{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new $n([])}unionWith(e){let t=new Xn(Ut.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ot(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Zn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Zn("Invalid base64 string: "+e):e}}(e);return new er(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new er(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}er.EMPTY_BYTE_STRING=new er("");const tr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(e){if(mt(!!e,39018),"string"==typeof e){let t=0;const n=tr.exec(e);if(mt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:rr(e.seconds),nanos:rr(e.nanos)}}function rr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ir(e){return"string"==typeof e?er.fromBase64String(e):er.fromUint8Array(e)}const sr="server_timestamp",ar="__type__",or="__previous_value__",cr="__local_write_time__";function lr(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[ar])||void 0===t?void 0:t.stringValue)===sr}function ur(e){const t=e.mapValue.fields[or];return lr(t)?ur(t):t}function hr(e){const t=nr(e.mapValue.fields[cr].timestampValue);return new Jt(t.seconds,t.nanos)}class dr{constructor(e,t,n,r,i,s,a,o,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c,this.isUsingEmulator=l,this.apiKey=u}}const fr="(default)";class pr{constructor(e,t){this.projectId=e,this.database=t||fr}static empty(){return new pr("","")}get isDefaultDatabase(){return this.database===fr}isEqual(e){return e instanceof pr&&e.projectId===this.projectId&&e.database===this.database}}const mr="__type__",gr="__max__",vr={mapValue:{fields:{__type__:{stringValue:gr}}}},yr="__vector__",wr="value";function br(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?lr(e)?4:Lr(e)?9007199254740991:Or(e)?10:11:ft(28295,{value:e})}function _r(e,t){if(e===t)return!0;const n=br(e);if(n!==br(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hr(e).isEqual(hr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=nr(e.timestampValue),r=nr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ir(e.bytesValue).isEqual(ir(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return rr(e.geoPointValue.latitude)===rr(t.geoPointValue.latitude)&&rr(e.geoPointValue.longitude)===rr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return rr(e.integerValue)===rr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=rr(e.doubleValue),r=rr(t.doubleValue);return n===r?mn(n)===mn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ot(e.arrayValue.values||[],t.arrayValue.values||[],_r);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Hn(n)!==Hn(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!_r(n[i],r[i])))return!1;return!0}(e,t);default:return ft(52216,{left:e})}}function Tr(e,t){return void 0!==(e.values||[]).find(e=>_r(e,t))}function Er(e,t){if(e===t)return 0;const n=br(e),r=br(t);if(n!==r)return Nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=rr(e.integerValue||e.doubleValue),r=rr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Sr(e.timestampValue,t.timestampValue);case 4:return Sr(hr(e),hr(t));case 5:return xt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ir(e),r=ir(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Nt(n[i],r[i]);if(0!==e)return e}return Nt(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Nt(rr(e.latitude),rr(t.latitude));return 0!==n?n:Nt(rr(e.longitude),rr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ir(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},c=null===(n=a[wr])||void 0===n?void 0:n.arrayValue,l=null===(r=o[wr])||void 0===r?void 0:r.arrayValue,u=Nt((null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0,(null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ir(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===vr.mapValue&&t===vr.mapValue)return 0;if(e===vr.mapValue)return 1;if(t===vr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=xt(r[a],s[a]);if(0!==e)return e;const t=Er(n[r[a]],i[s[a]]);if(0!==t)return t}return Nt(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ft(23264,{he:n})}}function Sr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Nt(e,t);const n=nr(e),r=nr(t),i=Nt(n.seconds,r.seconds);return 0!==i?i:Nt(n.nanos,r.nanos)}function Ir(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Er(n[i],r[i]);if(e)return e}return Nt(n.length,r.length)}function Ar(e){return Cr(e)}function Cr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=nr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ir(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return jt.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Cr(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Cr(e.fields[i]));return n+"}"}(e.mapValue):ft(61005,{value:e})}function kr(e){switch(br(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ur(e);return t?16+kr(t):16;case 5:return 2*e.stringValue.length;case 6:return ir(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+kr(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return qn(e.fields,(e,n)=>{t+=e.length+kr(n)}),t}(e.mapValue);default:throw ft(13486,{value:e})}}function Nr(e){return!!e&&"integerValue"in e}function xr(e){return!!e&&"arrayValue"in e}function Dr(e){return!!e&&"nullValue"in e}function Rr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pr(e){return!!e&&"mapValue"in e}function Or(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[mr])||void 0===t?void 0:t.stringValue)===yr}function Mr(e){if(e.geoPointValue)return{geoPointValue:(0,I.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,I.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return qn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Mr(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Mr(e.arrayValue.values[n]);return t}return(0,I.A)({},e)}function Lr(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===gr}class Fr{constructor(e){this.value=e}static empty(){return new Fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Pr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mr(t)}setAll(e){let t=Ut.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Mr(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Pr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Pr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){qn(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Fr(Mr(this.value))}}function Vr(e){const t=[];return qn(e.fields,(e,n)=>{const r=new Ut([e]);if(Pr(n)){const e=Vr(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new $n(t)}class Ur{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Ur(e,0,$t.min(),$t.min(),$t.min(),Fr.empty(),0)}static newFoundDocument(e,t,n,r){return new Ur(e,1,t,$t.min(),n,r,0)}static newNoDocument(e,t){return new Ur(e,2,t,$t.min(),$t.min(),Fr.empty(),0)}static newUnknownDocument(e,t){return new Ur(e,3,t,$t.min(),$t.min(),Fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class jr{constructor(e,t){this.position=e,this.inclusive=t}}function Br(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?jt.comparator(jt.fromName(a.referenceValue),n.key):Er(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function zr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!_r(e.position[n],t.position[n]))return!1;return!0}class Wr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Hr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class qr{}class Gr extends qr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ei(e,t,n):"array-contains"===t?new ii(e,n):"in"===t?new si(e,n):"not-in"===t?new ai(e,n):"array-contains-any"===t?new oi(e,n):new Gr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ti(e,n):new ni(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Er(t,this.value)):null!==t&&br(this.value)===br(t)&&this.matchesComparison(Er(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kr extends qr{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Kr(e,t)}matches(e){return Yr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Yr(e){return"and"===e.op}function Qr(e){return Xr(e)&&Yr(e)}function Xr(e){for(const t of e.filters)if(t instanceof Kr)return!1;return!0}function Jr(e){if(e instanceof Gr)return e.field.canonicalString()+e.op.toString()+Ar(e.value);if(Qr(e))return e.filters.map(e=>Jr(e)).join(",");{const t=e.filters.map(e=>Jr(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function $r(e,t){return e instanceof Gr?function(e,t){return t instanceof Gr&&e.op===t.op&&e.field.isEqual(t.field)&&_r(e.value,t.value)}(e,t):e instanceof Kr?function(e,t){return t instanceof Kr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&$r(n,t.filters[r]),!0)}(e,t):void ft(19439)}function Zr(e){return e instanceof Gr?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ar(e.value))}(e):e instanceof Kr?function(e){return e.op.toString()+" {"+e.getFilters().map(Zr).join(" ,")+"}"}(e):"Filter"}class ei extends Gr{constructor(e,t,n){super(e,t,n),this.key=jt.fromName(n.referenceValue)}matches(e){const t=jt.comparator(e.key,this.key);return this.matchesComparison(t)}}class ti extends Gr{constructor(e,t){super(e,"in",t),this.keys=ri("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ni extends Gr{constructor(e,t){super(e,"not-in",t),this.keys=ri("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ri(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>jt.fromName(e.referenceValue))}class ii extends Gr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xr(t)&&Tr(t.arrayValue,this.value)}}class si extends Gr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tr(this.value.arrayValue,t)}}class ai extends Gr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Tr(this.value.arrayValue,t)}}class oi extends Gr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Tr(this.value.arrayValue,e))}}class ci{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function li(e){return new ci(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ui(e){const t=gt(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Jr(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),pn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ar(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ar(e)).join(",")),t.Te=e}return t.Te}function hi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Hr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$r(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zr(e.startAt,t.startAt)&&zr(e.endAt,t.endAt)}function di(e){return jt.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class fi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function pi(e,t,n,r,i,s,a,o){return new fi(e,t,n,r,i,s,a,o)}function mi(e){return new fi(e)}function gi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function vi(e){return null!==e.collectionGroup}function yi(e){const t=gt(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Xn(Ut.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Wr(r,n))}),e.has(Ut.keyField().canonicalString())||t.Ie.push(new Wr(Ut.keyField(),n))}return t.Ie}function wi(e){const t=gt(e);return t.Ee||(t.Ee=bi(t,yi(e))),t.Ee}function bi(e,t){if("F"===e.limitType)return li(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Wr(e.field,t)});const n=e.endAt?new jr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new jr(e.startAt.position,e.startAt.inclusive):null;return li(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function _i(e,t,n){return new fi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ti(e,t){return hi(wi(e),wi(t))&&e.limitType===t.limitType}function Ei(e){return"".concat(ui(wi(e)),"|lt:").concat(e.limitType)}function Si(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Zr(e)).join(", "),"]")),pn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ar(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ar(e)).join(",")),"Target(".concat(t,")")}(wi(e)),"; limitType=").concat(e.limitType,")")}function Ii(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):jt.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of yi(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Br(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,yi(e),t))&&!(e.endAt&&!function(e,t,n){const r=Br(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,yi(e),t))}(e,t)}function Ai(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ci(e){return(t,n)=>{let r=!1;for(const i of yi(e)){const e=ki(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ki(e,t,n){const r=e.field.isKeyField()?jt.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Er(r,i):ft(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ft(19790,{direction:e.dir})}}class Ni{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qn(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Gn(this.inner)}size(){return this.innerSize}}const xi=new Kn(jt.comparator);function Di(){return xi}const Ri=new Kn(jt.comparator);function Pi(){let e=Ri;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Oi(e){let t=Ri;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Mi(){return Fi()}function Li(){return Fi()}function Fi(){return new Ni(e=>e.toString(),(e,t)=>e.isEqual(t))}const Vi=new Kn(jt.comparator),Ui=new Xn(jt.comparator);function ji(){let e=Ui;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Bi=new Xn(Nt);function zi(){return Bi}function Wi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mn(t)?"-0":t}}function Hi(e){return{integerValue:""+e}}function qi(e,t){return gn(t)?Hi(t):Wi(e,t)}class Gi{constructor(){this._=void 0}}function Ki(e,t,n){return e instanceof Xi?function(e,t){const n={fields:{[ar]:{stringValue:sr},[cr]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&lr(t)&&(t=ur(t)),t&&(n.fields[or]=t),{mapValue:n}}(n,t):e instanceof Ji?$i(e,t):e instanceof Zi?es(e,t):function(e,t){const n=Qi(e,t),r=ns(n)+ns(e.Ae);return Nr(n)&&Nr(e.Ae)?Hi(r):Wi(e.serializer,r)}(e,t)}function Yi(e,t,n){return e instanceof Ji?$i(e,t):e instanceof Zi?es(e,t):n}function Qi(e,t){return e instanceof ts?function(e){return Nr(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Xi extends Gi{}class Ji extends Gi{constructor(e){super(),this.elements=e}}function $i(e,t){const n=rs(t);for(const r of e.elements)n.some(e=>_r(e,r))||n.push(r);return{arrayValue:{values:n}}}class Zi extends Gi{constructor(e){super(),this.elements=e}}function es(e,t){let n=rs(t);for(const r of e.elements)n=n.filter(e=>!_r(e,r));return{arrayValue:{values:n}}}class ts extends Gi{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ns(e){return rr(e.integerValue||e.doubleValue)}function rs(e){return xr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class is{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function as(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class os{}function cs(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ys(e.key,ss.none()):new fs(e.key,e.data,ss.none());{const n=e.data,r=Fr.empty();let i=new Xn(Ut.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ps(e.key,r,new $n(i.toArray()),ss.none())}}function ls(e,t,n){e instanceof fs?function(e,t,n){const r=e.value.clone(),i=gs(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ps?function(e,t,n){if(!as(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=gs(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ms(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function us(e,t,n,r){return e instanceof fs?function(e,t,n,r){if(!as(e.precondition,t))return n;const i=e.value.clone(),s=vs(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ps?function(e,t,n,r){if(!as(e.precondition,t))return n;const i=vs(e.fieldTransforms,r,t),s=t.data;return s.setAll(ms(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return as(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Qi(r.transform,e||null);null!=i&&(null===n&&(n=Fr.empty()),n.set(r.field,i))}return n||null}function ds(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ot(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ji&&t instanceof Ji||e instanceof Zi&&t instanceof Zi?Ot(e.elements,t.elements,_r):e instanceof ts&&t instanceof ts?_r(e.Ae,t.Ae):e instanceof Xi&&t instanceof Xi}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class fs extends os{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ps extends os{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ms(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function gs(e,t,n){const r=new Map;mt(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Yi(a,o,n[i]))}return r}function vs(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ki(e,s,t))}return r}class ys extends os{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ws extends os{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bs{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ls(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=us(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=us(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Li();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=cs(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument($t.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ji())}isEqual(e){return this.batchId===e.batchId&&Ot(this.mutations,e.mutations,(e,t)=>ds(e,t))&&Ot(this.baseMutations,e.baseMutations,(e,t)=>ds(e,t))}}class _s{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){mt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Vi;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new _s(e,t,n,r)}}class Ts{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Es{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ss,Is;function As(e){switch(e){case vt.OK:return ft(64938);case vt.CANCELLED:case vt.UNKNOWN:case vt.DEADLINE_EXCEEDED:case vt.RESOURCE_EXHAUSTED:case vt.INTERNAL:case vt.UNAVAILABLE:case vt.UNAUTHENTICATED:return!1;case vt.INVALID_ARGUMENT:case vt.NOT_FOUND:case vt.ALREADY_EXISTS:case vt.PERMISSION_DENIED:case vt.FAILED_PRECONDITION:case vt.ABORTED:case vt.OUT_OF_RANGE:case vt.UNIMPLEMENTED:case vt.DATA_LOSS:return!0;default:return ft(15467,{code:e})}}function Cs(e){if(void 0===e)return ut("GRPC error has no .code"),vt.UNKNOWN;switch(e){case Ss.OK:return vt.OK;case Ss.CANCELLED:return vt.CANCELLED;case Ss.UNKNOWN:return vt.UNKNOWN;case Ss.DEADLINE_EXCEEDED:return vt.DEADLINE_EXCEEDED;case Ss.RESOURCE_EXHAUSTED:return vt.RESOURCE_EXHAUSTED;case Ss.INTERNAL:return vt.INTERNAL;case Ss.UNAVAILABLE:return vt.UNAVAILABLE;case Ss.UNAUTHENTICATED:return vt.UNAUTHENTICATED;case Ss.INVALID_ARGUMENT:return vt.INVALID_ARGUMENT;case Ss.NOT_FOUND:return vt.NOT_FOUND;case Ss.ALREADY_EXISTS:return vt.ALREADY_EXISTS;case Ss.PERMISSION_DENIED:return vt.PERMISSION_DENIED;case Ss.FAILED_PRECONDITION:return vt.FAILED_PRECONDITION;case Ss.ABORTED:return vt.ABORTED;case Ss.OUT_OF_RANGE:return vt.OUT_OF_RANGE;case Ss.UNIMPLEMENTED:return vt.UNIMPLEMENTED;case Ss.DATA_LOSS:return vt.DATA_LOSS;default:return ft(39323,{code:e})}}(Is=Ss||(Ss={}))[Is.OK=0]="OK",Is[Is.CANCELLED=1]="CANCELLED",Is[Is.UNKNOWN=2]="UNKNOWN",Is[Is.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Is[Is.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Is[Is.NOT_FOUND=5]="NOT_FOUND",Is[Is.ALREADY_EXISTS=6]="ALREADY_EXISTS",Is[Is.PERMISSION_DENIED=7]="PERMISSION_DENIED",Is[Is.UNAUTHENTICATED=16]="UNAUTHENTICATED",Is[Is.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Is[Is.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Is[Is.ABORTED=10]="ABORTED",Is[Is.OUT_OF_RANGE=11]="OUT_OF_RANGE",Is[Is.UNIMPLEMENTED=12]="UNIMPLEMENTED",Is[Is.INTERNAL=13]="INTERNAL",Is[Is.UNAVAILABLE=14]="UNAVAILABLE",Is[Is.DATA_LOSS=15]="DATA_LOSS";let ks=null;function Ns(){return new TextEncoder}const xs=new qe([4294967295,4294967295],0);function Ds(e){const t=Ns().encode(e),n=new Ge;return n.update(t),new Uint8Array(n.digest())}function Rs(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new qe([n,r],0),new qe([i,s],0)]}class Ps{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Os("Invalid padding: ".concat(t));if(n<0)throw new Os("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Os("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Os("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=qe.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(qe.fromNumber(n)));return 1===r.compare(xs)&&(r=new qe([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Ds(e),[n,r]=Rs(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Ps(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Ds(e),[n,r]=Rs(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.be(e)}}be(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Os extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ms{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ls.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Ms($t.min(),r,new Kn(Nt),Di(),ji())}}class Ls{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ls(n,t,ji(),ji(),ji())}}class Fs{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Vs{constructor(e,t){this.targetId=e,this.Ce=t}}class Us{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:er.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class js{constructor(){this.ve=0,this.Fe=Ws(),this.Me=er.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ji(),t=ji(),n=ji();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ft(38017,{changeType:i})}}),new Ls(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=Ws()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Bs{constructor(e){this.Ge=e,this.ze=new Map,this.je=Di(),this.He=zs(),this.Je=zs(),this.Ze=new Kn(Nt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ft(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(di(s))if(0===n){const e=new jt(s.path);this.et(t,e,Ur.newNoDocument(e,$t.min()))}else mt(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null===(i=ks)||void 0===i||i.lt(function(e,t,n,r,i){var s,a,o,c,l;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===h||void 0===h||null===(o=h.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(c=null===h||void 0===h||null===(l=h.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=ir(n).toUint8Array()}catch(e){if(e instanceof Zn)return ht("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Ps(s,r,i)}catch(e){return ht(e instanceof Os?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&di(i.target)){const t=new jt(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Ur.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}});let n=ji();this.Je.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Ms(e,t,this.Ze,this.je,n);return this.je=Di(),this.He=zs(),this.Je=zs(),this.Ze=new Kn(Nt),r}Ye(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new js,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Xn(Nt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Xn(Nt),this.He=this.He.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||lt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new js),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zs(){return new Kn(jt.comparator)}function Ws(){return new Kn(jt.comparator)}const Hs={asc:"ASCENDING",desc:"DESCENDING"},qs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Gs={and:"AND",or:"OR"};class Ks{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ys(e,t){return e.useProto3Json||pn(t)?t:{value:t}}function Qs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xs(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Js(e,t){return Qs(e,t.toTimestamp())}function $s(e){return mt(!!e,49232),$t.fromTimestamp(function(e){const t=nr(e);return new Jt(t.seconds,t.nanos)}(e))}function Zs(e,t){return ea(e,t).canonicalString()}function ea(e,t){const n=function(e){return new Ft(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ta(e){const t=Ft.fromString(e);return mt(_a(t),10190,{key:t.toString()}),t}function na(e,t){return Zs(e.databaseId,t.path)}function ra(e,t){const n=ta(t);if(n.get(1)!==e.databaseId.projectId)throw new yt(vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yt(vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new jt(oa(n))}function ia(e,t){return Zs(e.databaseId,t)}function sa(e){const t=ta(e);return 4===t.length?Ft.emptyPath():oa(t)}function aa(e){return new Ft(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function oa(e){return mt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function ca(e,t,n){return{name:na(e,t),fields:n.value.mapValue.fields}}function la(e,t){let n;if(t instanceof fs)n={update:ca(e,t.key,t.value)};else if(t instanceof ys)n={delete:na(e,t.key)};else if(t instanceof ps)n={update:ca(e,t.key,t.data),updateMask:ba(t.fieldMask)};else{if(!(t instanceof ws))return ft(16599,{dt:t.type});n={verify:na(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Xi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ji)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zi)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ts)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw ft(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Js(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ft(27497)}(e,t.precondition)),n}function ua(e,t){return{documents:[ia(e,t.path)]}}function ha(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ia(e,i);const s=function(e){if(0!==e.length)return wa(Kr.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:va(e.field),direction:pa(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ys(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function da(e){let t=sa(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){mt(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=fa(e);return t instanceof Kr&&Qr(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Wr(ya(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,pn(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new jr(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new jr(n,t)}(n.endAt)),pi(t,i,a,s,o,"F",c,l)}function fa(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ya(e.unaryFilter.field);return Gr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ya(e.unaryFilter.field);return Gr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ya(e.unaryFilter.field);return Gr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ya(e.unaryFilter.field);return Gr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ft(61313);default:return ft(60726)}}(e):void 0!==e.fieldFilter?function(e){return Gr.create(ya(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ft(58110);default:return ft(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Kr.create(e.compositeFilter.filters.map(e=>fa(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ft(1026)}}(e.compositeFilter.op))}(e):ft(30097,{filter:e})}function pa(e){return Hs[e]}function ma(e){return qs[e]}function ga(e){return Gs[e]}function va(e){return{fieldPath:e.canonicalString()}}function ya(e){return Ut.fromServerFormat(e.fieldPath)}function wa(e){return e instanceof Gr?function(e){if("=="===e.op){if(Rr(e.value))return{unaryFilter:{field:va(e.field),op:"IS_NAN"}};if(Dr(e.value))return{unaryFilter:{field:va(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Rr(e.value))return{unaryFilter:{field:va(e.field),op:"IS_NOT_NAN"}};if(Dr(e.value))return{unaryFilter:{field:va(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(e.field),op:ma(e.op),value:e.value}}}(e):e instanceof Kr?function(e){const t=e.getFilters().map(e=>wa(e));return 1===t.length?t[0]:{compositeFilter:{op:ga(e.op),filters:t}}}(e):ft(54877,{filter:e})}function ba(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function _a(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ta(e){return!!e&&"function"==typeof e._toProto&&"ProtoValue"===e._protoValueType}class Ea{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$t.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$t.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:er.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Sa{constructor(e){this.yt=e}}function Ia(e){const t=da({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?_i(t,t.limit,"L"):t}class Aa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(rr(e.integerValue));else if("doubleValue"in e){const n=rr(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),mn(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=nr(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ir(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Lr(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Or(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):ft(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=wr,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(rr(s)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),jt.fromName(e).path.forEach(e=>{this.Ft(t,60),this.$t(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Aa.Wt=new Aa;class Ca{constructor(){this.Sn=new ka}addToCollectionParentIndex(e,t){return this.Sn.add(t),ln.resolve()}getCollectionParents(e,t){return ln.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ln.resolve()}deleteFieldIndex(e,t){return ln.resolve()}deleteAllFieldIndexes(e){return ln.resolve()}createTargetIndexes(e,t){return ln.resolve()}getDocumentsMatchingTarget(e,t){return ln.resolve(null)}getIndexType(e,t){return ln.resolve(0)}getFieldIndexes(e,t){return ln.resolve([])}getNextCollectionGroupToUpdate(e){return ln.resolve(null)}getMinOffset(e,t){return ln.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return ln.resolve(rn.min())}updateCollectionGroup(e,t,n){return ln.resolve()}updateIndexEntries(e,t){return ln.resolve()}}class ka{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Xn(Ft.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Xn(Ft.comparator)).toArray()}}new Uint8Array(0);const Na={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xa=41943040;class Da{static withCacheSize(e){return new Da(e,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Da.DEFAULT_COLLECTION_PERCENTILE=10,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Da.DEFAULT=new Da(xa,Da.DEFAULT_COLLECTION_PERCENTILE,Da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Da.DISABLED=new Da(-1,0,0);class Ra{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ra(0)}static ar(){return new Ra(-1)}}const Pa="LruGarbageCollector",Oa=1048576;function Ma(e,t){let[n,r]=e,[i,s]=t;const a=Nt(n,i);return 0===a?Nt(r,s):a}class La{constructor(e){this.Pr=e,this.buffer=new Xn(Ma),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Ma(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fa{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Ar(e){lt(Pa,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){hn(e)?lt(Pa,"Ignoring IndexedDB error during garbage collection: ",e):await cn(e)}await this.Ar(3e5)})}}class Va{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ln.resolve(dn.ce);const n=new La(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.mr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),ln.resolve(Na)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Na):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,s,a,o,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),ct()<=H.DEBUG&&lt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-o)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),ln.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Ua(e,t){return new Va(e,t)}class ja{constructor(){this.changes=new Ni(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ur.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ln.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ba{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class za{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&us(n.mutation,e,$n.empty(),Jt.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ji()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ji();const r=Mi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Pi();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Mi();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ji()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Di();const s=Fi(),a=Fi();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof ps)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),us(a.mutation,t,a.mutation.getFieldMask(),Jt.now())):s.set(t.key,$n.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Ba(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Fi();let r=new Kn((e,t)=>e-t),i=ji();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||$n.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||ji()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,c=r.value,l=Li();c.forEach(e=>{if(!i.has(e)){const r=cs(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,l))}return ln.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return jt.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vi(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ln.resolve(Mi());let a=Zt,o=i;return s.next(t=>ln.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?ln.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,ji())).next(e=>({batchId:a,changes:Oi(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new jt(t)).next(e=>{let t=Pi();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Pi();return this.indexManager.getCollectionParents(e,i).next(a=>ln.forEach(a,a=>{const o=function(e,t){return new fi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ur.newInvalidDocument(r)))});let n=Pi();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&us(s.mutation,r,$n.empty(),Jt.now()),Ii(t,r)&&(n=n.insert(e,r))}),n})}}class Wa{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ln.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:$s(e.createTime)}}(t)),ln.resolve()}getNamedQuery(e,t){return ln.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:Ia(e.bundledQuery),readTime:$s(e.readTime)}}(t)),ln.resolve()}}class Ha{constructor(){this.overlays=new Kn(jt.comparator),this.Lr=new Map}getOverlay(e,t){return ln.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Mi();return ln.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.bt(e,t,r)}),ln.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Lr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Lr.delete(n)),ln.resolve()}getOverlaysForCollection(e,t,n){const r=Mi(),i=t.length+1,s=new jt(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ln.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Kn((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Mi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=Mi(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ln.resolve(a)}bt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ts(t,n));let i=this.Lr.get(t);void 0===i&&(i=ji(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}}class qa{constructor(){this.sessionToken=er.EMPTY_BYTE_STRING}getSessionToken(e){return ln.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ln.resolve()}}class Ga{constructor(){this.kr=new Xn(Ka.Kr),this.qr=new Xn(Ka.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const n=new Ka(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new Ka(e,t))}Qr(e,t){e.forEach(e=>this.removeReference(e,t))}Gr(e){const t=new jt(new Ft([])),n=new Ka(t,e),r=new Ka(t,e+1),i=[];return this.qr.forEachInRange([n,r],e=>{this.Wr(e),i.push(e.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new jt(new Ft([])),n=new Ka(t,e),r=new Ka(t,e+1);let i=ji();return this.qr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ka(e,0),n=this.kr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ka{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return jt.comparator(e.key,t.key)||Nt(e.Hr,t.Hr)}static Ur(e,t){return Nt(e.Hr,t.Hr)||jt.comparator(e.key,t.key)}}class Ya{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Xn(Ka.Kr)}checkEmpty(e){return ln.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new bs(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Jr=this.Jr.add(new Ka(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ln.resolve(s)}lookupMutationBatch(e,t){return ln.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Xr(n),i=r<0?0:r;return ln.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ln.resolve(0===this.mutationQueue.length?fn:this.Yn-1)}getAllMutationBatches(e){return ln.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ka(t,0),r=new Ka(t,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,r],e=>{const t=this.Zr(e.Hr);i.push(t)}),ln.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Xn(Nt);return t.forEach(e=>{const t=new Ka(e,0),r=new Ka(e,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([t,r],e=>{n=n.add(e.Hr)})}),ln.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;jt.isDocumentKey(i)||(i=i.child(""));const s=new Ka(new jt(i),0);let a=new Xn(Nt);return this.Jr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Hr)),!0)},s),ln.resolve(this.Yr(a))}Yr(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){mt(0===this.ei(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Jr;return ln.forEach(t.mutations,r=>{const i=new Ka(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Jr=n})}nr(e){}containsKey(e,t){const n=new Ka(t,0),r=this.Jr.firstAfterOrEqual(n);return ln.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ln.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qa{constructor(e){this.ti=e,this.docs=new Kn(jt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ln.resolve(n?n.document.mutableCopy():Ur.newInvalidDocument(t))}getEntries(e,t){let n=Di();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ur.newInvalidDocument(e))}),ln.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Di();const s=t.path,a=new jt(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||sn(nn(a),n)<=0||(r.has(a.key)||Ii(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return ln.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ft(9500)}ni(e,t){return ln.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Xa(this)}getSize(e){return ln.resolve(this.size)}}class Xa extends ja{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)}),ln.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class Ja{constructor(e){this.persistence=e,this.ri=new Ni(e=>ui(e),hi),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.ii=0,this.si=new Ga,this.targetCount=0,this.oi=Ra._r()}forEachTarget(e,t){return this.ri.forEach((e,n)=>t(n)),ln.resolve()}getLastRemoteSnapshotVersion(e){return ln.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ln.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ln.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),ln.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ra(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ln.resolve()}updateTargetData(e,t){return this.lr(t),ln.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ln.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ri.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ri.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ln.waitFor(i).next(()=>r)}getTargetCount(e){return ln.resolve(this.targetCount)}getTargetData(e,t){const n=this.ri.get(t)||null;return ln.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),ln.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),ln.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ln.resolve()}getMatchingKeysForTargetId(e,t){const n=this.si.jr(t);return ln.resolve(n)}containsKey(e,t){return ln.resolve(this.si.containsKey(t))}}class $a{constructor(e,t){this._i={},this.overlays={},this.ai=new dn(0),this.ui=!1,this.ui=!0,this.ci=new qa,this.referenceDelegate=e(this),this.li=new Ja(this),this.indexManager=new Ca,this.remoteDocumentCache=function(e){return new Qa(e)}(e=>this.referenceDelegate.hi(e)),this.serializer=new Sa(t),this.Pi=new Wa(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ha,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new Ya(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){lt("MemoryPersistence","Starting transaction:",e);const r=new Za(this.ai.next());return this.referenceDelegate.Ti(),n(r).next(e=>this.referenceDelegate.Ii(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ei(e,t){return ln.or(Object.values(this._i).map(n=>()=>n.containsKey(e,t)))}}class Za extends on{constructor(e){super(),this.currentSequenceNumber=e}}class eo{constructor(e){this.persistence=e,this.Ri=new Ga,this.Ai=null}static Vi(e){return new eo(e)}get di(){if(this.Ai)return this.Ai;throw ft(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),ln.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),ln.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ln.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(e=>this.di.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.di.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ln.forEach(this.di,n=>{const r=jt.fromPath(n);return this.mi(e,r).next(e=>{e||t.removeEntry(r,$t.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return ln.or([()=>ln.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class to{constructor(e,t){this.persistence=e,this.fi=new Ni(e=>yn(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Ua(this,t)}static Vi(e,t){return new to(e,t)}Ti(){}Ii(e){return ln.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}mr(e,t){return ln.forEach(this.fi,(n,r)=>this.wr(e,n,r).next(e=>e?ln.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,r=>this.wr(e,r,t).next(e=>{e||(n++,i.removeEntry(r,$t.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ln.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ln.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),ln.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ln.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kr(e.data.value)),t}wr(e,t,n){return ln.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.fi.get(t);return ln.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class no{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(e,t){let n=ji(),r=ji();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new no(e,t.fromCache,n,r)}}class ro{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class io{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=L()?8:un(O())>0?6:4}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.gs(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ps(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new ro;return this.ys(e,t,n).next(r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)})}).next(()=>i.result)}ws(e,t,n,r){return n.documentReadCount<this.Vs?(ct()<=H.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",Si(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ln.resolve()):(ct()<=H.DEBUG&&lt("QueryEngine","Query:",Si(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(ct()<=H.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",Si(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wi(t))):ln.resolve())}gs(e,t){if(gi(t))return ln.resolve(null);let n=wi(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=_i(t,null,"F"),n=wi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ji(...r);return this.fs.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,r);return this.Ss(t,s,i,n.readTime)?this.gs(e,_i(t,null,"F")):this.Ds(e,s,t,n)}))})))}ps(e,t,n,r){return gi(t)||r.isEqual($t.min())?ln.resolve(null):this.fs.getDocuments(e,n).next(i=>{const s=this.bs(t,i);return this.Ss(t,s,n,r)?ln.resolve(null):(ct()<=H.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Si(t)),this.Ds(e,s,t,tn(r,Zt)).next(e=>e))})}bs(e,t){let n=new Xn(Ci(e));return t.forEach((t,r)=>{Ii(e,r)&&(n=n.add(r))}),n}Ss(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return ct()<=H.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",Si(t)),this.fs.getDocumentsMatchingQuery(e,t,rn.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const so="LocalStore";class ao{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new Kn(Nt),this.Fs=new Ni(e=>ui(e),hi),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new za(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}}function oo(e,t,n,r){return new ao(e,t,n,r)}async function co(e,t){const n=gt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=ji();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ns:e,removedBatchIds:i,addedBatchIds:s}))})})}function lo(e){const t=gt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.li.getLastRemoteSnapshotVersion(e))}function uo(e,t,n){let r=ji(),i=ji();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Di();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual($t.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):lt(so,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Bs:r,Ls:i}})}function ho(e,t){const n=gt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=fn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function fo(e,t){const n=gt(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.li.getTargetData(e,t).next(i=>i?(r=i,ln.resolve(r)):n.li.allocateTargetId(e).next(i=>(r=new Ea(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.li.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.vs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e})}async function po(e,t,n){const r=gt(e),i=r.vs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!hn(e))throw e;lt(so,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function mo(e,t,n){const r=gt(e);let i=$t.min(),s=ji();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=gt(e),i=r.Fs.get(n);return void 0!==i?ln.resolve(r.vs.get(i)):r.li.getTargetData(t,n)}(r,e,wi(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:$t.min(),n?s:ji())).next(e=>(go(r,Ai(t),e),{documents:e,ks:s})))}function go(e,t,n){let r=e.Ms.get(t)||$t.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Ms.set(t,r)}class vo{constructor(){this.activeTargetIds=zi()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yo{constructor(){this.vo=new vo,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new vo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wo{Mo(e){}shutdown(){}}const bo="ConnectivityMonitor";class _o{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){lt(bo,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){lt(bo,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let To=null;function Eo(){return null===To?To=268435456+Math.round(2147483648*Math.random()):To++,"0x"+To.toString(16)}const So="RestConnection",Io={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ao{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(r),this.$o=this.databaseId.database===fr?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Wo(e,t,n,r,i){const s=Eo(),a=this.Qo(e,t.toUriEncodedString());lt(So,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(o,r,i);const{host:c}=new URL(a),l=P(c);return this.zo(e,a,o,n,l).then(t=>(lt(So,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw ht(So,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}jo(e,t,n,r,i,s){return this.Wo(e,t,n,r,i)}Go(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+at,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Qo(e,t){const n=Io[e];let r="".concat(this.qo,"/v1/").concat(t,":").concat(n);return this.databaseInfo.apiKey&&(r="".concat(r,"?key=").concat(encodeURIComponent(this.databaseInfo.apiKey))),r}terminate(){}}class Co{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ko="WebChannelConnection",No=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};class xo extends Ao{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xo.c_){const e=tt();No(e,et.STAT_EVENT,e=>{e.stat===Ze.PROXY?lt(ko,"STAT_EVENT: detected buffering proxy"):e.stat===Ze.NOPROXY&&lt(ko,"STAT_EVENT: detected no buffering proxy")}),xo.c_=!0}}zo(e,t,n,r,i){const s=Eo();return new Promise((i,a)=>{const o=new Qe;o.setWithCredentials(!0),o.listenOnce(Je.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case $e.NO_ERROR:const n=o.getResponseJson();lt(ko,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case $e.TIMEOUT:lt(ko,"RPC '".concat(e,"' ").concat(s," timed out")),a(new yt(vt.DEADLINE_EXCEEDED,"Request time out"));break;case $e.HTTP_ERROR:const r=o.getStatus();if(lt(ko,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(vt).indexOf(t)>=0?t:vt.UNKNOWN}(n.status);a(new yt(e,n.message))}else a(new yt(vt.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new yt(vt.UNAVAILABLE,"Connection failed."));break;default:ft(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{lt(ko,"RPC '".concat(e,"' ").concat(s," completed."))}});const c=JSON.stringify(r);lt(ko,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",c,n,15)})}T_(e,t,n){const r=Eo(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=this.createWebChannelTransport(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;void 0!==o&&(a.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Go(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");lt(ko,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const l=s.createWebChannel(c,a);this.I_(l);let u=!1,h=!1;const d=new Co({Ho:t=>{h?lt(ko,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(u||(lt(ko,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),u=!0),lt(ko,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Jo:()=>l.close()});return No(l,Xe.EventType.OPEN,()=>{h||(lt(ko,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),d.i_())}),No(l,Xe.EventType.CLOSE,()=>{h||(h=!0,lt(ko,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.o_(),this.E_(l))}),No(l,Xe.EventType.ERROR,t=>{h||(h=!0,ht(ko,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),d.o_(new yt(vt.UNAVAILABLE,"The operation could not be completed")))}),No(l,Xe.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];mt(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){lt(ko,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Ss[e];if(void 0!==t)return Cs(t)}(t),i=a.message;"NOT_FOUND"===t&&i.includes("database")&&i.includes("does not exist")&&i.includes(this.databaseId.database)&&ht("Database '".concat(this.databaseId.database,"' not found. Please check your project configuration.")),void 0===n&&(n=vt.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,d.o_(new yt(n,i)),l.close()}else lt(ko,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.__(i)}}),xo.u_(),setTimeout(()=>{d.s_()},0),d}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return nt()}}function Do(e){return new xo(e)}function Ro(){return"undefined"!=typeof document?document:null}function Po(e){return new Ks(e,!0)}xo.c_=!1;class Oo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&lt("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.d_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Mo="PersistentStream";class Lo{constructor(e,t,n,r,i,s,a,o){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Oo(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===vt.RESOURCE_EXHAUSTED?(ut(t.toString()),ut("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===vt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new yt(vt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.Yo(()=>{n(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.H_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return lt(Mo,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(lt(Mo,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fo extends Lo{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ft(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(mt(void 0===t||"string"==typeof t,58123),er.fromBase64String(t||"")):(mt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),er.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?vt.UNKNOWN:Cs(e.code);return new yt(t,e.message||"")}(a);n=new Us(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ra(e,r.document.name),s=$s(r.document.updateTime),a=r.document.createTime?$s(r.document.createTime):$t.min(),o=new Fr({mapValue:{fields:r.document.fields}}),c=Ur.newFoundDocument(i,s,a,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Fs(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ra(e,r.document),s=r.readTime?$s(r.readTime):$t.min(),a=Ur.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Fs([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ra(e,r.document),s=r.removedTargetIds||[];n=new Fs([],s,i,null)}else{if(!("filter"in t))return ft(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Es(r,i),a=e.targetId;n=new Vs(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return $t.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?$t.min():t.readTime?$s(t.readTime):$t.min()}(e);return this.listener.J_(t,n)}Z_(e){const t={};t.database=aa(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=di(r)?{documents:ua(e,r)}:{query:ha(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Xs(e,t.resumeToken);const r=Ys(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo($t.min())>0){n.readTime=Qs(e,t.snapshotVersion.toTimestamp());const r=Ys(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){const t={};t.database=aa(this.serializer),t.removeTarget=e,this.K_(t)}}class Vo extends Lo{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(mt(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?$s(e.updateTime):$s(t);return n.isEqual($t.min())&&(n=$s(t)),new is(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=$s(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=aa(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>la(this.serializer,e))};this.K_(t)}}class Uo{}class jo extends Uo{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new yt(vt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Wo(e,ea(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yt(vt.UNKNOWN,e.toString())})}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.jo(e,ea(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yt(vt.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Bo(e,t,n,r){return new jo(e,t,n,r)}class zo{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(ut(t),this.aa=!1):lt("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Wo="RemoteStore";class Ho{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(e=>{n.enqueueAndForget(async()=>{Zo(this)&&(lt(Wo,"Restarting streams for network reachability change."),await async function(e){const t=gt(e);t.Ea.add(4),await Go(t),t.Va.set("Unknown"),t.Ea.delete(4),await qo(t)}(this))})}),this.Va=new zo(n,r)}}async function qo(e){if(Zo(e))for(const t of e.Ra)await t(!0)}async function Go(e){for(const t of e.Ra)await t(!1)}function Ko(e,t){const n=gt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),$o(n)?Jo(n):yc(n).O_()&&Qo(n,t))}function Yo(e,t){const n=gt(e),r=yc(n);n.Ia.delete(t),r.O_()&&Xo(n,t),0===n.Ia.size&&(r.O_()?r.L_():Zo(n)&&n.Va.set("Unknown"))}function Qo(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo($t.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}yc(e).Z_(t)}function Xo(e,t){e.da.$e(t),yc(e).X_(t)}function Jo(e){e.da=new Bs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),yc(e).start(),e.Va.ua()}function $o(e){return Zo(e)&&!yc(e).x_()&&e.Ia.size>0}function Zo(e){return 0===gt(e).Ea.size}function ec(e){e.da=void 0}async function tc(e){e.Va.set("Online")}async function nc(e){e.Ia.forEach((t,n)=>{Qo(e,t)})}async function rc(e,t){ec(e),$o(e)?(e.Va.ha(t),Jo(e)):e.Va.set("Unknown")}async function ic(e,t,n){if(e.Va.set("Online"),t instanceof Us&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){lt(Wo,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await sc(e,n)}else if(t instanceof Fs?e.da.Xe(t):t instanceof Vs?e.da.st(t):e.da.tt(t),!n.isEqual($t.min()))try{const t=await lo(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.da.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(er.EMPTY_BYTE_STRING,r.snapshotVersion)),Xo(e,t);const i=new Ea(r.target,t,n,r.sequenceNumber);Qo(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){lt(Wo,"Failed to raise snapshot:",t),await sc(e,t)}}async function sc(e,t,n){if(!hn(t))throw t;e.Ea.add(1),await Go(e),e.Va.set("Offline"),n||(n=()=>lo(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{lt(Wo,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await qo(e)})}function ac(e,t){return t().catch(n=>sc(e,n,t))}async function oc(e){const t=gt(e),n=wc(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:fn;for(;cc(t);)try{const e=await ho(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,lc(t,e)}catch(e){await sc(t,e)}uc(t)&&hc(t)}function cc(e){return Zo(e)&&e.Ta.length<10}function lc(e,t){e.Ta.push(t);const n=wc(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function uc(e){return Zo(e)&&!wc(e).x_()&&e.Ta.length>0}function hc(e){wc(e).start()}async function dc(e){wc(e).ra()}async function fc(e){const t=wc(e);for(const n of e.Ta)t.ea(n.mutations)}async function pc(e,t,n){const r=e.Ta.shift(),i=_s.from(r,t,n);await ac(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await oc(e)}async function mc(e,t){t&&wc(e).Y_&&await async function(e,t){if(function(e){return As(e)&&e!==vt.ABORTED}(t.code)){const n=e.Ta.shift();wc(e).B_(),await ac(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await oc(e)}}(e,t),uc(e)&&hc(e)}async function gc(e,t){const n=gt(e);n.asyncQueue.verifyOperationInProgress(),lt(Wo,"RemoteStore received new credentials");const r=Zo(n);n.Ea.add(3),await Go(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await qo(n)}async function vc(e,t){const n=gt(e);t?(n.Ea.delete(2),await qo(n)):t||(n.Ea.add(2),await Go(n),n.Va.set("Unknown"))}function yc(e){return e.ma||(e.ma=function(e,t,n){const r=gt(e);return r.sa(),new Fo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:tc.bind(null,e),Yo:nc.bind(null,e),t_:rc.bind(null,e),J_:ic.bind(null,e)}),e.Ra.push(async t=>{t?(e.ma.B_(),$o(e)?Jo(e):e.Va.set("Unknown")):(await e.ma.stop(),ec(e))})),e.ma}function wc(e){return e.fa||(e.fa=function(e,t,n){const r=gt(e);return r.sa(),new Vo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:dc.bind(null,e),t_:mc.bind(null,e),ta:fc.bind(null,e),na:pc.bind(null,e)}),e.Ra.push(async t=>{t?(e.fa.B_(),await oc(e)):(await e.fa.stop(),e.Ta.length>0&&(lt(Wo,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class bc{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new bc(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yt(vt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _c(e,t){if(ut("AsyncQueue","".concat(t,": ").concat(e)),hn(e))return new yt(vt.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Tc{static emptySet(e){return new Tc(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||jt.comparator(t.key,n.key):(e,t)=>jt.comparator(e.key,t.key),this.keyedMap=Pi(),this.sortedSet=new Kn(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tc))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Tc;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ec{constructor(){this.ga=new Kn(jt.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ft(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Sc{constructor(e,t,n,r,i,s,a,o,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Sc(e,t,Tc.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ti(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ic{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Ac{constructor(){this.queries=Cc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=gt(e),r=n.queries;n.queries=Cc(),r.forEach((e,n)=>{for(const r of n.ba)r.onError(t)})}(this,new yt(vt.ABORTED,"Firestore shutting down"))}}function Cc(){return new Ni(e=>Ei(e),Ti)}async function kc(e,t){const n=gt(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.Da()&&(r=2):(s=new Ic,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=_c(e,"Initialization of query '".concat(Si(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.ba.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Rc(n)}async function Nc(e,t){const n=gt(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ba.indexOf(t);e>=0&&(s.ba.splice(e,1),0===s.ba.length?i=t.Da()?0:1:!s.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xc(e,t){const n=gt(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ba)e.Fa(i)&&(r=!0);t.wa=i}}r&&Rc(n)}function Dc(e,t,n){const r=gt(e),i=r.queries.get(t);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(t)}function Rc(e){e.Ca.forEach(e=>{e.next()})}var Pc,Oc;(Oc=Pc||(Pc={})).Ma="default",Oc.Cache="cache";class Mc{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Sc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Pc.Cache}}class Lc{constructor(e){this.key=e}}class Fc{constructor(e){this.key=e}}class Vc{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ji(),this.mutatedKeys=ji(),this.eu=Ci(e),this.tu=new Tc(this.eu)}get nu(){return this.Za}ru(e,t){const n=t?t.iu:new Ec,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=Ii(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(l,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||c&&this.eu(u,c)<0)&&(a=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(o||c)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Ss:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Ya.size&&this.current&&!r?1:0,c=o!==this.Xa;return this.Xa=o,0!==s.length||c?{snapshot:new Sc(this.query,e.tu,i,s,e.mutatedKeys,0===o,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ec,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Za=this.Za.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Za=this.Za.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ji(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))});const t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new Fc(e))}),this.Ya.forEach(n=>{e.has(n)||t.push(new Lc(n))}),t}cu(e){this.Za=e.ks,this.Ya=ji();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Xa,this.hasCachedResults)}}const Uc="SyncEngine";class jc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Bc{constructor(e){this.key=e,this.hu=!1}}class zc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ni(e=>Ei(e),Ti),this.Iu=new Map,this.Eu=new Set,this.Ru=new Kn(jt.comparator),this.Au=new Map,this.Vu=new Ga,this.du={},this.mu=new Map,this.fu=Ra.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Wc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ul(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await qc(r,t,n,!0),i}async function Hc(e,t){const n=ul(e);await qc(n,t,!0,!1)}async function qc(e,t,n,r){const i=await fo(e.localStore,wi(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Gc(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Ko(e.remoteStore,i),o}async function Gc(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await mo(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return il(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await mo(e.localStore,t,!0),a=new Vc(t,s.ks),o=a.ru(s.documents),c=Ls.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=a.applyChanges(o,e.isPrimaryClient,c);il(e,n,l.au);const u=new jc(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function Kc(e,t,n){const r=gt(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!Ti(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await po(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yo(r.remoteStore,i.targetId),nl(r,i.targetId)}).catch(cn)):(nl(r,i.targetId),await po(r.localStore,i.targetId,!0))}async function Yc(e,t){const n=gt(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yo(n.remoteStore,r.targetId))}async function Qc(e,t){const n=gt(e);try{const e=await function(e,t){const n=gt(e),r=t.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const a=[];t.targetChanges.forEach((s,o)=>{const c=i.get(o);if(!c)return;a.push(n.li.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.li.addMatchingKeys(e,s.addedDocuments,o)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?l=l.withResumeToken(er.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(o,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,s)&&a.push(n.li.updateTargetData(e,l))});let o=Di(),c=ji();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(uo(e,s,t.documentUpdates).next(e=>{o=e.Bs,c=e.Ls})),!r.isEqual($t.min())){const t=n.li.getLastRemoteSnapshotVersion(e).next(t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ln.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,c)).next(()=>o)}).then(e=>(n.vs=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(mt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?mt(r.hu,14607):e.removedDocuments.size>0&&(mt(r.hu,42227),r.hu=!1))}),await ol(n,e,t)}catch(e){await cn(e)}}function Xc(e,t,n){const r=gt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=gt(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.ba)i.va(t)&&(r=!0)}),r&&Rc(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Jc(e,t,n){const r=gt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Kn(jt.comparator);e=e.insert(s,Ur.newNoDocument(s,$t.min()));const n=ji().add(s),i=new Ms($t.min(),new Map,new Kn(Nt),e,n);await Qc(r,i),r.Ru=r.Ru.remove(s),r.Au.delete(t),al(r)}else await po(r.localStore,t,!1).then(()=>nl(r,t,n)).catch(cn)}async function $c(e,t){const n=gt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=gt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=ln.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);mt(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ji();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);tl(n,r,null),el(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ol(n,e)}catch(e){await cn(e)}}async function Zc(e,t,n){const r=gt(e);try{const e=await function(e,t){const n=gt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(mt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);tl(r,t,n),el(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ol(r,e)}catch(n){await cn(n)}}function el(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function tl(e,t,n){const r=gt(e);let i=r.du[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function nl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach(t=>{e.Vu.containsKey(t)||rl(e,t)})}function rl(e,t){e.Eu.delete(t.path.canonicalString());const n=e.Ru.get(t);null!==n&&(Yo(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),al(e))}function il(e,t,n){for(const r of n)r instanceof Lc?(e.Vu.addReference(r.key,t),sl(e,r)):r instanceof Fc?(lt(Uc,"Document no longer in limbo: "+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||rl(e,r.key)):ft(19791,{wu:r})}function sl(e,t){const n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(lt(Uc,"New document in limbo: "+n),e.Eu.add(r),al(e))}function al(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new jt(Ft.fromString(t)),r=e.fu.next();e.Au.set(r,new Bc(n)),e.Ru=e.Ru.insert(n,r),Ko(e.remoteStore,new Ea(wi(mi(n.path)),r,"TargetPurposeLimboResolution",dn.ce))}}async function ol(e,t,n){const r=gt(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=no.Es(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.J_(i),await async function(e,t){const n=gt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ln.forEach(t,t=>ln.forEach(t.Ts,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ln.forEach(t.Is,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!hn(e))throw e;lt(so,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.vs.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(e,i)}}}(r.localStore,s))}async function cl(e,t){const n=gt(e);if(!n.currentUser.isEqual(t)){lt(Uc,"User change. New user:",t.toKey());const e=await co(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new yt(vt.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ol(n,e.Ns)}}function ll(e,t){const n=gt(e),r=n.Au.get(t);if(r&&r.hu)return ji().add(r.key);{let e=ji();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function ul(e){const t=gt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Qc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ll.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jc.bind(null,t),t.Pu.J_=xc.bind(null,t.eventManager),t.Pu.yu=Dc.bind(null,t.eventManager),t}function hl(e){const t=gt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=$c.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zc.bind(null,t),t}class dl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Po(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oo(this.persistence,new io,e.initialUser,this.serializer)}Cu(e){return new $a(eo.Vi,this.serializer)}Du(e){return new yo}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dl.provider={build:()=>new dl};class fl extends dl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof to,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Fa(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Da.withCacheSize(this.cacheSizeBytes):Da.DEFAULT;return new $a(e=>to.Vi(e,t),this.serializer)}}class pl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Xc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=cl.bind(null,this.syncEngine),await vc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ac}createDatastore(e){const t=Po(e.databaseInfo.databaseId),n=Do(e.databaseInfo);return Bo(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ho(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Xc(this.syncEngine,e,0),_o.v()?new _o:new wo)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new zc(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=gt(e);lt(Wo,"RemoteStore shutting down."),t.Ea.add(5),await Go(t),t.Aa.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}pl.provider={build:()=>new pl};class ml{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ut("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const gl="FirestoreClient";class vl{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=st.UNAUTHENTICATED,this.clientId=kt.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{lt(gl,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(lt(gl,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=_c(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function yl(e,t){e.asyncQueue.verifyOperationInProgress(),lt(gl,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await co(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function wl(e,t){e.asyncQueue.verifyOperationInProgress();const n=await bl(e);lt(gl,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>gc(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>gc(t.remoteStore,n)),e._onlineComponents=t}async function bl(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){lt(gl,"Using user provided OfflineComponentProvider");try{await yl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===vt.FAILED_PRECONDITION||e.code===vt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;ht("Error using user provided cache. Falling back to memory cache: "+n),await yl(e,new dl)}}else lt(gl,"Using default OfflineComponentProvider"),await yl(e,new fl(void 0));return e._offlineComponents}async function _l(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(lt(gl,"Using user provided OnlineComponentProvider"),await wl(e,e._uninitializedComponentsProvider._online)):(lt(gl,"Using default OnlineComponentProvider"),await wl(e,new pl))),e._onlineComponents}function Tl(e){return _l(e).then(e=>e.syncEngine)}async function El(e){const t=await _l(e),n=t.eventManager;return n.onListen=Wc.bind(null,t.syncEngine),n.onUnlisten=Kc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Hc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Yc.bind(null,t.syncEngine),n}function Sl(e,t){const n=new wt;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=hl(e);try{const e=await function(e,t){const n=gt(e),r=Jt.now(),i=t.reduce((e,t)=>e.add(t.key),ji());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Di(),c=ji();return n.xs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=hs(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new ps(e.key,t,Vr(t.value.mapValue),ss.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Oi(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||(r=new Kn(Nt)),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await ol(r,e.changes),await oc(r.remoteStore)}catch(e){const t=_c(e,"Failed to persist write");n.reject(t)}}(await Tl(e),t,n)),n.promise}function Il(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Al="ComponentProvider",Cl=new Map;function kl(e,t,n,r,i){return new dr(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Il(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}const Nl="firestore.googleapis.com",xl=!0;class Dl{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new yt(vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nl,this.ssl=xl}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:xl;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=xa;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Oa)throw new yt(vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new yt(vt.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Il(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new yt(vt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new yt(vt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new yt(vt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rl{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yt(vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yt(vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dl(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new _t;switch(e.type){case"firstParty":return new St(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new yt(vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Cl.get(e);t&&(lt(Al,"Removing Datastore"),Cl.delete(e),t.terminate())}(this),Promise.resolve()}}class Pl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Pl(this.firestore,e,this._query)}}class Ol{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ol(this.firestore,e,this._key)}toJSON(){return{type:Ol._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Yt(t,Ol._jsonSchema))return new Ol(e,n||null,new jt(Ft.fromString(t.referencePath)))}}Ol._jsonSchemaVersion="firestore/documentReference/1.0",Ol._jsonSchema={type:Kt("string",Ol._jsonSchemaVersion),referencePath:Kt("string")};class Ml extends Pl{constructor(e,t,n){super(e,t,mi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ol(this.firestore,null,new jt(e))}withConverter(e){return new Ml(this.firestore,e,this._path)}}function Ll(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=B(e),Bt("collection","path",t),e instanceof Rl){const n=Ft.fromString(t,...r);return Wt(n),new Ml(e,null,n)}{if(!(e instanceof Ol||e instanceof Ml))throw new yt(vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ft.fromString(t,...r));return Wt(n),new Ml(e.firestore,null,n)}}function Fl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=B(e),1===arguments.length&&(t=kt.newId()),Bt("doc","path",t),e instanceof Rl){const n=Ft.fromString(t,...r);return zt(n),new Ol(e,null,new jt(n))}{if(!(e instanceof Ol||e instanceof Ml))throw new yt(vt.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ft.fromString(t,...r));return zt(n),new Ol(e.firestore,e instanceof Ml?e.converter:null,new jt(n))}}const Vl="AsyncQueue";class Ul{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Oo(this,"async_queue_retry"),this._c=()=>{const e=Ro();e&&lt(Vl,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Ro();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ro();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new wt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(0!==this.Yu.length){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!hn(e))throw e;lt(Vl,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,ut("INTERNAL UNHANDLED ERROR: ",jl(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=bc.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&ft(47125,{Pc:jl(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Bl extends Rl{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ul,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ul(e),this._firestoreClient=void 0,await e}}}function zl(e){if(e._terminated)throw new yt(vt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Wl(e),e._firestoreClient}function Wl(e){var t,n,r,i;const s=e._freezeSettings(),a=kl(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,null===(n=e._app)||void 0===n?void 0:n.options.apiKey,s);e._componentsProvider||null!==(r=s.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(i=s.localCache)&&void 0!==i&&i._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new vl(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hl(er.fromBase64String(e))}catch(e){throw new yt(vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Hl(er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yt(e,Hl._jsonSchema))return Hl.fromBase64String(e.bytes)}}Hl._jsonSchemaVersion="firestore/bytes/1.0",Hl._jsonSchema={type:Kt("string",Hl._jsonSchemaVersion),bytes:Kt("string")};class ql{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new yt(vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gl{constructor(e){this._methodName=e}}class Kl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yt(vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yt(vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kl._jsonSchemaVersion}}static fromJSON(e){if(Yt(e,Kl._jsonSchema))return new Kl(e.latitude,e.longitude)}}Kl._jsonSchemaVersion="firestore/geoPoint/1.0",Kl._jsonSchema={type:Kt("string",Kl._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};class Yl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Yl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yt(e,Yl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Yl(e.vectorValues);throw new yt(vt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yl._jsonSchemaVersion="firestore/vectorValue/1.0",Yl._jsonSchema={type:Kt("string",Yl._jsonSchemaVersion),vectorValues:Kt("object")};const Ql=/^__.*__$/;class Xl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new fs(e,this.data,t,this.fieldTransforms)}}function Jl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft(40011,{dataSource:e})}}class $l{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new $l((0,I.A)((0,I.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return lu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(Jl(this.dataSource)&&Ql.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Zl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Po(e)}createContext(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $l({dataSource:e,methodName:t,targetDoc:n,path:Ut.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eu(e){const t=e._freezeSettings(),n=Po(e._databaseId);return new Zl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.createContext(s.merge||s.mergeFields?2:0,t,n,i);su("Data must be an object, but it was:",a,r);const o=ru(r,a);let c,l;if(s.merge)c=new $n(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=au(t,r,n);if(!a.contains(i))throw new yt(vt.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));uu(e,i)||e.push(i)}c=new $n(e),l=a.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=a.fieldTransforms;return new Xl(new Fr(o),c,l)}function nu(e,t){if(iu(e=B(e)))return su("Unsupported field value:",t,e),ru(e,t);if(e instanceof Gl)return function(e,t){if(!Jl(t.dataSource))throw t.createError("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.createError("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=nu(i,t.childContextForArray(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=B(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Jt.fromDate(e);return{timestampValue:Qs(t.serializer,n)}}if(e instanceof Jt){const n=new Jt(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Qs(t.serializer,n)}}if(e instanceof Kl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hl)return{bytesValue:Xs(t.serializer,e._byteString)};if(e instanceof Ol){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Zs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Yl)return function(e,t){const n=e instanceof Yl?e.toArray():e,r={fields:{[mr]:{stringValue:yr},[wr]:{arrayValue:{values:n.map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return Wi(t.serializer,e)})}}}};return{mapValue:r}}(e,t);if(Ta(e))return e._toProto(t.serializer);throw t.createError("Unsupported field value: ".concat(qt(e)))}(e,t)}function ru(e,t){const n={};return Gn(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qn(e,(e,r)=>{const i=nu(r,t.childContextForField(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function iu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Jt||e instanceof Kl||e instanceof Hl||e instanceof Ol||e instanceof Gl||e instanceof Yl||Ta(e))}function su(e,t,n){if(!iu(n)||!Ht(n)){const r=qt(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function au(e,t,n){if((t=B(t))instanceof ql)return t._internalPath;if("string"==typeof t)return cu(e,t);throw lu("Field path arguments must be of type string or ",e,!1,void 0,n)}const ou=new RegExp("[~\\*/\\[\\]]");function cu(e,t,n){if(t.search(ou)>=0)throw lu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ql(...t.split("."))._internalPath}catch(r){throw lu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function lu(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=" in field ".concat(r)),a&&(c+=" in document ".concat(i)),c+=")"),new yt(vt.INVALID_ARGUMENT,o+e+c)}function uu(e,t){return e.some(e=>e.isEqual(t))}class hu{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ft(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return qn(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[wr].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>rr(e.doubleValue));return new Yl(n)}convertGeoPoint(e){return new Kl(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ur(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(hr(e));default:return null}}convertTimestamp(e){const t=nr(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ft.fromString(e);mt(_a(n),9688,{name:e});const r=new pr(n.get(1),n.get(3)),i=new jt(n.popFirst(5));return r.isEqual(t)||ut("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}class du extends hu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ol(this.firestore,null,t)}}const fu="@firebase/firestore",pu="4.11.0";class mu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ol(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new gu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e,t;return null!==(e=null===(t=this._document)||void 0===t?void 0:t.data.clone().value.mapValue.fields)&&void 0!==e?e:void 0}get(e){if(this._document){const t=this._document.data.field(au("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class gu extends mu{data(){return super.data()}}function vu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class yu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wu extends mu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(au("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new yt(vt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=wu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}wu._jsonSchemaVersion="firestore/documentSnapshot/1.0",wu._jsonSchema={type:Kt("string",wu._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class bu extends wu{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class _u{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new bu(this._firestore,this._userDataWriter,n.key,n,new yu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new yt(vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new bu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yu(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new bu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Tu(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new yt(vt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_u._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kt.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Tu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft(61501,{type:e})}}_u._jsonSchemaVersion="firestore/querySnapshot/1.0",_u._jsonSchema={type:Kt("string",_u._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};function Eu(e){e=Gt(e,Ol);const t=Gt(e.firestore,Bl);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new wt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ml({next:o=>{s.Nu(),t.enqueueAndForget(()=>Nc(e,a));const c=o.docs.has(n);!c&&o.fromCache?i.reject(new yt(vt.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&o.fromCache&&r&&"server"===r.source?i.reject(new yt(vt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Mc(mi(n.path),s,{includeMetadataChanges:!0,Ka:!0});return kc(e,a)}(await El(e),e.asyncQueue,t,n,r)),r.promise}(zl(t),e._key).then(n=>Iu(t,e,n))}function Su(e,t){return Sl(zl(e),t)}function Iu(e,t,n){const r=n.docs.get(t._key),i=new du(e);return new wu(e,i,t._key,r,new yu(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;async function Au(e,t,n,r){if(!S.db)throw new Error("Cloud sync not available");const i=Fl(Ll(S.db,"users"),e);await function(e,t,n){e=Gt(e,Ol);const r=Gt(e.firestore,Bl),i=vu(e.converter,t,n);return Su(r,[tu(eu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ss.none())])}(i,{profiles:t,activeProfileId:null!==n&&void 0!==n?n:localStorage.getItem(E.ACTIVE_PROFILE_KEY),activeCalendarId:null!==r&&void 0!==r?r:localStorage.getItem(E.ACTIVE_CALENDAR_KEY)})}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];at="12.9.0",Re(new z("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Bl(new Tt(e.getProvider("auth-internal")),new At(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yt(vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pr(e.options.projectId,t)}(s,r),s);return i=(0,I.A)({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Oe(fu,pu,e),Oe(fu,pu,"esm2020")}();var Cu=n(1713);const ku=t=>{let{onDayClick:n,selectedDate:r}=t;const[i,s]=(0,e.useState)((()=>{const e=sessionStorage.getItem("calendar_lastViewedMonth");if(e){const t=new Date(e);if(!isNaN(t.getTime()))return t}return new Date})()),[a,o]=(0,e.useState)(null),[c,l]=(0,e.useState)([]),u=i.getFullYear(),h=i.getMonth();(0,e.useEffect)(()=>{l((0,E.getAllEntries)());const e=(0,E.calculateMonthlySummary)(u,h);o(e),sessionStorage.setItem("calendar_lastViewedMonth",i.toISOString())},[i,u,h]);const d=e=>{const t=new Date(u,h,e),n=t.toDateString(),i=(null===r||void 0===r?void 0:r.toDateString())===n,s=(0,Cu.isRomanianHoliday)(t)?"holiday":"",a=(0,Cu.isWeekend)(t)?"weekend":"",o=c.some(e=>new Date(e.date).toDateString()===n);return"calendar-day ".concat(s," ").concat(a," ").concat(i?"selected":""," ").concat(o?"has-entry":"").trim()},f=((e,t)=>new Date(e,t+1,0).getDate())(u,h),p=((e,t)=>new Date(e,t,1).getDay())(u,h),m=[];for(let e=0;e<p;e++)m.push((0,_.jsx)("div",{className:"calendar-empty"},"empty-".concat(e)));for(let e=1;e<=f;e++){const t=new Date(u,h,e),r=c.find(e=>{const n=new Date(e.date);return n.getFullYear()===t.getFullYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate()});let i=null;if(r&&r.shifts&&r.shifts.length>0){const e=r.shifts.map(e=>e.type);e.includes("cs")?i="CS":e.includes("co")?i="CO":e.includes("cm")?i="CM":e.includes("inv")?i="INV":e.includes("day")?i="D":e.includes("night")&&(i="N")}m.push((0,_.jsxs)("div",{className:d(e),onClick:()=>n(t),children:[(0,_.jsx)("span",{className:"day-number",children:e}),(0,Cu.isRomanianHoliday)(t)&&(0,_.jsx)("span",{className:"holiday-indicator",children:"\u25cf"}),i&&(0,_.jsx)("span",{className:"shift-indicator",children:i})]},e))}return(0,_.jsxs)("div",{className:"calendar-container",children:[(0,_.jsx)("button",{style:{float:"right",marginBottom:8,background:"#ff6b6b",color:"#fff",border:"none",borderRadius:6,padding:"6px 14px",fontWeight:700,cursor:"pointer"},onClick:()=>{if(!window.confirm("Are you sure you want to delete all entries for this month? This cannot be undone."))return;const e=(0,E.getActiveProfile)();if(!e)return;const t=e.calendars.find(t=>t.id===(localStorage.getItem("pontaj_active_calendar")||e.calendars[0]&&e.calendars[0].id));if(!t)return;const n=t.entries.filter(e=>{const t=new Date(e.date);return!(t.getFullYear()===u&&t.getMonth()===h)});t.entries=n,(0,E.saveCalendar)(t),l((0,E.getAllEntries)()),o((0,E.calculateMonthlySummary)(u,h))},children:"Delete all entries this month"}),(0,_.jsxs)("div",{className:"calendar-header",children:[(0,_.jsx)("button",{onClick:()=>{s(new Date(i.getFullYear(),i.getMonth()-1,1))},className:"nav-btn",children:"\u2039"}),(0,_.jsx)("h2",{children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,_.jsx)("button",{onClick:()=>{s(new Date(i.getFullYear(),i.getMonth()+1,1))},className:"nav-btn",children:"\u203a"})]}),(0,_.jsx)("div",{className:"weekdays",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,_.jsx)("div",{className:"weekday",children:e},e))}),(0,_.jsx)("div",{className:"calendar-grid",children:m}),a&&(0,_.jsx)("div",{className:"calendar-summary",children:(0,_.jsxs)("div",{className:"summary-section",children:[(0,_.jsxs)("div",{className:"summary-item",children:[(0,_.jsx)("label",{children:"FTL (Full-time expected):"}),(0,_.jsxs)("span",{className:"summary-value",children:[Math.floor(a.totalFTL/60),"h ",a.totalFTL%60,"m"]})]}),(0,_.jsxs)("div",{className:"summary-item",children:[(0,_.jsx)("label",{children:"Total Hours (OL):"}),(0,_.jsxs)("span",{className:"summary-value",children:[Math.floor(a.totalOL/60),"h ",a.totalOL%60,"m"]})]}),(0,_.jsxs)("div",{className:"summary-item",children:[(0,_.jsx)("label",{children:"Weekend Hours:"}),(0,_.jsxs)("span",{className:"summary-value",children:[Math.floor(a.totalWeekend/60),"h ",a.totalWeekend%60,"m"]})]}),(0,_.jsxs)("div",{className:"summary-item",children:[(0,_.jsx)("label",{children:"OS:"}),(0,_.jsxs)("span",{className:"summary-value",children:[Math.floor(a.osMonth/60),"h ",a.osMonth%60,"m"]})]}),(0,_.jsxs)("div",{className:"summary-item",children:[(0,_.jsx)("label",{children:"OS Total:"}),(0,_.jsx)("span",{className:"summary-value",children:(()=>{const e=a.osTotal,t=e<0?"-":"",n=Math.abs(e);return"".concat(t).concat(Math.floor(n/60),"h ").concat(n%60,"m")})()})]}),(0,_.jsxs)("div",{className:"summary-item",children:[(0,_.jsx)("label",{children:"CS:"}),(0,_.jsxs)("span",{className:"summary-value",children:[Math.floor(a.csMonth/60),"h ",a.csMonth%60,"m"]})]}),(0,_.jsxs)("div",{className:"summary-item",children:[(0,_.jsx)("label",{style:{color:"#ff6b6b",fontWeight:700},children:"\u26a0\ufe0f OS Debt (90d):"}),(0,_.jsxs)("span",{className:"summary-value",style:{color:"#ff6b6b",fontWeight:700},children:[Math.floor(a.osDebt90d/60),"h ",a.osDebt90d%60,"m"]})]})]})})]})};var Nu=n(5288);const xu=t=>{let{shiftType:n,onShiftChange:r,onRemoveShift:i,startTime:s="08:00",endTime:a="16:00"}=t;const[o,c]=(0,e.useState)(s),[l,u]=(0,e.useState)(a),h=(()=>{switch(n){case"day":return{start:"06:45",end:"19:15"};case"night":return{start:"18:45",end:"07:15"};default:return{start:"08:00",end:"16:00"}}})(),d=(0,Cu.roundToNearestMinute)((0,Cu.calculateWorkHours)(o||h.start,l||h.end)),f=Math.floor(d/60),p=d%60;return(0,_.jsxs)("div",{className:"shift-input",children:[(0,_.jsx)("label",{className:"shift-label",children:n.toUpperCase()}),(0,_.jsxs)("div",{className:"shift-inputs",children:[(0,_.jsxs)("div",{className:"time-group",children:[(0,_.jsx)("label",{children:"Start:"}),(0,_.jsx)("input",{type:"time",value:o||h.start,onChange:e=>{const t=e.target.value;c(t),r(n,t,l)},className:"time-input"})]}),(0,_.jsxs)("div",{className:"time-group",children:[(0,_.jsx)("label",{children:"End:"}),(0,_.jsx)("input",{type:"time",value:l||h.end,onChange:e=>{const t=e.target.value;u(t),r(n,o,t)},className:"time-input"})]}),(0,_.jsx)("div",{className:"duration",children:(0,_.jsxs)("span",{className:"duration-label",children:[f,"h ",p,"m"]})}),(0,_.jsx)("button",{className:"remove-btn",onClick:()=>i(n),title:"Remove shift",children:"\u2715"})]})]})},Du=t=>{let{date:n,onSave:r,onClose:i}=t;const[s,a]=(0,e.useState)(()=>{const e=(0,Nu.utcToZonedTime)(n,"Europe/Bucharest"),t=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0"),s="".concat(t,"-").concat(r,"-").concat(i),a=(0,E.getEntryByDate)(e);return a||{id:"".concat(e.getTime()),date:s,shifts:[],notes:""}}),[o,c]=(0,e.useState)(()=>{const e=(0,E.getEntryByDate)(n);return e?e.shifts.map(e=>e.type):[]}),[l,u]=(0,e.useState)(!1),[h,d]=(0,e.useState)(1),[f,p]=(0,e.useState)((0,Nu.format)((0,Nu.utcToZonedTime)(new Date,"Europe/Bucharest"),"yyyy-MM-dd",{timeZone:"Europe/Bucharest"})),m=(0,Cu.isRomanianHoliday)(n),[g,v]=(0,e.useState)({}),y=e=>{if(!o.includes(e)){var t;c([...o,e]);const n=(e=>{switch(e){case"day":return{start:"06:45",end:"19:15"};case"night":return{start:"18:45",end:"07:15"};case"cs":case"inv":return{start:"",end:"",duration:0};case"co":case"cm":return{start:"",end:"",duration:480};default:return{start:"08:00",end:"16:00"}}})(e),r="co"===e||"cs"===e||"cm"===e||"inv"===e?{type:e,startTime:n.start||"",endTime:n.end||"",duration:null!==(t=n.duration)&&void 0!==t?t:0}:{type:e,startTime:n.start,endTime:n.end,duration:T(n.start,n.end)};a((0,I.A)((0,I.A)({},s),{},{shifts:[...s.shifts,r]}))}},w=(e,t,n)=>{const r=s.shifts.map(r=>r.type===e?(0,I.A)((0,I.A)({},r),{},{startTime:t,endTime:n,duration:T(t,n)}):r);r.some(t=>t.type===e)||r.push({type:e,startTime:t,endTime:n,duration:T(t,n)}),a((0,I.A)((0,I.A)({},s),{},{shifts:r}))},b=e=>{c(o.filter(t=>t!==e)),a((0,I.A)((0,I.A)({},s),{},{shifts:s.shifts.filter(t=>t.type!==e)}))},T=(e,t)=>{const[n,r]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let a=60*n+r,o=60*i+s;return o<a&&(o+=1440),o-a};return(0,_.jsx)("div",{className:"day-entry-overlay",children:(0,_.jsxs)("div",{className:"day-entry-form ".concat(m?"holiday":""),children:[(0,_.jsxs)("div",{className:"form-header",children:[(0,_.jsx)("h2",{children:n.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),m&&(0,_.jsx)("span",{className:"holiday-badge",children:"\ud83c\udf89 Holiday"}),(0,_.jsx)("button",{className:"close-btn",onClick:i,children:"\u2715"})]}),(0,_.jsxs)("div",{className:"shifts-section",children:[o.map(e=>{const t=s.shifts.find(t=>t.type===e);if("co"===e||"cm"===e)return(0,_.jsxs)("div",{className:"shift-input ".concat(e,"-shift"),children:[(0,_.jsx)("label",{className:"shift-label",children:e.toUpperCase()}),(0,_.jsxs)("div",{className:"shift-inputs",children:[(0,_.jsx)("div",{className:"duration",children:(0,_.jsx)("span",{className:"duration-label",children:"8h 0m"})}),(0,_.jsx)("button",{className:"remove-btn",onClick:()=>b(e),title:"Remove ".concat(e.toUpperCase()),children:"\u2715"})]})]},e);if("inv"===e){const t=g[e]||0;return(0,_.jsxs)("div",{className:"shift-input inv-shift",children:[(0,_.jsx)("label",{className:"shift-label",children:"INV"}),(0,_.jsxs)("div",{className:"shift-inputs",children:[(0,_.jsx)("input",{type:"number",min:"0",step:"0.5",placeholder:"Hours",value:t||"",onChange:t=>{const n=parseFloat(t.target.value)||0;v((0,I.A)((0,I.A)({},g),{},{[e]:n}));const r=s.shifts.map(e=>"inv"===e.type?(0,I.A)((0,I.A)({},e),{},{duration:60*n}):e);a((0,I.A)((0,I.A)({},s),{},{shifts:r}))},className:"inv-input",style:{width:"80px"}}),(0,_.jsx)("span",{style:{marginLeft:"0.5rem"},children:"h"}),(0,_.jsx)("button",{className:"remove-btn",onClick:()=>b(e),title:"Remove INV",children:"\u2715"})]})]},e)}return(0,_.jsx)(xu,{shiftType:e,onShiftChange:w,onRemoveShift:b,startTime:null===t||void 0===t?void 0:t.startTime,endTime:null===t||void 0===t?void 0:t.endTime},e)}),(0,_.jsxs)("div",{className:"add-shift",children:[(0,_.jsx)("label",{children:"Add Shift:"}),(0,_.jsxs)("div",{className:"shift-buttons",children:[["day","night","neither","cs"].filter(e=>!o.includes(e)).map(e=>(0,_.jsxs)("button",{className:"add-shift-btn",onClick:()=>y(e),children:["+ ",e.toUpperCase()]},e)),!o.includes("co")&&(0,_.jsx)("button",{className:"add-shift-btn",onClick:()=>y("co"),children:"+ CO"}),!o.includes("cm")&&(0,_.jsx)("button",{className:"add-shift-btn",onClick:()=>y("cm"),children:"+ CM"}),!o.includes("inv")&&(0,_.jsx)("button",{className:"add-shift-btn",onClick:()=>y("inv"),children:"+ INV"})]})]}),(0,_.jsxs)("div",{className:"notes-section",children:[(0,_.jsx)("label",{children:"Notes:"}),(0,_.jsx)("textarea",{value:s.notes||"",onChange:e=>a((0,I.A)((0,I.A)({},s),{},{notes:e.target.value})),placeholder:"Add any notes...",className:"notes-input"})]}),(0,_.jsxs)("div",{className:"repeat-section",children:[(0,_.jsxs)("label",{children:[(0,_.jsx)("input",{type:"checkbox",checked:l,onChange:e=>u(e.target.checked)}),"Repeat"]}),l&&(0,_.jsxs)("div",{className:"repeat-controls",children:[(0,_.jsxs)("label",{children:["Every",(0,_.jsx)("input",{type:"number",min:1,value:h,onChange:e=>d(Number(e.target.value)||1),className:"repeat-interval"}),"day(s)"]}),(0,_.jsxs)("label",{children:["Until",(0,_.jsx)("input",{type:"date",value:f,onChange:e=>p(e.target.value),className:"repeat-until"})]})]})]})]}),(0,_.jsxs)("div",{className:"form-actions",children:[(0,_.jsx)("button",{className:"btn-save",onClick:()=>{const e=s.shifts.map(e=>"co"===e.type?(0,I.A)((0,I.A)({},e),{},{startTime:"",endTime:"",duration:480}):(0,I.A)((0,I.A)({},e),{},{duration:T(e.startTime,e.endTime)}));if(l){const t=(0,Nu.utcToZonedTime)(new Date(f+"T23:59:59"),"Europe/Bucharest");if(isNaN(t.getTime()))return(0,E.saveEntry)((0,I.A)((0,I.A)({},s),{},{shifts:e})),void r();const n=[];let i=(0,Nu.utcToZonedTime)(new Date(s.date+"T00:00:00"),"Europe/Bucharest");i.setHours(0,0,0,0);let a=0,o=0,c=new Date(i);for(;c<=t;){const t=(0,Cu.isWeekend)(c)||(0,Cu.isRomanianHoliday)(c);let n=0;e.forEach(e=>{"co"===e.type||"cm"===e.type?t||(n+=480):n+=e.duration||0}),n>0&&(a+=1,o+=n),c=new Date(c.getTime()+24*h*60*60*1e3)}const l="This will create ".concat(a," entries totalling ").concat(Math.floor(o/60),"h ").concat(o%60,"m. Continue?");if(!window.confirm(l))return;for(;i<=t;){const t=(0,Cu.isWeekend)(i)||(0,Cu.isRomanianHoliday)(i);let r=e.map(e=>(0,I.A)({},e));r=r.map(e=>"co"===e.type||"cm"===e.type?t?(0,I.A)((0,I.A)({},e),{},{duration:0,startTime:"",endTime:""}):(0,I.A)((0,I.A)({},e),{},{duration:480,startTime:"",endTime:""}):e);const a=i.getFullYear(),o=(i.getMonth()+1).toString().padStart(2,"0"),c=i.getDate().toString().padStart(2,"0"),l=(0,I.A)((0,I.A)({},s),{},{id:"".concat(i.getTime()),date:"".concat(a,"-").concat(o,"-").concat(c),shifts:r});n.push(l),i=new Date(i.getTime()+24*h*60*60*1e3)}return n.forEach(e=>(0,E.saveEntry)(e)),void r()}const t=(0,Nu.utcToZonedTime)(new Date(s.date+"T00:00:00"),"Europe/Bucharest"),n=(0,Cu.isWeekend)(t)||(0,Cu.isRomanianHoliday)(t);let i=e.map(e=>(0,I.A)({},e));i.some(e=>"co"===e.type||"cm"===e.type)&&(i=i.map(e=>"co"===e.type||"cm"===e.type?n?(0,I.A)((0,I.A)({},e),{},{duration:0,startTime:"",endTime:""}):(0,I.A)((0,I.A)({},e),{},{duration:480,startTime:"",endTime:""}):e)),(0,E.saveEntry)((0,I.A)((0,I.A)({},s),{},{shifts:i})),r()},children:"Save"}),(0,_.jsx)("button",{className:"btn-cancel",onClick:i,children:"Cancel"})]})]})})},Ru=t=>{let{onCalendarChange:n}=t;const[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)(null),[o,c]=(0,e.useState)([]),[l,u]=(0,e.useState)(null),[h,d]=(0,e.useState)(!1),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)(null),[v,y]=(0,e.useState)(""),[w,b]=(0,e.useState)(!1),[T,S]=(0,e.useState)(""),[I,A]=(0,e.useState)(null),[C,k]=(0,e.useState)("");(0,e.useEffect)(()=>{N()},[]);const N=()=>{const e=(0,E.getAllProfiles)();i(e);const t=(0,E.getActiveProfileId)();if(a(t),t)c((0,E.getAllCalendars)()),u((0,E.getActiveCalendarId)());else if(e.length>0){var n;(0,E.setActiveProfile)(e[0].id),a(e[0].id),c(e[0].calendars),u((null===(n=e[0].calendars[0])||void 0===n?void 0:n.id)||null)}else c([]),u(null)},x=()=>{f.trim()&&((0,E.createProfile)(f.trim()),p(""),d(!1),N(),n())},D=e=>{v.trim()&&((0,E.renameProfile)(e,v.trim()),g(null),N(),n())},R=()=>{T.trim()&&((0,E.createCalendar)(T.trim()),S(""),b(!1),N(),n())},P=e=>{C.trim()&&((0,E.renameCalendar)(e,C.trim()),A(null),N(),n())},O=(e,t,n)=>{"Enter"===e.key?t():"Escape"===e.key&&n&&n()};return(0,_.jsxs)("div",{className:"calendar-selector",children:[(0,_.jsxs)("div",{className:"selector-header",children:[(0,_.jsx)("h3",{children:"Profiles"}),(0,_.jsx)("button",{className:"add-calendar-btn",onClick:()=>d(!h),title:"Add new profile",children:"+"})]}),h&&(0,_.jsxs)("div",{className:"new-calendar-form",children:[(0,_.jsx)("input",{type:"text",placeholder:"Profile name...",value:f,onChange:e=>p(e.target.value),onKeyPress:e=>O(e,()=>x()),className:"calendar-input",autoFocus:!0}),(0,_.jsxs)("div",{className:"form-buttons",children:[(0,_.jsx)("button",{className:"btn-confirm",onClick:x,disabled:!f.trim(),children:"Create"}),(0,_.jsx)("button",{className:"btn-cancel-small",onClick:()=>{d(!1),p("")},children:"Cancel"})]})]}),(0,_.jsx)("div",{className:"calendars-list",children:r.map(e=>(0,_.jsx)("div",{className:"calendar-item ".concat(s===e.id?"active":""),children:m===e.id?(0,_.jsxs)("div",{className:"rename-form",children:[(0,_.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),onKeyPress:t=>O(t,()=>D(e.id),()=>g(null)),className:"rename-input",autoFocus:!0}),(0,_.jsx)("button",{className:"btn-confirm-small",onClick:()=>D(e.id),children:"\u2713"}),(0,_.jsx)("button",{className:"btn-cancel-small",onClick:()=>g(null),children:"\u2715"})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("button",{className:"calendar-name",onClick:()=>{return t=e.id,(0,E.setActiveProfile)(t),a(t),c((0,E.getAllCalendars)()),u((0,E.getActiveCalendarId)()),void n();var t},children:e.name}),(0,_.jsxs)("div",{className:"calendar-actions",children:[(0,_.jsx)("button",{className:"btn-rename",onClick:()=>{return t=e.id,n=e.name,g(t),void y(n);var t,n},title:"Rename",children:"\u270e"}),r.length>1&&(0,_.jsx)("button",{className:"btn-delete",onClick:()=>{return t=e.id,void(r.length>1&&window.confirm("Delete this profile and all its calendars?")&&((0,E.deleteProfile)(t),N(),n()));var t},title:"Delete",children:"\ud83d\uddd1"})]})]})},e.id))}),(0,_.jsxs)("div",{className:"selector-header",style:{marginTop:24},children:[(0,_.jsx)("h3",{children:"Calendars"}),(0,_.jsx)("button",{className:"add-calendar-btn",onClick:()=>b(!w),title:"Add new calendar",disabled:!s,children:"+"})]}),w&&(0,_.jsxs)("div",{className:"new-calendar-form",children:[(0,_.jsx)("input",{type:"text",placeholder:"Calendar name...",value:T,onChange:e=>S(e.target.value),onKeyPress:e=>O(e,()=>R()),className:"calendar-input",autoFocus:!0}),(0,_.jsxs)("div",{className:"form-buttons",children:[(0,_.jsx)("button",{className:"btn-confirm",onClick:R,disabled:!T.trim(),children:"Create"}),(0,_.jsx)("button",{className:"btn-cancel-small",onClick:()=>{b(!1),S("")},children:"Cancel"})]})]}),(0,_.jsx)("div",{className:"calendars-list",children:o.map(e=>(0,_.jsx)("div",{className:"calendar-item ".concat(l===e.id?"active":""),children:I===e.id?(0,_.jsxs)("div",{className:"rename-form",children:[(0,_.jsx)("input",{type:"text",value:C,onChange:e=>k(e.target.value),onKeyPress:t=>O(t,()=>P(e.id),()=>A(null)),className:"rename-input",autoFocus:!0}),(0,_.jsx)("button",{className:"btn-confirm-small",onClick:()=>P(e.id),children:"\u2713"}),(0,_.jsx)("button",{className:"btn-cancel-small",onClick:()=>A(null),children:"\u2715"})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("button",{className:"calendar-name",onClick:()=>{return t=e.id,(0,E.setActiveCalendar)(t),u(t),void n();var t},children:e.name}),(0,_.jsxs)("div",{className:"calendar-actions",children:[(0,_.jsx)("button",{className:"btn-rename",onClick:()=>{return t=e.id,n=e.name,A(t),void k(n);var t,n},title:"Rename",children:"\u270e"}),o.length>1&&(0,_.jsx)("button",{className:"btn-delete",onClick:()=>{return t=e.id,void(o.length>1&&window.confirm("Delete this calendar?")&&((0,E.deleteCalendar)(t),N(),n()));var t},title:"Delete",children:"\ud83d\uddd1"})]})]})},e.id))})]})};n(9243);const Pu=t=>{let{year:n,onHolidaysChange:r}=t;const[i,s]=(0,e.useState)(""),a="manualHolidays_".concat(n),[o,c]=(0,e.useState)((()=>{const e=localStorage.getItem(a);return e?JSON.parse(e):Cu.romanianHolidays[n]?[...Cu.romanianHolidays[n]]:[]})());return(0,_.jsxs)("div",{className:"holiday-manager",children:[(0,_.jsxs)("h4",{children:["Manual Holidays (",n,")"]}),(0,_.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,_.jsx)("input",{type:"date",value:i,onChange:e=>s(e.target.value),style:{width:140}}),(0,_.jsx)("button",{onClick:()=>{if(i&&!o.includes(i)){const e=[...o,i];c(e),localStorage.setItem(a,JSON.stringify(e)),r&&r(e),s("")}},children:"Add"})]}),(0,_.jsx)("ul",{style:{marginTop:8},children:o.map(e=>(0,_.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,_.jsx)("span",{children:e}),(0,_.jsx)("button",{onClick:()=>(e=>{const t=o.filter(t=>t!==e);c(t),localStorage.setItem(a,JSON.stringify(t)),r&&r(t)})(e),style:{color:"red"},children:"Remove"})]},e))})]})};var Ou={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Mu=e.createContext&&e.createContext(Ou),Lu=function(){return Lu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Lu.apply(this,arguments)},Fu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Vu(t){return t&&t.map(function(t,n){return e.createElement(t.tag,Lu({key:n},t.attr),Vu(t.child))})}function Uu(t){return function(n){return e.createElement(ju,Lu({attr:Lu({},t.attr)},n),Vu(t.child))}}function ju(t){var n=function(n){var r,i=t.attr,s=t.size,a=t.title,o=Fu(t,["attr","size","title"]),c=s||n.size||"1em";return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),e.createElement("svg",Lu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:r,style:Lu(Lu({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&e.createElement("title",null,a),t.children)};return void 0!==Mu?e.createElement(Mu.Consumer,null,function(e){return n(e)}):n(Ou)}function Bu(e){return Uu({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function zu(e){return Uu({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function Wu(e){return Uu({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}const Hu=e=>{let{active:t,onNavigate:n}=e;return(0,_.jsxs)("nav",{className:"bottom-nav",children:[(0,_.jsxs)("button",{className:"calendar"===t?"active":"",onClick:()=>n("calendar"),"aria-label":"Calendar",children:[(0,_.jsx)(Bu,{}),(0,_.jsx)("span",{children:"Calendar"})]}),(0,_.jsxs)("button",{className:"profile"===t?"active":"",onClick:()=>n("profile"),"aria-label":"Profile",children:[(0,_.jsx)(Wu,{}),(0,_.jsx)("span",{children:"Profile"})]}),(0,_.jsxs)("button",{className:"settings"===t?"active":"",onClick:()=>n("settings"),"aria-label":"Settings",children:[(0,_.jsx)(zu,{}),(0,_.jsx)("span",{children:"Settings"})]})]})};const qu=function(){const[t,r]=(0,e.useState)(null),[i,s]=(0,e.useState)("idle"),[a,o]=(0,e.useState)(""),[c,l]=(0,e.useState)("");(0,e.useEffect)(()=>{l(h?"Electron (Local)":"Web (Firebase)");const e=b(e=>{r(e)});return()=>e()},[]),(0,e.useEffect)(()=>{if(!t||!t.uid||c.includes("Local"))return s("idle"),void o("");(async()=>{try{s("syncing"),o("");const e=await async function(e){if(!S.db)throw new Error("Cloud sync not available");const t=Fl(Ll(S.db,"users"),e),n=await Eu(t);if(n.exists()){const e=n.data();return{profiles:e.profiles||[],activeProfileId:e.activeProfileId,activeCalendarId:e.activeCalendarId}}return null}(t.uid);e?((0,E.saveProfiles)(e.profiles||[]),setTimeout(()=>{var t;const n=e.profiles||[];let r=e.activeProfileId;!r&&n.length>0?(r=n[0].id,(0,E.setActiveProfile)(r)):r&&(0,E.setActiveProfile)(r);let i=e.activeCalendarId;const s=(null===(t=n.find(e=>e.id===r))||void 0===t?void 0:t.calendars)||[];!i&&s.length>0?(i=s[0].id,(0,E.setActiveCalendar)(i)):i&&(0,E.setActiveCalendar)(i),g(e=>e+1)},0)):((0,E.saveProfiles)([]),(0,E.setActiveProfile)(""),(0,E.setActiveCalendar)(""),g(e=>e+1)),s("synced")}catch(e){s("error"),o((null===e||void 0===e?void 0:e.message)||"Cloud sync failed")}})()},[t,c]),(0,e.useEffect)(()=>{if(!t||!t.uid||c.includes("Local"))return;const e=async()=>{try{s("syncing"),o(""),await Au(t.uid,(0,E.getAllProfiles)(),localStorage.getItem("pontaj_active_profile"),localStorage.getItem("pontaj_active_calendar")),s("synced")}catch(e){s("error"),o((null===e||void 0===e?void 0:e.message)||"Cloud sync failed")}};return window.addEventListener("pontaj_profiles_changed",e),()=>window.removeEventListener("pontaj_profiles_changed",e)},[t,c]);const[u,d]=(0,e.useState)(null),[f,p]=(0,e.useState)(!1),[m,g]=(0,e.useState)(0),[v,y]=(0,e.useState)("calendar"),w=(0,e.useCallback)(()=>{g(e=>e+1),d(null),p(!1)},[]),I=(0,e.useCallback)(e=>{d(e),p(!0)},[]),A=(0,e.useCallback)(()=>{p(!1)},[]),C=(0,e.useCallback)(()=>{p(!1),g(e=>e+1)},[]);return(0,_.jsxs)("div",{className:"app",children:[(0,_.jsxs)("header",{className:"app-header",children:[(0,_.jsx)("h1",{children:"\u23f0 Pontaj Calendar"}),(0,_.jsx)("p",{children:"Track your work hours with daily shifts"})]}),(0,_.jsxs)("main",{className:"app-main",style:{display:"flex",flexDirection:window.innerWidth<700?"column":"row",minHeight:"calc(100vh - 120px)"},children:[("profile"===v||window.innerWidth>=700)&&(0,_.jsxs)("aside",{className:"app-sidebar",children:[(0,_.jsxs)("div",{style:{marginBottom:16},children:[(0,_.jsx)(T,{onAuthChange:r}),t&&(0,_.jsxs)("div",{style:{color:"green",fontWeight:600,fontSize:13,textAlign:"center",marginTop:4},children:["\u2705 ",t.email]}),!t&&(0,_.jsxs)("div",{style:{color:"gray",fontSize:13,textAlign:"center",marginTop:4},children:["\ud83d\udccd ",c]}),t&&c.includes("Firebase")&&(0,_.jsxs)("div",{className:"sync-status sync-".concat(i),children:["syncing"===i&&"\u2601\ufe0f Syncing...","synced"===i&&"\u2601\ufe0f Synced","error"===i&&"\u274c Sync error".concat(a?": ".concat(a):"")]})]}),(0,_.jsx)(Ru,{onCalendarChange:w})]}),"calendar"===v&&(0,_.jsx)("div",{className:"app-content",children:(0,_.jsx)(ku,{onDayClick:I,selectedDate:null!==u&&void 0!==u?u:void 0})},m),("settings"===v||window.innerWidth>=700)&&(0,_.jsxs)("aside",{className:"app-sidebar",style:{minWidth:220,marginLeft:window.innerWidth<700?0:24},children:[(0,_.jsx)(Pu,{year:(new Date).getFullYear()}),(0,_.jsx)("div",{style:{marginTop:16},children:(0,_.jsx)(e.Suspense,{fallback:null,children:e.createElement(n(1698).A)})})]})]}),f&&u&&(0,_.jsx)(Du,{date:u,onSave:C,onClose:A}),(0,_.jsx)(Hu,{active:v,onNavigate:y})]})};t.createRoot(document.getElementById("root")).render((0,_.jsx)(e.StrictMode,{children:(0,_.jsx)(qu,{})}))})()})();
//# sourceMappingURL=main.9258d546.js.map